<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>COPASI API: SBMLImporter Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">COPASI API
   &#160;<span id="projectnumber">4.16.103</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../db/dc9/classSBMLImporter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SBMLImporter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for SBMLImporter:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/de7/classSBMLImporter__coll__graph.png" border="0" usemap="#SBMLImporter_coll__map" alt="Collaboration graph"/></div>
<map name="SBMLImporter_coll__map" id="SBMLImporter_coll__map">
<area shape="rect" id="node2" href="../../db/d9a/classCFunctionDB.html" title="CFunctionDB" alt="" coords="785,1600,884,1627"/><area shape="rect" id="node3" href="../../d9/dfd/classCCopasiContainer.html" title="CCopasiContainer" alt="" coords="343,1385,468,1412"/><area shape="rect" id="node7" href="../../d0/da0/classCModelEntity.html" title="CModelEntity" alt="" coords="785,863,884,889"/><area shape="rect" id="node11" href="../../d6/de0/classCModelParameterSet.html" title="CModelParameterSet" alt="" coords="1584,1411,1731,1437"/><area shape="rect" id="node19" href="../../d2/dad/classCArrayAnnotation.html" title="CArrayAnnotation" alt="" coords="773,736,896,763"/><area shape="rect" id="node23" href="../../d3/df7/classCMathModel.html" title="CMathModel" alt="" coords="1610,896,1705,923"/><area shape="rect" id="node25" href="../../d8/d2c/classCCopasiVector.html" title="CCopasiVector\&lt; CMetab \&gt;" alt="" coords="747,1116,922,1143"/><area shape="rect" id="node29" href="../../d8/d2c/classCCopasiVector.html" title="CCopasiVector\&lt; CMoiety \&gt;" alt="" coords="747,1065,923,1092"/><area shape="rect" id="node36" href="../../d6/d8d/classCChemEqElement.html" title="CChemEqElement" alt="" coords="771,1701,898,1728"/><area shape="rect" id="node43" href="../../d4/d18/classCCopasiDataModel.html" title="CCopasiDataModel" alt="" coords="2005,1531,2137,1557"/><area shape="rect" id="node4" href="../../d7/d08/classCCopasiVectorN.html" title="CCopasiVectorN\&lt; CFunction \&gt;" alt="" coords="307,1571,504,1597"/><area shape="rect" id="node5" title="STL class. " alt="" coords="47,1572,123,1599"/><area shape="rect" id="node6" href="../../d4/d04/classCModel.html" title="CModel" alt="" coords="1239,873,1305,900"/><area shape="rect" id="node26" href="../../d8/da5/classCProcessReport.html" title="CProcessReport" alt="" coords="777,192,892,219"/><area shape="rect" id="node41" href="../../d9/d86/classCFunction.html" title="The class for handling a chemical kinetic function. " alt="" coords="575,1820,657,1847"/><area shape="rect" id="node48" href="../../d9/d07/classCCopasiDataModel_1_1CData.html" title="CCopasiDataModel::CData" alt="" coords="1570,811,1745,837"/><area shape="rect" id="node31" href="../../d7/dc0/classCStateTemplate.html" title="CStateTemplate" alt="" coords="1599,660,1715,687"/><area shape="rect" id="node9" title="STL class. " alt="" coords="359,2120,452,2147"/><area shape="rect" id="node10" href="../../d7/dd7/classCMatrix.html" title="CMatrix\&lt; C_FLOAT64 \&gt;" alt="" coords="5,177,165,204"/><area shape="rect" id="node15" href="../../d9/d6a/classCLinkMatrix.html" title="CLinkMatrix" alt="" coords="360,420,451,447"/><area shape="rect" id="node12" href="../../d7/d08/classCCopasiVectorN.html" title="CCopasiVectorN\&lt; CModelValue \&gt;" alt="" coords="727,964,942,991"/><area shape="rect" id="node13" href="../../d9/db9/classCCopasiVectorNS.html" title="CCopasiVectorNS\&lt; CReaction \&gt;" alt="" coords="731,1015,938,1041"/><area shape="rect" id="node14" href="../../d4/df2/classCLinkMatrixView.html" title="CLinkMatrixView" alt="" coords="776,457,893,484"/><area shape="rect" id="node16" href="../../dd/de4/classCVector.html" title="CVector\&lt; size_t \&gt;" alt="" coords="24,361,147,388"/><area shape="rect" id="node44" href="../../d5/dd1/classCOutputHandler.html" title="COutputHandler" alt="" coords="1397,240,1512,267"/><area shape="rect" id="node18" title="STL class. " alt="" coords="30,501,141,528"/><area shape="rect" id="node21" href="../../d9/db9/classCCopasiVectorNS.html" title="CCopasiVectorNS\&lt; CCompartment \&gt;" alt="" coords="717,1167,952,1193"/><area shape="rect" id="node22" href="../../da/d4a/classCMathDependencyGraph.html" title="CMathDependencyGraph" alt="" coords="751,1217,918,1244"/><area shape="rect" id="node24" href="../../dd/de4/classCVector.html" title="CVector\&lt; C_FLOAT64 \&gt;" alt="" coords="753,1268,916,1295"/><area shape="rect" id="node27" href="../../dd/d9c/classCCopasiTimeVariable.html" title="CCopasiTimeVariable" alt="" coords="333,184,478,211"/><area shape="rect" id="node28" href="../../dd/de4/classCVector.html" title="CVector\&lt; CProcessReportItem * \&gt;" alt="" coords="297,235,514,261"/><area shape="rect" id="node30" href="../../d7/d08/classCCopasiVectorN.html" title="CCopasiVectorN\&lt; CModelParameter\lSet \&gt;" alt="" coords="719,1319,950,1361"/><area shape="rect" id="node32" href="../../dc/d1d/classCState.html" title="CState" alt="" coords="803,407,866,433"/><area shape="rect" id="node33" href="../../d7/d08/classCCopasiVectorN.html" title="CCopasiVectorN\&lt; CEvent \&gt;" alt="" coords="745,913,924,940"/><area shape="rect" id="node37" title="STL class. " alt="" coords="777,1977,893,2004"/><area shape="rect" id="node46" href="../../da/de4/classCDataModelRenameHandler.html" title="CDataModelRenameHandler" alt="" coords="1565,1581,1750,1608"/><area shape="rect" id="node47" href="../../d2/d26/classCCopasiVectorS.html" title="CCopasiVectorS\&lt; CMetabOld \&gt;" alt="" coords="1556,1480,1759,1507"/></map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6e09213163faf2321292aa2f5b48f735"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a6e09213163faf2321292aa2f5b48f735">deleteCopasiModel</a> ()</td></tr>
<tr class="separator:a6e09213163faf2321292aa2f5b48f735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5ef4903a7ed12d178107ef819b3b66"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">findIdInASTTree</a> (const ASTNode *pMath, const std::set&lt; std::string &gt; &amp;reactionIds)</td></tr>
<tr class="separator:a2d5ef4903a7ed12d178107ef819b3b66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c121aa8af8dabb6da1e76fe181363b3"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8c121aa8af8dabb6da1e76fe181363b3">findIdInASTTree</a> (const ASTNode *pMath, const std::map&lt; std::string, double &gt; &amp;reactionIds)</td></tr>
<tr class="separator:a8c121aa8af8dabb6da1e76fe181363b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86d7db236b41c28aaa476fb09f67678b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a86d7db236b41c28aaa476fb09f67678b">getImportCOPASIMIRIAM</a> () const </td></tr>
<tr class="separator:a86d7db236b41c28aaa476fb09f67678b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ec2db84bd14fc7d2842a0463b481e0f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/da5/classCProcessReport.html">CProcessReport</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8ec2db84bd14fc7d2842a0463b481e0f">getImportHandlerAddr</a> ()</td></tr>
<tr class="separator:a8ec2db84bd14fc7d2842a0463b481e0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf9578513e1cce2a924a46a0e93c5dda"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML</a> (const std::string &amp;sbmlDocumentText, <a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *funDB, SBMLDocument *&amp;pSBMLDocument, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, <a class="el" href="../../d0/d08/classCListOfLayouts.html">CListOfLayouts</a> *&amp;prLol, <a class="el" href="../../d4/d18/classCCopasiDataModel.html">CCopasiDataModel</a> *pDataModel)</td></tr>
<tr class="separator:adf9578513e1cce2a924a46a0e93c5dda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24f760a128c40fe04cfc873c2cc262e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a24f760a128c40fe04cfc873c2cc262e7">readSBML</a> (std::string filename, <a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *funDB, SBMLDocument *&amp;pSBMLDocument, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, <a class="el" href="../../d0/d08/classCListOfLayouts.html">CListOfLayouts</a> *&amp;prLol, <a class="el" href="../../d4/d18/classCCopasiDataModel.html">CCopasiDataModel</a> *pDataModel)</td></tr>
<tr class="separator:a24f760a128c40fe04cfc873c2cc262e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a808e13eae7937c4ed64ce989776bcd42"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a808e13eae7937c4ed64ce989776bcd42">restoreFunctionDB</a> ()</td></tr>
<tr class="separator:a808e13eae7937c4ed64ce989776bcd42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0da5c22953d50d507f9f0ff00f7b9837"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter</a> ()</td></tr>
<tr class="separator:a0da5c22953d50d507f9f0ff00f7b9837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5f23358553e48562b7385abe9785bf7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ad5f23358553e48562b7385abe9785bf7">setImportCOPASIMIRIAM</a> (bool import)</td></tr>
<tr class="separator:ad5f23358553e48562b7385abe9785bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7c3f20a666286ea61e4854c8f86f3f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ab7c3f20a666286ea61e4854c8f86f3f2">setImportHandler</a> (<a class="el" href="../../d8/da5/classCProcessReport.html">CProcessReport</a> *pHandler)</td></tr>
<tr class="separator:ab7c3f20a666286ea61e4854c8f86f3f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd95a63976bb514a3444b845dd669d13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#afd95a63976bb514a3444b845dd669d13">~SBMLImporter</a> ()</td></tr>
<tr class="separator:afd95a63976bb514a3444b845dd669d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a41bd8f0562db3137b54c8f595a9b5f5c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a41bd8f0562db3137b54c8f595a9b5f5c">areEqualFunctions</a> (const <a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *pFun, const <a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *pFun2)</td></tr>
<tr class="separator:a41bd8f0562db3137b54c8f595a9b5f5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4057a0fd56a54fe4f1f5c40c205dfaf2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a4057a0fd56a54fe4f1f5c40c205dfaf2">areEqualSubtrees</a> (const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *pNode1, const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *pNode2)</td></tr>
<tr class="separator:a4057a0fd56a54fe4f1f5c40c205dfaf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61d10c15681b398f297bee71eaa75dbe"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a> (const UnitDefinition *pUdef1, const UnitDefinition *pUdef2)</td></tr>
<tr class="separator:a61d10c15681b398f297bee71eaa75dbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72ccaf784cfdbf62a852dd1a3d8ad6c7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a72ccaf784cfdbf62a852dd1a3d8ad6c7">divideByObject</a> (const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *pOrigNode, const <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *pObject)</td></tr>
<tr class="separator:a72ccaf784cfdbf62a852dd1a3d8ad6c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2511a51a2a17ac94c63dcf719f18f779"><td class="memItemLeft" align="right" valign="top">static UnitDefinition *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a> (const std::string &amp;unitId, const Model *pSBMLModel)</td></tr>
<tr class="separator:a2511a51a2a17ac94c63dcf719f18f779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5d21dd508be56977f4d2c642d89fa5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">importNotes</a> (<a class="el" href="../../d8/dfc/classCAnnotation.html">CAnnotation</a> *pAnno, const SBase *pSBase)</td></tr>
<tr class="separator:a2b5d21dd508be56977f4d2c642d89fa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a7d00c07d4d501255fa18951e949461b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d00c07d4d501255fa18951e949461b2">applyStoichiometricExpressions</a> (std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, Model *pSBMLModel)</td></tr>
<tr class="separator:a7d00c07d4d501255fa18951e949461b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e1dc15ef3ff133f828fb8f527ca7c68"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a0e1dc15ef3ff133f828fb8f527ca7c68">areRulesUnique</a> (const Model *copasiMode)</td></tr>
<tr class="separator:a0e1dc15ef3ff133f828fb8f527ca7c68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11c5ec0d43dba7741be5043bcd484e0d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">checkElementUnits</a> (const Model *pSBMLModel, <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *pCopasiModel, int level, int version)</td></tr>
<tr class="separator:a11c5ec0d43dba7741be5043bcd484e0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d9048bf3ddc66ce0304345a54f6fa2f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a6d9048bf3ddc66ce0304345a54f6fa2f">checkRuleMathConsistency</a> (const Rule *pRule, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:a6d9048bf3ddc66ce0304345a54f6fa2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdc9c870d380d660ef11b4389eaf5bc8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#acdc9c870d380d660ef11b4389eaf5bc8">containsVolume</a> (const ASTNode *pNode, const std::string &amp;compartmentCN)</td></tr>
<tr class="separator:acdc9c870d380d660ef11b4389eaf5bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40d19d3a6cbe2fc34b1136644c3274cb"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, ASTNode * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a40d19d3a6cbe2fc34b1136644c3274cb">createBVarMap</a> (const ASTNode *uDefFunction, const ASTNode *function)</td></tr>
<tr class="separator:a40d19d3a6cbe2fc34b1136644c3274cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a879076815531affcbd0768f405f76475"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/dd4/classCCompartment.html">CCompartment</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a879076815531affcbd0768f405f76475">createCCompartmentFromCompartment</a> (const Compartment *sbmlComp, <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *copasiModel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, const Model *pSBMLModel)</td></tr>
<tr class="separator:a879076815531affcbd0768f405f76475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a544798333f64b9a371d9add67076172d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a544798333f64b9a371d9add67076172d">createCFunctionFromFunctionDefinition</a> (const FunctionDefinition *sbmlFunction, <a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *pTmpFunctionDB, Model *pSBMLModel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:a544798333f64b9a371d9add67076172d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8635efa2b753c28b33f29f8f44b12161"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8635efa2b753c28b33f29f8f44b12161">createCFunctionFromFunctionTree</a> (const FunctionDefinition *pSBMLFunction, Model *pSBMLModel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:a8635efa2b753c28b33f29f8f44b12161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e5e86bfa4b63886caa4daf1800a7abd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d44/classCMetab.html">CMetab</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a6e5e86bfa4b63886caa4daf1800a7abd">createCMetabFromSpecies</a> (const Species *sbmlSpecies, <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *copasiModel, <a class="el" href="../../d4/dd4/classCCompartment.html">CCompartment</a> *copasiCompartment, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, const Model *pSBMLModel)</td></tr>
<tr class="separator:a6e5e86bfa4b63886caa4daf1800a7abd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc9fc3ca40ac54787698cd2370a06dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument</a> (SBMLDocument *doc, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:aedc9fc3ca40ac54787698cd2370a06dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8595689dd63fec1e462ee49fd16ea333"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dec/classCModelValue.html">CModelValue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter</a> (const Parameter *sbmlParameter, <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *copasiModel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:a8595689dd63fec1e462ee49fd16ea333"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c76a3dbe6ad1f874f6d24b6bb7fb8f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/dcf/classCReaction.html">CReaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction</a> (Reaction *sbmlReaction, Model *sbmlModel, <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *cmodel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, <a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *pTmpFunctionDB)</td></tr>
<tr class="separator:a4c76a3dbe6ad1f874f6d24b6bb7fb8f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a359d319f85cd1bb24d2811b2b23fb7ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a359d319f85cd1bb24d2811b2b23fb7ab">createDelayFunctionDefinition</a> ()</td></tr>
<tr class="separator:a359d319f85cd1bb24d2811b2b23fb7ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d44bd16667ac649b9186979da296734"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d44bd16667ac649b9186979da296734">createExpressionFromFunction</a> (const <a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *pFun, const std::vector&lt; std::vector&lt; std::string &gt; &gt; &amp;functionArgumentCNs)</td></tr>
<tr class="separator:a7d44bd16667ac649b9186979da296734"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a851212f9fbd299a9a2deaadf2d7a5eb1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a851212f9fbd299a9a2deaadf2d7a5eb1">createHasOnlySubstanceUnitFactor</a> (Model *pSBMLModel, double factor, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:a851212f9fbd299a9a2deaadf2d7a5eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42cbb6f094224d7ec795eb172e40ab57"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a42cbb6f094224d7ec795eb172e40ab57">doMapping</a> (<a class="el" href="../../d4/dcf/classCReaction.html">CReaction</a> *pCopasiReaction, const <a class="el" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a> *pCallNode)</td></tr>
<tr class="separator:a42cbb6f094224d7ec795eb172e40ab57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca53cdde28ce5bb980ece4371c055fc8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#aca53cdde28ce5bb980ece4371c055fc8">find_local_parameters_in_delay</a> (ASTNode *pNode, Reaction *pSBMLReaction, Model *pModel, std::map&lt; std::string, std::string &gt; &amp;localReplacementMap, const std::set&lt; std::string &gt; &amp;localIds, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:aca53cdde28ce5bb980ece4371c055fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e283899bb37b21959fa43ebe792588d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a0e283899bb37b21959fa43ebe792588d">findAvogadroConstant</a> (Model *pSBMLModel, double factor)</td></tr>
<tr class="separator:a0e283899bb37b21959fa43ebe792588d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76e38c93eb85a4d0cf0b188674ac6ff3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a76e38c93eb85a4d0cf0b188674ac6ff3">findCorrespondingFunction</a> (const <a class="el" href="../../dc/dbd/classCExpression.html">CExpression</a> *pExpression, const <a class="el" href="../../d4/dcf/classCReaction.html">CReaction</a> *reaction)</td></tr>
<tr class="separator:a76e38c93eb85a4d0cf0b188674ac6ff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a175d4d5e664bd89964dccf5ba89d25de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a> (const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *pNode, std::set&lt; std::string &gt; &amp;functionNameSet)</td></tr>
<tr class="separator:a175d4d5e664bd89964dccf5ba89d25de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82afb75ea3c9cd40eead5e449007e23f"><td class="memItemLeft" align="right" valign="top">const FunctionDefinition *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a82afb75ea3c9cd40eead5e449007e23f">getFunctionDefinitionForName</a> (const std::string name, const Model *model)</td></tr>
<tr class="separator:a82afb75ea3c9cd40eead5e449007e23f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ac2addc8f38864b9b616830635b110a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a5ac2addc8f38864b9b616830635b110a">getIdsFromNode</a> (const ASTNode *pNode, std::set&lt; std::string &gt; &amp;idSet)</td></tr>
<tr class="separator:a5ac2addc8f38864b9b616830635b110a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47c92998532c601a66df4fae4e5a8b2d"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960">CModel::AreaUnit</a>, bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">handleAreaUnit</a> (const UnitDefinition *uDef)</td></tr>
<tr class="separator:a47c92998532c601a66df4fae4e5a8b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac63af5c9fb48fdfac1fc3317954dca1f"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22c">CModel::LengthUnit</a>, <br class="typebreak"/>
bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">handleLengthUnit</a> (const UnitDefinition *uDef)</td></tr>
<tr class="separator:ac63af5c9fb48fdfac1fc3317954dca1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab3ad9f948cb55e9cb589d2b0bb3c934"><td class="memItemLeft" align="right" valign="top">std::pair<br class="typebreak"/>
&lt; <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25b">CModel::QuantityUnit</a>, bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#aab3ad9f948cb55e9cb589d2b0bb3c934">handleSubstanceUnit</a> (const UnitDefinition *uDef)</td></tr>
<tr class="separator:aab3ad9f948cb55e9cb589d2b0bb3c934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf9850d5d4c3e287eb624ea7821682b2"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bda">CModel::TimeUnit</a>, bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">handleTimeUnit</a> (const UnitDefinition *uDef)</td></tr>
<tr class="separator:aaf9850d5d4c3e287eb624ea7821682b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1aca4da87cb2a912a7f27e0a21e6359"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8d">CModel::VolumeUnit</a>, <br class="typebreak"/>
bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit</a> (const UnitDefinition *uDef)</td></tr>
<tr class="separator:aa1aca4da87cb2a912a7f27e0a21e6359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa251ce6bf2a3d52d2971c1ad7b0d90ec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent</a> (const Event *pEvent, Model *pSBMLModel, <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *pCopasiModel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:aa251ce6bf2a3d52d2971c1ad7b0d90ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0d4d75e9f6785597142a2bce5131499"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ac0d4d75e9f6785597142a2bce5131499">importEvents</a> (Model *pSBMLModel, <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *pCopasiModel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:ac0d4d75e9f6785597142a2bce5131499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad01e17c0afbe5350a9c4474dadc0d168"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ad01e17c0afbe5350a9c4474dadc0d168">importFunctionDefinitions</a> (Model *pSBMLModel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:ad01e17c0afbe5350a9c4474dadc0d168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee0459aaff9aa4dda4852bc5d61fad2c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments</a> (Model *pSBMLModel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlMap, const <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *pCOPASIModel)</td></tr>
<tr class="separator:aee0459aaff9aa4dda4852bc5d61fad2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab2342964defac3d15b32eed20211e13"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">importMIRIAM</a> (const SBase *pSBMLObject, <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *pCOPASIObject)</td></tr>
<tr class="separator:aab2342964defac3d15b32eed20211e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a5f472d8d3c86bee75ca3ae677877c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a6a5f472d8d3c86bee75ca3ae677877c3">importRule</a> (const Rule *rule, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78a">CModelEntity::Status</a> ruleType, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, Model *pSBMLModel)</td></tr>
<tr class="separator:a6a5f472d8d3c86bee75ca3ae677877c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e987b86e2c598008f5013b16eacc35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a54e987b86e2c598008f5013b16eacc35">importRuleForModelEntity</a> (const Rule *rule, <a class="el" href="../../d0/da0/classCModelEntity.html">CModelEntity</a> *pMV, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78a">CModelEntity::Status</a> ruleType, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, Model *pSBMLModel)</td></tr>
<tr class="separator:a54e987b86e2c598008f5013b16eacc35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada0c2024af8f12fbef9c77ad4587fd68"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ada0c2024af8f12fbef9c77ad4587fd68">importSBMLRule</a> (const Rule *sbmlRule, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, Model *pSBMLModel)</td></tr>
<tr class="separator:ada0c2024af8f12fbef9c77ad4587fd68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaced01dad763bc9aabccdd95f818ae8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#adaced01dad763bc9aabccdd95f818ae8">isConstantFlux</a> (const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *pRoot, <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *pModel, <a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *pFunctionDB)</td></tr>
<tr class="separator:adaced01dad763bc9aabccdd95f818ae8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e416728d56ad3e80750885794bb60e9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8e416728d56ad3e80750885794bb60e9">isDelayFunctionUsed</a> (<a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *pNode)</td></tr>
<tr class="separator:a8e416728d56ad3e80750885794bb60e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eccfb6bf7001137ae5b14ecbfd0c971"><td class="memItemLeft" align="right" valign="top">std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a5eccfb6bf7001137ae5b14ecbfd0c971">isMassAction</a> (const <a class="el" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a> *pTree, const <a class="el" href="../../d1/dc0/classCChemEq.html">CChemEq</a> &amp;chemicalEquation, const <a class="el" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a> *pCallNode=NULL)</td></tr>
<tr class="separator:a5eccfb6bf7001137ae5b14ecbfd0c971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa092dea2bdae901c5cbf41e7c4c7dd1"><td class="memItemLeft" align="right" valign="top">std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression</a> (const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *pRootNode, const <a class="el" href="../../d1/dc0/classCChemEq.html">CChemEq</a> &amp;chemicalEquation)</td></tr>
<tr class="separator:afa092dea2bdae901c5cbf41e7c4c7dd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d114872c119310ca821f8f054b1b6e6"><td class="memItemLeft" align="right" valign="top">std::vector<br class="typebreak"/>
&lt; <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8d114872c119310ca821f8f054b1b6e6">isMassActionFunction</a> (const <a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *pFun, const <a class="el" href="../../d1/dc0/classCChemEq.html">CChemEq</a> &amp;chemicalEquation, const std::vector&lt; std::vector&lt; std::string &gt; &gt; &amp;functionArgumentCNs)</td></tr>
<tr class="separator:a8d114872c119310ca821f8f054b1b6e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a632c364034d1112fdc3ed7e05dfd157c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a632c364034d1112fdc3ed7e05dfd157c">isMultipliedByVolume</a> (const ASTNode *node, const std::string &amp;compartmentSBMLId)</td></tr>
<tr class="separator:a632c364034d1112fdc3ed7e05dfd157c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add8d8e41a0b4c3853049ee8f5d121d99"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#add8d8e41a0b4c3853049ee8f5d121d99">isSimpleFunctionCall</a> (const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *pRootNode)</td></tr>
<tr class="separator:add8d8e41a0b4c3853049ee8f5d121d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9b629c3ac0f557a6f94da2880781ed2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ac9b629c3ac0f557a6f94da2880781ed2">isStochasticModel</a> (const Model *pSBMLModel)</td></tr>
<tr class="separator:ac9b629c3ac0f557a6f94da2880781ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a3910a5ef44cb9a35f36fc963002ed4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8a3910a5ef44cb9a35f36fc963002ed4">multiplySubstanceOnlySpeciesByVolume</a> (<a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *pNode)</td></tr>
<tr class="separator:a8a3910a5ef44cb9a35f36fc963002ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bdaab30af2fb7e2bc5e637a2b40134a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode</a> (<a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *pNode, Model *pSBMLModel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, Reaction *pSBMLReaction=NULL)</td></tr>
<tr class="separator:a0bdaab30af2fb7e2bc5e637a2b40134a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eab269f4577f39f76b021c4e3f75b37"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a3eab269f4577f39f76b021c4e3f75b37">removeUnusedFunctions</a> (<a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *pTmpFunctionDB, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:a3eab269f4577f39f76b021c4e3f75b37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa0fbf5c970cdfc26118c33a921caa5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#afa0fbf5c970cdfc26118c33a921caa5d">renameMassActionParameters</a> (<a class="el" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a> *pCallNode)</td></tr>
<tr class="separator:afa0fbf5c970cdfc26118c33a921caa5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ac29e15dc0e3a2795ec3b1a13e496fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes</a> (<a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *pNode, Model *pModel, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, Reaction *pSBMLReaction, std::map&lt; std::string, std::string &gt; &amp;localReplacementMap)</td></tr>
<tr class="separator:a7ac29e15dc0e3a2795ec3b1a13e496fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f596cc4208b32f8280111dcd7bc4727"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a6f596cc4208b32f8280111dcd7bc4727">replace_name_nodes</a> (ASTNode *pNode, const std::map&lt; std::string, std::string &gt; &amp;replacementMap)</td></tr>
<tr class="separator:a6f596cc4208b32f8280111dcd7bc4727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f528cf6d4ee5452d0b80565a90bb9dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a9f528cf6d4ee5452d0b80565a90bb9dd">replace_time_with_initial_time</a> (ASTNode *pNode, const <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *pCOPASIModel)</td></tr>
<tr class="separator:a9f528cf6d4ee5452d0b80565a90bb9dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaae9a79b256a2015377b6fd36613deb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#aaaae9a79b256a2015377b6fd36613deb">replaceAmountReferences</a> (<a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *pNode, Model *pSBMLModel, double factor, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:aaaae9a79b256a2015377b6fd36613deb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a556118a81345202b24dcac66c291532b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a556118a81345202b24dcac66c291532b">replaceCallNodeNames</a> (ASTNode *pNode)</td></tr>
<tr class="separator:a556118a81345202b24dcac66c291532b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f2c4e20d24bb2a92ab1a2c2765fe2f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a6f2c4e20d24bb2a92ab1a2c2765fe2f7">replaceLog</a> (<a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *sourceNode)</td></tr>
<tr class="separator:a6f2c4e20d24bb2a92ab1a2c2765fe2f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada6a4711ac017aa676ab4be88291a15b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames</a> (ASTNode *pNode, const std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, bool initialExpression=false)</td></tr>
<tr class="separator:ada6a4711ac017aa676ab4be88291a15b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb25b2bd2e87cb5d0753b25991215681"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#acb25b2bd2e87cb5d0753b25991215681">replacePowerFunctionNodes</a> (ASTNode *node)</td></tr>
<tr class="separator:acb25b2bd2e87cb5d0753b25991215681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a598cc8c19bb063cea35e5309c1c9fd26"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a598cc8c19bb063cea35e5309c1c9fd26">replaceRoot</a> (<a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *sourceNode)</td></tr>
<tr class="separator:a598cc8c19bb063cea35e5309c1c9fd26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af175213378137da1684580b794a7cd13"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#af175213378137da1684580b794a7cd13">replaceTimeAndAvogadroNodeNames</a> (ASTNode *pNode)</td></tr>
<tr class="separator:af175213378137da1684580b794a7cd13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f60e2327471fd72cb0b6445e274b38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a30f60e2327471fd72cb0b6445e274b38">replaceTimeDependentFunctionCalls</a> (ASTNode *root)</td></tr>
<tr class="separator:a30f60e2327471fd72cb0b6445e274b38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d24b615b23b00a505d720cd48917c7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a15d24b615b23b00a505d720cd48917c7">replaceTimeNodesInFunctionDefinition</a> (ASTNode *root, std::string newNodeName)</td></tr>
<tr class="separator:a15d24b615b23b00a505d720cd48917c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bf3c7539fc012eb3ca782f0ca44e5a8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a3bf3c7539fc012eb3ca782f0ca44e5a8">sbmlId2CopasiCN</a> (ASTNode *pNode, std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap, <a class="el" href="../../df/d89/classCCopasiParameterGroup.html">CCopasiParameterGroup</a> &amp;pParamGroup)</td></tr>
<tr class="separator:a3bf3c7539fc012eb3ca782f0ca44e5a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab92634da43399704fc2ac9e201e4707a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ab92634da43399704fc2ac9e201e4707a">separateProductArguments</a> (const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *pRootNode, std::vector&lt; const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> * &gt; &amp;arguments)</td></tr>
<tr class="separator:ab92634da43399704fc2ac9e201e4707a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac31001c46406e6c9900dfee120afb0a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ac31001c46406e6c9900dfee120afb0a5">setCorrectUsage</a> (<a class="el" href="../../d4/dcf/classCReaction.html">CReaction</a> *pCopasiReaction, const <a class="el" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a> *pCallNode)</td></tr>
<tr class="separator:ac31001c46406e6c9900dfee120afb0a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50b1ef1543256b1b2e0ae69c7f1ff7c6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a50b1ef1543256b1b2e0ae69c7f1ff7c6">setInitialValues</a> (<a class="el" href="../../d4/d04/classCModel.html">CModel</a> *pModel, const std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;copasi2sbmlmap)</td></tr>
<tr class="separator:a50b1ef1543256b1b2e0ae69c7f1ff7c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e1e81619841ec18ca458b1637e2601c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a9e1e81619841ec18ca458b1637e2601c">variables2objects</a> (const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *pOrigNode, const std::map&lt; std::string, std::string &gt; &amp;replacementMap)</td></tr>
<tr class="separator:a9e1e81619841ec18ca458b1637e2601c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a34f24c83698b4184ec7c8ab795efdee4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a> (const double &amp;x, const double &amp;y, const double &amp;t=1e-9)</td></tr>
<tr class="separator:a34f24c83698b4184ec7c8ab795efdee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a477bec05f03598fe9c52c95ccb441f88"><td class="memItemLeft" align="right" valign="top">static Unit *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a477bec05f03598fe9c52c95ccb441f88">convertSBMLCubicmetresToLitres</a> (const Unit *pU)</td></tr>
<tr class="separator:a477bec05f03598fe9c52c95ccb441f88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57920640816814412246e023fd98da7d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a57920640816814412246e023fd98da7d">findDirectDependencies</a> (const FunctionDefinition *pFunDef, std::map&lt; const FunctionDefinition *, std::set&lt; std::string &gt; &gt; &amp;dependencies)</td></tr>
<tr class="separator:a57920640816814412246e023fd98da7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c3f358688531e3fba25e2476a02e248"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a3c3f358688531e3fba25e2476a02e248">findDirectDependencies</a> (const ASTNode *pNode, std::set&lt; std::string &gt; &amp;dependencies)</td></tr>
<tr class="separator:a3c3f358688531e3fba25e2476a02e248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7bb5cbf2f09b5b7ec57510695ed1ec2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ae7bb5cbf2f09b5b7ec57510695ed1ec2">normalizeSBMLUnit</a> (Unit *pU)</td></tr>
<tr class="separator:ae7bb5cbf2f09b5b7ec57510695ed1ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c92e54900e9c0df1a1b890d52e9449"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/df8/copasi_8h.html#ac4f8f8fcd12a8115cd9802d04a557125">C_FLOAT64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a> (const <a class="el" href="../../dc/df8/copasi_8h.html#ac4f8f8fcd12a8115cd9802d04a557125">C_FLOAT64</a> &amp;x)</td></tr>
<tr class="separator:a85c92e54900e9c0df1a1b890d52e9449"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:af3884484e51df06669ba5bc4fc77c07c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a></td></tr>
<tr class="separator:af3884484e51df06669ba5bc4fc77c07c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48bbb0ce9d9de02aa2d3d35147ca5b0f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a48bbb0ce9d9de02aa2d3d35147ca5b0f">mAssignmentToSpeciesReferenceFound</a></td></tr>
<tr class="separator:a48bbb0ce9d9de02aa2d3d35147ca5b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057bc71f45b8f39fa15355f653163842"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">mAvogadroCreated</a></td></tr>
<tr class="separator:a057bc71f45b8f39fa15355f653163842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4bdf302a8047d3398d6e6c796f3508d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ac4bdf302a8047d3398d6e6c796f3508d">mAvogadroSet</a></td></tr>
<tr class="separator:ac4bdf302a8047d3398d6e6c796f3508d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f40d8fba618f0e960f83849b93f357d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">mDelayFound</a></td></tr>
<tr class="separator:a7f40d8fba618f0e960f83849b93f357d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39b4cb542ae7593d545434fdcc03573e"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <br class="typebreak"/>
std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a39b4cb542ae7593d545434fdcc03573e">mDelayNodeMap</a></td></tr>
<tr class="separator:a39b4cb542ae7593d545434fdcc03573e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09fb60445d24cc1bd582e23869cfaee1"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">mDivisionByCompartmentReactions</a></td></tr>
<tr class="separator:a09fb60445d24cc1bd582e23869cfaee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eb1281de56a2232df925ba8de420412"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">mExplicitelyTimeDependentFunctionDefinitions</a></td></tr>
<tr class="separator:a8eb1281de56a2232df925ba8de420412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d029d1a08dc8f22dba1eedc57b036e3"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">mFastReactions</a></td></tr>
<tr class="separator:a3d029d1a08dc8f22dba1eedc57b036e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dbcde81bbd9c319d5e2500756c15ce4"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <br class="typebreak"/>
std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8dbcde81bbd9c319d5e2500756c15ce4">mFunctionNameMapping</a></td></tr>
<tr class="separator:a8dbcde81bbd9c319d5e2500756c15ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a6daed5b9603fff0c6e698210512401"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a></td></tr>
<tr class="separator:a9a6daed5b9603fff0c6e698210512401"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43ba9124187b089d5fb4122e8d9d7be2"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">mIgnoredParameterUnits</a></td></tr>
<tr class="separator:a43ba9124187b089d5fb4122e8d9d7be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0033487d629c27d4f133ac8ded9c02"><td class="memItemLeft" align="right" valign="top">std::set&lt; unsigned int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a></td></tr>
<tr class="separator:acf0033487d629c27d4f133ac8ded9c02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4588fba30554cfe8dbe394a6ad6685eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">mImportCOPASIMIRIAM</a></td></tr>
<tr class="separator:a4588fba30554cfe8dbe394a6ad6685eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e83963c608041887b5d5e292be033c9"><td class="memItemLeft" align="right" valign="top">unsigned <a class="el" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a></td></tr>
<tr class="separator:a9e83963c608041887b5d5e292be033c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af39d5f3762cee43875daadd002af6f0e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a></td></tr>
<tr class="separator:af39d5f3762cee43875daadd002af6f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102e853b7eef2af536188246c8e2e724"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <br class="typebreak"/>
std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">mKnownCustomUserDefinedFunctions</a></td></tr>
<tr class="separator:a102e853b7eef2af536188246c8e2e724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace9bd25198bfe11a1838f44fac3b1f3b"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <br class="typebreak"/>
std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a></td></tr>
<tr class="separator:ace9bd25198bfe11a1838f44fac3b1f3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ceec377ae743892d56b522adbce41e"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a></td></tr>
<tr class="separator:aa2ceec377ae743892d56b522adbce41e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65cdc7be5200fff34240bcb2200fe558"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">mOriginalLevel</a></td></tr>
<tr class="separator:a65cdc7be5200fff34240bcb2200fe558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc1b2ec95e8d7fa93910e094e948cb2f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a></td></tr>
<tr class="separator:abc1b2ec95e8d7fa93910e094e948cb2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aa8c57db3550fc84175ad38f1f3661e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d18/classCCopasiDataModel.html">CCopasiDataModel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a></td></tr>
<tr class="separator:a2aa8c57db3550fc84175ad38f1f3661e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32b10e0dc03fc5bbf7b4842b0d314ff6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/da5/classCProcessReport.html">CProcessReport</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a></td></tr>
<tr class="separator:a32b10e0dc03fc5bbf7b4842b0d314ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a273943602d6059106e5d0ef3dd3e6e45"><td class="memItemLeft" align="right" valign="top">std::set&lt; const Parameter * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a></td></tr>
<tr class="separator:a273943602d6059106e5d0ef3dd3e6e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8728f6d9cdf831a37754c20bb9353a04"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">mReactionsWithReplacedLocalParameters</a></td></tr>
<tr class="separator:a8728f6d9cdf831a37754c20bb9353a04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ff64c7fedb1863cac4572f246ca65f7"><td class="memItemLeft" align="right" valign="top">std::map&lt; const ASTNode <br class="typebreak"/>
*, <a class="el" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a></td></tr>
<tr class="separator:a8ff64c7fedb1863cac4572f246ca65f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d0a2880f878659d6a0fc2fe0cc15610"><td class="memItemLeft" align="right" valign="top">std::map&lt; Species <br class="typebreak"/>
*, Compartment * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a></td></tr>
<tr class="separator:a5d0a2880f878659d6a0fc2fe0cc15610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76924558eafc00f4f3e01d19bd73577b"><td class="memItemLeft" align="right" valign="top">unsigned <a class="el" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a76924558eafc00f4f3e01d19bd73577b">mTotalSteps</a></td></tr>
<tr class="separator:a76924558eafc00f4f3e01d19bd73577b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8da36a9a8ae299a7ea5d4ac68382bb1e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">mUnitOnNumberFound</a></td></tr>
<tr class="separator:a8da36a9a8ae299a7ea5d4ac68382bb1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae215a7b25a8529b85a217e8bd0e006f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#ae215a7b25a8529b85a217e8bd0e006f0">mUnsupportedAssignmentRuleFound</a></td></tr>
<tr class="separator:ae215a7b25a8529b85a217e8bd0e006f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd94e991869614f42fc48347372e15c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a9dd94e991869614f42fc48347372e15c">mUnsupportedRateRuleFound</a></td></tr>
<tr class="separator:a9dd94e991869614f42fc48347372e15c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1d70d874673527b508b3e8dcfed729"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">mUnsupportedRuleFound</a></td></tr>
<tr class="separator:a0d1d70d874673527b508b3e8dcfed729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64e5323f84c8730e7c120e8e9a965d13"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a></td></tr>
<tr class="separator:a64e5323f84c8730e7c120e8e9a965d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f78f336ef119556c847afdb8e86674d"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a></td></tr>
<tr class="separator:a8f78f336ef119556c847afdb8e86674d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19097f961c78f8d0383999d957b1b32f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a19097f961c78f8d0383999d957b1b32f">mUsedSBMLIdsPopulated</a></td></tr>
<tr class="separator:a19097f961c78f8d0383999d957b1b32f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d741ae7e3799fdc819e689a3dafad86"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a></td></tr>
<tr class="separator:a7d741ae7e3799fdc819e689a3dafad86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779466459366c517247fc2598d5f56e8"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> <br class="typebreak"/>
*, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">sbmlIdMap</a></td></tr>
<tr class="separator:a779466459366c517247fc2598d5f56e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2919a190a2cb8b7b5eb501af5c6f393e"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="../../dc/d44/classCMetab.html">CMetab</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a></td></tr>
<tr class="separator:a2919a190a2cb8b7b5eb501af5c6f393e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00044">44</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0da5c22953d50d507f9f0ff00f7b9837"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SBMLImporter::SBMLImporter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor that initializes speciesMap and the FunctionDB object </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l03045">3045</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a48bbb0ce9d9de02aa2d3d35147ca5b0f">mAssignmentToSpeciesReferenceFound</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">mAvogadroCreated</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">mDelayFound</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">mUnitOnNumberFound</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ae215a7b25a8529b85a217e8bd0e006f0">mUnsupportedAssignmentRuleFound</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a9dd94e991869614f42fc48347372e15c">mUnsupportedRateRuleFound</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">mUnsupportedRuleFound</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>.</p>
<div class="fragment"><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;                          :</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>(),</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>(),</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>(NULL),</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">mUnsupportedRuleFound</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9dd94e991869614f42fc48347372e15c">mUnsupportedRateRuleFound</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#ae215a7b25a8529b85a217e8bd0e006f0">mUnsupportedAssignmentRuleFound</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">mUnitOnNumberFound</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a48bbb0ce9d9de02aa2d3d35147ca5b0f">mAssignmentToSpeciesReferenceFound</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>(0),</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">mOriginalLevel</a>(0),</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>(0),</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">sbmlIdMap</a>(),</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>(),</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>(NULL),</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>(NULL),</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8dbcde81bbd9c319d5e2500756c15ce4">mFunctionNameMapping</a>(),</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">mDivisionByCompartmentReactions</a>(),</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>(NULL),</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a>(0),</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>(<a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>),</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a76924558eafc00f4f3e01d19bd73577b">mTotalSteps</a>(0),</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>(),</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">mFastReactions</a>(),</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">mReactionsWithReplacedLocalParameters</a>(),</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">mExplicitelyTimeDependentFunctionDefinitions</a>(),</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">mIgnoredParameterUnits</a>(),</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>(),</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">mDelayFound</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>(),</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">mAvogadroCreated</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">mImportCOPASIMIRIAM</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a39b4cb542ae7593d545434fdcc03573e">mDelayNodeMap</a>(),</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>(),</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a19097f961c78f8d0383999d957b1b32f">mUsedSBMLIdsPopulated</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#ac4bdf302a8047d3398d6e6c796f3508d">mAvogadroSet</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">mKnownCustomUserDefinedFunctions</a>(),</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;<span class="preprocessor">#if LIBSBML_VERSION &gt;= 40100</span></div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;<span class="preprocessor"></span>  mpModelConversionFactor(NULL),</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  mChemEqElementSpeciesIdMap(),</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  mSpeciesConversionParameterMap(),</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  mSBMLIdModelValueMap(),</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;  mSBMLSpeciesReferenceIds(),</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;  mRateRuleForSpeciesReferenceIgnored(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;  mEventAssignmentForSpeciesReferenceIgnored(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;  mConversionFactorFound(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;<span class="preprocessor"># if LIBSBML_VERSION &gt;= 40200</span></div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;<span class="preprocessor"></span>  mEventPrioritiesIgnored(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  mInitialTriggerValues(<span class="keyword">false</span>),</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  mNonPersistentTriggerFound(<span class="keyword">false</span>)</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;<span class="preprocessor"># endif // LIBSBML_VERSION &gt;= 40200</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif // LIBSBML_VERSION &gt;= 40100</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="preprocessor"></span>{</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a> = std::map&lt;std::string, CMetab*&gt;();</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a> = NULL;</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">mUnsupportedRuleFound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9dd94e991869614f42fc48347372e15c">mUnsupportedRateRuleFound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ae215a7b25a8529b85a217e8bd0e006f0">mUnsupportedAssignmentRuleFound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">mUnitOnNumberFound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a48bbb0ce9d9de02aa2d3d35147ca5b0f">mAssignmentToSpeciesReferenceFound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> = NULL;</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">mDelayFound</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">mAvogadroCreated</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;  <span class="comment">// these data structures are used to handle the new conversion factores in</span></div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  <span class="comment">// SBML L3 models and references to species references</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;  this-&gt;mpModelConversionFactor = NULL;</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;  this-&gt;mChemEqElementSpeciesIdMap.clear();</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  this-&gt;mSpeciesConversionParameterMap.clear();</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;  this-&gt;mSBMLIdModelValueMap.clear();</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;  this-&gt;mRateRuleForSpeciesReferenceIgnored = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;  this-&gt;mEventAssignmentForSpeciesReferenceIgnored = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;  this-&gt;mConversionFactorFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;  this-&gt;mEventPrioritiesIgnored = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  this-&gt;mInitialTriggerValues = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;  this-&gt;mNonPersistentTriggerFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.insert(10501);</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.insert(10512);</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.insert(10513);</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.insert(10522);</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.insert(10533);</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.insert(10541);</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.insert(10551);</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.insert(10562);</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.insert(80701);</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.insert(99505);</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_acf0033487d629c27d4f133ac8ded9c02"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">SBMLImporter::mIgnoredSBMLMessages</a></div><div class="ttdeci">std::set&lt; unsigned int &gt; mIgnoredSBMLMessages</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00054">SBMLImporter.h:54</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9a6daed5b9603fff0c6e698210512401"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">SBMLImporter::mhImportStep</a></div><div class="ttdeci">size_t mhImportStep</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00074">SBMLImporter.h:74</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a057bc71f45b8f39fa15355f653163842"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">SBMLImporter::mAvogadroCreated</a></div><div class="ttdeci">bool mAvogadroCreated</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00084">SBMLImporter.h:84</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8da36a9a8ae299a7ea5d4ac68382bb1e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">SBMLImporter::mUnitOnNumberFound</a></div><div class="ttdeci">bool mUnitOnNumberFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00061">SBMLImporter.h:61</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9dd94e991869614f42fc48347372e15c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9dd94e991869614f42fc48347372e15c">SBMLImporter::mUnsupportedRateRuleFound</a></div><div class="ttdeci">bool mUnsupportedRateRuleFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00059">SBMLImporter.h:59</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8dbcde81bbd9c319d5e2500756c15ce4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8dbcde81bbd9c319d5e2500756c15ce4">SBMLImporter::mFunctionNameMapping</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mFunctionNameMapping</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00070">SBMLImporter.h:70</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8728f6d9cdf831a37754c20bb9353a04"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">SBMLImporter::mReactionsWithReplacedLocalParameters</a></div><div class="ttdeci">std::set&lt; std::string &gt; mReactionsWithReplacedLocalParameters</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00078">SBMLImporter.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a5d0a2880f878659d6a0fc2fe0cc15610"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">SBMLImporter::mSubstanceOnlySpecies</a></div><div class="ttdeci">std::map&lt; Species *, Compartment * &gt; mSubstanceOnlySpecies</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00076">SBMLImporter.h:76</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a32b10e0dc03fc5bbf7b4842b0d314ff6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">SBMLImporter::mpImportHandler</a></div><div class="ttdeci">CProcessReport * mpImportHandler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00072">SBMLImporter.h:72</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7f40d8fba618f0e960f83849b93f357d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">SBMLImporter::mDelayFound</a></div><div class="ttdeci">bool mDelayFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00082">SBMLImporter.h:82</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0d1d70d874673527b508b3e8dcfed729"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">SBMLImporter::mUnsupportedRuleFound</a></div><div class="ttdeci">bool mUnsupportedRuleFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00058">SBMLImporter.h:58</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7d741ae7e3799fdc819e689a3dafad86"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">SBMLImporter::mVersion</a></div><div class="ttdeci">unsigned int mVersion</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00065">SBMLImporter.h:65</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a273943602d6059106e5d0ef3dd3e6e45"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">SBMLImporter::mPotentialAvogadroNumbers</a></div><div class="ttdeci">std::set&lt; const Parameter * &gt; mPotentialAvogadroNumbers</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00083">SBMLImporter.h:83</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a64e5323f84c8730e7c120e8e9a965d13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">SBMLImporter::mUsedFunctions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mUsedFunctions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00067">SBMLImporter.h:67</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8f78f336ef119556c847afdb8e86674d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">SBMLImporter::mUsedSBMLIds</a></div><div class="ttdeci">std::set&lt; std::string &gt; mUsedSBMLIds</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00089">SBMLImporter.h:89</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9e83963c608041887b5d5e292be033c9"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">SBMLImporter::mImportStep</a></div><div class="ttdeci">unsigned C_INT32 mImportStep</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00073">SBMLImporter.h:73</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a102e853b7eef2af536188246c8e2e724"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">SBMLImporter::mKnownCustomUserDefinedFunctions</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mKnownCustomUserDefinedFunctions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00092">SBMLImporter.h:92</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2aa8c57db3550fc84175ad38f1f3661e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">SBMLImporter::mpDataModel</a></div><div class="ttdeci">CCopasiDataModel * mpDataModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00068">SBMLImporter.h:68</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ac4bdf302a8047d3398d6e6c796f3508d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ac4bdf302a8047d3398d6e6c796f3508d">SBMLImporter::mAvogadroSet</a></div><div class="ttdeci">bool mAvogadroSet</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00091">SBMLImporter.h:91</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af3884484e51df06669ba5bc4fc77c07c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">SBMLImporter::functionDB</a></div><div class="ttdeci">CFunctionDB * functionDB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00056">SBMLImporter.h:56</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af39d5f3762cee43875daadd002af6f0e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">SBMLImporter::mIncompleteModel</a></div><div class="ttdeci">bool mIncompleteModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00057">SBMLImporter.h:57</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a48bbb0ce9d9de02aa2d3d35147ca5b0f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a48bbb0ce9d9de02aa2d3d35147ca5b0f">SBMLImporter::mAssignmentToSpeciesReferenceFound</a></div><div class="ttdeci">bool mAssignmentToSpeciesReferenceFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00062">SBMLImporter.h:62</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8ff64c7fedb1863cac4572f246ca65f7"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">SBMLImporter::mStoichiometricExpressionMap</a></div><div class="ttdeci">std::map&lt; const ASTNode *, CChemEqElement * &gt; mStoichiometricExpressionMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00081">SBMLImporter.h:81</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a09fb60445d24cc1bd582e23869cfaee1"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">SBMLImporter::mDivisionByCompartmentReactions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mDivisionByCompartmentReactions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00071">SBMLImporter.h:71</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a3d029d1a08dc8f22dba1eedc57b036e3"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">SBMLImporter::mFastReactions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mFastReactions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00077">SBMLImporter.h:77</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a39b4cb542ae7593d545434fdcc03573e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a39b4cb542ae7593d545434fdcc03573e">SBMLImporter::mDelayNodeMap</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mDelayNodeMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00088">SBMLImporter.h:88</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8eb1281de56a2232df925ba8de420412"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">SBMLImporter::mExplicitelyTimeDependentFunctionDefinitions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mExplicitelyTimeDependentFunctionDefinitions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00079">SBMLImporter.h:79</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a4588fba30554cfe8dbe394a6ad6685eb"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">SBMLImporter::mImportCOPASIMIRIAM</a></div><div class="ttdeci">bool mImportCOPASIMIRIAM</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00085">SBMLImporter.h:85</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a779466459366c517247fc2598d5f56e8"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">SBMLImporter::sbmlIdMap</a></div><div class="ttdeci">std::map&lt; CFunction *, std::string &gt; sbmlIdMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00066">SBMLImporter.h:66</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a76924558eafc00f4f3e01d19bd73577b"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a76924558eafc00f4f3e01d19bd73577b">SBMLImporter::mTotalSteps</a></div><div class="ttdeci">unsigned C_INT32 mTotalSteps</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00075">SBMLImporter.h:75</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2919a190a2cb8b7b5eb501af5c6f393e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">SBMLImporter::speciesMap</a></div><div class="ttdeci">std::map&lt; std::string, CMetab * &gt; speciesMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00055">SBMLImporter.h:55</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a43ba9124187b089d5fb4122e8d9d7be2"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">SBMLImporter::mIgnoredParameterUnits</a></div><div class="ttdeci">std::vector&lt; std::string &gt; mIgnoredParameterUnits</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00080">SBMLImporter.h:80</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a65cdc7be5200fff34240bcb2200fe558"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">SBMLImporter::mOriginalLevel</a></div><div class="ttdeci">unsigned int mOriginalLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00064">SBMLImporter.h:64</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ae215a7b25a8529b85a217e8bd0e006f0"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ae215a7b25a8529b85a217e8bd0e006f0">SBMLImporter::mUnsupportedAssignmentRuleFound</a></div><div class="ttdeci">bool mUnsupportedAssignmentRuleFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00060">SBMLImporter.h:60</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a19097f961c78f8d0383999d957b1b32f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a19097f961c78f8d0383999d957b1b32f">SBMLImporter::mUsedSBMLIdsPopulated</a></div><div class="ttdeci">bool mUsedSBMLIdsPopulated</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00090">SBMLImporter.h:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afd95a63976bb514a3444b845dd669d13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SBMLImporter::~SBMLImporter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor that does nothing. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l03138">3138</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7d00c07d4d501255fa18951e949461b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::applyStoichiometricExpressions </td>
          <td>(</td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method evaluates all stoichiometric expressions and sets them as constants on the <a class="el" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l08980">8980</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d1/dc0/classCChemEq.html#ab0207e434c51d92b8ea7a2e022aa778b">CChemEq::addMetabolite()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">CCopasiVector&lt; T &gt;::begin()</a>, <a class="el" href="../../dc/dbd/classCExpression.html#a518f2220bf1a6fc54d64cba986c2d4ec">CExpression::calcValue()</a>, <a class="el" href="../../dc/dbd/classCExpression.html#a9d6850bb88d84001674185f8781fbe6a">CExpression::compile()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">CCopasiVector&lt; T &gt;::end()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d6/d8d/classCChemEqElement.html#a586190ed364927fbafd658b02730e4a7">CChemEqElement::getMetabolite()</a>, <a class="el" href="../../d6/d8d/classCChemEqElement.html#ac5717e22b92036afc7dcedcce102f1a5">CChemEqElement::getMetaboliteKey()</a>, <a class="el" href="../../d6/d8d/classCChemEqElement.html#a464fe74231e8ab6769463226ef9e4c5f">CChemEqElement::getMultiplicity()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">CCopasiObject::getObjectParent()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">CModelEntity::getSBMLId()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#aa75b9554a66b91f4e15edc0b0240db62">CReaction::getSBMLId()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294">CChemEq::PRODUCT</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">CEvaluationTree::setTree()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l08981"></a><span class="lineno"> 8981</span>&#160;{</div>
<div class="line"><a name="l08982"></a><span class="lineno"> 8982</span>&#160;  <span class="keywordtype">bool</span> warningDone = <span class="keyword">false</span>;</div>
<div class="line"><a name="l08983"></a><span class="lineno"> 8983</span>&#160;  std::map&lt;const ASTNode*, CChemEqElement* &gt;::iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>.begin(), end = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>.end();</div>
<div class="line"><a name="l08984"></a><span class="lineno"> 8984</span>&#160;  std::vector&lt;CCopasiContainer*&gt; listOfContainers;</div>
<div class="line"><a name="l08985"></a><span class="lineno"> 8985</span>&#160;  listOfContainers.push_back(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>);</div>
<div class="line"><a name="l08986"></a><span class="lineno"> 8986</span>&#160;</div>
<div class="line"><a name="l08987"></a><span class="lineno"> 8987</span>&#160;  <span class="keywordflow">while</span> (it != end)</div>
<div class="line"><a name="l08988"></a><span class="lineno"> 8988</span>&#160;    {</div>
<div class="line"><a name="l08989"></a><span class="lineno"> 8989</span>&#160;      assert(it-&gt;second != NULL);</div>
<div class="line"><a name="l08990"></a><span class="lineno"> 8990</span>&#160;      <a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* pChemEqElement = it-&gt;second;</div>
<div class="line"><a name="l08991"></a><span class="lineno"> 8991</span>&#160;      <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>* pNode = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>(*it-&gt;first);</div>
<div class="line"><a name="l08992"></a><span class="lineno"> 8992</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode</a>(pNode, pSBMLModel, copasi2sbmlmap);</div>
<div class="line"><a name="l08993"></a><span class="lineno"> 8993</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames</a>(pNode, copasi2sbmlmap, <span class="keyword">true</span>);</div>
<div class="line"><a name="l08994"></a><span class="lineno"> 8994</span>&#160;      <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>* pExpr = <span class="keyword">new</span> <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>(<span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>);</div>
<div class="line"><a name="l08995"></a><span class="lineno"> 8995</span>&#160;      pExpr-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">setTree</a>(*pNode);</div>
<div class="line"><a name="l08996"></a><span class="lineno"> 8996</span>&#160;      pExpr-&gt;<a class="code" href="../../dc/dbd/classCExpression.html#a9d6850bb88d84001674185f8781fbe6a">compile</a>(listOfContainers);</div>
<div class="line"><a name="l08997"></a><span class="lineno"> 8997</span>&#160;      <span class="keyword">delete</span> pNode;</div>
<div class="line"><a name="l08998"></a><span class="lineno"> 8998</span>&#160;</div>
<div class="line"><a name="l08999"></a><span class="lineno"> 8999</span>&#160;      <span class="keywordflow">if</span> (pExpr-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>() == NULL)</div>
<div class="line"><a name="l09000"></a><span class="lineno"> 9000</span>&#160;        {</div>
<div class="line"><a name="l09001"></a><span class="lineno"> 9001</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d4/dcf/classCReaction.html">CReaction</a>* pR = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d4/dcf/classCReaction.html">CReaction</a>*<span class="keyword">&gt;</span>(pChemEqElement-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>()-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>()-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>());</div>
<div class="line"><a name="l09002"></a><span class="lineno"> 9002</span>&#160;          std::string <span class="keywordtype">id</span> = pChemEqElement-&gt;<a class="code" href="../../d6/d8d/classCChemEqElement.html#a586190ed364927fbafd658b02730e4a7">getMetabolite</a>()-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">getSBMLId</a>();</div>
<div class="line"><a name="l09003"></a><span class="lineno"> 9003</span>&#160;          <span class="comment">// create an error message that some stoichiometric expression</span></div>
<div class="line"><a name="l09004"></a><span class="lineno"> 9004</span>&#160;          <span class="comment">// could not be evaluated that the value for the stoichiometry has</span></div>
<div class="line"><a name="l09005"></a><span class="lineno"> 9005</span>&#160;          <span class="comment">// been set to 1.0</span></div>
<div class="line"><a name="l09006"></a><span class="lineno"> 9006</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 65, <span class="keywordtype">id</span>.c_str(), pR-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#aa75b9554a66b91f4e15edc0b0240db62">getSBMLId</a>().c_str());</div>
<div class="line"><a name="l09007"></a><span class="lineno"> 9007</span>&#160;        }</div>
<div class="line"><a name="l09008"></a><span class="lineno"> 9008</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l09009"></a><span class="lineno"> 9009</span>&#160;        {</div>
<div class="line"><a name="l09010"></a><span class="lineno"> 9010</span>&#160;          <span class="keywordtype">double</span> value = pExpr-&gt;<a class="code" href="../../dc/dbd/classCExpression.html#a518f2220bf1a6fc54d64cba986c2d4ec">calcValue</a>();</div>
<div class="line"><a name="l09011"></a><span class="lineno"> 9011</span>&#160;          value -= pChemEqElement-&gt;<a class="code" href="../../d6/d8d/classCChemEqElement.html#a464fe74231e8ab6769463226ef9e4c5f">getMultiplicity</a>();</div>
<div class="line"><a name="l09012"></a><span class="lineno"> 9012</span>&#160;          <span class="comment">// find out if the metabolite is a substrate or a product</span></div>
<div class="line"><a name="l09013"></a><span class="lineno"> 9013</span>&#160;          <span class="keyword">delete</span> pExpr;</div>
<div class="line"><a name="l09014"></a><span class="lineno"> 9014</span>&#160;          <a class="code" href="../../d1/dc0/classCChemEq.html">CChemEq</a>* pChemEq = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d1/dc0/classCChemEq.html">CChemEq</a>*<span class="keyword">&gt;</span>(pChemEqElement-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>()-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>());</div>
<div class="line"><a name="l09015"></a><span class="lineno"> 9015</span>&#160;          assert(pChemEq != NULL);</div>
<div class="line"><a name="l09016"></a><span class="lineno"> 9016</span>&#160;</div>
<div class="line"><a name="l09017"></a><span class="lineno"> 9017</span>&#160;          <span class="keywordflow">if</span> (pChemEq != NULL)</div>
<div class="line"><a name="l09018"></a><span class="lineno"> 9018</span>&#160;            {</div>
<div class="line"><a name="l09019"></a><span class="lineno"> 9019</span>&#160;              <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector &lt; CChemEqElement &gt;::const_iterator</a> iit = pChemEq-&gt;<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>(), iendit = pChemEq-&gt;<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l09020"></a><span class="lineno"> 9020</span>&#160;</div>
<div class="line"><a name="l09021"></a><span class="lineno"> 9021</span>&#160;              <span class="keywordflow">while</span> (iit != iendit)</div>
<div class="line"><a name="l09022"></a><span class="lineno"> 9022</span>&#160;                {</div>
<div class="line"><a name="l09023"></a><span class="lineno"> 9023</span>&#160;                  <span class="keywordflow">if</span> ((*iit) == pChemEqElement)</div>
<div class="line"><a name="l09024"></a><span class="lineno"> 9024</span>&#160;                    {</div>
<div class="line"><a name="l09025"></a><span class="lineno"> 9025</span>&#160;                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09026"></a><span class="lineno"> 9026</span>&#160;                    }</div>
<div class="line"><a name="l09027"></a><span class="lineno"> 9027</span>&#160;</div>
<div class="line"><a name="l09028"></a><span class="lineno"> 9028</span>&#160;                  ++iit;</div>
<div class="line"><a name="l09029"></a><span class="lineno"> 9029</span>&#160;                }</div>
<div class="line"><a name="l09030"></a><span class="lineno"> 9030</span>&#160;</div>
<div class="line"><a name="l09031"></a><span class="lineno"> 9031</span>&#160;              <span class="keywordflow">if</span> (iit != iendit)</div>
<div class="line"><a name="l09032"></a><span class="lineno"> 9032</span>&#160;                {</div>
<div class="line"><a name="l09033"></a><span class="lineno"> 9033</span>&#160;                  pChemEq-&gt;<a class="code" href="../../d1/dc0/classCChemEq.html#ab0207e434c51d92b8ea7a2e022aa778b">addMetabolite</a>(pChemEqElement-&gt;<a class="code" href="../../d6/d8d/classCChemEqElement.html#ac5717e22b92036afc7dcedcce102f1a5">getMetaboliteKey</a>(), value, <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a>);</div>
<div class="line"><a name="l09034"></a><span class="lineno"> 9034</span>&#160;                }</div>
<div class="line"><a name="l09035"></a><span class="lineno"> 9035</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l09036"></a><span class="lineno"> 9036</span>&#160;                {</div>
<div class="line"><a name="l09037"></a><span class="lineno"> 9037</span>&#160;                  pChemEq-&gt;<a class="code" href="../../d1/dc0/classCChemEq.html#ab0207e434c51d92b8ea7a2e022aa778b">addMetabolite</a>(pChemEqElement-&gt;<a class="code" href="../../d6/d8d/classCChemEqElement.html#ac5717e22b92036afc7dcedcce102f1a5">getMetaboliteKey</a>(), value, <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294">CChemEq::PRODUCT</a>);</div>
<div class="line"><a name="l09038"></a><span class="lineno"> 9038</span>&#160;                }</div>
<div class="line"><a name="l09039"></a><span class="lineno"> 9039</span>&#160;</div>
<div class="line"><a name="l09040"></a><span class="lineno"> 9040</span>&#160;              <span class="comment">// give a warning that an stoichiometric expression has been</span></div>
<div class="line"><a name="l09041"></a><span class="lineno"> 9041</span>&#160;              <span class="comment">// converted into a constant</span></div>
<div class="line"><a name="l09042"></a><span class="lineno"> 9042</span>&#160;              <span class="keywordflow">if</span> (!warningDone &amp;&amp; !this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>.empty())</div>
<div class="line"><a name="l09043"></a><span class="lineno"> 9043</span>&#160;                {</div>
<div class="line"><a name="l09044"></a><span class="lineno"> 9044</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 64);</div>
<div class="line"><a name="l09045"></a><span class="lineno"> 9045</span>&#160;                  warningDone = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09046"></a><span class="lineno"> 9046</span>&#160;                }</div>
<div class="line"><a name="l09047"></a><span class="lineno"> 9047</span>&#160;            }</div>
<div class="line"><a name="l09048"></a><span class="lineno"> 9048</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l09049"></a><span class="lineno"> 9049</span>&#160;            {</div>
<div class="line"><a name="l09050"></a><span class="lineno"> 9050</span>&#160;              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l09051"></a><span class="lineno"> 9051</span>&#160;            }</div>
<div class="line"><a name="l09052"></a><span class="lineno"> 9052</span>&#160;        }</div>
<div class="line"><a name="l09053"></a><span class="lineno"> 9053</span>&#160;</div>
<div class="line"><a name="l09054"></a><span class="lineno"> 9054</span>&#160;      ++it;</div>
<div class="line"><a name="l09055"></a><span class="lineno"> 9055</span>&#160;    }</div>
<div class="line"><a name="l09056"></a><span class="lineno"> 9056</span>&#160;}</div>
<div class="ttc" id="classCChemEqElement_html"><div class="ttname"><a href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8d/CChemEqElement_8h_source.html#l00041">CChemEqElement.h:41</a></div></div>
<div class="ttc" id="classConverterASTNode_html"><div class="ttname"><a href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/ConverterASTNode_8h_source.html#l00023">ConverterASTNode.h:23</a></div></div>
<div class="ttc" id="classCExpression_html"><div class="ttname"><a href="../../dc/dbd/classCExpression.html">CExpression</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dcc/CExpression_8h_source.html#l00028">CExpression.h:28</a></div></div>
<div class="ttc" id="classCModelEntity_html_a5c8d403c6027f59d1cc3e1ccc2d9efac"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">CModelEntity::getSBMLId</a></div><div class="ttdeci">const std::string &amp; getSBMLId() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00637">CModelValue.cpp:637</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classCCopasiVector_html_acb26711fe72be0d2cb3a37c2fbcc031f"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">CCopasiVector::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00185">CCopasiVector.h:185</a></div></div>
<div class="ttc" id="classCChemEqElement_html_a586190ed364927fbafd658b02730e4a7"><div class="ttname"><a href="../../d6/d8d/classCChemEqElement.html#a586190ed364927fbafd658b02730e4a7">CChemEqElement::getMetabolite</a></div><div class="ttdeci">const CMetab * getMetabolite() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da7/CChemEqElement_8cpp_source.html#l00086">CChemEqElement.cpp:86</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCChemEq_html"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html">CChemEq</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00033">CChemEq.h:33</a></div></div>
<div class="ttc" id="classCChemEq_html_a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294">CChemEq::PRODUCT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00038">CChemEq.h:38</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ada6a4711ac017aa676ab4be88291a15b"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">SBMLImporter::replaceObjectNames</a></div><div class="ttdeci">void replaceObjectNames(ASTNode *pNode, const std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, bool initialExpression=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06943">SBMLImporter.cpp:6943</a></div></div>
<div class="ttc" id="classCExpression_html_a9d6850bb88d84001674185f8781fbe6a"><div class="ttname"><a href="../../dc/dbd/classCExpression.html#a9d6850bb88d84001674185f8781fbe6a">CExpression::compile</a></div><div class="ttdeci">virtual bool compile(std::vector&lt; CCopasiContainer * &gt; listOfContainer=CCopasiContainer::EmptyList)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d08/CExpression_8cpp_source.html#l00097">CExpression.cpp:97</a></div></div>
<div class="ttc" id="classCReaction_html_aa75b9554a66b91f4e15edc0b0240db62"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#aa75b9554a66b91f4e15edc0b0240db62">CReaction::getSBMLId</a></div><div class="ttdeci">const std::string &amp; getSBMLId() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l01654">CReaction.cpp:1654</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCCopasiVector_html_a44c97a5f614c885495c437f2a8d20954"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">CCopasiVector::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00191">CCopasiVector.h:191</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2aa8c57db3550fc84175ad38f1f3661e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">SBMLImporter::mpDataModel</a></div><div class="ttdeci">CCopasiDataModel * mpDataModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00068">SBMLImporter.h:68</a></div></div>
<div class="ttc" id="classCExpression_html_a518f2220bf1a6fc54d64cba986c2d4ec"><div class="ttname"><a href="../../dc/dbd/classCExpression.html#a518f2220bf1a6fc54d64cba986c2d4ec">CExpression::calcValue</a></div><div class="ttdeci">virtual const C_FLOAT64 &amp; calcValue()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d08/CExpression_8cpp_source.html#l00122">CExpression.cpp:122</a></div></div>
<div class="ttc" id="classCChemEqElement_html_a464fe74231e8ab6769463226ef9e4c5f"><div class="ttname"><a href="../../d6/d8d/classCChemEqElement.html#a464fe74231e8ab6769463226ef9e4c5f">CChemEqElement::getMultiplicity</a></div><div class="ttdeci">const C_FLOAT64 &amp; getMultiplicity() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da7/CChemEqElement_8cpp_source.html#l00095">CChemEqElement.cpp:95</a></div></div>
<div class="ttc" id="classCChemEqElement_html_ac5717e22b92036afc7dcedcce102f1a5"><div class="ttname"><a href="../../d6/d8d/classCChemEqElement.html#ac5717e22b92036afc7dcedcce102f1a5">CChemEqElement::getMetaboliteKey</a></div><div class="ttdeci">const std::string &amp; getMetaboliteKey() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da7/CChemEqElement_8cpp_source.html#l00083">CChemEqElement.cpp:83</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0bdaab30af2fb7e2bc5e637a2b40134a"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">SBMLImporter::preprocessNode</a></div><div class="ttdeci">void preprocessNode(ConverterASTNode *pNode, Model *pSBMLModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Reaction *pSBMLReaction=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04681">SBMLImporter.cpp:4681</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8ff64c7fedb1863cac4572f246ca65f7"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">SBMLImporter::mStoichiometricExpressionMap</a></div><div class="ttdeci">std::map&lt; const ASTNode *, CChemEqElement * &gt; mStoichiometricExpressionMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00081">SBMLImporter.h:81</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_ad92be98a54367c4f46224b7aee13cd88"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">CEvaluationTree::setTree</a></div><div class="ttdeci">bool setTree(const ASTNode &amp;pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00467">CEvaluationTree.cpp:467</a></div></div>
<div class="ttc" id="classCChemEq_html_abbcd10e89a632f5a7c225fee6975c6d9"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getSubstrates() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00060">CChemEq.cpp:60</a></div></div>
<div class="ttc" id="classCChemEq_html_ab0207e434c51d92b8ea7a2e022aa778b"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ab0207e434c51d92b8ea7a2e022aa778b">CChemEq::addMetabolite</a></div><div class="ttdeci">bool addMetabolite(const std::string &amp;key, const C_FLOAT64 multiplicity, const MetaboliteRole &amp;role)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00080">CChemEq.cpp:80</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCReaction_html"><div class="ttname"><a href="../../d4/dcf/classCReaction.html">CReaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc3/CReaction_8h_source.html#l00044">CReaction.h:44</a></div></div>
<div class="ttc" id="classCChemEq_html_a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00039">CChemEq.h:39</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a33bb5035eec7ebc5e3ecac4771316405"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">CCopasiObject::getObjectParent</a></div><div class="ttdeci">CCopasiContainer * getObjectParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00276">CCopasiObject.cpp:276</a></div></div>
<div class="ttc" id="classCCopasiVector_html"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html">CCopasiVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d60/compare__utilities_8h_source.html#l00034">compare_utilities.h:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a34f24c83698b4184ec7c8ab795efdee4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::areApproximatelyEqual </td>
          <td>(</td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>t</em> = <code>1e-9</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l00177">177</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../dc/dc2/f2c_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0e283899bb37b21959fa43ebe792588d">findAvogadroConstant()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">handleAreaUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">handleLengthUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab3ad9f948cb55e9cb589d2b0bb3c934">handleSubstanceUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">handleTimeUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#aaaae9a79b256a2015377b6fd36613deb">replaceAmountReferences()</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordtype">double</span> Scale =</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    (fabs(x) + fabs(y)) * t;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// Avoid underflow</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">if</span> (Scale &lt; 100.0 * <a class="code" href="../../dc/dc2/f2c_8h.html#ac6afabdc09a49a433ee19d8a9486056d">std::numeric_limits&lt; C_FLOAT64 &gt;::min</a>())</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">return</span> 2 * fabs(x - y) &lt; Scale;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
<div class="ttc" id="f2c_8h_html_ac6afabdc09a49a433ee19d8a9486056d"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a></div><div class="ttdeci">#define min(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00175">f2c.h:175</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a41bd8f0562db3137b54c8f595a9b5f5c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::areEqualFunctions </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *&#160;</td>
          <td class="paramname"><em>pFun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *&#160;</td>
          <td class="paramname"><em>pFun2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05121">5121</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4057a0fd56a54fe4f1f5c40c205dfaf2">areEqualSubtrees()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables()</a>, and <a class="el" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">CFunctionParameters::size()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a544798333f64b9a371d9add67076172d">createCFunctionFromFunctionDefinition()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a76e38c93eb85a4d0cf0b188674ac6ff3">findCorrespondingFunction()</a>, and <a class="el" href="../../d4/dcf/classCReaction.html#ab807fb099922f32e1c94c44b26bf1979">CReaction::setFunctionFromExpressionTree()</a>.</p>
<div class="fragment"><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;{</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a>&amp; funParams1 = pFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">getVariables</a>();</div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a>&amp; funParams2 = pFun2-&gt;<a class="code" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">getVariables</a>();</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;  <span class="keywordflow">if</span> (funParams1.<a class="code" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">size</a>() == funParams2.<a class="code" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">size</a>())</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;    {</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;      <span class="keywordtype">size_t</span> i, iMax = funParams1.<a class="code" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">size</a>();</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;        {</div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d2/d4b/classCFunctionParameter.html">CFunctionParameter</a>* pFunParam1 = funParams1[i];</div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d2/d4b/classCFunctionParameter.html">CFunctionParameter</a>* pFunParam2 = funParams2[i];</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;          <span class="keywordflow">if</span> (pFunParam1-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>() != pFunParam2-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>())</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;            {</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;            }</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;        }</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;      <span class="keywordflow">if</span> (result == <span class="keyword">true</span>)</div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;        {</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pNodeFun1 = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>());</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pNodeFun2 = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pFun2-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>());</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;          result = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a4057a0fd56a54fe4f1f5c40c205dfaf2">areEqualSubtrees</a>(pNodeFun1, pNodeFun2);</div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;        }</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;    }</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;    {</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;      result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;    }</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;}</div>
<div class="ttc" id="classCFunctionParameters_html_a25eebb18490f1fd552a39faae2120453"><div class="ttname"><a href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">CFunctionParameters::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db1/CFunctionParameters_8cpp_source.html#l00100">CFunctionParameters.cpp:100</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a879d6756b51f6b58d307940e1343bd10"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName</a></div><div class="ttdeci">const std::string &amp; getObjectName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00258">CCopasiObject.cpp:258</a></div></div>
<div class="ttc" id="classCFunctionParameters_html"><div class="ttname"><a href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de1/CFunctionParameters_8h_source.html#l00030">CFunctionParameters.h:30</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a4057a0fd56a54fe4f1f5c40c205dfaf2"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a4057a0fd56a54fe4f1f5c40c205dfaf2">SBMLImporter::areEqualSubtrees</a></div><div class="ttdeci">static bool areEqualSubtrees(const CEvaluationNode *pNode1, const CEvaluationNode *pNode2)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05159">SBMLImporter.cpp:5159</a></div></div>
<div class="ttc" id="classCFunctionParameter_html"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html">CFunctionParameter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00034">CFunctionParameter.h:34</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
<div class="ttc" id="classCFunction_html_ab30b89a5603c9e0aa76b9cf2345f2e57"><div class="ttname"><a href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables</a></div><div class="ttdeci">CFunctionParameters &amp; getVariables()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00148">CFunction.cpp:148</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4057a0fd56a54fe4f1f5c40c205dfaf2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::areEqualSubtrees </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td>
          <td class="paramname"><em>pNode1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td>
          <td class="paramname"><em>pNode2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Compares to <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> based subtrees recursively. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05159">5159</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode&lt; _Data &gt;::getData()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode&lt; _Data &gt;::getSibling()</a>, and <a class="el" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a41bd8f0562db3137b54c8f595a9b5f5c">areEqualFunctions()</a>.</p>
<div class="fragment"><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;{</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;  <span class="comment">// TODO CRITICAL We need to use a node iterator</span></div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;  <span class="keywordtype">bool</span> result = ((pNode1-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>() == pNode2-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>()) &amp;&amp; (pNode1-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>() == pNode2-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>()));</div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pChild1 = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pNode1-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pChild2 = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pNode2-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;  <span class="keywordflow">while</span> (result &amp;&amp; pChild1 &amp;&amp; pChild2)</div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;    {</div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;      result = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a4057a0fd56a54fe4f1f5c40c205dfaf2">areEqualSubtrees</a>(pChild1, pChild2);</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;      pChild1 = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pChild1-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;      pChild2 = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pChild2-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;    }</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;</div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;  result = (result &amp;&amp; !pChild1 &amp;&amp; !pChild2);</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;}</div>
<div class="ttc" id="classCCopasiNode_html_a0730aecebb9ca0f8401b7d0223e266e8"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode::getSibling</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getSibling()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00353">CCopasiNode.h:353</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_ae24b55d848d78cec0a359fd199c76562"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType</a></div><div class="ttdeci">const Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00357">CEvaluationNode.cpp:357</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a4057a0fd56a54fe4f1f5c40c205dfaf2"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a4057a0fd56a54fe4f1f5c40c205dfaf2">SBMLImporter::areEqualSubtrees</a></div><div class="ttdeci">static bool areEqualSubtrees(const CEvaluationNode *pNode1, const CEvaluationNode *pNode2)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05159">SBMLImporter.cpp:5159</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a761f04c57a75e99a63ee0700c76fdafe"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode::getData</a></div><div class="ttdeci">virtual const Data &amp; getData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00118">CCopasiNode.h:118</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e1dc15ef3ff133f828fb8f527ca7c68"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::areRulesUnique </td>
          <td>(</td>
          <td class="paramtype">const Model *&#160;</td>
          <td class="paramname"><em>copasiMode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks if no id is used in more than one Assignment and RateRule. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06662">6662</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, and <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;{</div>
<div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;  std::set&lt;std::string&gt; idSet;</div>
<div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;</div>
<div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;  <span class="comment">// go through the rules and check that no id is used in more than one rule</span></div>
<div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = sbmlModel-&gt;getNumRules();</div>
<div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;</div>
<div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;    {</div>
<div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;      <span class="keyword">const</span> Rule* pRule = sbmlModel-&gt;getRule(i);</div>
<div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;      std::string <a class="code" href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">id</a>;</div>
<div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;</div>
<div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;      <span class="keywordflow">switch</span> (pRule-&gt;getTypeCode())</div>
<div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;        {</div>
<div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;          <span class="keywordflow">case</span> SBML_ASSIGNMENT_RULE:</div>
<div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;            <span class="keywordtype">id</span> = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>AssignmentRule*<span class="keyword">&gt;</span>(pRule)-&gt;getVariable();</div>
<div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;</div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;          <span class="keywordflow">case</span> SBML_RATE_RULE:</div>
<div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;            <span class="keywordtype">id</span> = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>RateRule*<span class="keyword">&gt;</span>(pRule)-&gt;getVariable();</div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;</div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;        }</div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;</div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;      <span class="keywordflow">if</span> (!<span class="keywordtype">id</span>.empty())</div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;        {</div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;          <span class="keywordflow">if</span> (!idSet.insert(<span class="keywordtype">id</span>).second)</div>
<div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;            {</div>
<div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 35, <span class="keywordtype">id</span>.c_str());</div>
<div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;            }</div>
<div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;        }</div>
<div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;    }</div>
<div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;}</div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="structNamespace_html_a715d108cd7f9d5a482c1f485368e883d"><div class="ttname"><a href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">Namespace::id</a></div><div class="ttdeci">const char * id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6c/stdsoap2_8h_source.html#l01262">stdsoap2.h:1262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a61d10c15681b398f297bee71eaa75dbe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::areSBMLUnitDefinitionsIdentical </td>
          <td>(</td>
          <td class="paramtype">const UnitDefinition *&#160;</td>
          <td class="paramname"><em>pUdef1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const UnitDefinition *&#160;</td>
          <td class="paramname"><em>pUdef2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Enhanced method to identify identical SBML unit definitions. This method uses the areIdentical method from libSBML, but if the method return false, it does some extra checks. Right now it check for example if two volumes, one given in litre and one given in cubic meters are identical.</p>
<p>Enhanced method to identify identical sbml unit definitions. The method first converts the unit definitions to SI units and simplifies them, only then they are compared. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l08297">8297</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual()</a>.</p>

<p>Referenced by <a class="el" href="../../df/d80/classCSBMLExporter.html#a434c0e84d0593abf69165c1a73760b9e">CSBMLExporter::check_for_spatial_size_units()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">checkElementUnits()</a>, <a class="el" href="../../df/d80/classCSBMLExporter.html#a8d4300787dbaf8277365e8df178f70bd">CSBMLExporter::createAreaUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../df/d80/classCSBMLExporter.html#a5503f23206b28472e35929c4904c79f9">CSBMLExporter::createLengthUnit()</a>, <a class="el" href="../../df/d80/classCSBMLExporter.html#aae5e8e9d9571bfb092a940cfea479f2e">CSBMLExporter::createSubstanceUnit()</a>, <a class="el" href="../../df/d80/classCSBMLExporter.html#aae5677a0b747ea278f61312ad80c85d4">CSBMLExporter::createTimeUnit()</a>, and <a class="el" href="../../df/d80/classCSBMLExporter.html#aa192f412afb21f304c41a394afa45661">CSBMLExporter::createVolumeUnit()</a>.</p>
<div class="fragment"><div class="line"><a name="l08298"></a><span class="lineno"> 8298</span>&#160;{</div>
<div class="line"><a name="l08299"></a><span class="lineno"> 8299</span>&#160;  UnitDefinition* pTmpUdef1 = UnitDefinition::convertToSI(pUdef1);</div>
<div class="line"><a name="l08300"></a><span class="lineno"> 8300</span>&#160;  UnitDefinition::simplify(pTmpUdef1);</div>
<div class="line"><a name="l08301"></a><span class="lineno"> 8301</span>&#160;  UnitDefinition* pTmpUdef2 = UnitDefinition::convertToSI(pUdef2);</div>
<div class="line"><a name="l08302"></a><span class="lineno"> 8302</span>&#160;  UnitDefinition::simplify(pTmpUdef2);</div>
<div class="line"><a name="l08303"></a><span class="lineno"> 8303</span>&#160;  <span class="keywordtype">bool</span> result = UnitDefinition::areIdentical(pUdef1, pUdef2);</div>
<div class="line"><a name="l08304"></a><span class="lineno"> 8304</span>&#160;</div>
<div class="line"><a name="l08305"></a><span class="lineno"> 8305</span>&#160;  <span class="keywordflow">if</span> (result == <span class="keyword">false</span>)</div>
<div class="line"><a name="l08306"></a><span class="lineno"> 8306</span>&#160;    {</div>
<div class="line"><a name="l08307"></a><span class="lineno"> 8307</span>&#160;      <span class="comment">// check if maybe everything is the same, only the multipliers are</span></div>
<div class="line"><a name="l08308"></a><span class="lineno"> 8308</span>&#160;      <span class="comment">// somewhat off due to rounding errors</span></div>
<div class="line"><a name="l08309"></a><span class="lineno"> 8309</span>&#160;      <span class="keywordtype">bool</span> newResult = <span class="keyword">true</span>;</div>
<div class="line"><a name="l08310"></a><span class="lineno"> 8310</span>&#160;</div>
<div class="line"><a name="l08311"></a><span class="lineno"> 8311</span>&#160;      <span class="keywordflow">if</span> (pTmpUdef1-&gt;getNumUnits() == pTmpUdef2-&gt;getNumUnits())</div>
<div class="line"><a name="l08312"></a><span class="lineno"> 8312</span>&#160;        {</div>
<div class="line"><a name="l08313"></a><span class="lineno"> 8313</span>&#160;          UnitDefinition::reorder(pTmpUdef1);</div>
<div class="line"><a name="l08314"></a><span class="lineno"> 8314</span>&#160;          UnitDefinition::reorder(pTmpUdef2);</div>
<div class="line"><a name="l08315"></a><span class="lineno"> 8315</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, iMax = pTmpUdef1-&gt;getNumUnits();</div>
<div class="line"><a name="l08316"></a><span class="lineno"> 8316</span>&#160;</div>
<div class="line"><a name="l08317"></a><span class="lineno"> 8317</span>&#160;          <span class="comment">// for COPASI mole and avogadro are the same units, so in order to compare them,</span></div>
<div class="line"><a name="l08318"></a><span class="lineno"> 8318</span>&#160;          <span class="comment">// we replace the avogadro unit by mole</span></div>
<div class="line"><a name="l08319"></a><span class="lineno"> 8319</span>&#160;          <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l08320"></a><span class="lineno"> 8320</span>&#160;            {</div>
<div class="line"><a name="l08321"></a><span class="lineno"> 8321</span>&#160;              <span class="keywordflow">if</span> (pTmpUdef1-&gt;getUnit(i)-&gt;getKind() == UNIT_KIND_AVOGADRO)</div>
<div class="line"><a name="l08322"></a><span class="lineno"> 8322</span>&#160;                {</div>
<div class="line"><a name="l08323"></a><span class="lineno"> 8323</span>&#160;                  pTmpUdef1-&gt;getUnit(i)-&gt;setKind(UNIT_KIND_MOLE);</div>
<div class="line"><a name="l08324"></a><span class="lineno"> 8324</span>&#160;                }</div>
<div class="line"><a name="l08325"></a><span class="lineno"> 8325</span>&#160;</div>
<div class="line"><a name="l08326"></a><span class="lineno"> 8326</span>&#160;              <span class="keywordflow">if</span> (pTmpUdef2-&gt;getUnit(i)-&gt;getKind() == UNIT_KIND_AVOGADRO)</div>
<div class="line"><a name="l08327"></a><span class="lineno"> 8327</span>&#160;                {</div>
<div class="line"><a name="l08328"></a><span class="lineno"> 8328</span>&#160;                  pTmpUdef2-&gt;getUnit(i)-&gt;setKind(UNIT_KIND_MOLE);</div>
<div class="line"><a name="l08329"></a><span class="lineno"> 8329</span>&#160;                }</div>
<div class="line"><a name="l08330"></a><span class="lineno"> 8330</span>&#160;            }</div>
<div class="line"><a name="l08331"></a><span class="lineno"> 8331</span>&#160;</div>
<div class="line"><a name="l08332"></a><span class="lineno"> 8332</span>&#160;          <span class="comment">// we have to reset i to 0</span></div>
<div class="line"><a name="l08333"></a><span class="lineno"> 8333</span>&#160;          i = 0;</div>
<div class="line"><a name="l08334"></a><span class="lineno"> 8334</span>&#160;          <span class="keyword">const</span> Unit *pU1, *pU2;</div>
<div class="line"><a name="l08335"></a><span class="lineno"> 8335</span>&#160;</div>
<div class="line"><a name="l08336"></a><span class="lineno"> 8336</span>&#160;          <span class="keywordflow">while</span> (newResult == <span class="keyword">true</span> &amp;&amp; i != iMax)</div>
<div class="line"><a name="l08337"></a><span class="lineno"> 8337</span>&#160;            {</div>
<div class="line"><a name="l08338"></a><span class="lineno"> 8338</span>&#160;              pU1 = pTmpUdef1-&gt;getUnit(i);</div>
<div class="line"><a name="l08339"></a><span class="lineno"> 8339</span>&#160;              pU2 = pTmpUdef2-&gt;getUnit(i);</div>
<div class="line"><a name="l08340"></a><span class="lineno"> 8340</span>&#160;</div>
<div class="line"><a name="l08341"></a><span class="lineno"> 8341</span>&#160;              <span class="keywordflow">if</span> (pU1-&gt;getKind() != pU2-&gt;getKind() ||</div>
<div class="line"><a name="l08342"></a><span class="lineno"> 8342</span>&#160;                  pU1-&gt;getExponent() != pU2-&gt;getExponent() ||</div>
<div class="line"><a name="l08343"></a><span class="lineno"> 8343</span>&#160;                  pU1-&gt;getScale() != pU2-&gt;getScale() ||</div>
<div class="line"><a name="l08344"></a><span class="lineno"> 8344</span>&#160;                  !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(pU2-&gt;getMultiplier(), pU1-&gt;getMultiplier()))</div>
<div class="line"><a name="l08345"></a><span class="lineno"> 8345</span>&#160;                {</div>
<div class="line"><a name="l08346"></a><span class="lineno"> 8346</span>&#160;                  newResult = <span class="keyword">false</span>;</div>
<div class="line"><a name="l08347"></a><span class="lineno"> 8347</span>&#160;                }</div>
<div class="line"><a name="l08348"></a><span class="lineno"> 8348</span>&#160;</div>
<div class="line"><a name="l08349"></a><span class="lineno"> 8349</span>&#160;              ++i;</div>
<div class="line"><a name="l08350"></a><span class="lineno"> 8350</span>&#160;            }</div>
<div class="line"><a name="l08351"></a><span class="lineno"> 8351</span>&#160;</div>
<div class="line"><a name="l08352"></a><span class="lineno"> 8352</span>&#160;          result = newResult;</div>
<div class="line"><a name="l08353"></a><span class="lineno"> 8353</span>&#160;        }</div>
<div class="line"><a name="l08354"></a><span class="lineno"> 8354</span>&#160;    }</div>
<div class="line"><a name="l08355"></a><span class="lineno"> 8355</span>&#160;</div>
<div class="line"><a name="l08356"></a><span class="lineno"> 8356</span>&#160;  <span class="keyword">delete</span> pTmpUdef1;</div>
<div class="line"><a name="l08357"></a><span class="lineno"> 8357</span>&#160;  <span class="keyword">delete</span> pTmpUdef2;</div>
<div class="line"><a name="l08358"></a><span class="lineno"> 8358</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l08359"></a><span class="lineno"> 8359</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a34f24c83698b4184ec7c8ab795efdee4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">SBMLImporter::areApproximatelyEqual</a></div><div class="ttdeci">static bool areApproximatelyEqual(const double &amp;x, const double &amp;y, const double &amp;t=1e-9)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00177">SBMLImporter.cpp:177</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a11c5ec0d43dba7741be5043bcd484e0d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::checkElementUnits </td>
          <td>(</td>
          <td class="paramtype">const Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>pCopasiModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l07353">7353</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical()</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ae6554a259f0340a38ecdc4c10eea4283">CModel::dimensionlessArea</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca70b8ea66d8daf842df307ade4b829a4a">CModel::dimensionlessLength</a>, <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dac2cc47ee18f413bdc5075467b65188c4">CModel::dimensionlessVolume</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">handleAreaUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">handleLengthUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab3ad9f948cb55e9cb589d2b0bb3c934">handleSubstanceUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">handleTimeUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d4/d04/classCModel.html#ad521de8c5143f698fffae30b37085857">CModel::setAreaUnit()</a>, <a class="el" href="../../d4/d04/classCModel.html#afcd4a2210cc887e066ac755a550e7ec4">CModel::setLengthUnit()</a>, <a class="el" href="../../d4/d04/classCModel.html#aa34037c16dc088443d60144aafc20efe">CModel::setTimeUnit()</a>, <a class="el" href="../../d4/d04/classCModel.html#aa5f3b07a92ea3dbb3344bbaef2fc8253">CModel::setVolumeUnit()</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;{</div>
<div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pSBMLModel-&gt;getNumCompartments();</div>
<div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;  std::vector&lt;std::string&gt; nonDefaultCompartments;</div>
<div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;  std::vector&lt;std::string&gt; nonDefaultSpecies;</div>
<div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;  std::vector&lt;std::string&gt; nonDefaultKineticTime;</div>
<div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;  std::vector&lt;std::string&gt; nonDefaultKineticSubstance;</div>
<div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;  std::vector&lt;std::string&gt; nonDefaultEventTime;</div>
<div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;  <span class="keyword">const</span> Compartment* pCompartment;</div>
<div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;  <span class="keyword">const</span> Species* pSpecies;</div>
<div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;  <span class="keyword">const</span> Reaction* pReaction;</div>
<div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;  <span class="keyword">const</span> KineticLaw* pKineticLaw;</div>
<div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;  UnitDefinition* pDimensionlessUnits = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;dimensionless&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;  UnitDefinition* pLengthUnits = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;length&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;  UnitDefinition* pAreaUnits = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;area&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;  UnitDefinition* pVolumeUnits = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;volume&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;  UnitDefinition* pTimeUnits = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;time&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;  UnitDefinition* pSubstanceUnits = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;substance&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;  std::string lastVolumeUnit = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;  std::string lastAreaUnit = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;  std::string lastLengthUnit = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;  std::string lastDimensionlessUnit = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;  <span class="keywordtype">bool</span> inconsistentVolumeUnits = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;  <span class="keywordtype">bool</span> inconsistentAreaUnits = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;  <span class="keywordtype">bool</span> inconsistentLengthUnits = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;  <span class="keywordtype">bool</span> inconsistentDimensionlessUnits = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;  <span class="keywordtype">bool</span> defaultVolumeUsed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;  <span class="keywordtype">bool</span> defaultAreaUsed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;  <span class="keywordtype">bool</span> defaultLengthUsed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;</div>
<div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;    {</div>
<div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;      pCompartment = pSBMLModel-&gt;getCompartment(i);</div>
<div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;</div>
<div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;      <span class="keywordflow">if</span> (pCompartment-&gt;getSpatialDimensions() == 3)</div>
<div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;        {</div>
<div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;          <span class="keywordflow">if</span> (pCompartment-&gt;isSetUnits())</div>
<div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;            {</div>
<div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;              std::string unitId = pCompartment-&gt;getUnits();</div>
<div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;              UnitDefinition* pUdef1 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(unitId, pSBMLModel);</div>
<div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;</div>
<div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;              <span class="keywordflow">if</span> (pUdef1 == NULL)</div>
<div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;                {</div>
<div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;                  <span class="comment">// error message</span></div>
<div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 55, unitId.c_str(), <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;compartment&quot;</span>, pCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;                }</div>
<div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;                {</div>
<div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;                  std::pair&lt;CModel::VolumeUnit, bool&gt; result = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit</a>(pUdef1);</div>
<div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;</div>
<div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;                  <span class="keywordflow">if</span> (result.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;                    {</div>
<div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;                      <span class="comment">// we did not recognize the unit</span></div>
<div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;                      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 79, <span class="stringliteral">&quot;volume&quot;</span>, <span class="stringliteral">&quot;the 3 dimensional  compartment&quot;</span>, pCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;                      <span class="keyword">delete</span> pUdef1;</div>
<div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;                      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;                    }</div>
<div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;                }</div>
<div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;</div>
<div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;              <span class="keywordflow">if</span> (unitId != <span class="stringliteral">&quot;volume&quot;</span> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pVolumeUnits, pUdef1))</div>
<div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;                {</div>
<div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;                  nonDefaultCompartments.push_back(pCompartment-&gt;getId());</div>
<div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;                }</div>
<div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;volume&quot;</span>)</div>
<div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;                {</div>
<div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;                  defaultVolumeUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;                }</div>
<div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;</div>
<div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;              <span class="keywordflow">if</span> (lastVolumeUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;                {</div>
<div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;                  lastVolumeUnit = unitId;</div>
<div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;                }</div>
<div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId != lastVolumeUnit)</div>
<div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;                {</div>
<div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;                  <span class="comment">// check if the two units have identical definitions</span></div>
<div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;                  UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastVolumeUnit, pSBMLModel);</div>
<div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;                  assert(pUdef2 != NULL);</div>
<div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;</div>
<div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pUdef1, pUdef2))</div>
<div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;                    {</div>
<div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;                      inconsistentVolumeUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;                    }</div>
<div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;</div>
<div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;                  <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;                }</div>
<div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;</div>
<div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;              <span class="keyword">delete</span> pUdef1;</div>
<div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;            }</div>
<div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastVolumeUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;            {</div>
<div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;              lastVolumeUnit = <span class="stringliteral">&quot;volume&quot;</span>;</div>
<div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;              defaultVolumeUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;            }</div>
<div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;            {</div>
<div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;              defaultVolumeUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;              <span class="comment">// compare the default volume unit to the lastVolumeUnit</span></div>
<div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;              UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastVolumeUnit, pSBMLModel);</div>
<div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;              assert(pUdef2 != NULL);</div>
<div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;</div>
<div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pVolumeUnits, pUdef2))</div>
<div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;                {</div>
<div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;                  inconsistentVolumeUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;                }</div>
<div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;</div>
<div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;              <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;              lastVolumeUnit = <span class="stringliteral">&quot;volume&quot;</span>;</div>
<div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;            }</div>
<div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;        }</div>
<div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pCompartment-&gt;getSpatialDimensions() == 2)</div>
<div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;        {</div>
<div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;          <span class="keywordflow">if</span> (pCompartment-&gt;isSetUnits())</div>
<div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;            {</div>
<div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;              std::string unitId = pCompartment-&gt;getUnits();</div>
<div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;              UnitDefinition* pUdef1 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(unitId, pSBMLModel);</div>
<div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;</div>
<div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;              <span class="keywordflow">if</span> (pUdef1 == NULL)</div>
<div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;                {</div>
<div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;                  <span class="comment">// error message</span></div>
<div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 55, unitId.c_str(), <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;compartment&quot;</span>, pCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;                }</div>
<div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;                {</div>
<div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;                  std::pair&lt;CModel::AreaUnit, bool&gt; result = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">handleAreaUnit</a>(pUdef1);</div>
<div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;</div>
<div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;                  <span class="keywordflow">if</span> (result.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;                    {</div>
<div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;                      <span class="comment">// we did not recognize the unit</span></div>
<div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;                      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 79, <span class="stringliteral">&quot;area&quot;</span>, <span class="stringliteral">&quot;the 2 dimensional compartment&quot;</span>, pCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;                      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;                    }</div>
<div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;                }</div>
<div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;</div>
<div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;              <span class="keywordflow">if</span> (unitId != <span class="stringliteral">&quot;area&quot;</span> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pAreaUnits, pUdef1))</div>
<div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;                {</div>
<div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;                  nonDefaultCompartments.push_back(pCompartment-&gt;getId());</div>
<div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;                }</div>
<div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;area&quot;</span>)</div>
<div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;                {</div>
<div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;                  defaultAreaUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;                }</div>
<div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;</div>
<div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;              <span class="keywordflow">if</span> (lastAreaUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;                {</div>
<div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;                  lastAreaUnit = unitId;</div>
<div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;                }</div>
<div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId != lastAreaUnit)</div>
<div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;                {</div>
<div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;                  <span class="comment">// check if the two units have identical definitions</span></div>
<div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;                  UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastAreaUnit, pSBMLModel);</div>
<div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;                  assert(pUdef2 != NULL);</div>
<div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;</div>
<div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pUdef1, pUdef2))</div>
<div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;                    {</div>
<div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;                      inconsistentAreaUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;                    }</div>
<div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;</div>
<div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;                  <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;                }</div>
<div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;</div>
<div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;              <span class="keyword">delete</span> pUdef1;</div>
<div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;            }</div>
<div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastAreaUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;            {</div>
<div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;              lastAreaUnit = <span class="stringliteral">&quot;area&quot;</span>;</div>
<div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;              defaultAreaUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;            }</div>
<div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;            {</div>
<div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;              defaultAreaUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;              <span class="comment">// compare the default area unit to the lastAreaUnit</span></div>
<div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160;              UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastAreaUnit, pSBMLModel);</div>
<div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;              assert(pUdef2 != NULL);</div>
<div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;</div>
<div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pAreaUnits, pUdef2))</div>
<div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;                {</div>
<div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;                  inconsistentAreaUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;                }</div>
<div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160;</div>
<div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;              <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;              lastAreaUnit = <span class="stringliteral">&quot;area&quot;</span>;</div>
<div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;            }</div>
<div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160;        }</div>
<div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pCompartment-&gt;getSpatialDimensions() == 1)</div>
<div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;        {</div>
<div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;          <span class="keywordflow">if</span> (pCompartment-&gt;isSetUnits())</div>
<div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;            {</div>
<div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;              std::string unitId = pCompartment-&gt;getUnits();</div>
<div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160;              UnitDefinition* pUdef1 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(unitId, pSBMLModel);</div>
<div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;</div>
<div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;              <span class="keywordflow">if</span> (pUdef1 == NULL)</div>
<div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;                {</div>
<div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;                  <span class="comment">// error message</span></div>
<div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 55, unitId.c_str(), <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;compartment&quot;</span>, pCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;                }</div>
<div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;                {</div>
<div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;                  std::pair&lt;CModel::LengthUnit, bool&gt; result = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">handleLengthUnit</a>(pUdef1);</div>
<div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;</div>
<div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;                  <span class="keywordflow">if</span> (result.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;                    {</div>
<div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;                      <span class="comment">// we did not recognize the unit</span></div>
<div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;                      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 79, <span class="stringliteral">&quot;length&quot;</span>, <span class="stringliteral">&quot;the 1 dimensional compartment&quot;</span>, pCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;                      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;                    }</div>
<div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160;                }</div>
<div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;</div>
<div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;              <span class="keywordflow">if</span> (unitId != <span class="stringliteral">&quot;length&quot;</span> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pLengthUnits, pUdef1))</div>
<div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;                {</div>
<div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160;                  nonDefaultCompartments.push_back(pCompartment-&gt;getId());</div>
<div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;                }</div>
<div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;length&quot;</span>)</div>
<div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;                {</div>
<div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;                  defaultLengthUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;                }</div>
<div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;</div>
<div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;              <span class="keywordflow">if</span> (lastLengthUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;                {</div>
<div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;                  lastLengthUnit = unitId;</div>
<div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160;                }</div>
<div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId != lastLengthUnit)</div>
<div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;                {</div>
<div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;                  <span class="comment">// check if the two units have identical definitions</span></div>
<div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;                  UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastLengthUnit, pSBMLModel);</div>
<div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160;                  assert(pUdef2 != NULL);</div>
<div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;</div>
<div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pUdef1, pUdef2))</div>
<div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;                    {</div>
<div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;                      inconsistentLengthUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;                    }</div>
<div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160;</div>
<div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;                  <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160;                }</div>
<div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160;</div>
<div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;              <span class="keyword">delete</span> pUdef1;</div>
<div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;            }</div>
<div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastLengthUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160;            {</div>
<div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160;              lastLengthUnit = <span class="stringliteral">&quot;length&quot;</span>;</div>
<div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;              defaultLengthUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160;            }</div>
<div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160;            {</div>
<div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160;              defaultLengthUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;              <span class="comment">// compare the default length unit to the lastLengthUnit</span></div>
<div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;              UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastLengthUnit, pSBMLModel);</div>
<div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;              assert(pUdef2 != NULL);</div>
<div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;</div>
<div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pLengthUnits, pUdef2))</div>
<div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;                {</div>
<div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;                  inconsistentLengthUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;                }</div>
<div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;</div>
<div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;              <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;              lastLengthUnit = <span class="stringliteral">&quot;length&quot;</span>;</div>
<div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160;            }</div>
<div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160;        }</div>
<div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pCompartment-&gt;getSpatialDimensions() == 0)</div>
<div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160;        {</div>
<div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;          <span class="keywordflow">if</span> (pCompartment-&gt;isSetUnits())</div>
<div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160;            {</div>
<div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;              std::string unitId = pCompartment-&gt;getUnits();</div>
<div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;              UnitDefinition* pUdef1 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(unitId, pSBMLModel);</div>
<div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160;</div>
<div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;              <span class="keywordflow">if</span> (pUdef1 == NULL)</div>
<div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;                {</div>
<div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;                  <span class="comment">// error message</span></div>
<div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 55, unitId.c_str(), <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;compartment&quot;</span>, pCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;                }</div>
<div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;</div>
<div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;              <span class="keywordflow">if</span> (unitId != <span class="stringliteral">&quot;dimensionless&quot;</span> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pDimensionlessUnits, pUdef1))</div>
<div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;                {</div>
<div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 79, <span class="stringliteral">&quot;dimensionless&quot;</span>, <span class="stringliteral">&quot;the 0 dimensional compartment&quot;</span>, pCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;                  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;                }</div>
<div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160;</div>
<div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;              <span class="keywordflow">if</span> (lastDimensionlessUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;                {</div>
<div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;                  lastDimensionlessUnit = unitId;</div>
<div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;                }</div>
<div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId != lastDimensionlessUnit)</div>
<div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160;                {</div>
<div class="line"><a name="l07635"></a><span class="lineno"> 7635</span>&#160;                  <span class="comment">// check if the two units have identical definitions</span></div>
<div class="line"><a name="l07636"></a><span class="lineno"> 7636</span>&#160;                  UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastDimensionlessUnit, pSBMLModel);</div>
<div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;                  assert(pUdef2 != NULL);</div>
<div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160;</div>
<div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pUdef1, pUdef2))</div>
<div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;                    {</div>
<div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160;                      inconsistentDimensionlessUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;                    }</div>
<div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160;</div>
<div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;                  <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;                }</div>
<div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160;</div>
<div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;              <span class="keyword">delete</span> pUdef1;</div>
<div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;            }</div>
<div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastDimensionlessUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;            {</div>
<div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;              lastDimensionlessUnit = <span class="stringliteral">&quot;dimensionless&quot;</span>;</div>
<div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;            }</div>
<div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;        }</div>
<div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;    }</div>
<div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;</div>
<div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;  <span class="keywordflow">if</span> (!inconsistentVolumeUnits &amp;&amp; lastVolumeUnit != <span class="stringliteral">&quot;&quot;</span> &amp;&amp; lastVolumeUnit != <span class="stringliteral">&quot;volume&quot;</span>)</div>
<div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;    {</div>
<div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160;      <span class="comment">// try to set the default volume unit to the unit defined by lastUnit</span></div>
<div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;      <span class="keyword">const</span> UnitDefinition* pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">SBMLImporter::getSBMLUnitDefinitionForId</a>(lastVolumeUnit, pSBMLModel);</div>
<div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;      assert(pUdef != NULL);</div>
<div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;      std::pair&lt;CModel::VolumeUnit, bool&gt; volume = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit</a>(pUdef);</div>
<div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;</div>
<div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;      <span class="keywordflow">if</span> (volume.second == <span class="keyword">true</span>)</div>
<div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160;        {</div>
<div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;          <span class="comment">// set the default volume unit</span></div>
<div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;          pCopasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa5f3b07a92ea3dbb3344bbaef2fc8253">setVolumeUnit</a>(volume.first);</div>
<div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160;          <span class="keyword">delete</span> pVolumeUnits;</div>
<div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;          pVolumeUnits = <span class="keyword">dynamic_cast&lt;</span>UnitDefinition*<span class="keyword">&gt;</span>(pUdef-&gt;clone());</div>
<div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;        }</div>
<div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;        {</div>
<div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;          inconsistentVolumeUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160;        }</div>
<div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160;</div>
<div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;      <span class="keyword">delete</span> pUdef;</div>
<div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;    }</div>
<div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160;</div>
<div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;  <span class="keywordflow">if</span> (!inconsistentAreaUnits &amp;&amp; lastAreaUnit != <span class="stringliteral">&quot;&quot;</span> &amp;&amp; lastAreaUnit != <span class="stringliteral">&quot;area&quot;</span>)</div>
<div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160;    {</div>
<div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;      <span class="comment">// try to set the default area unit to the unit defined by lastAreaUnit</span></div>
<div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;      <span class="keyword">const</span> UnitDefinition* pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">SBMLImporter::getSBMLUnitDefinitionForId</a>(lastAreaUnit, pSBMLModel);</div>
<div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160;      assert(pUdef != NULL);</div>
<div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;      std::pair&lt;CModel::AreaUnit, bool&gt; area = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">handleAreaUnit</a>(pUdef);</div>
<div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;</div>
<div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160;      <span class="keywordflow">if</span> (area.second == <span class="keyword">true</span>)</div>
<div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160;        {</div>
<div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;          <span class="comment">// set the default area unit</span></div>
<div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;          pCopasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad521de8c5143f698fffae30b37085857">setAreaUnit</a>(area.first);</div>
<div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;          <span class="keyword">delete</span> pAreaUnits;</div>
<div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160;          pAreaUnits = <span class="keyword">dynamic_cast&lt;</span>UnitDefinition*<span class="keyword">&gt;</span>(pUdef-&gt;clone());</div>
<div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;        }</div>
<div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160;        {</div>
<div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;          inconsistentAreaUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160;        }</div>
<div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;</div>
<div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160;      <span class="keyword">delete</span> pUdef;</div>
<div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;    }</div>
<div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160;</div>
<div class="line"><a name="l07700"></a><span class="lineno"> 7700</span>&#160;  <span class="keywordflow">if</span> (!inconsistentLengthUnits &amp;&amp; lastLengthUnit != <span class="stringliteral">&quot;&quot;</span> &amp;&amp; lastLengthUnit != <span class="stringliteral">&quot;length&quot;</span>)</div>
<div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;    {</div>
<div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;      <span class="comment">// try to set the default length unit to the unit defined by lastLengthUnit</span></div>
<div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;      <span class="keyword">const</span> UnitDefinition* pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">SBMLImporter::getSBMLUnitDefinitionForId</a>(lastLengthUnit, pSBMLModel);</div>
<div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;      assert(pUdef != NULL);</div>
<div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;      std::pair&lt;CModel::LengthUnit, bool&gt; length = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">handleLengthUnit</a>(pUdef);</div>
<div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;</div>
<div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160;      <span class="keywordflow">if</span> (length.second == <span class="keyword">true</span>)</div>
<div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;        {</div>
<div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160;          <span class="comment">// set the default length unit</span></div>
<div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;          pCopasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#afcd4a2210cc887e066ac755a550e7ec4">setLengthUnit</a>(length.first);</div>
<div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;          <span class="keyword">delete</span> pLengthUnits;</div>
<div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;          pLengthUnits = <span class="keyword">dynamic_cast&lt;</span>UnitDefinition*<span class="keyword">&gt;</span>(pUdef-&gt;clone());</div>
<div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;        }</div>
<div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160;        {</div>
<div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;          inconsistentLengthUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;        }</div>
<div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160;</div>
<div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;      <span class="keyword">delete</span> pUdef;</div>
<div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;    }</div>
<div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;</div>
<div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;  <span class="keywordflow">if</span> (inconsistentVolumeUnits || inconsistentAreaUnits || inconsistentLengthUnits || inconsistentDimensionlessUnits)</div>
<div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;    {</div>
<div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;      <span class="comment">// warn about inconsistent units and that they have been ignored and</span></div>
<div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;      <span class="comment">// report the actual units used</span></div>
<div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;      <span class="comment">// one warning for every entry in nonDefaultCompartment</span></div>
<div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;      std::vector&lt;std::string&gt;::iterator errorIt = nonDefaultCompartments.begin(), errorEndit = nonDefaultCompartments.end();</div>
<div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;      std::ostringstream os;</div>
<div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;</div>
<div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;      <span class="keywordflow">while</span> (errorIt != errorEndit)</div>
<div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;        {</div>
<div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;          os &lt;&lt; *errorIt &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160;          ++errorIt;</div>
<div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;        }</div>
<div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;</div>
<div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;      std::string s = os.str();</div>
<div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 24 , s.substr(0, s.size() - 2).c_str());</div>
<div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;      <span class="comment">// check if the default units have been used for any of the compartments</span></div>
<div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;      <span class="comment">// if so, the models has to use the defaults, otherwise we can just</span></div>
<div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;      <span class="comment">// choose one</span></div>
<div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;      std::pair&lt;CModel::LengthUnit, bool&gt; length = std::pair&lt;CModel::LengthUnit, bool&gt;(<a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca70b8ea66d8daf842df307ade4b829a4a">CModel::dimensionlessLength</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;      <span class="keyword">const</span> UnitDefinition* pUdef = NULL;</div>
<div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;</div>
<div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;      <span class="keywordflow">if</span> (defaultLengthUsed)</div>
<div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;        {</div>
<div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;          pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">SBMLImporter::getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;length&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;          assert(pUdef != NULL);</div>
<div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;          length = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">handleLengthUnit</a>(pUdef);</div>
<div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;        }</div>
<div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160;        {</div>
<div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;          <span class="keywordflow">if</span> (lastLengthUnit != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;            {</div>
<div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;              pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">SBMLImporter::getSBMLUnitDefinitionForId</a>(lastLengthUnit, pSBMLModel);</div>
<div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160;              assert(pUdef != NULL);</div>
<div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;              length = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">handleLengthUnit</a>(pUdef);</div>
<div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;            }</div>
<div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160;        }</div>
<div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160;</div>
<div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;      <span class="keywordflow">if</span> (length.second == <span class="keyword">true</span>)</div>
<div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;        {</div>
<div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;          <span class="comment">// set the default length unit</span></div>
<div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;          pCopasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#afcd4a2210cc887e066ac755a550e7ec4">setLengthUnit</a>(length.first);</div>
<div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160;          <span class="keyword">delete</span> pLengthUnits;</div>
<div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;          pLengthUnits = <span class="keyword">dynamic_cast&lt;</span>UnitDefinition*<span class="keyword">&gt;</span>(pUdef-&gt;clone());</div>
<div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;        }</div>
<div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;</div>
<div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160;      <span class="keywordflow">if</span> (pUdef)</div>
<div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;        {</div>
<div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;          <span class="keyword">delete</span> pUdef;</div>
<div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160;          pUdef = NULL;</div>
<div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;        }</div>
<div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;</div>
<div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;      std::pair&lt;CModel::AreaUnit, bool&gt; area = std::pair&lt;CModel::AreaUnit, bool&gt;(<a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ae6554a259f0340a38ecdc4c10eea4283">CModel::dimensionlessArea</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;</div>
<div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;      <span class="keywordflow">if</span> (defaultAreaUsed)</div>
<div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160;        {</div>
<div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;          pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">SBMLImporter::getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;area&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;          assert(pUdef != NULL);</div>
<div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;          area = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">handleAreaUnit</a>(pUdef);</div>
<div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;        }</div>
<div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;        {</div>
<div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;          <span class="keywordflow">if</span> (lastAreaUnit != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;            {</div>
<div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;              pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">SBMLImporter::getSBMLUnitDefinitionForId</a>(lastAreaUnit, pSBMLModel);</div>
<div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;              assert(pUdef != NULL);</div>
<div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;              area = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">handleAreaUnit</a>(pUdef);</div>
<div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;            }</div>
<div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160;        }</div>
<div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;</div>
<div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;      <span class="keywordflow">if</span> (area.second == <span class="keyword">true</span>)</div>
<div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;        {</div>
<div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;          <span class="comment">// set the default area unit</span></div>
<div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;          pCopasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad521de8c5143f698fffae30b37085857">setAreaUnit</a>(area.first);</div>
<div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;          <span class="keyword">delete</span> pAreaUnits;</div>
<div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;          pAreaUnits = <span class="keyword">dynamic_cast&lt;</span>UnitDefinition*<span class="keyword">&gt;</span>(pUdef-&gt;clone());</div>
<div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;        }</div>
<div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;</div>
<div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;      <span class="keywordflow">if</span> (pUdef)</div>
<div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;        {</div>
<div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;          <span class="keyword">delete</span> pUdef;</div>
<div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;          pUdef = NULL;</div>
<div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;        }</div>
<div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;</div>
<div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;      std::pair&lt;CModel::VolumeUnit, bool&gt; volume = std::pair&lt;CModel::VolumeUnit, bool&gt;(<a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dac2cc47ee18f413bdc5075467b65188c4">CModel::dimensionlessVolume</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160;</div>
<div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;      <span class="keywordflow">if</span> (defaultVolumeUsed)</div>
<div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;        {</div>
<div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;          pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">SBMLImporter::getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;volume&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;          assert(pUdef != NULL);</div>
<div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;          volume = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit</a>(pUdef);</div>
<div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;        }</div>
<div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;        {</div>
<div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;          <span class="keywordflow">if</span> (lastVolumeUnit != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;            {</div>
<div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;              pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">SBMLImporter::getSBMLUnitDefinitionForId</a>(lastVolumeUnit, pSBMLModel);</div>
<div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;              assert(pUdef != NULL);</div>
<div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;              volume = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit</a>(pUdef);</div>
<div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;            }</div>
<div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;        }</div>
<div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;</div>
<div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;      <span class="keywordflow">if</span> (volume.second == <span class="keyword">true</span>)</div>
<div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;        {</div>
<div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;          <span class="comment">// set the default length unit</span></div>
<div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;          pCopasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa5f3b07a92ea3dbb3344bbaef2fc8253">setVolumeUnit</a>(volume.first);</div>
<div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;          <span class="keyword">delete</span> pVolumeUnits;</div>
<div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;          pVolumeUnits = <span class="keyword">dynamic_cast&lt;</span>UnitDefinition*<span class="keyword">&gt;</span>(pUdef-&gt;clone());</div>
<div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;        }</div>
<div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;</div>
<div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;      <span class="keywordflow">if</span> (pUdef)</div>
<div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;        {</div>
<div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;          <span class="keyword">delete</span> pUdef;</div>
<div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;          pUdef = NULL;</div>
<div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;        }</div>
<div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;    }</div>
<div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;</div>
<div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;  <span class="keywordtype">bool</span> inconsistentUnits = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;  std::string lastUnit = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;</div>
<div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;  iMax = pSBMLModel-&gt;getNumSpecies();</div>
<div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;</div>
<div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;    {</div>
<div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;      pSpecies = pSBMLModel-&gt;getSpecies(i);</div>
<div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160;</div>
<div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;      <span class="keywordflow">if</span> (level &lt; 2 || (level == 2 &amp;&amp; version &lt; 3))</div>
<div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160;        {</div>
<div class="line"><a name="l07850"></a><span class="lineno"> 7850</span>&#160;          <span class="comment">// check the isSetSpatialSizeUnits flag for models prior to L2V3.</span></div>
<div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;          <span class="keywordflow">if</span> (pSpecies-&gt;isSetSpatialSizeUnits() == <span class="keyword">true</span>)</div>
<div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;            {</div>
<div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;              <span class="comment">// check if the spatialSizeUnits is consistent with the</span></div>
<div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;              <span class="comment">// pVolumeUnits, pAreaUnits, pLengthUnits or pDimensionlessUnits</span></div>
<div class="line"><a name="l07855"></a><span class="lineno"> 7855</span>&#160;              <span class="comment">// first we need to find the compartment</span></div>
<div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;              pCompartment = pSBMLModel-&gt;getCompartment(pSpecies-&gt;getCompartment());</div>
<div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;              assert(pCompartment != NULL);</div>
<div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;              std::string spatialSizeUnits = pSpecies-&gt;getSpatialSizeUnits();</div>
<div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;              UnitDefinition* pTmpUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(spatialSizeUnits, pSBMLModel);</div>
<div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;</div>
<div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;              <span class="keywordflow">if</span> (pTmpUdef2 == NULL)</div>
<div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;                {</div>
<div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;                  <span class="comment">// error message</span></div>
<div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 55, spatialSizeUnits.c_str(), <span class="stringliteral">&quot;spatialSizeUnits&quot;</span>, <span class="stringliteral">&quot;species&quot;</span>, pSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;                }</div>
<div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160;</div>
<div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;              <span class="keywordflow">switch</span> (pCompartment-&gt;getSpatialDimensions())</div>
<div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;                {</div>
<div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;                  <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160;</div>
<div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pDimensionlessUnits, pTmpUdef2))</div>
<div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;                      {</div>
<div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 19, pSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160;                      }</div>
<div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;</div>
<div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;</div>
<div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;                  <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;</div>
<div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pLengthUnits, pTmpUdef2))</div>
<div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;                      {</div>
<div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 19, pSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;                      }</div>
<div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;</div>
<div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;</div>
<div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;                  <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160;</div>
<div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pAreaUnits, pTmpUdef2))</div>
<div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;                      {</div>
<div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 19, pSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;                      }</div>
<div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;</div>
<div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160;</div>
<div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;                  <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;</div>
<div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pVolumeUnits, pTmpUdef2))</div>
<div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;                      {</div>
<div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 19, pSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;                      }</div>
<div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;</div>
<div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;</div>
<div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;                  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;                    <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;                }</div>
<div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;</div>
<div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;              <span class="keyword">delete</span> pTmpUdef2;</div>
<div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;            }</div>
<div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;        }</div>
<div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;</div>
<div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;      <span class="keywordflow">if</span> (pSpecies-&gt;isSetUnits())</div>
<div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;        {</div>
<div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;          std::string unitId = pSpecies-&gt;getUnits();</div>
<div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;          UnitDefinition* pUdef1 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(unitId, pSBMLModel);</div>
<div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;</div>
<div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;          <span class="keywordflow">if</span> (pUdef1 == NULL)</div>
<div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;            {</div>
<div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;              <span class="comment">// error message</span></div>
<div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 55, unitId.c_str(), <span class="stringliteral">&quot;substanceUnits&quot;</span>, <span class="stringliteral">&quot;species&quot;</span>, pSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;            }</div>
<div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;</div>
<div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;            {</div>
<div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;              std::pair&lt;CModel::QuantityUnit, bool&gt; result = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aab3ad9f948cb55e9cb589d2b0bb3c934">handleSubstanceUnit</a>(pUdef1);</div>
<div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160;</div>
<div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;              <span class="keywordflow">if</span> (result.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;                {</div>
<div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;                  <span class="comment">// we did not recognize the unit</span></div>
<div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 79, <span class="stringliteral">&quot;substance&quot;</span>, <span class="stringliteral">&quot;species&quot;</span>, pSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160;                  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;                }</div>
<div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;            }</div>
<div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;</div>
<div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;          <span class="keywordflow">if</span> (unitId != <span class="stringliteral">&quot;substance&quot;</span> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pSubstanceUnits, pUdef1))</div>
<div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;            {</div>
<div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;              nonDefaultSpecies.push_back(pSpecies-&gt;getId());</div>
<div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;            }</div>
<div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160;</div>
<div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;          <span class="keywordflow">if</span> (lastUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;            {</div>
<div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;              lastUnit = unitId;</div>
<div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;            }</div>
<div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId != lastUnit)</div>
<div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;            {</div>
<div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;              <span class="comment">// check if the two units have identical definitions</span></div>
<div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;              UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastUnit, pSBMLModel);</div>
<div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;              assert(pUdef2 != NULL);</div>
<div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;</div>
<div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pUdef1, pUdef2))</div>
<div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;                {</div>
<div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;                  inconsistentUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;                }</div>
<div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;</div>
<div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;              <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;            }</div>
<div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;</div>
<div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;          <span class="keyword">delete</span> pUdef1;</div>
<div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;        }</div>
<div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;        {</div>
<div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160;          lastUnit = <span class="stringliteral">&quot;substance&quot;</span>;</div>
<div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;        }</div>
<div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;    }</div>
<div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160;</div>
<div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;  <span class="keywordtype">bool</span> inconsistentTimeUnits = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;  std::string lastTimeUnits = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;  iMax = pSBMLModel-&gt;getNumReactions();</div>
<div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;</div>
<div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;    {</div>
<div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;      pReaction = pSBMLModel-&gt;getReaction(i);</div>
<div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;      pKineticLaw = pReaction-&gt;getKineticLaw();</div>
<div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;</div>
<div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;      <span class="keywordflow">if</span> (pKineticLaw != NULL)</div>
<div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160;        {</div>
<div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;          std::string unitId;</div>
<div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;</div>
<div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;          <span class="keywordflow">if</span> (pKineticLaw-&gt;isSetSubstanceUnits())</div>
<div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;            {</div>
<div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;              unitId = pKineticLaw-&gt;getSubstanceUnits();</div>
<div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;              UnitDefinition* pUdef1 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(unitId, pSBMLModel);</div>
<div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;</div>
<div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;              <span class="keywordflow">if</span> (pUdef1 == NULL)</div>
<div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160;                {</div>
<div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;                  <span class="comment">// error message</span></div>
<div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 55, unitId.c_str(), <span class="stringliteral">&quot;substanceUnits&quot;</span>, <span class="stringliteral">&quot;kinetic law of the reaction&quot;</span>, pReaction-&gt;getId().c_str());</div>
<div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;                }</div>
<div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;</div>
<div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;                {</div>
<div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160;                  std::pair&lt;CModel::QuantityUnit, bool&gt; result = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aab3ad9f948cb55e9cb589d2b0bb3c934">handleSubstanceUnit</a>(pUdef1);</div>
<div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;</div>
<div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160;                  <span class="keywordflow">if</span> (result.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;                    {</div>
<div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;                      <span class="comment">// we did not recognize the unit</span></div>
<div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;                      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 79, <span class="stringliteral">&quot;substance&quot;</span>, <span class="stringliteral">&quot;the kinetic law in reaction&quot;</span>, pReaction-&gt;getId().c_str());</div>
<div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;</div>
<div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;                      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;                    }</div>
<div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160;                }</div>
<div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;</div>
<div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;              <span class="keywordflow">if</span> (unitId != <span class="stringliteral">&quot;substance&quot;</span> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pSubstanceUnits, pUdef1))</div>
<div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;                {</div>
<div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;                  nonDefaultKineticSubstance.push_back(pReaction-&gt;getId());</div>
<div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;                }</div>
<div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;</div>
<div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;              <span class="keywordflow">if</span> (lastUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;                {</div>
<div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;                  lastUnit = unitId;</div>
<div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160;                }</div>
<div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId != lastUnit)</div>
<div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;                {</div>
<div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;                  <span class="comment">// check if the two units have identical definitions</span></div>
<div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;                  UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastUnit, pSBMLModel);</div>
<div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;                  assert(pUdef2 != NULL);</div>
<div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;</div>
<div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pUdef1, pUdef2))</div>
<div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;                    {</div>
<div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;                      inconsistentUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;                    }</div>
<div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;</div>
<div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;                  <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;                }</div>
<div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;</div>
<div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;              <span class="keyword">delete</span> pUdef1;</div>
<div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;            }</div>
<div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastUnit == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;            {</div>
<div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;              lastUnit = <span class="stringliteral">&quot;substance&quot;</span>;</div>
<div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;            }</div>
<div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;</div>
<div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;          <span class="keywordflow">if</span> (pKineticLaw-&gt;isSetTimeUnits())</div>
<div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;            {</div>
<div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;              unitId = pKineticLaw-&gt;getTimeUnits();</div>
<div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;              UnitDefinition* pUdef1 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(unitId, pSBMLModel);</div>
<div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;</div>
<div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;              <span class="keywordflow">if</span> (pUdef1 == NULL)</div>
<div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160;                {</div>
<div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;                  <span class="comment">// error message</span></div>
<div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 55, unitId.c_str(), <span class="stringliteral">&quot;timeUnits&quot;</span>, <span class="stringliteral">&quot;kinetic law of the reaction&quot;</span>, pReaction-&gt;getId().c_str());</div>
<div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;                }</div>
<div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160;                {</div>
<div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;                  std::pair&lt;CModel::TimeUnit, bool&gt; result = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">handleTimeUnit</a>(pUdef1);</div>
<div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;</div>
<div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;                  <span class="keywordflow">if</span> (result.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;                    {</div>
<div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;                      <span class="comment">// we did not recognize the unit</span></div>
<div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;                      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 79, <span class="stringliteral">&quot;time&quot;</span>, <span class="stringliteral">&quot;the kinetic law in reaction&quot;</span>, pReaction-&gt;getId().c_str());</div>
<div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;</div>
<div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;                      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;                    }</div>
<div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;                }</div>
<div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;</div>
<div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160;              <span class="keywordflow">if</span> (unitId != <span class="stringliteral">&quot;time&quot;</span> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pTimeUnits, pUdef1))</div>
<div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;                {</div>
<div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;                  nonDefaultKineticTime.push_back(pReaction-&gt;getId());</div>
<div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;                }</div>
<div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;</div>
<div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;              <span class="keywordflow">if</span> (lastTimeUnits == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;                {</div>
<div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;                  lastTimeUnits = unitId;</div>
<div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;                }</div>
<div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId != lastTimeUnits)</div>
<div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;                {</div>
<div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;                  <span class="comment">// check if the two units have identical definitions</span></div>
<div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;                  UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastTimeUnits, pSBMLModel);</div>
<div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;                  assert(pUdef2 != NULL);</div>
<div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;</div>
<div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pUdef1, pUdef2))</div>
<div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;                    {</div>
<div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;                      inconsistentTimeUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;                    }</div>
<div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;</div>
<div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;                  <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;                }</div>
<div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;</div>
<div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;              <span class="keyword">delete</span> pUdef1;</div>
<div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;            }</div>
<div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastTimeUnits == <span class="stringliteral">&quot;&quot;</span>) <span class="comment">// set the last time unit to time</span></div>
<div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;            {</div>
<div class="line"><a name="l08085"></a><span class="lineno"> 8085</span>&#160;              lastTimeUnits = <span class="stringliteral">&quot;time&quot;</span>;</div>
<div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160;            }</div>
<div class="line"><a name="l08087"></a><span class="lineno"> 8087</span>&#160;        }</div>
<div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160;    }</div>
<div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;</div>
<div class="line"><a name="l08090"></a><span class="lineno"> 8090</span>&#160;  <span class="keywordflow">if</span> (!inconsistentUnits &amp;&amp; lastUnit != <span class="stringliteral">&quot;&quot;</span> &amp;&amp; lastUnit != <span class="stringliteral">&quot;substance&quot;</span>)</div>
<div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160;    {</div>
<div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160;      <span class="comment">// we have to check if lastUnit is different from the global substance</span></div>
<div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160;      <span class="comment">// unit</span></div>
<div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160;      <span class="comment">// if it differs, we have to issue a warning because we can&#39;t just set</span></div>
<div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160;      <span class="comment">// another global substance unit since this would change the units for</span></div>
<div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;      <span class="comment">// the kinetic laws</span></div>
<div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;      UnitDefinition* pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastUnit, pSBMLModel);</div>
<div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;      <span class="keyword">const</span> UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;substance&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;      assert(pUdef2 != NULL);</div>
<div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;      assert(pUdef != NULL);</div>
<div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;</div>
<div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pUdef, pUdef2))</div>
<div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;        {</div>
<div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;          <span class="comment">// warning</span></div>
<div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 78 , <span class="stringliteral">&quot;substance&quot;</span>, <span class="stringliteral">&quot;substance&quot;</span>, <span class="stringliteral">&quot;substance&quot;</span>);</div>
<div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;        }</div>
<div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;</div>
<div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;      <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160;      <span class="keyword">delete</span> pUdef;</div>
<div class="line"><a name="l08110"></a><span class="lineno"> 8110</span>&#160;    }</div>
<div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;</div>
<div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;  <span class="keywordflow">if</span> (inconsistentUnits)</div>
<div class="line"><a name="l08113"></a><span class="lineno"> 8113</span>&#160;    {</div>
<div class="line"><a name="l08114"></a><span class="lineno"> 8114</span>&#160;      <span class="comment">// warn about inconsistent units and that they have been ignored</span></div>
<div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160;      <span class="comment">// one warning SBML + 25 for each species in nonDefaultSpecies</span></div>
<div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;      <span class="comment">// and one for each KineticLaw in nonDefaultKineticSubstance</span></div>
<div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;      std::vector&lt;std::string&gt;::iterator errorIt = nonDefaultSpecies.begin(), errorEndit = nonDefaultSpecies.end();</div>
<div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;      std::ostringstream os;</div>
<div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;</div>
<div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160;      <span class="keywordflow">while</span> (errorIt != errorEndit)</div>
<div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;        {</div>
<div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;          os &lt;&lt; *errorIt &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;          ++errorIt;</div>
<div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;        }</div>
<div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160;</div>
<div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;      std::string s = os.str();</div>
<div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 25 , s.substr(0, s.size() - 2).c_str());</div>
<div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;      os.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160;      errorIt = nonDefaultKineticSubstance.begin(), errorEndit = nonDefaultKineticSubstance.end();</div>
<div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;</div>
<div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;      <span class="keywordflow">while</span> (errorIt != errorEndit)</div>
<div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160;        {</div>
<div class="line"><a name="l08133"></a><span class="lineno"> 8133</span>&#160;          os &lt;&lt; *errorIt &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l08134"></a><span class="lineno"> 8134</span>&#160;          ++errorIt;</div>
<div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;        }</div>
<div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160;</div>
<div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160;      s = os.str();</div>
<div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 44 , s.substr(0, s.size() - 2).c_str());</div>
<div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160;    }</div>
<div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160;</div>
<div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160;  <span class="keywordflow">if</span> (!inconsistentTimeUnits &amp;&amp; lastTimeUnits != <span class="stringliteral">&quot;&quot;</span> &amp;&amp; lastTimeUnits != <span class="stringliteral">&quot;time&quot;</span>)</div>
<div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;    {</div>
<div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160;      <span class="comment">// we have to check if lastUnit is different from the global substance</span></div>
<div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;      <span class="comment">// unit</span></div>
<div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160;      <span class="comment">// if it differs, we have to issue a warning because we can&#39;t just set</span></div>
<div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;      <span class="comment">// another global substance unit since this would change the units for</span></div>
<div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160;      <span class="comment">// the kinetic laws</span></div>
<div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160;      UnitDefinition* pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastTimeUnits, pSBMLModel);</div>
<div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160;      <span class="keyword">const</span> UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(<span class="stringliteral">&quot;time&quot;</span>, pSBMLModel);</div>
<div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160;      assert(pUdef2 != NULL);</div>
<div class="line"><a name="l08151"></a><span class="lineno"> 8151</span>&#160;      assert(pUdef != NULL);</div>
<div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160;</div>
<div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pUdef, pUdef2))</div>
<div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;        {</div>
<div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160;          <span class="comment">// warning</span></div>
<div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 78 , <span class="stringliteral">&quot;time&quot;</span>, <span class="stringliteral">&quot;time&quot;</span>, <span class="stringliteral">&quot;time&quot;</span>);</div>
<div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;        }</div>
<div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160;</div>
<div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160;      <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;    }</div>
<div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;</div>
<div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;  <span class="keywordflow">if</span> (inconsistentTimeUnits)</div>
<div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;    {</div>
<div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;      <span class="comment">// warn about inconsistent time unit</span></div>
<div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;      <span class="comment">// one error for each entry in nonDefaultKineticTime</span></div>
<div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;      std::ostringstream os;</div>
<div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160;      std::vector&lt;std::string&gt;::iterator errorIt = nonDefaultKineticTime.begin(), errorEndit = nonDefaultKineticTime.end();</div>
<div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;</div>
<div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;      <span class="keywordflow">while</span> (errorIt != errorEndit)</div>
<div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160;        {</div>
<div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;          os &lt;&lt; *errorIt &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160;          ++errorIt;</div>
<div class="line"><a name="l08173"></a><span class="lineno"> 8173</span>&#160;        }</div>
<div class="line"><a name="l08174"></a><span class="lineno"> 8174</span>&#160;</div>
<div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160;      std::string s = os.str();</div>
<div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 53, s.substr(0, s.size() - 2).c_str());</div>
<div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;    }</div>
<div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;</div>
<div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160;  <span class="comment">// delete the units we created</span></div>
<div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160;  <span class="keyword">delete</span> pSubstanceUnits;</div>
<div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;  <span class="keyword">delete</span> pVolumeUnits;</div>
<div class="line"><a name="l08182"></a><span class="lineno"> 8182</span>&#160;  <span class="keyword">const</span> Event* pEvent = NULL;</div>
<div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160;  inconsistentTimeUnits = <span class="keyword">false</span>;</div>
<div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;  iMax = pSBMLModel-&gt;getNumEvents();</div>
<div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;</div>
<div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;    {</div>
<div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;      pEvent = pSBMLModel-&gt;getEvent(i);</div>
<div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;      std::string unitId;</div>
<div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;</div>
<div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160;      <span class="keywordflow">if</span> (pEvent-&gt;isSetTimeUnits())</div>
<div class="line"><a name="l08192"></a><span class="lineno"> 8192</span>&#160;        {</div>
<div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160;          unitId = pEvent-&gt;getTimeUnits();</div>
<div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160;          UnitDefinition* pUdef1 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(unitId, pSBMLModel);</div>
<div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160;</div>
<div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160;          <span class="keywordflow">if</span> (pUdef1 == NULL)</div>
<div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;            {</div>
<div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160;              <span class="comment">// error message</span></div>
<div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 55, unitId.c_str(), <span class="stringliteral">&quot;time units&quot;</span>, <span class="stringliteral">&quot;the event&quot;</span>, pEvent-&gt;getId().c_str());</div>
<div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;            }</div>
<div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160;</div>
<div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;            {</div>
<div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160;              std::pair&lt;CModel::TimeUnit, bool&gt; result = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">handleTimeUnit</a>(pUdef1);</div>
<div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;</div>
<div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160;              <span class="keywordflow">if</span> (result.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160;                {</div>
<div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;                  <span class="comment">// we did not recognize the unit</span></div>
<div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 79, <span class="stringliteral">&quot;time&quot;</span>, <span class="stringliteral">&quot;the event&quot;</span>, pEvent-&gt;getId().c_str());</div>
<div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;</div>
<div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;                  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;                }</div>
<div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160;            }</div>
<div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160;</div>
<div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160;          <span class="keywordflow">if</span> (unitId != <span class="stringliteral">&quot;time&quot;</span> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pTimeUnits, pUdef1))</div>
<div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160;            {</div>
<div class="line"><a name="l08217"></a><span class="lineno"> 8217</span>&#160;              <span class="keywordflow">if</span> (pEvent-&gt;isSetId())</div>
<div class="line"><a name="l08218"></a><span class="lineno"> 8218</span>&#160;                {</div>
<div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160;                  nonDefaultEventTime.push_back(pEvent-&gt;getId());</div>
<div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;                }</div>
<div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160;            }</div>
<div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;</div>
<div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160;          <span class="keywordflow">if</span> (lastTimeUnits == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l08224"></a><span class="lineno"> 8224</span>&#160;            {</div>
<div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160;              lastTimeUnits = unitId;</div>
<div class="line"><a name="l08226"></a><span class="lineno"> 8226</span>&#160;            }</div>
<div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId != lastTimeUnits)</div>
<div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160;            {</div>
<div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;              <span class="comment">// check if the two units have identical definitions</span></div>
<div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160;              UnitDefinition* pUdef2 = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastTimeUnits, pSBMLModel);</div>
<div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;              assert(pUdef2 != NULL);</div>
<div class="line"><a name="l08232"></a><span class="lineno"> 8232</span>&#160;</div>
<div class="line"><a name="l08233"></a><span class="lineno"> 8233</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pUdef1, pUdef2))</div>
<div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160;                {</div>
<div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;                  inconsistentTimeUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;                }</div>
<div class="line"><a name="l08237"></a><span class="lineno"> 8237</span>&#160;</div>
<div class="line"><a name="l08238"></a><span class="lineno"> 8238</span>&#160;              <span class="keyword">delete</span> pUdef2;</div>
<div class="line"><a name="l08239"></a><span class="lineno"> 8239</span>&#160;            }</div>
<div class="line"><a name="l08240"></a><span class="lineno"> 8240</span>&#160;</div>
<div class="line"><a name="l08241"></a><span class="lineno"> 8241</span>&#160;          <span class="keyword">delete</span> pUdef1;</div>
<div class="line"><a name="l08242"></a><span class="lineno"> 8242</span>&#160;        }</div>
<div class="line"><a name="l08243"></a><span class="lineno"> 8243</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lastTimeUnits == <span class="stringliteral">&quot;&quot;</span>) <span class="comment">// set the last time unit to time</span></div>
<div class="line"><a name="l08244"></a><span class="lineno"> 8244</span>&#160;        {</div>
<div class="line"><a name="l08245"></a><span class="lineno"> 8245</span>&#160;          lastTimeUnits = <span class="stringliteral">&quot;time&quot;</span>;</div>
<div class="line"><a name="l08246"></a><span class="lineno"> 8246</span>&#160;        }</div>
<div class="line"><a name="l08247"></a><span class="lineno"> 8247</span>&#160;    }</div>
<div class="line"><a name="l08248"></a><span class="lineno"> 8248</span>&#160;</div>
<div class="line"><a name="l08249"></a><span class="lineno"> 8249</span>&#160;  <span class="keywordflow">if</span> (!inconsistentTimeUnits &amp;&amp; lastTimeUnits != <span class="stringliteral">&quot;&quot;</span> &amp;&amp; lastTimeUnits != <span class="stringliteral">&quot;time&quot;</span>)</div>
<div class="line"><a name="l08250"></a><span class="lineno"> 8250</span>&#160;    {</div>
<div class="line"><a name="l08251"></a><span class="lineno"> 8251</span>&#160;      <span class="comment">// try to set the default time units</span></div>
<div class="line"><a name="l08252"></a><span class="lineno"> 8252</span>&#160;      UnitDefinition* pUdef = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">getSBMLUnitDefinitionForId</a>(lastTimeUnits, pSBMLModel);</div>
<div class="line"><a name="l08253"></a><span class="lineno"> 8253</span>&#160;      assert(pUdef != NULL);</div>
<div class="line"><a name="l08254"></a><span class="lineno"> 8254</span>&#160;      std::pair&lt;CModel::TimeUnit, bool&gt; time = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">handleTimeUnit</a>(pUdef);</div>
<div class="line"><a name="l08255"></a><span class="lineno"> 8255</span>&#160;      <span class="keyword">delete</span> pUdef;</div>
<div class="line"><a name="l08256"></a><span class="lineno"> 8256</span>&#160;</div>
<div class="line"><a name="l08257"></a><span class="lineno"> 8257</span>&#160;      <span class="keywordflow">if</span> (time.second == <span class="keyword">true</span>)</div>
<div class="line"><a name="l08258"></a><span class="lineno"> 8258</span>&#160;        {</div>
<div class="line"><a name="l08259"></a><span class="lineno"> 8259</span>&#160;          <span class="comment">// set the default volume unit</span></div>
<div class="line"><a name="l08260"></a><span class="lineno"> 8260</span>&#160;          pCopasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa34037c16dc088443d60144aafc20efe">setTimeUnit</a>(time.first);</div>
<div class="line"><a name="l08261"></a><span class="lineno"> 8261</span>&#160;        }</div>
<div class="line"><a name="l08262"></a><span class="lineno"> 8262</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l08263"></a><span class="lineno"> 8263</span>&#160;        {</div>
<div class="line"><a name="l08264"></a><span class="lineno"> 8264</span>&#160;          inconsistentTimeUnits = <span class="keyword">true</span>;</div>
<div class="line"><a name="l08265"></a><span class="lineno"> 8265</span>&#160;        }</div>
<div class="line"><a name="l08266"></a><span class="lineno"> 8266</span>&#160;    }</div>
<div class="line"><a name="l08267"></a><span class="lineno"> 8267</span>&#160;</div>
<div class="line"><a name="l08268"></a><span class="lineno"> 8268</span>&#160;  <span class="keywordflow">if</span> (inconsistentTimeUnits)</div>
<div class="line"><a name="l08269"></a><span class="lineno"> 8269</span>&#160;    {</div>
<div class="line"><a name="l08270"></a><span class="lineno"> 8270</span>&#160;      <span class="comment">// warn about inconsistent time unit</span></div>
<div class="line"><a name="l08271"></a><span class="lineno"> 8271</span>&#160;      <span class="comment">// one error for each entry in nonDefaultKineticTime</span></div>
<div class="line"><a name="l08272"></a><span class="lineno"> 8272</span>&#160;      std::ostringstream os;</div>
<div class="line"><a name="l08273"></a><span class="lineno"> 8273</span>&#160;      std::vector&lt;std::string&gt;::iterator errorIt = nonDefaultEventTime.begin(), errorEndit = nonDefaultEventTime.end();</div>
<div class="line"><a name="l08274"></a><span class="lineno"> 8274</span>&#160;</div>
<div class="line"><a name="l08275"></a><span class="lineno"> 8275</span>&#160;      <span class="keywordflow">while</span> (errorIt != errorEndit)</div>
<div class="line"><a name="l08276"></a><span class="lineno"> 8276</span>&#160;        {</div>
<div class="line"><a name="l08277"></a><span class="lineno"> 8277</span>&#160;          os &lt;&lt; *errorIt &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l08278"></a><span class="lineno"> 8278</span>&#160;          ++errorIt;</div>
<div class="line"><a name="l08279"></a><span class="lineno"> 8279</span>&#160;        }</div>
<div class="line"><a name="l08280"></a><span class="lineno"> 8280</span>&#160;</div>
<div class="line"><a name="l08281"></a><span class="lineno"> 8281</span>&#160;      std::string s = os.str();</div>
<div class="line"><a name="l08282"></a><span class="lineno"> 8282</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 53, s.substr(0, s.size() - 2).c_str());</div>
<div class="line"><a name="l08283"></a><span class="lineno"> 8283</span>&#160;    }</div>
<div class="line"><a name="l08284"></a><span class="lineno"> 8284</span>&#160;</div>
<div class="line"><a name="l08285"></a><span class="lineno"> 8285</span>&#160;  <span class="comment">// delete the units we created</span></div>
<div class="line"><a name="l08286"></a><span class="lineno"> 8286</span>&#160;  <span class="keyword">delete</span> pTimeUnits;</div>
<div class="line"><a name="l08287"></a><span class="lineno"> 8287</span>&#160;  <span class="keyword">delete</span> pDimensionlessUnits;</div>
<div class="line"><a name="l08288"></a><span class="lineno"> 8288</span>&#160;  <span class="keyword">delete</span> pLengthUnits;</div>
<div class="line"><a name="l08289"></a><span class="lineno"> 8289</span>&#160;  <span class="keyword">delete</span> pAreaUnits;</div>
<div class="line"><a name="l08290"></a><span class="lineno"> 8290</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_aaf9850d5d4c3e287eb624ea7821682b2"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">SBMLImporter::handleTimeUnit</a></div><div class="ttdeci">std::pair&lt; CModel::TimeUnit, bool &gt; handleTimeUnit(const UnitDefinition *uDef)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l03730">SBMLImporter.cpp:3730</a></div></div>
<div class="ttc" id="classCModel_html_ad521de8c5143f698fffae30b37085857"><div class="ttname"><a href="../../d4/d04/classCModel.html#ad521de8c5143f698fffae30b37085857">CModel::setAreaUnit</a></div><div class="ttdeci">bool setAreaUnit(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02182">CModel.cpp:2182</a></div></div>
<div class="ttc" id="classCModel_html_aa5f3b07a92ea3dbb3344bbaef2fc8253"><div class="ttname"><a href="../../d4/d04/classCModel.html#aa5f3b07a92ea3dbb3344bbaef2fc8253">CModel::setVolumeUnit</a></div><div class="ttdeci">bool setVolumeUnit(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02159">CModel.cpp:2159</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22ca70b8ea66d8daf842df307ade4b829a4a"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca70b8ea66d8daf842df307ade4b829a4a">CModel::dimensionlessLength</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="classCModel_html_afcd4a2210cc887e066ac755a550e7ec4"><div class="ttname"><a href="../../d4/d04/classCModel.html#afcd4a2210cc887e066ac755a550e7ec4">CModel::setLengthUnit</a></div><div class="ttdeci">bool setLengthUnit(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02204">CModel.cpp:2204</a></div></div>
<div class="ttc" id="classCModel_html_aa34037c16dc088443d60144aafc20efe"><div class="ttname"><a href="../../d4/d04/classCModel.html#aa34037c16dc088443d60144aafc20efe">CModel::setTimeUnit</a></div><div class="ttdeci">bool setTimeUnit(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02227">CModel.cpp:2227</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8dac2cc47ee18f413bdc5075467b65188c4"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dac2cc47ee18f413bdc5075467b65188c4">CModel::dimensionlessVolume</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aab3ad9f948cb55e9cb589d2b0bb3c934"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aab3ad9f948cb55e9cb589d2b0bb3c934">SBMLImporter::handleSubstanceUnit</a></div><div class="ttdeci">std::pair&lt; CModel::QuantityUnit, bool &gt; handleSubstanceUnit(const UnitDefinition *uDef)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l03552">SBMLImporter.cpp:3552</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960ae6554a259f0340a38ecdc4c10eea4283"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ae6554a259f0340a38ecdc4c10eea4283">CModel::dimensionlessArea</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a47c92998532c601a66df4fae4e5a8b2d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">SBMLImporter::handleAreaUnit</a></div><div class="ttdeci">std::pair&lt; CModel::AreaUnit, bool &gt; handleAreaUnit(const UnitDefinition *uDef)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04073">SBMLImporter.cpp:4073</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2511a51a2a17ac94c63dcf719f18f779"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2511a51a2a17ac94c63dcf719f18f779">SBMLImporter::getSBMLUnitDefinitionForId</a></div><div class="ttdeci">static UnitDefinition * getSBMLUnitDefinitionForId(const std::string &amp;unitId, const Model *pSBMLModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l08400">SBMLImporter.cpp:8400</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ac63af5c9fb48fdfac1fc3317954dca1f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">SBMLImporter::handleLengthUnit</a></div><div class="ttdeci">std::pair&lt; CModel::LengthUnit, bool &gt; handleLengthUnit(const UnitDefinition *uDef)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l03926">SBMLImporter.cpp:3926</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa1aca4da87cb2a912a7f27e0a21e6359"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">SBMLImporter::handleVolumeUnit</a></div><div class="ttdeci">std::pair&lt; CModel::VolumeUnit, bool &gt; handleVolumeUnit(const UnitDefinition *uDef)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04220">SBMLImporter.cpp:4220</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a61d10c15681b398f297bee71eaa75dbe"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">SBMLImporter::areSBMLUnitDefinitionsIdentical</a></div><div class="ttdeci">static bool areSBMLUnitDefinitionsIdentical(const UnitDefinition *pUdef1, const UnitDefinition *pUdef2)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l08297">SBMLImporter.cpp:8297</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6d9048bf3ddc66ce0304345a54f6fa2f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::checkRuleMathConsistency </td>
          <td>(</td>
          <td class="paramtype">const Rule *&#160;</td>
          <td class="paramname"><em>pRule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks the expression for a give rate or assignment rule for consistency. This basically means it checks that no id present in the expression is the target for one of the following rate or assignment rules. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06793">6793</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">findIdInASTTree()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5ac2addc8f38864b9b616830635b110a">getIdsFromNode()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a54e987b86e2c598008f5013b16eacc35">importRuleForModelEntity()</a>.</p>
<div class="fragment"><div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;{</div>
<div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;  <span class="comment">// only check if Level2 Version1</span></div>
<div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 2 &amp;&amp; this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a> == 1)</div>
<div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;    {</div>
<div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;      <span class="comment">// check if no nodes with ids of objects are used in an assignment that are</span></div>
<div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;      <span class="comment">// set in another assignment rule later on</span></div>
<div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;      std::set&lt;std::string&gt; idSet;</div>
<div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;      <span class="keyword">const</span> ASTNode* pNode = pRule-&gt;getMath();</div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5ac2addc8f38864b9b616830635b110a">getIdsFromNode</a>(pNode, idSet);</div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;      Model* sbmlModel = <span class="keyword">dynamic_cast&lt;</span>Model*<span class="keyword">&gt;</span>(copasi2sbmlmap[<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>]);</div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;</div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;      <span class="keywordflow">if</span> (!sbmlModel) <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;</div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = sbmlModel-&gt;getNumRules();</div>
<div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;</div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;        {</div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;          <span class="keywordflow">if</span> (sbmlModel-&gt;getRule(i) == pRule)</div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;            {</div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;            }</div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;        }</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;      Rule* pR;</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;      <span class="keywordtype">int</span> type;</div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;</div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;      <span class="keywordflow">while</span> (i &lt; iMax)</div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;        {</div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;          pR = sbmlModel-&gt;getRule(i);</div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;          type = pR-&gt;getTypeCode();</div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;</div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;          <span class="keywordflow">if</span> (type == SBML_ASSIGNMENT_RULE)</div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;            {</div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;              <span class="keywordflow">if</span> (idSet.find(dynamic_cast&lt;AssignmentRule*&gt;(pR)-&gt;getVariable()) != idSet.end())</div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;                {</div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 37, dynamic_cast&lt;AssignmentRule*&gt;(pR)-&gt;getVariable().c_str());</div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;                }</div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;            }</div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;</div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;          ++i;</div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;        }</div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;</div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;      <span class="comment">// Check if there is a reference to a reaction in the expression</span></div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;      <span class="comment">// This is not allowed for L2V1</span></div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;      <span class="keyword">const</span> ASTNode* pMath = pRule-&gt;getMath();</div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;</div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;      <span class="keywordflow">if</span> (pMath != NULL)</div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;        {</div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;          std::set&lt;std::string&gt; reactionIds;</div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;</div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;          <span class="keywordflow">for</span> (i = 0; i &lt; sbmlModel-&gt;getListOfReactions()-&gt;size(); i++)</div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;            {</div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;              reactionIds.insert(sbmlModel-&gt;getReaction(i)-&gt;getId());</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;            }</div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;</div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;          std::string <span class="keywordtype">id</span> = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a>(pMath, reactionIds);</div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;          <span class="keywordflow">if</span> (!<span class="keywordtype">id</span>.empty())</div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;            {</div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 81, <span class="keywordtype">id</span>.c_str());</div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;            }</div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;        }</div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;    }</div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;</div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;  <span class="comment">// In SBML Level 3 documents,</span></div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 3)</div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;    {</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;      <span class="comment">// TODO we need to check if we have a species reference as the target of</span></div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;      <span class="comment">// TODO a rule because COPASI currently can not handle this and we have</span></div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;      <span class="comment">// TODO to warn the user that we will ignore the rule</span></div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;      <span class="comment">// TODO Likewise we have to check if the id of a species reference is reference in the</span></div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;      <span class="comment">// TODO expression of the rule because this is also not implemented in COPASI yet and</span></div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;      <span class="comment">// TODO we ignore the rule</span></div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;    }</div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a5ac2addc8f38864b9b616830635b110a"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a5ac2addc8f38864b9b616830635b110a">SBMLImporter::getIdsFromNode</a></div><div class="ttdeci">void getIdsFromNode(const ASTNode *pNode, std::set&lt; std::string &gt; &amp;idSet)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06925">SBMLImporter.cpp:6925</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7d741ae7e3799fdc819e689a3dafad86"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">SBMLImporter::mVersion</a></div><div class="ttdeci">unsigned int mVersion</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00065">SBMLImporter.h:65</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2d5ef4903a7ed12d178107ef819b3b66"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a></div><div class="ttdeci">std::string findIdInASTTree(const ASTNode *pMath, const std::set&lt; std::string &gt; &amp;reactionIds)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06900">SBMLImporter.cpp:6900</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acdc9c870d380d660ef11b4389eaf5bc8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::containsVolume </td>
          <td>(</td>
          <td class="paramtype">const ASTNode *&#160;</td>
          <td class="paramname"><em>pNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>compartmentCN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks if the volume with the given CN is one of the parameters to the given call node. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06065">6065</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;{</div>
<div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pNode-&gt;getNumChildren();</div>
<div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;</div>
<div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;    {</div>
<div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;      <span class="keywordflow">if</span> (pNode-&gt;getChild(i)-&gt;getType() == AST_NAME &amp;&amp;</div>
<div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;          pNode-&gt;getChild(i)-&gt;getName() == compartmentSBMLId)</div>
<div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;        {</div>
<div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;          result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;        }</div>
<div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;    }</div>
<div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;</div>
<div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a477bec05f03598fe9c52c95ccb441f88"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Unit * SBMLImporter::convertSBMLCubicmetresToLitres </td>
          <td>(</td>
          <td class="paramtype">const Unit *&#160;</td>
          <td class="paramname"><em>pU</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If the given UnitDefinition can be converted to a form of litre, the function return the UnitDefinition in litre, otherwise NULL is returned. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l08361">8361</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#ae7bb5cbf2f09b5b7ec57510695ed1ec2">normalizeSBMLUnit()</a>, and <a class="el" href="../../d7/de4/CQTSSAResultSubWidget_8cpp.html#a015b908fb74f75922e0bc448af09d9d1">pResult</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit()</a>.</p>
<div class="fragment"><div class="line"><a name="l08362"></a><span class="lineno"> 8362</span>&#160;{</div>
<div class="line"><a name="l08363"></a><span class="lineno"> 8363</span>&#160;  Unit* <a class="code" href="../../d7/de4/CQTSSAResultSubWidget_8cpp.html#a015b908fb74f75922e0bc448af09d9d1">pResult</a> = NULL;</div>
<div class="line"><a name="l08364"></a><span class="lineno"> 8364</span>&#160;</div>
<div class="line"><a name="l08365"></a><span class="lineno"> 8365</span>&#160;  <span class="keywordflow">if</span> (pU != NULL)</div>
<div class="line"><a name="l08366"></a><span class="lineno"> 8366</span>&#160;    {</div>
<div class="line"><a name="l08367"></a><span class="lineno"> 8367</span>&#160;      <span class="keywordflow">if</span> ((pU-&gt;getKind() == UNIT_KIND_METER || pU-&gt;getKind() == UNIT_KIND_METRE) &amp;&amp; pU-&gt;getExponent() % 3 == 0)</div>
<div class="line"><a name="l08368"></a><span class="lineno"> 8368</span>&#160;        {</div>
<div class="line"><a name="l08369"></a><span class="lineno"> 8369</span>&#160;          pResult = <span class="keyword">dynamic_cast&lt;</span>Unit*<span class="keyword">&gt;</span>(pU-&gt;clone());</div>
<div class="line"><a name="l08370"></a><span class="lineno"> 8370</span>&#160;          assert(pResult != NULL);</div>
<div class="line"><a name="l08371"></a><span class="lineno"> 8371</span>&#160;          Unit::removeScale(pResult);</div>
<div class="line"><a name="l08372"></a><span class="lineno"> 8372</span>&#160;          pResult-&gt;setExponent(pResult-&gt;getExponent() / 3);</div>
<div class="line"><a name="l08373"></a><span class="lineno"> 8373</span>&#160;          pResult-&gt;setKind(UNIT_KIND_LITRE);</div>
<div class="line"><a name="l08374"></a><span class="lineno"> 8374</span>&#160;          pResult-&gt;setMultiplier(pow(pResult-&gt;getMultiplier(), 3));</div>
<div class="line"><a name="l08375"></a><span class="lineno"> 8375</span>&#160;          <a class="code" href="../../d7/d6d/classSBMLImporter.html#ae7bb5cbf2f09b5b7ec57510695ed1ec2">normalizeSBMLUnit</a>(pResult);</div>
<div class="line"><a name="l08376"></a><span class="lineno"> 8376</span>&#160;        }</div>
<div class="line"><a name="l08377"></a><span class="lineno"> 8377</span>&#160;    }</div>
<div class="line"><a name="l08378"></a><span class="lineno"> 8378</span>&#160;</div>
<div class="line"><a name="l08379"></a><span class="lineno"> 8379</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d7/de4/CQTSSAResultSubWidget_8cpp.html#a015b908fb74f75922e0bc448af09d9d1">pResult</a>;</div>
<div class="line"><a name="l08380"></a><span class="lineno"> 8380</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_ae7bb5cbf2f09b5b7ec57510695ed1ec2"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ae7bb5cbf2f09b5b7ec57510695ed1ec2">SBMLImporter::normalizeSBMLUnit</a></div><div class="ttdeci">static void normalizeSBMLUnit(Unit *pU)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l08386">SBMLImporter.cpp:8386</a></div></div>
<div class="ttc" id="CQTSSAResultSubWidget_8cpp_html_a015b908fb74f75922e0bc448af09d9d1"><div class="ttname"><a href="../../d7/de4/CQTSSAResultSubWidget_8cpp.html#a015b908fb74f75922e0bc448af09d9d1">pResult</a></div><div class="ttdeci">const CArrayAnnotation * pResult</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de4/CQTSSAResultSubWidget_8cpp_source.html#l00028">CQTSSAResultSubWidget.cpp:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a40d19d3a6cbe2fc34b1136644c3274cb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; std::string, ASTNode * &gt; SBMLImporter::createBVarMap </td>
          <td>(</td>
          <td class="paramtype">const ASTNode *&#160;</td>
          <td class="paramname"><em>uDefFunction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ASTNode *&#160;</td>
          <td class="paramname"><em>function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a map of each parameter of the function definition and its corresponding parameter in the function call. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l02953">2953</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>.</p>
<div class="fragment"><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;{</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  <span class="comment">/* the first n-1 children, where n is the number of children, of a function definition ASTnode are the</span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="comment">   * arguments to the function. These correspond to the m=n-1 children of the</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="comment">   * function call.</span></div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;  <span class="keywordflow">if</span> (uDefFunction-&gt;getNumChildren() != <span class="keyword">function</span>-&gt;getNumChildren() + 1)</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    {</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;      std::string functionName = uDefFunction-&gt;getName();</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    }</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;  std::map&lt;std::string, ASTNode*&gt; varMap;</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; uDefFunction-&gt;getNumChildren() - 1; counter++)</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    {</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      varMap[uDefFunction-&gt;getChild(counter)-&gt;getName()] = <span class="keyword">function</span>-&gt;getChild(counter);</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    }</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  <span class="keywordflow">return</span> varMap;</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;}</div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a879076815531affcbd0768f405f76475"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/dd4/classCCompartment.html">CCompartment</a> * SBMLImporter::createCCompartmentFromCompartment </td>
          <td>(</td>
          <td class="paramtype">const Compartment *&#160;</td>
          <td class="paramname"><em>sbmlCompartment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>copasiModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates and returns a COPASI <a class="el" href="../../d4/dd4/classCCompartment.html">CCompartment</a> from the SBML Compartment given as argument. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l01950">1950</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../d4/d04/classCModel.html#a6c2bc3c979cfd1f35cda43d68f4ea90a">CModel::createCompartment()</a>, <a class="el" href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">CModel::getCompartments()</a>, <a class="el" href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">CCopasiVectorN&lt; CType &gt;::getIndex()</a>, <a class="el" href="../../d9/dfd/classCCopasiContainer.html#a8185966cacebee7313043d0987acaff5">CCopasiContainer::getUnits()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">importMIRIAM()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">importNotes()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d4/dd4/classCCompartment.html#a272196545adc2e4ac69e004a8dff18ed">CCompartment::setDimensionality()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">CModelEntity::setSBMLId()</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;{</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <span class="keywordflow">if</span> (sbmlCompartment-&gt;isSetUnits())</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    {</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      std::string cU = sbmlCompartment-&gt;getUnits();</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    }</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dimensionality = 3;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="keywordflow">if</span> (sbmlCompartment-&gt;isSetSpatialDimensions())</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    {</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      dimensionality = sbmlCompartment-&gt;getSpatialDimensions();</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      <span class="comment">// starting with SBML Level 3, the spatial dimensions of a compartment can be</span></div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      <span class="comment">// any rational number</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      <span class="keywordtype">double</span> dDimensionality = sbmlCompartment-&gt;getSpatialDimensions();</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        {</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;          dDimensionality = sbmlCompartment-&gt;getSpatialDimensionsAsDouble();</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;      <span class="comment">// check if the unsigned int dimensionality corresponds to the double</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      <span class="comment">// dimensionality, otherwise give an error message</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      <span class="comment">// Actually if we wanted to be correct, we would have to check if the</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      <span class="comment">// part before the komma also matches and maybe have a separate error message if not</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      dDimensionality -= dimensionality;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <span class="keywordflow">if</span> (fabs(dDimensionality) &gt; 1e-9)</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        {</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 89, sbmlCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;          dimensionality = 3;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        }</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    }</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    {</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 90, sbmlCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;      dimensionality = 3;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    }</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="keywordflow">if</span> (dimensionality &gt; 3)</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    {</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>,</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                             <span class="stringliteral">&quot;Reaction with id \&quot;%s\&quot; has dimensions of %d, this is not supported by COPASI. COPASI will assume that the compartment is three dimensional.&quot;</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                             , sbmlCompartment-&gt;getId().c_str(), dimensionality);</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      dimensionality = 3;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;      <span class="comment">//fatalError();</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    }</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  std::string name = sbmlCompartment-&gt;getName();</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      name = sbmlCompartment-&gt;getId();</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  std::string appendix = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter = 2;</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  std::ostringstream numberStream;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <span class="keywordflow">while</span> (copasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">getCompartments</a>().<a class="code" href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">getIndex</a>(name + appendix) != <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>)</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    {</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      numberStream.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;      numberStream &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; counter;</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      counter++;</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      appendix = numberStream.str();</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    }</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="keywordtype">double</span> value;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <a class="code" href="../../d4/dd4/classCCompartment.html">CCompartment</a>* copasiCompartment = copasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#a6c2bc3c979cfd1f35cda43d68f4ea90a">createCompartment</a>(name + appendix, value);</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    {</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;      copasiCompartment-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">setSBMLId</a>(sbmlCompartment-&gt;getName());</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    }</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    {</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;      copasiCompartment-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">setSBMLId</a>(sbmlCompartment-&gt;getId());</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    }</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;  <span class="comment">// set the dimension of the compartment</span></div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  copasiCompartment-&gt;<a class="code" href="../../d4/dd4/classCCompartment.html#a272196545adc2e4ac69e004a8dff18ed">setDimensionality</a>(dimensionality);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  <span class="comment">//DebugFile &lt;&lt; &quot;Created Compartment: &quot; &lt;&lt; copasiCompartment-&gt;getObjectName() &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a>(sbmlCompartment, copasiCompartment);</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a>(copasiCompartment, sbmlCompartment);</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  copasi2sbmlmap[copasiCompartment] = <span class="keyword">const_cast&lt;</span>Compartment*<span class="keyword">&gt;</span>(sbmlCompartment);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <span class="keywordflow">return</span> copasiCompartment;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classCCompartment_html_a272196545adc2e4ac69e004a8dff18ed"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html#a272196545adc2e4ac69e004a8dff18ed">CCompartment::setDimensionality</a></div><div class="ttdeci">bool setDimensionality(unsigned C_INT32 dim)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/CCompartment_8cpp_source.html#l00195">CCompartment.cpp:195</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classCCopasiVectorN_html_a3588b566dfda5b5a4fc570936abf7c0a"><div class="ttname"><a href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">CCopasiVectorN::getIndex</a></div><div class="ttdeci">virtual size_t getIndex(const std::string &amp;name) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00774">CCopasiVector.h:774</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_ad39689ede4b80c944660201e94c52705"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a></div><div class="ttdeci">struct MESSAGES Message</div></div>
<div class="ttc" id="classCCompartment_html"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html">CCompartment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d59/CCompartment_8h_source.html#l00037">CCompartment.h:37</a></div></div>
<div class="ttc" id="classCModel_html_a7d405db8dc8120b942aa0ec1e80db399"><div class="ttname"><a href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">CModel::getCompartments</a></div><div class="ttdeci">CCopasiVectorNS&lt; CCompartment &gt; &amp; getCompartments()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01145">CModel.cpp:1145</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aab2342964defac3d15b32eed20211e13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a></div><div class="ttdeci">bool importMIRIAM(const SBase *pSBMLObject, CCopasiObject *pCOPASIObject)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09225">SBMLImporter.cpp:9225</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2b5d21dd508be56977f4d2c642d89fa5"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a></div><div class="ttdeci">static bool importNotes(CAnnotation *pAnno, const SBase *pSBase)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10586">SBMLImporter.cpp:10586</a></div></div>
<div class="ttc" id="classCModelEntity_html_a9bfa78ba4485c77792c9cac3dfb3ac2e"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">CModelEntity::setSBMLId</a></div><div class="ttdeci">void setSBMLId(const std::string &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00632">CModelValue.cpp:632</a></div></div>
<div class="ttc" id="classCModel_html_a6c2bc3c979cfd1f35cda43d68f4ea90a"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6c2bc3c979cfd1f35cda43d68f4ea90a">CModel::createCompartment</a></div><div class="ttdeci">CCompartment * createCompartment(const std::string &amp;name, const C_FLOAT64 &amp;volume=1.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02698">CModel.cpp:2698</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a544798333f64b9a371d9add67076172d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> * SBMLImporter::createCFunctionFromFunctionDefinition </td>
          <td>(</td>
          <td class="paramtype">const FunctionDefinition *&#160;</td>
          <td class="paramname"><em>sbmlFunction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *&#160;</td>
          <td class="paramname"><em>pTmpFunctionDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates and returns a COPASI <a class="el" href="../../d9/d86/classCFunction.html" title="The class for handling a chemical kinetic function. ">CFunction</a> from the SBML FunctionDefinition given as argument. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l01727">1727</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../db/d9a/classCFunctionDB.html#af425d76a956e07032c2ab0428b3ea1ca">CFunctionDB::add()</a>, <a class="el" href="../../df/dfd/SBMLImporter_8cpp.html#a858ae0326d3e2ff344469c1d352b592d">addToKnownFunctionToMap()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a41bd8f0562db3137b54c8f595a9b5f5c">areEqualFunctions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8635efa2b753c28b33f29f8f44b12161">createCFunctionFromFunctionTree()</a>, <a class="el" href="../../df/dfd/SBMLImporter_8cpp.html#a12f47bbd0539a7ca18026f3c73cf48e8">ensureAllArgsAreBeingUsedInFunctionDefinition()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>, <a class="el" href="../../d9/d86/classCFunction.html#a8dca3a504b45b55d7af0ba49a2e9a9a0">CFunction::getSBMLId()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">CEvaluationTree::getType()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">importMIRIAM()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">importNotes()</a>, <a class="el" href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">CFunctionDB::loadedFunctions()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">mKnownCustomUserDefinedFunctions</a>, <a class="el" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">CCopasiObject::setObjectName()</a>, <a class="el" href="../../d9/d86/classCFunction.html#af9762a77d28da2757878f1218ca4e04c">CFunction::setSBMLId()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector&lt; T &gt;::size()</a>, and <a class="el" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#ad01e17c0afbe5350a9c4474dadc0d168">importFunctionDefinitions()</a>.</p>
<div class="fragment"><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;{</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <a class="code" href="../../df/dfd/SBMLImporter_8cpp.html#a12f47bbd0539a7ca18026f3c73cf48e8">ensureAllArgsAreBeingUsedInFunctionDefinition</a>(sbmlFunction);</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <a class="code" href="../../df/dfd/SBMLImporter_8cpp.html#a858ae0326d3e2ff344469c1d352b592d">addToKnownFunctionToMap</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">mKnownCustomUserDefinedFunctions</a>, sbmlFunction);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pTmpFunction = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8635efa2b753c28b33f29f8f44b12161">createCFunctionFromFunctionTree</a>(sbmlFunction, pSBMLModel, copasi2sbmlmap);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <span class="keywordflow">if</span> (pTmpFunction == NULL)</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    {</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 14, sbmlFunction-&gt;getId().c_str());</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    }</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  std::string sbmlId = sbmlFunction-&gt;getId();</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  pTmpFunction-&gt;<a class="code" href="../../d9/d86/classCFunction.html#af9762a77d28da2757878f1218ca4e04c">setSBMLId</a>(sbmlId);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="comment">// check if the id is already taken by another function definition, maybe</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="comment">// from an earlier import, if this is the case, delete the id on the old</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="comment">// function definition</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="comment">// if we don&#39;t do this, two functions might have the same SBML id during</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="comment">// export which makes the exporter code so much more difficult</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <span class="keywordtype">size_t</span> i, iMax = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">loadedFunctions</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pFun = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">loadedFunctions</a>()[i];</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      <span class="keywordflow">if</span> (pFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a8dca3a504b45b55d7af0ba49a2e9a9a0">getSBMLId</a>() == sbmlId)</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        {</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;          pFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#af9762a77d28da2757878f1218ca4e04c">setSBMLId</a>(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        }</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    }</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  std::string functionName = sbmlFunction-&gt;getName();</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <span class="keywordflow">if</span> (functionName == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      functionName = sbmlFunction-&gt;getId();</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    }</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter = 1;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  std::ostringstream numberStream;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  std::string appendix = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a> * pExistingFunction = NULL;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="keywordflow">while</span> ((pExistingFunction = <a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(functionName + appendix)))</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a41bd8f0562db3137b54c8f595a9b5f5c">areEqualFunctions</a>(pExistingFunction, pTmpFunction))</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;          <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(pTmpFunction);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;          pTmpFunction = pExistingFunction;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        }</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="comment">// We need to check whether the functions are identical.</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      numberStream.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      numberStream &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; counter;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      counter++;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      appendix = numberStream.str();</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    }</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="keywordflow">if</span> (pTmpFunction != pExistingFunction)</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      pTmpFunction-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">setObjectName</a>(functionName + appendix);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#af425d76a956e07032c2ab0428b3ea1ca">add</a>(pTmpFunction, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      pTmpFunctionDB-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#af425d76a956e07032c2ab0428b3ea1ca">add</a>(pTmpFunction, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    }</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="keywordflow">if</span> (pTmpFunction-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">getType</a>() == <a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a>)</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    {</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a>(sbmlFunction, pTmpFunction);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a>(pTmpFunction, sbmlFunction);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="keywordflow">return</span> pTmpFunction;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;}</div>
<div class="ttc" id="classCFunctionDB_html_ad350117a7f48a6a5fcccfdbecf8fb58b"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">CFunctionDB::loadedFunctions</a></div><div class="ttdeci">CCopasiVectorN&lt; CFunction &gt; &amp; loadedFunctions()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00346">CFunctionDB.cpp:346</a></div></div>
<div class="ttc" id="copasi_8h_html_ac9efe23516fb43b7adc59fbad1c221b8"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a></div><div class="ttdeci">#define pdelete(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00215">copasi.h:215</a></div></div>
<div class="ttc" id="classCCopasiVector_html_ab7e0e37022783eddfe85abf9339b05c0"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector::size</a></div><div class="ttdeci">virtual size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00386">CCopasiVector.h:386</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a09abd66dddd22b300853b0e2de8f392f"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">CEvaluationTree::getType</a></div><div class="ttdeci">const CEvaluationTree::Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00167">CEvaluationTree.cpp:167</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8635efa2b753c28b33f29f8f44b12161"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8635efa2b753c28b33f29f8f44b12161">SBMLImporter::createCFunctionFromFunctionTree</a></div><div class="ttdeci">CFunction * createCFunctionFromFunctionTree(const FunctionDefinition *pSBMLFunction, Model *pSBMLModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l01806">SBMLImporter.cpp:1806</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a102e853b7eef2af536188246c8e2e724"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">SBMLImporter::mKnownCustomUserDefinedFunctions</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mKnownCustomUserDefinedFunctions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00092">SBMLImporter.h:92</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af3884484e51df06669ba5bc4fc77c07c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">SBMLImporter::functionDB</a></div><div class="ttdeci">CFunctionDB * functionDB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00056">SBMLImporter.h:56</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00040">CEvaluationTree.h:40</a></div></div>
<div class="ttc" id="classCFunction_html_af9762a77d28da2757878f1218ca4e04c"><div class="ttname"><a href="../../d9/d86/classCFunction.html#af9762a77d28da2757878f1218ca4e04c">CFunction::setSBMLId</a></div><div class="ttdeci">void setSBMLId(const std::string &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00063">CFunction.cpp:63</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a41bd8f0562db3137b54c8f595a9b5f5c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a41bd8f0562db3137b54c8f595a9b5f5c">SBMLImporter::areEqualFunctions</a></div><div class="ttdeci">static bool areEqualFunctions(const CFunction *pFun, const CFunction *pFun2)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05121">SBMLImporter.cpp:5121</a></div></div>
<div class="ttc" id="SBMLImporter_8cpp_html_a858ae0326d3e2ff344469c1d352b592d"><div class="ttname"><a href="../../df/dfd/SBMLImporter_8cpp.html#a858ae0326d3e2ff344469c1d352b592d">addToKnownFunctionToMap</a></div><div class="ttdeci">bool addToKnownFunctionToMap(std::map&lt; std::string, std::string &gt; &amp;map, const FunctionDefinition *sbmlFunction)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l01590">SBMLImporter.cpp:1590</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCFunction_html_a8dca3a504b45b55d7af0ba49a2e9a9a0"><div class="ttname"><a href="../../d9/d86/classCFunction.html#a8dca3a504b45b55d7af0ba49a2e9a9a0">CFunction::getSBMLId</a></div><div class="ttdeci">const std::string &amp; getSBMLId() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00068">CFunction.cpp:68</a></div></div>
<div class="ttc" id="classCFunction_html"><div class="ttname"><a href="../../d9/d86/classCFunction.html">CFunction</a></div><div class="ttdoc">The class for handling a chemical kinetic function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df5/CFunction_8h_source.html#l00029">CFunction.h:29</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aab2342964defac3d15b32eed20211e13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a></div><div class="ttdeci">bool importMIRIAM(const SBase *pSBMLObject, CCopasiObject *pCOPASIObject)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09225">SBMLImporter.cpp:9225</a></div></div>
<div class="ttc" id="SBMLImporter_8cpp_html_a12f47bbd0539a7ca18026f3c73cf48e8"><div class="ttname"><a href="../../df/dfd/SBMLImporter_8cpp.html#a12f47bbd0539a7ca18026f3c73cf48e8">ensureAllArgsAreBeingUsedInFunctionDefinition</a></div><div class="ttdeci">void ensureAllArgsAreBeingUsedInFunctionDefinition(const FunctionDefinition *sbmlFunction)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l01675">SBMLImporter.cpp:1675</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2b5d21dd508be56977f4d2c642d89fa5"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a></div><div class="ttdeci">static bool importNotes(CAnnotation *pAnno, const SBase *pSBase)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10586">SBMLImporter.cpp:10586</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a6691431210bb58c9055c4d2847bd111c"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">CCopasiObject::setObjectName</a></div><div class="ttdeci">bool setObjectName(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00158">CCopasiObject.cpp:158</a></div></div>
<div class="ttc" id="classCFunctionDB_html_aa25aabb5ce2677103813278c014e06fb"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction</a></div><div class="ttdeci">CFunction * findFunction(const std::string &amp;functionName)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00325">CFunctionDB.cpp:325</a></div></div>
<div class="ttc" id="classCFunctionDB_html_af425d76a956e07032c2ab0428b3ea1ca"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#af425d76a956e07032c2ab0428b3ea1ca">CFunctionDB::add</a></div><div class="ttdeci">bool add(CFunction *pFunction, const bool &amp;adopt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00254">CFunctionDB.cpp:254</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8635efa2b753c28b33f29f8f44b12161"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> * SBMLImporter::createCFunctionFromFunctionTree </td>
          <td>(</td>
          <td class="paramtype">const FunctionDefinition *&#160;</td>
          <td class="paramname"><em>pSBMLFunction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l01806">1806</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d9/d86/classCFunction.html#a2a2fdf97c34b26d76255678910aceb0a">CFunction::addVariable()</a>, <a class="el" href="../../d3/d1b/classCEvaluationNodeVariable.html#ad2c017d2c47de7d3993a3110900639f5a7936b7be096787a938b30eb8e80a7633">CEvaluationNodeVariable::ANY</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a8ae34344b5b7b6d6fbdd5c3c53ce6972">CEvaluationTree::compile()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8e416728d56ad3e80750885794bb60e9">isDelayFunctionUsed()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">mExplicitelyTimeDependentFunctionDefinitions</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a15d24b615b23b00a505d720cd48917c7">replaceTimeNodesInFunctionDefinition()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">CEvaluationTree::setTree()</a>, and <a class="el" href="../../d1/d50/classCEvaluationTree.html#a4cf818e72c578bdea8f1b5d318c32365">CEvaluationTree::updateTree()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a544798333f64b9a371d9add67076172d">createCFunctionFromFunctionDefinition()</a>.</p>
<div class="fragment"><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;{</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pFun = NULL;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="keywordflow">if</span> (!pSBMLFunction-&gt;isSetMath())</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> root(*pSBMLFunction-&gt;getMath());</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8e416728d56ad3e80750885794bb60e9">SBMLImporter::isDelayFunctionUsed</a>(&amp;root))</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 85, pSBMLFunction-&gt;getId().c_str());</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    }</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode</a>(&amp;root, pSBMLModel, copasi2sbmlmap);</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <span class="keywordflow">if</span> (root.getType() != AST_LAMBDA)</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    {</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 11, pSBMLFunction-&gt;getId().c_str());</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    }</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="comment">// get the number of children.</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <span class="comment">// the first n-1 children are the parameters for the function</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="comment">// the last child is the actual function</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  pFun = <span class="keyword">new</span> <a class="code" href="../../d1/de4/classCKinFunction.html">CKinFunction</a>();</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = root.getNumChildren() - 1;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  std::set&lt;std::string&gt; variableNames;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    {</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      ASTNode* pVarNode = root.getChild(i);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="keywordflow">if</span> (pVarNode-&gt;getType() != AST_NAME)</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        {</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;          <span class="keyword">delete</span> pFun;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 12, pSBMLFunction-&gt;getId().c_str());</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        }</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      pFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a2a2fdf97c34b26d76255678910aceb0a">addVariable</a>(pVarNode-&gt;getName());</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      variableNames.insert(pVarNode-&gt;getName());</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="comment">// now we check if the AST tree has a node that represents the time</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="comment">// object</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="comment">// find a unique name for the time variable</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  std::ostringstream sstream;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  std::string timeVariableName = <span class="stringliteral">&quot;time&quot;</span>;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> postfix = 1;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <span class="keywordflow">while</span> (variableNames.find(timeVariableName) != variableNames.end())</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    {</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      sstream.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      sstream &lt;&lt; <span class="stringliteral">&quot;time_&quot;</span> &lt;&lt; postfix;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      timeVariableName = sstream.str();</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      ++postfix;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    }</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a15d24b615b23b00a505d720cd48917c7">replaceTimeNodesInFunctionDefinition</a>(root.getChild(iMax), timeVariableName))</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    {</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <span class="comment">// add another variable to the function</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      ASTNode* pVarNode = <span class="keyword">new</span> ASTNode(AST_NAME);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      pVarNode-&gt;setName(timeVariableName.c_str());</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      ASTNode* pTmpNode = root.removeChild(iMax);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      root.addChild(pVarNode);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      root.addChild(pTmpNode);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <span class="comment">// increase iMax since we now have one more child</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      ++iMax;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      pFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a2a2fdf97c34b26d76255678910aceb0a">addVariable</a>(timeVariableName);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">mExplicitelyTimeDependentFunctionDefinitions</a>.insert(pSBMLFunction-&gt;getId());</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">setTree</a>(*root.getChild(iMax));</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <a class="code" href="../../de/d73/classCCopasiTree_1_1iterator.html">CCopasiTree&lt;CEvaluationNode&gt;::iterator</a> treeIt = pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>();</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <span class="comment">// if the root node already is an object node, this has to be dealt with separately</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <span class="keywordflow">if</span> (dynamic_cast&lt;CEvaluationNodeObject*&gt;(&amp;(*treeIt)))</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      <a class="code" href="../../d3/d1b/classCEvaluationNodeVariable.html">CEvaluationNodeVariable</a>* pVariableNode = <span class="keyword">new</span> <a class="code" href="../../d3/d1b/classCEvaluationNodeVariable.html">CEvaluationNodeVariable</a>(<a class="code" href="../../d3/d1b/classCEvaluationNodeVariable.html#ad2c017d2c47de7d3993a3110900639f5a7936b7be096787a938b30eb8e80a7633">CEvaluationNodeVariable::ANY</a>, (*treeIt).getData().substr(1, (*treeIt).getData().length() - 2));</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">setRoot</a>(pVariableNode);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      <span class="keywordflow">while</span> (treeIt != NULL)</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        {</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;          <span class="keywordflow">if</span> (dynamic_cast&lt;CEvaluationNodeObject*&gt;(&amp;(*treeIt)))</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;              <a class="code" href="../../d3/d1b/classCEvaluationNodeVariable.html">CEvaluationNodeVariable</a>* pVariableNode = <span class="keyword">new</span> <a class="code" href="../../d3/d1b/classCEvaluationNodeVariable.html">CEvaluationNodeVariable</a>(<a class="code" href="../../d3/d1b/classCEvaluationNodeVariable.html#ad2c017d2c47de7d3993a3110900639f5a7936b7be096787a938b30eb8e80a7633">CEvaluationNodeVariable::ANY</a>, (*treeIt).getData().substr(1, (*treeIt).getData().length() - 2));</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;              <span class="keywordflow">if</span> ((*treeIt).getParent())</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                {</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                  (*treeIt).getParent()-&gt;addChild(pVariableNode, &amp;(*treeIt));</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                  (*treeIt).getParent()-&gt;removeChild(&amp;(*treeIt));</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                }</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;              <span class="keyword">delete</span> &amp;(*treeIt);</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;              treeIt = pVariableNode;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;            }</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;          ++treeIt;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        }</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    }</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a4cf818e72c578bdea8f1b5d318c32365">updateTree</a>();</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <span class="keywordflow">if</span> (!pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a8ae34344b5b7b6d6fbdd5c3c53ce6972">compile</a>())</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    {</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      <span class="keyword">delete</span> pFun;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 28, pSBMLFunction-&gt;getId().c_str());</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <span class="keywordflow">if</span> (pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>() == NULL)</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;      <span class="keyword">delete</span> pFun;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 13, pSBMLFunction-&gt;getId().c_str());</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    }</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">return</span> pFun;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;}</div>
<div class="ttc" id="classCEvaluationTree_html_a02df7d07b1a27c8515d3580203c9f104"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot</a></div><div class="ttdeci">virtual bool setRoot(CEvaluationNode *pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00422">CEvaluationTree.cpp:422</a></div></div>
<div class="ttc" id="classCCopasiTree_1_1iterator_html"><div class="ttname"><a href="../../de/d73/classCCopasiTree_1_1iterator.html">CCopasiTree::iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4e/CCopasiTree_8h_source.html#l00081">CCopasiTree.h:81</a></div></div>
<div class="ttc" id="classConverterASTNode_html"><div class="ttname"><a href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/ConverterASTNode_8h_source.html#l00023">ConverterASTNode.h:23</a></div></div>
<div class="ttc" id="classCKinFunction_html"><div class="ttname"><a href="../../d1/de4/classCKinFunction.html">CKinFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db0/CKinFunction_8h_source.html#l00037">CKinFunction.h:37</a></div></div>
<div class="ttc" id="classCEvaluationNodeVariable_html_ad2c017d2c47de7d3993a3110900639f5a7936b7be096787a938b30eb8e80a7633"><div class="ttname"><a href="../../d3/d1b/classCEvaluationNodeVariable.html#ad2c017d2c47de7d3993a3110900639f5a7936b7be096787a938b30eb8e80a7633">CEvaluationNodeVariable::ANY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/CEvaluationNodeVariable_8h_source.html#l00042">CEvaluationNodeVariable.h:42</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8e416728d56ad3e80750885794bb60e9"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8e416728d56ad3e80750885794bb60e9">SBMLImporter::isDelayFunctionUsed</a></div><div class="ttdeci">bool isDelayFunctionUsed(ConverterASTNode *pNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04958">SBMLImporter.cpp:4958</a></div></div>
<div class="ttc" id="classCFunction_html_a2a2fdf97c34b26d76255678910aceb0a"><div class="ttname"><a href="../../d9/d86/classCFunction.html#a2a2fdf97c34b26d76255678910aceb0a">CFunction::addVariable</a></div><div class="ttdeci">bool addVariable(const std::string &amp;name, CFunctionParameter::Role usage=CFunctionParameter::VARIABLE, const CFunctionParameter::DataType &amp;type=CFunctionParameter::FLOAT64)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00154">CFunction.cpp:154</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a4cf818e72c578bdea8f1b5d318c32365"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a4cf818e72c578bdea8f1b5d318c32365">CEvaluationTree::updateTree</a></div><div class="ttdeci">bool updateTree()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00438">CEvaluationTree.cpp:438</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0bdaab30af2fb7e2bc5e637a2b40134a"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">SBMLImporter::preprocessNode</a></div><div class="ttdeci">void preprocessNode(ConverterASTNode *pNode, Model *pSBMLModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Reaction *pSBMLReaction=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04681">SBMLImporter.cpp:4681</a></div></div>
<div class="ttc" id="classCEvaluationNodeVariable_html"><div class="ttname"><a href="../../d3/d1b/classCEvaluationNodeVariable.html">CEvaluationNodeVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/CEvaluationNodeVariable_8h_source.html#l00032">CEvaluationNodeVariable.h:32</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_ad92be98a54367c4f46224b7aee13cd88"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">CEvaluationTree::setTree</a></div><div class="ttdeci">bool setTree(const ASTNode &amp;pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00467">CEvaluationTree.cpp:467</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8eb1281de56a2232df925ba8de420412"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">SBMLImporter::mExplicitelyTimeDependentFunctionDefinitions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mExplicitelyTimeDependentFunctionDefinitions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00079">SBMLImporter.h:79</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a15d24b615b23b00a505d720cd48917c7"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a15d24b615b23b00a505d720cd48917c7">SBMLImporter::replaceTimeNodesInFunctionDefinition</a></div><div class="ttdeci">bool replaceTimeNodesInFunctionDefinition(ASTNode *root, std::string newNodeName)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l07112">SBMLImporter.cpp:7112</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a8ae34344b5b7b6d6fbdd5c3c53ce6972"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a8ae34344b5b7b6d6fbdd5c3c53ce6972">CEvaluationTree::compile</a></div><div class="ttdeci">virtual bool compile()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00263">CEvaluationTree.cpp:263</a></div></div>
<div class="ttc" id="classCFunction_html"><div class="ttname"><a href="../../d9/d86/classCFunction.html">CFunction</a></div><div class="ttdoc">The class for handling a chemical kinetic function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df5/CFunction_8h_source.html#l00029">CFunction.h:29</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6e5e86bfa4b63886caa4daf1800a7abd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d44/classCMetab.html">CMetab</a> * SBMLImporter::createCMetabFromSpecies </td>
          <td>(</td>
          <td class="paramtype">const Species *&#160;</td>
          <td class="paramname"><em>sbmlSpecies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>copasiModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/dd4/classCCompartment.html">CCompartment</a> *&#160;</td>
          <td class="paramname"><em>copasiCompartment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates and returns a COPASI <a class="el" href="../../dc/d44/classCMetab.html">CMetab</a> from the given SBML Species object.</p>
<p>Creates and returns a Copasi <a class="el" href="../../dc/d44/classCMetab.html">CMetab</a> from the given SBML Species object. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l02044">2044</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../d4/d04/classCModel.html#ac502d73b695ad0f92e072824c548a9e2">CModel::createMetabolite()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a>, <a class="el" href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">CCopasiVectorN&lt; CType &gt;::getIndex()</a>, <a class="el" href="../../d4/dd4/classCCompartment.html#ab4b4ad82f00418df4fdfde3d6a2f2113">CCompartment::getMetabolites()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName()</a>, <a class="el" href="../../d8/de0/CEvaluationParser__yacc_8cpp.html#ab3454b1e7e7c4c0b732dfeb74a0c040f">if()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">importMIRIAM()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">importNotes()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aab0a74c011c2515f5eb7b06d4be05fe22">CModelEntity::REACTIONS</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">CModelEntity::setSBMLId()</a>, and <a class="el" href="../../dc/d44/classCMetab.html#a52ebd3640b75c01a1a5261d0216f1a49">CMetab::setStatus()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;{</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  <span class="keywordflow">if</span> (sbmlSpecies-&gt;isSetSubstanceUnits())</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    {</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      std::string cU = sbmlSpecies-&gt;getSubstanceUnits();</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    }</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  std::map&lt;CCopasiObject*, SBase*&gt;::iterator it = copasi2sbmlmap.find(copasiCompartment);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <span class="keywordflow">if</span> (it == copasi2sbmlmap.end())</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    {</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  Compartment* pSBMLCompartment = (Compartment*)it-&gt;second;</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <a class="code" href="../../d8/de0/CEvaluationParser__yacc_8cpp.html#ab3454b1e7e7c4c0b732dfeb74a0c040f">if</a> (sbmlSpecies-&gt;getHasOnlySubstanceUnits() == <span class="keyword">true</span>)</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    {</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.insert(std::make_pair(const_cast&lt;Species*&gt;(sbmlSpecies), pSBMLCompartment));</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    }</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  std::string name = sbmlSpecies-&gt;getName();</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    {</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      name = sbmlSpecies-&gt;getId();</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    }</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  std::string appendix = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter = 2;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  std::ostringstream numberStream;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="keywordflow">while</span> (copasiCompartment-&gt;<a class="code" href="../../d4/dd4/classCCompartment.html#ab4b4ad82f00418df4fdfde3d6a2f2113">getMetabolites</a>().<a class="code" href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">getIndex</a>(name + appendix) != <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>)</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    {</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      numberStream.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      numberStream &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; counter;</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      counter++;</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      appendix = numberStream.str();</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    }</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  <a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>* copasiMetabolite = copasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ac502d73b695ad0f92e072824c548a9e2">createMetabolite</a>(name + appendix, copasiCompartment-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>());</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  <span class="keywordflow">if</span> (copasiMetabolite == NULL)</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    {</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      <span class="comment">//DebugFile &lt;&lt; &quot;Could not create Copasi species.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    }</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <span class="keywordflow">if</span> (sbmlSpecies-&gt;getConstant() || sbmlSpecies-&gt;getBoundaryCondition())</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    {</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      copasiMetabolite-&gt;<a class="code" href="../../dc/d44/classCMetab.html#a52ebd3640b75c01a1a5261d0216f1a49">setStatus</a>(<a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a>);</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    }</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    {</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      copasiMetabolite-&gt;<a class="code" href="../../dc/d44/classCMetab.html#a52ebd3640b75c01a1a5261d0216f1a49">setStatus</a>(<a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aab0a74c011c2515f5eb7b06d4be05fe22">CModelEntity::REACTIONS</a>);</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    }</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <span class="comment">// also check if the compartment has a spatialSize of 0 because this also implies hasOnlySubstanceUnits for the species in this compartment</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <span class="comment">// In Level 3 files this no longer seems to be the case however, so we only</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <span class="comment">// do this for L1 and L2 files</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="keywordflow">if</span> (pSBMLCompartment-&gt;isSetSpatialDimensions() &amp;&amp; pSBMLCompartment-&gt;getSpatialDimensions() == 0 &amp;&amp; this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &lt; 3)</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.insert(std::make_pair(const_cast&lt;Species*&gt;(sbmlSpecies), pSBMLCompartment));</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    }</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <span class="comment">//DebugFile &lt;&lt; &quot;Created species: &quot; &lt;&lt; copasiMetabolite-&gt;getObjectName() &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  copasi2sbmlmap[copasiMetabolite] = <span class="keyword">const_cast&lt;</span>Species*<span class="keyword">&gt;</span>(sbmlSpecies);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    {</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      copasiMetabolite-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">setSBMLId</a>(sbmlSpecies-&gt;getName());</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    }</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    {</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      copasiMetabolite-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">setSBMLId</a>(sbmlSpecies-&gt;getId());</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    }</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a>(sbmlSpecies, copasiMetabolite);</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a>(copasiMetabolite, sbmlSpecies);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="keywordflow">return</span> copasiMetabolite;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;}</div>
<div class="ttc" id="classCCompartment_html_ab4b4ad82f00418df4fdfde3d6a2f2113"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html#ab4b4ad82f00418df4fdfde3d6a2f2113">CCompartment::getMetabolites</a></div><div class="ttdeci">CCopasiVectorNS&lt; CMetab &gt; &amp; getMetabolites()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/CCompartment_8cpp_source.html#l00157">CCompartment.cpp:157</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a879d6756b51f6b58d307940e1343bd10"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName</a></div><div class="ttdeci">const std::string &amp; getObjectName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00258">CCopasiObject.cpp:258</a></div></div>
<div class="ttc" id="classCMetab_html_a52ebd3640b75c01a1a5261d0216f1a49"><div class="ttname"><a href="../../dc/d44/classCMetab.html#a52ebd3640b75c01a1a5261d0216f1a49">CMetab::setStatus</a></div><div class="ttdeci">virtual void setStatus(const CModelEntity::Status &amp;status)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d70/CMetab_8cpp_source.html#l00291">CMetab.cpp:291</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a5d0a2880f878659d6a0fc2fe0cc15610"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">SBMLImporter::mSubstanceOnlySpecies</a></div><div class="ttdeci">std::map&lt; Species *, Compartment * &gt; mSubstanceOnlySpecies</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00076">SBMLImporter.h:76</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classCCopasiVectorN_html_a3588b566dfda5b5a4fc570936abf7c0a"><div class="ttname"><a href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">CCopasiVectorN::getIndex</a></div><div class="ttdeci">virtual size_t getIndex(const std::string &amp;name) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00774">CCopasiVector.h:774</a></div></div>
<div class="ttc" id="classCMetab_html"><div class="ttname"><a href="../../dc/d44/classCMetab.html">CMetab</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df5/CMetab_8h_source.html#l00178">CMetab.h:178</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00055">CModelValue.h:55</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aab0a74c011c2515f5eb7b06d4be05fe22"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aab0a74c011c2515f5eb7b06d4be05fe22">CModelEntity::REACTIONS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00057">CModelValue.h:57</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aab2342964defac3d15b32eed20211e13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a></div><div class="ttdeci">bool importMIRIAM(const SBase *pSBMLObject, CCopasiObject *pCOPASIObject)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09225">SBMLImporter.cpp:9225</a></div></div>
<div class="ttc" id="CEvaluationParser__yacc_8cpp_html_ab3454b1e7e7c4c0b732dfeb74a0c040f"><div class="ttname"><a href="../../d8/de0/CEvaluationParser__yacc_8cpp.html#ab3454b1e7e7c4c0b732dfeb74a0c040f">if</a></div><div class="ttdeci">if(!yymsg) yymsg</div></div>
<div class="ttc" id="classSBMLImporter_html_a2b5d21dd508be56977f4d2c642d89fa5"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a></div><div class="ttdeci">static bool importNotes(CAnnotation *pAnno, const SBase *pSBase)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10586">SBMLImporter.cpp:10586</a></div></div>
<div class="ttc" id="classCModelEntity_html_a9bfa78ba4485c77792c9cac3dfb3ac2e"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">CModelEntity::setSBMLId</a></div><div class="ttdeci">void setSBMLId(const std::string &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00632">CModelValue.cpp:632</a></div></div>
<div class="ttc" id="classCModel_html_ac502d73b695ad0f92e072824c548a9e2"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac502d73b695ad0f92e072824c548a9e2">CModel::createMetabolite</a></div><div class="ttdeci">CMetab * createMetabolite(const std::string &amp;name, const std::string &amp;compartment, const C_FLOAT64 &amp;iconc=1.0, const CModelEntity::Status &amp;status=CModelEntity::REACTIONS)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02622">CModel.cpp:2622</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aedc9fc3ca40ac54787698cd2370a06dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> * SBMLImporter::createCModelFromSBMLDocument </td>
          <td>(</td>
          <td class="paramtype">SBMLDocument *&#160;</td>
          <td class="paramname"><em>sbmlDocument</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates and returns a COPASI <a class="el" href="../../d4/d04/classCModel.html">CModel</a> from the SBMLDocument given as argument.</p>
<p>Creates and returns a Copasi <a class="el" href="../../d4/d04/classCModel.html">CModel</a> from the SBMLDocument given as argument. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l00243">243</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">CProcessReport::addItem()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d00c07d4d501255fa18951e949461b2">applyStoichiometricExpressions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0e1dc15ef3ff133f828fb8f527ca7c68">areRulesUnique()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>, <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">checkElementUnits()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a879076815531affcbd0768f405f76475">createCCompartmentFromCompartment()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6e5e86bfa4b63886caa4daf1800a7abd">createCMetabFromSpecies()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, <a class="el" href="../../d4/d04/classCModel.html#a607d468405aace77f2181ef72c73435ca852877a1fa93e102c671cc015189d7bb">CModel::deterministic</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0e283899bb37b21959fa43ebe792588d">findAvogadroConstant()</a>, <a class="el" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">CProcessReport::finishItem()</a>, <a class="el" href="../../d4/d04/classCModel.html#a7cffc171ec7d35ffd8f75c2d2ca8b9bd">CModel::forceCompile()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>, <a class="el" href="../../df/dfd/SBMLImporter_8cpp.html#afee4fa5ddad2bcd6530bfbc014b2b0ff">getInitialCNForSBase()</a>, <a class="el" href="../../d9/dfd/classCCopasiContainer.html#a56ad5bdfd87327bed598c10461db695c">CCopasiContainer::getObject()</a>, <a class="el" href="../../df/dfd/SBMLImporter_8cpp.html#abb8ea6fa780c524cacf378894e59e960">getOriginalSBMLId()</a>, <a class="el" href="../../d4/d04/classCModel.html#ab30b51797988903a4af4e7fed3d163fa">CModel::getQuantity2NumberFactor()</a>, <a class="el" href="../../d9/d86/classCFunction.html#a8dca3a504b45b55d7af0ba49a2e9a9a0">CFunction::getSBMLId()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">CCopasiMessage::getText()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">handleAreaUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">handleLengthUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab3ad9f948cb55e9cb589d2b0bb3c934">handleSubstanceUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">handleTimeUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac0d4d75e9f6785597142a2bce5131499">importEvents()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ad01e17c0afbe5350a9c4474dadc0d168">importFunctionDefinitions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">importMIRIAM()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">importNotes()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ada0c2024af8f12fbef9c77ad4587fd68">importSBMLRule()</a>, <a class="el" href="../../df/dfd/SBMLImporter_8cpp.html#a6c9f65aeea9a7ce079171b3a9a5b2673">INIT_DEFAULTS</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac9b629c3ac0f557a6f94da2880781ed2">isStochasticModel()</a>, <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc">CModel::l</a>, <a class="el" href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">CFunctionDB::loadedFunctions()</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4a35e788ac8194d4f2d1569516ea925d">CModel::m</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960aea8f5bb69557d9eba4ba9551b4a1bb53">CModel::m2</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">mAvogadroCreated</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac4bdf302a8047d3398d6e6c796f3508d">mAvogadroSet</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">mDelayFound</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">mDivisionByCompartmentReactions</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">mFastReactions</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">mIgnoredParameterUnits</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa03a13afa5e7de5f940f6841fe779d17">CModel::Mol</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">mReactionsWithReplacedLocalParameters</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">mUnitOnNumberFound</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">mUnsupportedRuleFound</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage()</a>, <a class="el" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">CProcessReport::progressItem()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a3eab269f4577f39f76b021c4e3f75b37">removeUnusedFunctions()</a>, <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa6f37966986aa0f221198fa2f236cd089">CModel::s</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">sbmlIdMap</a>, <a class="el" href="../../d4/d04/classCModel.html#ad521de8c5143f698fffae30b37085857">CModel::setAreaUnit()</a>, <a class="el" href="../../d4/d04/classCModel.html#a62086f2f71772b87e61beb6fa584cdab">CModel::setAvogadro()</a>, <a class="el" href="../../d4/d04/classCModel.html#a8c013aa7abfe257047fd0bd4a0da567c">CModel::setCompileFlag()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a50b1ef1543256b1b2e0ae69c7f1ff7c6">setInitialValues()</a>, <a class="el" href="../../d4/d04/classCModel.html#afcd4a2210cc887e066ac755a550e7ec4">CModel::setLengthUnit()</a>, <a class="el" href="../../d4/d04/classCModel.html#a427dcb87659bae4f0fc707c9e6f03f9d">CModel::setModelType()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">CCopasiObject::setObjectName()</a>, <a class="el" href="../../d4/d04/classCModel.html#aa2708e11ebbd298911358a1f0a3cfe75">CModel::setQuantityUnit()</a>, <a class="el" href="../../d9/d86/classCFunction.html#af9762a77d28da2757878f1218ca4e04c">CFunction::setSBMLId()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">CModelEntity::setSBMLId()</a>, <a class="el" href="../../d4/d04/classCModel.html#aa34037c16dc088443d60144aafc20efe">CModel::setTimeUnit()</a>, <a class="el" href="../../d4/d04/classCModel.html#aa5f3b07a92ea3dbb3344bbaef2fc8253">CModel::setVolumeUnit()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector&lt; T &gt;::size()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>, <a class="el" href="../../d4/d04/classCModel.html#a607d468405aace77f2181ef72c73435cad3d8ea5931fe8a3440fa2805991d9c76">CModel::stochastic</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  Model* sbmlModel = sbmlDocument-&gt;getModel();</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">/* Create an empty model and set the title. */</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a> = <span class="keyword">new</span> <a class="code" href="../../d4/d04/classCModel.html">CModel</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  copasi2sbmlmap[this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>] = sbmlModel;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#afcd4a2210cc887e066ac755a550e7ec4">setLengthUnit</a>(<a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4a35e788ac8194d4f2d1569516ea925d">CModel::m</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad521de8c5143f698fffae30b37085857">setAreaUnit</a>(<a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960aea8f5bb69557d9eba4ba9551b4a1bb53">CModel::m2</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa5f3b07a92ea3dbb3344bbaef2fc8253">setVolumeUnit</a>(<a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc">CModel::l</a>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa34037c16dc088443d60144aafc20efe">setTimeUnit</a>(<a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa6f37966986aa0f221198fa2f236cd089">CModel::s</a>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa2708e11ebbd298911358a1f0a3cfe75">setQuantityUnit</a>(<a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa03a13afa5e7de5f940f6841fe779d17">CModel::Mol</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">setSBMLId</a>(sbmlModel-&gt;getId());</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a> step = 0, totalSteps = 0;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordtype">size_t</span> hStep = <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 1;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a>(sbmlModel, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  UnitDefinition *pSubstanceUnits = NULL;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  UnitDefinition *pTimeUnits = NULL;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  UnitDefinition *pVolumeUnits = NULL;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  UnitDefinition *pAreaUnits = NULL;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  UnitDefinition *pLengthUnits = NULL;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">/* Set standard units to match the standard units of SBML files. */</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// for SBML L3 files the default units are defined on the model</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a62086f2f71772b87e61beb6fa584cdab">setAvogadro</a>(6.02214179e23);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ac4bdf302a8047d3398d6e6c796f3508d">mAvogadroSet</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="comment">// we make copies of the unit definitions so that we do not have to remember</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="comment">// if we created them or not</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      std::string units;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      UnitDefinition* pUDef = NULL;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      Unit unit(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <a class="code" href="../../df/dfd/SBMLImporter_8cpp.html#a6c9f65aeea9a7ce079171b3a9a5b2673">INIT_DEFAULTS</a>(unit);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">if</span> (sbmlModel-&gt;isSetSubstanceUnits())</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          units = sbmlModel-&gt;getSubstanceUnits();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          assert(units != <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;          pUDef =  sbmlModel-&gt;getUnitDefinition(units);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;          <span class="keywordflow">if</span> (pUDef != NULL)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;              pSubstanceUnits = <span class="keyword">new</span> UnitDefinition(*pUDef);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;              <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;mole&quot;</span>)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                  unit.setKind(UNIT_KIND_MOLE);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                  pSubstanceUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                  pSubstanceUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;item&quot;</span>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                  unit.setKind(UNIT_KIND_ITEM);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                  pSubstanceUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                  pSubstanceUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;dimensionless&quot;</span>)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                  unit.setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                  pSubstanceUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                  pSubstanceUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                  std::string message = <span class="stringliteral">&quot;COPASI can&#39;t handle substance unit \&quot;&quot;</span> + units + <span class="stringliteral">&quot;\&quot;. Setting unit for substances to dimensionless.&quot;</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, message.c_str());</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                  unit.setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                  pSubstanceUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                  pSubstanceUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">if</span> (sbmlModel-&gt;isSetTimeUnits())</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          units = sbmlModel-&gt;getTimeUnits();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;          assert(units != <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;          pUDef =  sbmlModel-&gt;getUnitDefinition(units);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;          <span class="keywordflow">if</span> (pUDef != NULL)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;              pTimeUnits = <span class="keyword">new</span> UnitDefinition(*pUDef);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;              <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;second&quot;</span>)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                  unit.setKind(UNIT_KIND_SECOND);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                  pTimeUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                  pTimeUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;dimensionless&quot;</span>)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                  unit.setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                  pTimeUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                  pTimeUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                  std::string message = <span class="stringliteral">&quot;COPASI can&#39;t handle time unit \&quot;&quot;</span> + units + <span class="stringliteral">&quot;\&quot;. Setting unit for time to dimensionless.&quot;</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, message.c_str());</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                  unit.setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                  pTimeUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                  pTimeUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">if</span> (sbmlModel-&gt;isSetVolumeUnits())</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;          units = sbmlModel-&gt;getVolumeUnits();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          assert(units != <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;          pUDef =  sbmlModel-&gt;getUnitDefinition(units);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;          <span class="keywordflow">if</span> (pUDef != NULL)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;              pVolumeUnits = <span class="keyword">new</span> UnitDefinition(*pUDef);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;              <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;litre&quot;</span>)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                  unit.setKind(UNIT_KIND_LITRE);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                  pVolumeUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                  pVolumeUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;dimensionless&quot;</span>)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                  unit.setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                  pVolumeUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                  pVolumeUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                  std::string message = <span class="stringliteral">&quot;COPASI can&#39;t handle volume unit \&quot;&quot;</span> + units + <span class="stringliteral">&quot;\&quot;. Setting unit for volume to dimensionless.&quot;</span>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, message.c_str());</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                  unit.setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                  pVolumeUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                  pVolumeUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="keywordflow">if</span> (sbmlModel-&gt;isSetAreaUnits())</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          units = sbmlModel-&gt;getAreaUnits();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;          assert(units != <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;          pUDef =  sbmlModel-&gt;getUnitDefinition(units);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;          <span class="keywordflow">if</span> (pUDef != NULL)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;              pAreaUnits = <span class="keyword">new</span> UnitDefinition(*pUDef);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;              <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;dimensionless&quot;</span>)</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                  unit.setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                  pAreaUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                  pAreaUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                  std::string message = <span class="stringliteral">&quot;COPASI can&#39;t handle area unit \&quot;&quot;</span> + units + <span class="stringliteral">&quot;\&quot;. Setting unit for area to dimensionless.&quot;</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, message.c_str());</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                  unit.setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                  pAreaUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                  pAreaUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">if</span> (sbmlModel-&gt;isSetLengthUnits())</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;          units = sbmlModel-&gt;getLengthUnits();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;          assert(units != <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;          pUDef =  sbmlModel-&gt;getUnitDefinition(units);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;          <span class="keywordflow">if</span> (pUDef != NULL)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;              pLengthUnits = <span class="keyword">new</span> UnitDefinition(*pUDef);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;              <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;litre&quot;</span>)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                  unit.setKind(UNIT_KIND_LITRE);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                  pLengthUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                  pLengthUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;metre&quot;</span>)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                  unit.setKind(UNIT_KIND_METRE);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                  pLengthUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                  pLengthUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (units == <span class="stringliteral">&quot;dimensionless&quot;</span>)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                  unit.setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                  pLengthUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                  pLengthUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                  std::string message = <span class="stringliteral">&quot;COPASI can&#39;t handle length unit \&quot;&quot;</span> + units + <span class="stringliteral">&quot;\&quot;. Setting unit for length to dimensionless.&quot;</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, message.c_str());</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                  unit.setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                  unit.setExponent(1);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                  unit.setMultiplier(1.0);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                  unit.setScale(0);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                  pLengthUnits = <span class="keyword">new</span> UnitDefinition(sbmlModel-&gt;getLevel(), sbmlModel-&gt;getVersion());</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                  pLengthUnits-&gt;addUnit(&amp;unit);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">if</span> (sbmlModel-&gt;getNumUnitDefinitions() != 0)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          <span class="comment">// we make copies o the unit definitions so that we do not have to remember</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          <span class="comment">// if we created them or not</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;          <span class="keywordflow">for</span> (counter = 0; counter &lt; sbmlModel-&gt;getNumUnitDefinitions(); counter++)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;              UnitDefinition* uDef = sbmlModel-&gt;getUnitDefinition(counter);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;              std::string unitId = uDef-&gt;getId();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;              <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;substance&quot;</span>)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                  pSubstanceUnits = <span class="keyword">new</span> UnitDefinition(*uDef);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;time&quot;</span>)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                  pTimeUnits = <span class="keyword">new</span> UnitDefinition(*uDef);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;volume&quot;</span>)</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                  pVolumeUnits = <span class="keyword">new</span> UnitDefinition(*uDef);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((unitId == <span class="stringliteral">&quot;area&quot;</span>))</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                  pAreaUnits = <span class="keyword">new</span> UnitDefinition(*uDef);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((unitId == <span class="stringliteral">&quot;length&quot;</span>))</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                  pLengthUnits = <span class="keyword">new</span> UnitDefinition(*uDef);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// create the default units if some unit has not been specified</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">if</span> (pSubstanceUnits == NULL)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;          <span class="comment">// issue a warning</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 91, <span class="stringliteral">&quot;substance&quot;</span>, <span class="stringliteral">&quot;mole&quot;</span> , <span class="stringliteral">&quot;substance&quot;</span>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="comment">// create the default units</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      pSubstanceUnits = <span class="keyword">new</span> UnitDefinition(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      pSubstanceUnits-&gt;setId(<span class="stringliteral">&quot;dummy_substance&quot;</span>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      pSubstanceUnits-&gt;setName(<span class="stringliteral">&quot;dummy_substance&quot;</span>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      Unit* pUnit = pSubstanceUnits-&gt;createUnit();</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      pUnit-&gt;setKind(UNIT_KIND_MOLE);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (pTimeUnits == NULL)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;          <span class="comment">// issue a warning</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 91, <span class="stringliteral">&quot;time&quot;</span>, <span class="stringliteral">&quot;second&quot;</span> , <span class="stringliteral">&quot;time&quot;</span>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="comment">// create the default units</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      pTimeUnits = <span class="keyword">new</span> UnitDefinition(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      pTimeUnits-&gt;setId(<span class="stringliteral">&quot;dummy_time&quot;</span>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      pTimeUnits-&gt;setName(<span class="stringliteral">&quot;dummy_time&quot;</span>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      Unit* pUnit = pTimeUnits-&gt;createUnit();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      pUnit-&gt;setKind(UNIT_KIND_SECOND);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordflow">if</span> (pVolumeUnits == NULL)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;          <span class="comment">// issue a warning</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 91, <span class="stringliteral">&quot;volume&quot;</span>, <span class="stringliteral">&quot;litre&quot;</span> , <span class="stringliteral">&quot;volume&quot;</span>);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="comment">// create the default units</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      pVolumeUnits = <span class="keyword">new</span> UnitDefinition(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      pVolumeUnits-&gt;setId(<span class="stringliteral">&quot;dummy_volume&quot;</span>);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      pVolumeUnits-&gt;setName(<span class="stringliteral">&quot;dummy_volume&quot;</span>);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      Unit* pUnit = pVolumeUnits-&gt;createUnit();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      pUnit-&gt;setKind(UNIT_KIND_LITRE);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">if</span> (pAreaUnits == NULL)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;          <span class="comment">// issue a warning</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 91, <span class="stringliteral">&quot;area&quot;</span>, <span class="stringliteral">&quot;m^2&quot;</span> , <span class="stringliteral">&quot;area&quot;</span>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="comment">// create the default units</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      pAreaUnits = <span class="keyword">new</span> UnitDefinition(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      pAreaUnits-&gt;setId(<span class="stringliteral">&quot;dummy_area&quot;</span>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      pAreaUnits-&gt;setName(<span class="stringliteral">&quot;dummy_area&quot;</span>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      Unit* pUnit = pAreaUnits-&gt;createUnit();</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      pUnit-&gt;setKind(UNIT_KIND_METRE);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      pUnit-&gt;setExponent(2);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordflow">if</span> (pLengthUnits == NULL)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;          <span class="comment">// issue a warning</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 91, <span class="stringliteral">&quot;length&quot;</span>, <span class="stringliteral">&quot;m&quot;</span> , <span class="stringliteral">&quot;length&quot;</span>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="comment">// create the default units</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      pLengthUnits = <span class="keyword">new</span> UnitDefinition(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      pLengthUnits-&gt;setId(<span class="stringliteral">&quot;dummy_length&quot;</span>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      pLengthUnits-&gt;setName(<span class="stringliteral">&quot;dummy_length&quot;</span>);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      Unit* pUnit = pLengthUnits-&gt;createUnit();</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      pUnit-&gt;setKind(UNIT_KIND_METRE);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// now we have some common code to actually import the units</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// handle the substance units</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  assert(pSubstanceUnits != NULL);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">if</span> (pSubstanceUnits != NULL)</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      std::pair&lt;CModel::QuantityUnit, bool&gt; qUnit;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;          qUnit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aab3ad9f948cb55e9cb589d2b0bb3c934">handleSubstanceUnit</a>(pSubstanceUnits);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing substance units.&quot;</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;              <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;              os &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="keywordflow">if</span> (qUnit.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;          <span class="comment">// the unit could not be handled, give an error message and</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;          <span class="comment">// set the units to mole</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 66, <span class="stringliteral">&quot;substance&quot;</span>, <span class="stringliteral">&quot;Mole&quot;</span>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa2708e11ebbd298911358a1f0a3cfe75">setQuantityUnit</a>(<a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa03a13afa5e7de5f940f6841fe779d17">CModel::Mol</a>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa2708e11ebbd298911358a1f0a3cfe75">setQuantityUnit</a>(qUnit.first);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="comment">// check if the extends units are set and if they are equal to the substance units</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="comment">// otherwise issue a warning</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;          <span class="keywordflow">if</span> (!sbmlModel-&gt;isSetExtentUnits())</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 92);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;              <span class="keyword">const</span> UnitDefinition* pExtendsUnits = sbmlModel-&gt;getUnitDefinition(sbmlModel-&gt;getExtentUnits());</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;              <span class="keywordflow">if</span> (pExtendsUnits != NULL)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">areSBMLUnitDefinitionsIdentical</a>(pSubstanceUnits, pExtendsUnits))</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                    {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 92);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 66, <span class="stringliteral">&quot;extends&quot;</span>, <span class="stringliteral">&quot;the same units as the substances&quot;</span>);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <span class="keyword">delete</span> pSubstanceUnits;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      pSubstanceUnits = NULL;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// handle the time units</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  assert(pTimeUnits != NULL);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">if</span> (pTimeUnits != NULL)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      std::pair&lt;CModel::TimeUnit, bool&gt; tUnit;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;          tUnit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">handleTimeUnit</a>(pTimeUnits);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing time units.&quot;</span>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;              <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;              os &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="keywordflow">if</span> (tUnit.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;          <span class="comment">// the unit could not be handled, give an error message and</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;          <span class="comment">// set the units to second</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 66, <span class="stringliteral">&quot;time&quot;</span>, <span class="stringliteral">&quot;second&quot;</span>);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa34037c16dc088443d60144aafc20efe">setTimeUnit</a>(<a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa6f37966986aa0f221198fa2f236cd089">CModel::s</a>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa34037c16dc088443d60144aafc20efe">setTimeUnit</a>(tUnit.first);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keyword">delete</span> pTimeUnits;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      pTimeUnits = NULL;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">// handle the volume units</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  assert(pVolumeUnits != NULL);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keywordflow">if</span> (pVolumeUnits != NULL)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      std::pair&lt;CModel::VolumeUnit, bool&gt; vUnit;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          vUnit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit</a>(pVolumeUnits);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing volume units.&quot;</span>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;              <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;              os &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="keywordflow">if</span> (vUnit.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          <span class="comment">// the unit could not be handled, give an error message and</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;          <span class="comment">// set the units to litre</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 66, <span class="stringliteral">&quot;volume&quot;</span>, <span class="stringliteral">&quot;litre&quot;</span>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa5f3b07a92ea3dbb3344bbaef2fc8253">setVolumeUnit</a>(<a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc">CModel::l</a>);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#aa5f3b07a92ea3dbb3344bbaef2fc8253">setVolumeUnit</a>(vUnit.first);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="keyword">delete</span> pVolumeUnits;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      pVolumeUnits = NULL;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// handle the area units</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  assert(pAreaUnits != NULL);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">if</span> (pAreaUnits != NULL)</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      std::pair&lt;CModel::AreaUnit, bool&gt; vUnit;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;          vUnit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">handleAreaUnit</a>(pAreaUnits);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing area units.&quot;</span>;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;              <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;              os &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="keywordflow">if</span> (vUnit.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;          <span class="comment">// the unit could not be handled, give an error message and</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;          <span class="comment">// set the units to litre</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 66, <span class="stringliteral">&quot;area&quot;</span>, <span class="stringliteral">&quot;square meter&quot;</span>);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad521de8c5143f698fffae30b37085857">setAreaUnit</a>(<a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960aea8f5bb69557d9eba4ba9551b4a1bb53">CModel::m2</a>);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad521de8c5143f698fffae30b37085857">setAreaUnit</a>(vUnit.first);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keyword">delete</span> pAreaUnits;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      pAreaUnits = NULL;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="comment">// handle the length units</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  assert(pLengthUnits != NULL);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">if</span> (pLengthUnits != NULL)</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      std::pair&lt;CModel::LengthUnit, bool&gt; vUnit;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;          vUnit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">handleLengthUnit</a>(pLengthUnits);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing length units.&quot;</span>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;              <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;              os &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keywordflow">if</span> (vUnit.second == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;          <span class="comment">// the unit could not be handled, give an error message and</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;          <span class="comment">// set the units to litre</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 66, <span class="stringliteral">&quot;length&quot;</span>, <span class="stringliteral">&quot;meter&quot;</span>);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#afcd4a2210cc887e066ac755a550e7ec4">setLengthUnit</a>(<a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4a35e788ac8194d4f2d1569516ea925d">CModel::m</a>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#afcd4a2210cc887e066ac755a550e7ec4">setLengthUnit</a>(vUnit.first);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="keyword">delete</span> pLengthUnits;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      pLengthUnits = NULL;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">// go through all compartments and species and check if the units are</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// consistent</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">checkElementUnits</a>(sbmlModel, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  std::string title;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ac9b629c3ac0f557a6f94da2880781ed2">isStochasticModel</a>(sbmlModel))</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a427dcb87659bae4f0fc707c9e6f03f9d">setModelType</a>(<a class="code" href="../../d4/d04/classCModel.html#a607d468405aace77f2181ef72c73435cad3d8ea5931fe8a3440fa2805991d9c76">CModel::stochastic</a>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    }</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a427dcb87659bae4f0fc707c9e6f03f9d">setModelType</a>(<a class="code" href="../../d4/d04/classCModel.html#a607d468405aace77f2181ef72c73435ca852877a1fa93e102c671cc015189d7bb">CModel::deterministic</a>);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a>(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, sbmlModel);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  title = sbmlModel-&gt;getName();</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keywordflow">if</span> (title == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      title = <span class="stringliteral">&quot;NoName&quot;</span>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keywordtype">size_t</span> idCount = 0;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>-&gt;<a class="code" href="../../d9/dfd/classCCopasiContainer.html#a56ad5bdfd87327bed598c10461db695c">getObject</a>(<span class="stringliteral">&quot;Model=&quot;</span> + title) != NULL)</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      std::stringstream str; str &lt;&lt; sbmlModel-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; ++idCount;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      title = str.str();</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">setObjectName</a>(title.c_str());</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">// fill the set of SBML species reference ids because</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="comment">// we need this to check for references to species references in all expressions</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">// as long as we do not support these references</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  SBMLImporter::updateSBMLSpeciesReferenceIds(sbmlModel, this-&gt;mSBMLSpeciesReferenceIds);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">/* import the functions */</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <a class="code" href="../../d7/d08/classCCopasiVectorN.html">CCopasiVectorN&lt; CFunction &gt;</a>* functions = &amp;(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">loadedFunctions</a>());</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordtype">size_t</span> num = (*functions).<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 2;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      totalSteps = (<span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>) num;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Importing function definitions&quot;</span>,</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                                       step,</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                                       &amp;totalSteps);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">sbmlIdMap</a>.clear();</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; num; ++counter)</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* tree = (*functions)[counter];</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">if</span> (!tree-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a8dca3a504b45b55d7af0ba49a2e9a9a0">getSBMLId</a>().empty())</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">sbmlIdMap</a>[tree] = tree-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a8dca3a504b45b55d7af0ba49a2e9a9a0">getSBMLId</a>();</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;          tree-&gt;<a class="code" href="../../d9/d86/classCFunction.html#af9762a77d28da2757878f1218ca4e04c">setSBMLId</a>(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a>* pTmpFunctionDB = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ad01e17c0afbe5350a9c4474dadc0d168">importFunctionDefinitions</a>(sbmlModel, copasi2sbmlmap);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="comment">// try to find global parameters that represent avogadros number</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0e283899bb37b21959fa43ebe792588d">findAvogadroConstant</a>(sbmlModel, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ab30b51797988903a4af4e7fed3d163fa">getQuantity2NumberFactor</a>());</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  std::map&lt;std::string, CCompartment*&gt; compartmentMap;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="comment">/* Create the compartments */</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  num = sbmlModel-&gt;getNumCompartments();</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 3;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      step = 0;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      totalSteps = (<span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>) num;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Importing compartments...&quot;</span>,</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                       step,</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                                       &amp;totalSteps);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; num; counter++)</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      Compartment* sbmlCompartment = sbmlModel-&gt;getCompartment(counter);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="keywordflow">if</span> (sbmlCompartment == NULL)</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      <a class="code" href="../../d4/dd4/classCCompartment.html">CCompartment</a>* pCopasiCompartment = NULL;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        {</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;          pCopasiCompartment = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a879076815531affcbd0768f405f76475">createCCompartmentFromCompartment</a>(sbmlCompartment, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, copasi2sbmlmap, sbmlModel);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing compartment \&quot;&quot;</span>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;          os &lt;&lt; sbmlCompartment-&gt;getId() &lt;&lt; <span class="stringliteral">&quot;\&quot;.&quot;</span>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;              <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;              os &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      std::string key = sbmlCompartment-&gt;getId();</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;          key = sbmlCompartment-&gt;getName();</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      compartmentMap[key] = pCopasiCompartment;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      ++step;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(hStep)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="comment">/* Create all species */</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  num = sbmlModel-&gt;getNumSpecies();</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 4;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      step = 0;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      totalSteps = (<span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>) num;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Importing species...&quot;</span>,</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                                       step,</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                                       &amp;totalSteps);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; num; ++counter)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      Species* sbmlSpecies = sbmlModel-&gt;getSpecies(counter);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">if</span> (sbmlSpecies == NULL)</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <a class="code" href="../../d4/dd4/classCCompartment.html">CCompartment</a>* pCopasiCompartment = compartmentMap[sbmlSpecies-&gt;getCompartment()];</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <span class="keywordflow">if</span> (pCopasiCompartment != NULL)</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;          <a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>* pCopasiMetabolite = NULL;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;          <span class="keywordflow">try</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;              pCopasiMetabolite = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a6e5e86bfa4b63886caa4daf1800a7abd">createCMetabFromSpecies</a>(sbmlSpecies, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, pCopasiCompartment, copasi2sbmlmap, sbmlModel);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;          <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;              std::ostringstream os;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;              os &lt;&lt; <span class="stringliteral">&quot;Error while importing species \&quot;&quot;</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;              os &lt;&lt; sbmlSpecies-&gt;getId() &lt;&lt; <span class="stringliteral">&quot;\&quot;.&quot;</span>;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;              <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;              <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                  <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                  std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                  os &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;          std::string key;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;          <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;              key = sbmlSpecies-&gt;getName();</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;              key = sbmlSpecies-&gt;getId();</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>[key] = pCopasiMetabolite;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 5 , sbmlSpecies-&gt;getCompartment().c_str(), sbmlSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      ++step;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(hStep)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="comment">/* Create the global Parameters */</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  num = sbmlModel-&gt;getNumParameters();</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    {</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 5;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      step = 0;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      totalSteps = (<span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>) num;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Importing global parameters...&quot;</span>,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                                       step,</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                                       &amp;totalSteps);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    }</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; num; ++counter)</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      Parameter* sbmlParameter = sbmlModel-&gt;getParameter(counter);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <span class="keywordflow">if</span> (sbmlParameter == NULL)</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;          std::string sbmlId = <a class="code" href="../../df/dfd/SBMLImporter_8cpp.html#abb8ea6fa780c524cacf378894e59e960">getOriginalSBMLId</a>(sbmlParameter);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;          <span class="comment">// don&#39;t import parameter if it is one of our special ones instead get the cn to the target</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;          <span class="keywordflow">if</span> (!sbmlId.empty())</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;              Species* species = sbmlModel-&gt;getSpecies(sbmlId);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;              <span class="keywordflow">if</span> (species != NULL)</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                  <a class="code" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a>[sbmlParameter-&gt;getId()] = <a class="code" href="../../df/dfd/SBMLImporter_8cpp.html#afee4fa5ddad2bcd6530bfbc014b2b0ff">getInitialCNForSBase</a>(species, copasi2sbmlmap);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;              Compartment *comp = sbmlModel-&gt;getCompartment(sbmlId);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;              <span class="keywordflow">if</span> (comp != NULL)</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                  <a class="code" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a>[sbmlParameter-&gt;getId()] = <a class="code" href="../../df/dfd/SBMLImporter_8cpp.html#afee4fa5ddad2bcd6530bfbc014b2b0ff">getInitialCNForSBase</a>(comp, copasi2sbmlmap);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;              Parameter* param = sbmlModel-&gt;getParameter(sbmlId);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;              <span class="keywordflow">if</span> (param != NULL)</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                  <a class="code" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a>[sbmlParameter-&gt;getId()] = <a class="code" href="../../df/dfd/SBMLImporter_8cpp.html#afee4fa5ddad2bcd6530bfbc014b2b0ff">getInitialCNForSBase</a>(param, copasi2sbmlmap);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter</a>(sbmlParameter, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, copasi2sbmlmap);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing parameter \&quot;&quot;</span>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;          os &lt;&lt; sbmlParameter-&gt;getId() &lt;&lt; <span class="stringliteral">&quot;\&quot;.&quot;</span>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;              <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;              os &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            }</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      ++step;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(hStep)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="comment">// the information that is collected here is used in the creation of the reactions to</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// adjust the stoichiometry of substrates and products with the conversion factos from</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">// the SBML model</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// now that all parameters have been imported, we can check if the model</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// defines a global conversion factor</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2 &amp;&amp; sbmlModel-&gt;isSetConversionFactor())</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      this-&gt;mConversionFactorFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      std::string <span class="keywordtype">id</span> = sbmlModel-&gt;getConversionFactor();</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      assert(<span class="keywordtype">id</span> != <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      std::map&lt;std::string, const CModelValue*&gt;::const_iterator pos = this-&gt;mSBMLIdModelValueMap.find(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      assert(pos != this-&gt;mSBMLIdModelValueMap.end());</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordflow">if</span> (pos != this-&gt;mSBMLIdModelValueMap.end())</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;          this-&gt;mpModelConversionFactor = pos-&gt;second;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">// we need to go through all species again and find conversion factors</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">// right now I don&#39;t want to change the order of importing model values</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="comment">// and species since I am not sure what implications that would have</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      num = sbmlModel-&gt;getNumSpecies();</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">for</span> (counter = 0; counter &lt; num; ++counter)</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;          Species* sbmlSpecies = sbmlModel-&gt;getSpecies(counter);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;          <span class="keywordflow">if</span> (sbmlSpecies-&gt;isSetConversionFactor())</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;              this-&gt;mConversionFactorFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;              std::map&lt;std::string, const CModelValue*&gt;::const_iterator pos = this-&gt;mSBMLIdModelValueMap.find(sbmlSpecies-&gt;getConversionFactor());</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;              <span class="keywordflow">if</span> (pos != this-&gt;mSBMLIdModelValueMap.end())</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                  this-&gt;mSpeciesConversionParameterMap[sbmlSpecies-&gt;getId()] = pos-&gt;second;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            }</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">mIgnoredParameterUnits</a>.empty())</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      std::ostringstream os;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      std::vector&lt;std::string&gt;::iterator errorIt = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">mIgnoredParameterUnits</a>.begin();</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <span class="keywordflow">while</span> (errorIt != this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">mIgnoredParameterUnits</a>.end())</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;          os &lt;&lt; *errorIt &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;          ++errorIt;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      std::string s = os.str();</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 26, s.substr(0, s.size() - 2).c_str());</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="comment">/* Create all reactions */</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  num = sbmlModel-&gt;getNumReactions();</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 6;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      step = 0;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      totalSteps = (<span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>) num;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Importing reactions...&quot;</span>,</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                                       step,</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                                       &amp;totalSteps);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    }</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">mDivisionByCompartmentReactions</a>.clear();</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">mFastReactions</a>.clear();</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">mReactionsWithReplacedLocalParameters</a>.clear();</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; num; counter++)</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    {</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction</a>(sbmlModel-&gt;getReaction(counter), sbmlModel, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, copasi2sbmlmap, pTmpFunctionDB);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        {</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing reaction \&quot;&quot;</span>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;          os &lt;&lt; sbmlModel-&gt;getReaction(counter)-&gt;getId() &lt;&lt; <span class="stringliteral">&quot;\&quot;.&quot;</span>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            {</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;              <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;              os &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        }</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      ++step;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(hStep)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    }</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">mDivisionByCompartmentReactions</a>.empty())</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="comment">// create the error message</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      std::string idList;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      std::set&lt;std::string&gt;::const_iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">mDivisionByCompartmentReactions</a>.begin();</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      std::set&lt;std::string&gt;::const_iterator endit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">mDivisionByCompartmentReactions</a>.end();</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;          idList += (*it);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;          idList += <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;          ++it;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      idList = idList.substr(0, idList.length() - 2);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 17, idList.c_str());</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    }</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">mFastReactions</a>.empty())</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    {</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      <span class="comment">// create the error message</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      std::string idList;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      std::set&lt;std::string&gt;::const_iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">mFastReactions</a>.begin();</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      std::set&lt;std::string&gt;::const_iterator endit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">mFastReactions</a>.end();</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;          idList += (*it);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;          idList += <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;          ++it;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        }</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      idList = idList.substr(0, idList.length() - 2);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 29, idList.c_str());</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">mReactionsWithReplacedLocalParameters</a>.empty())</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="comment">// create the error message</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      std::string idList;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      std::set&lt;std::string&gt;::const_iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">mReactionsWithReplacedLocalParameters</a>.begin();</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      std::set&lt;std::string&gt;::const_iterator endit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">mReactionsWithReplacedLocalParameters</a>.end();</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;          idList += (*it);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;          idList += <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;          ++it;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      idList = idList.substr(0, idList.length() - 2);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 87, idList.c_str());</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    }</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="comment">// import the initial assignments</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="comment">// we do this after the reactions since intial assignments can reference reaction ids.</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    {</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 7;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    }</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments</a>(sbmlModel, copasi2sbmlmap, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// import all rules</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">// we have to import them after the reactions since they can reference a reaction</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="comment">// id which has to be known when importing the rule</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="comment">/* Create the rules */</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="comment">// rules should be imported after reactions because we use the mSBMLSpeciesReferenceIds to determine if a</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// rule changes a species reference (stoichiometry</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="comment">// Since COPASI does not support this, we need to ignore the rule</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0e1dc15ef3ff133f828fb8f527ca7c68">areRulesUnique</a>(sbmlModel);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  num = sbmlModel-&gt;getNumRules();</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 8;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      step = 0;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      totalSteps = (<span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>) num;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Importing global parameters...&quot;</span>,</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                                       step,</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                                       &amp;totalSteps);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    }</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; num; ++counter)</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      Rule* sbmlRule = sbmlModel-&gt;getRule(counter);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      <span class="keywordflow">if</span> (sbmlRule == NULL)</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        }</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <span class="comment">// improve the error message a bit.</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ada0c2024af8f12fbef9c77ad4587fd68">importSBMLRule</a>(sbmlRule, copasi2sbmlmap, sbmlModel);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing rule for variable \&quot;&quot;</span>;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;          os &lt;&lt; sbmlRule-&gt;getVariable() &lt;&lt; <span class="stringliteral">&quot;\&quot;.&quot;</span>;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;              <span class="comment">// we only want the message, not the time stamp line</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;              os &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        }</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      ++step;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(hStep)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="keywordflow">if</span> (sbmlModel-&gt;getNumConstraints() &gt; 0)</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    {</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 49);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    }</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="comment">// TODO Create all constraints</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <span class="comment">// TODO Since we don&#39;t have constraints yet, there is no code here.</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="comment">// TODO When implementing import of constraints, don&#39;t forget to replace calls to</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="comment">// TODO explicitly time dependent functions in the constraints math expression.</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// import all events</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="comment">// events should be imported after reactions because we use the mSBMLSpeciesReferenceIds to determine if an</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="comment">// event assignment changes a species reference (stoichiometry</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="comment">// Since COPASI does not support this, we need to ignore the event assignment</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 9;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ac0d4d75e9f6785597142a2bce5131499">importEvents</a>(sbmlModel, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, copasi2sbmlmap);</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a8c013aa7abfe257047fd0bd4a0da567c">setCompileFlag</a>();</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">mUnsupportedRuleFound</a>)</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 3);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    }</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="keywordflow">if</span> (this-&gt;mRateRuleForSpeciesReferenceIgnored == <span class="keyword">true</span>)</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 94 , <span class="stringliteral">&quot;Rate rule&quot;</span> , <span class="stringliteral">&quot;Rate rule&quot;</span>);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    }</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keywordflow">if</span> (this-&gt;mEventAssignmentForSpeciesReferenceIgnored == <span class="keyword">true</span>)</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    {</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 94 , <span class="stringliteral">&quot;Event assignment&quot;</span>, <span class="stringliteral">&quot;event assignment&quot;</span>);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    }</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="keywordflow">if</span> (this-&gt;mConversionFactorFound == <span class="keyword">true</span>)</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    {</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 100);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="keywordflow">if</span> (this-&gt;mEventPrioritiesIgnored == <span class="keyword">true</span>)</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    {</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 98);</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    }</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="keywordflow">if</span> (this-&gt;mInitialTriggerValues == <span class="keyword">true</span>)</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 97);</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    }</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="keywordflow">if</span> (this-&gt;mNonPersistentTriggerFound == <span class="keyword">true</span>)</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    {</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 99);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    }</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    {</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 10;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    }</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <span class="comment">// unset the hasOnlySubstanceUnits flag on all such species</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  std::map&lt;Species*, Compartment*&gt;::iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.begin();</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  std::map&lt;Species*, Compartment*&gt;::iterator endIt = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.end();</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="keywordflow">while</span> (it != endIt)</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      it-&gt;first-&gt;setHasOnlySubstanceUnits(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      ++it;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a50b1ef1543256b1b2e0ae69c7f1ff7c6">setInitialValues</a>(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, copasi2sbmlmap);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="comment">// evaluate and apply the initial expressions</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d00c07d4d501255fa18951e949461b2">applyStoichiometricExpressions</a>(copasi2sbmlmap, sbmlModel);</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  <span class="comment">// now we apply the conversion factors</span></div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      this-&gt;applyConversionFactors();</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a3eab269f4577f39f76b021c4e3f75b37">removeUnusedFunctions</a>(pTmpFunctionDB, copasi2sbmlmap);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="comment">// remove the temporary avogadro parameter if one was created</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">mAvogadroCreated</a> == <span class="keyword">true</span>)</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <span class="keyword">const</span> Parameter* pParameter = *this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>.begin();</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      ListOf* pList = sbmlModel-&gt;getListOfParameters();</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <span class="keywordtype">unsigned</span> i, iMax = pList-&gt;size();</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;          <span class="keywordflow">if</span> (pList-&gt;get(i)-&gt;getId() == pParameter-&gt;getId())</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;              pList-&gt;remove(i);</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;            }</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="keyword">delete</span> pTmpFunctionDB;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="comment">// create a warning if the delay function is used in the model</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">mDelayFound</a>)</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 36);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    }</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="comment">// give a warning that units on pure number as allowed in SBML L3 and above</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="comment">// are ignored by COPASI</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2 &amp;&amp; this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">mUnitOnNumberFound</a>)</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 93);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a7cffc171ec7d35ffd8f75c2d2ca8b9bd">forceCompile</a>(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="keywordflow">return</span> this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;}</div>
<div class="ttc" id="classCCopasiVectorN_html"><div class="ttname"><a href="../../d7/d08/classCCopasiVectorN.html">CCopasiVectorN&lt; CFunction &gt;</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a4329daab8b5b8e1e161530817c2ce4ee"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a></div><div class="ttdeci">static const CCopasiMessage &amp; peekLastMessage()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00060">CCopasiMessage.cpp:60</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aaf9850d5d4c3e287eb624ea7821682b2"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">SBMLImporter::handleTimeUnit</a></div><div class="ttdeci">std::pair&lt; CModel::TimeUnit, bool &gt; handleTimeUnit(const UnitDefinition *uDef)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l03730">SBMLImporter.cpp:3730</a></div></div>
<div class="ttc" id="classCFunctionDB_html_ad350117a7f48a6a5fcccfdbecf8fb58b"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">CFunctionDB::loadedFunctions</a></div><div class="ttdeci">CCopasiVectorN&lt; CFunction &gt; &amp; loadedFunctions()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00346">CFunctionDB.cpp:346</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9a6daed5b9603fff0c6e698210512401"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">SBMLImporter::mhImportStep</a></div><div class="ttdeci">size_t mhImportStep</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00074">SBMLImporter.h:74</a></div></div>
<div class="ttc" id="classCModel_html_ad521de8c5143f698fffae30b37085857"><div class="ttname"><a href="../../d4/d04/classCModel.html#ad521de8c5143f698fffae30b37085857">CModel::setAreaUnit</a></div><div class="ttdeci">bool setAreaUnit(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02182">CModel.cpp:2182</a></div></div>
<div class="ttc" id="classCModel_html_aa5f3b07a92ea3dbb3344bbaef2fc8253"><div class="ttname"><a href="../../d4/d04/classCModel.html#aa5f3b07a92ea3dbb3344bbaef2fc8253">CModel::setVolumeUnit</a></div><div class="ttdeci">bool setVolumeUnit(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02159">CModel.cpp:2159</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ada0c2024af8f12fbef9c77ad4587fd68"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ada0c2024af8f12fbef9c77ad4587fd68">SBMLImporter::importSBMLRule</a></div><div class="ttdeci">void importSBMLRule(const Rule *sbmlRule, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Model *pSBMLModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06364">SBMLImporter.cpp:6364</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a057bc71f45b8f39fa15355f653163842"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">SBMLImporter::mAvogadroCreated</a></div><div class="ttdeci">bool mAvogadroCreated</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00084">SBMLImporter.h:84</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8da36a9a8ae299a7ea5d4ac68382bb1e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">SBMLImporter::mUnitOnNumberFound</a></div><div class="ttdeci">bool mUnitOnNumberFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00061">SBMLImporter.h:61</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classCFunctionDB_html"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/CFunctionDB_8h_source.html#l00035">CFunctionDB.h:35</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaa6f37966986aa0f221198fa2f236cd089"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa6f37966986aa0f221198fa2f236cd089">CModel::s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc">CModel::l</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ace9bd25198bfe11a1838f44fac3b1f3b"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">SBMLImporter::mKnownInitalValues</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mKnownInitalValues</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00093">SBMLImporter.h:93</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classCCopasiVector_html_ab7e0e37022783eddfe85abf9339b05c0"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector::size</a></div><div class="ttdeci">virtual size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00386">CCopasiVector.h:386</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a20af886991b8be68c8328a4ae1bc0c6e"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">CCopasiMessage::getText</a></div><div class="ttdeci">const std::string &amp; getText() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00360">CCopasiMessage.cpp:360</a></div></div>
<div class="ttc" id="classCModel_html_afcd4a2210cc887e066ac755a550e7ec4"><div class="ttname"><a href="../../d4/d04/classCModel.html#afcd4a2210cc887e066ac755a550e7ec4">CModel::setLengthUnit</a></div><div class="ttdeci">bool setLengthUnit(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02204">CModel.cpp:2204</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8728f6d9cdf831a37754c20bb9353a04"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">SBMLImporter::mReactionsWithReplacedLocalParameters</a></div><div class="ttdeci">std::set&lt; std::string &gt; mReactionsWithReplacedLocalParameters</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00078">SBMLImporter.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aee0459aaff9aa4dda4852bc5d61fad2c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">SBMLImporter::importInitialAssignments</a></div><div class="ttdeci">void importInitialAssignments(Model *pSBMLModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlMap, const CModel *pCOPASIModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l08791">SBMLImporter.cpp:8791</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0e283899bb37b21959fa43ebe792588d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0e283899bb37b21959fa43ebe792588d">SBMLImporter::findAvogadroConstant</a></div><div class="ttdeci">void findAvogadroConstant(Model *pSBMLModel, double factor)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09058">SBMLImporter.cpp:9058</a></div></div>
<div class="ttc" id="classCModel_html_aa34037c16dc088443d60144aafc20efe"><div class="ttname"><a href="../../d4/d04/classCModel.html#aa34037c16dc088443d60144aafc20efe">CModel::setTimeUnit</a></div><div class="ttdeci">bool setTimeUnit(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02227">CModel.cpp:2227</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a5d0a2880f878659d6a0fc2fe0cc15610"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">SBMLImporter::mSubstanceOnlySpecies</a></div><div class="ttdeci">std::map&lt; Species *, Compartment * &gt; mSubstanceOnlySpecies</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00076">SBMLImporter.h:76</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="SBMLImporter_8cpp_html_afee4fa5ddad2bcd6530bfbc014b2b0ff"><div class="ttname"><a href="../../df/dfd/SBMLImporter_8cpp.html#afee4fa5ddad2bcd6530bfbc014b2b0ff">getInitialCNForSBase</a></div><div class="ttdeci">std::string getInitialCNForSBase(SBase *sbase, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00212">SBMLImporter.cpp:212</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a32b10e0dc03fc5bbf7b4842b0d314ff6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">SBMLImporter::mpImportHandler</a></div><div class="ttdeci">CProcessReport * mpImportHandler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00072">SBMLImporter.h:72</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7f40d8fba618f0e960f83849b93f357d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">SBMLImporter::mDelayFound</a></div><div class="ttdeci">bool mDelayFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00082">SBMLImporter.h:82</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0d1d70d874673527b508b3e8dcfed729"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">SBMLImporter::mUnsupportedRuleFound</a></div><div class="ttdeci">bool mUnsupportedRuleFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00058">SBMLImporter.h:58</a></div></div>
<div class="ttc" id="SBMLImporter_8cpp_html_a6c9f65aeea9a7ce079171b3a9a5b2673"><div class="ttname"><a href="../../df/dfd/SBMLImporter_8cpp.html#a6c9f65aeea9a7ce079171b3a9a5b2673">INIT_DEFAULTS</a></div><div class="ttdeci">#define INIT_DEFAULTS(element)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00049">SBMLImporter.cpp:49</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ad01e17c0afbe5350a9c4474dadc0d168"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ad01e17c0afbe5350a9c4474dadc0d168">SBMLImporter::importFunctionDefinitions</a></div><div class="ttdeci">CFunctionDB * importFunctionDefinitions(Model *pSBMLModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09903">SBMLImporter.cpp:9903</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7d741ae7e3799fdc819e689a3dafad86"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">SBMLImporter::mVersion</a></div><div class="ttdeci">unsigned int mVersion</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00065">SBMLImporter.h:65</a></div></div>
<div class="ttc" id="copasi_8h_html_a9e77742fb2ec39ea4ec3f3fbe6758c2d"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a></div><div class="ttdeci">#define C_INT32</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00090">copasi.h:90</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a273943602d6059106e5d0ef3dd3e6e45"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">SBMLImporter::mPotentialAvogadroNumbers</a></div><div class="ttdeci">std::set&lt; const Parameter * &gt; mPotentialAvogadroNumbers</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00083">SBMLImporter.h:83</a></div></div>
<div class="ttc" id="classCMetab_html"><div class="ttname"><a href="../../dc/d44/classCMetab.html">CMetab</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df5/CMetab_8h_source.html#l00178">CMetab.h:178</a></div></div>
<div class="ttc" id="classCProcessReport_html_a26e24b2229161d39dba3a2ae3461ce7b"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">CProcessReport::progressItem</a></div><div class="ttdeci">virtual bool progressItem(const size_t &amp;handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00160">CProcessReport.cpp:160</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a6e5e86bfa4b63886caa4daf1800a7abd"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a6e5e86bfa4b63886caa4daf1800a7abd">SBMLImporter::createCMetabFromSpecies</a></div><div class="ttdeci">CMetab * createCMetabFromSpecies(const Species *sbmlSpecies, CModel *copasiModel, CCompartment *copasiCompartment, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, const Model *pSBMLModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l02044">SBMLImporter.cpp:2044</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a11c5ec0d43dba7741be5043bcd484e0d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">SBMLImporter::checkElementUnits</a></div><div class="ttdeci">void checkElementUnits(const Model *pSBMLModel, CModel *pCopasiModel, int level, int version)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l07353">SBMLImporter.cpp:7353</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960aea8f5bb69557d9eba4ba9551b4a1bb53"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960aea8f5bb69557d9eba4ba9551b4a1bb53">CModel::m2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9e83963c608041887b5d5e292be033c9"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">SBMLImporter::mImportStep</a></div><div class="ttdeci">unsigned C_INT32 mImportStep</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00073">SBMLImporter.h:73</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aab3ad9f948cb55e9cb589d2b0bb3c934"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aab3ad9f948cb55e9cb589d2b0bb3c934">SBMLImporter::handleSubstanceUnit</a></div><div class="ttdeci">std::pair&lt; CModel::QuantityUnit, bool &gt; handleSubstanceUnit(const UnitDefinition *uDef)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l03552">SBMLImporter.cpp:3552</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2aa8c57db3550fc84175ad38f1f3661e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">SBMLImporter::mpDataModel</a></div><div class="ttdeci">CCopasiDataModel * mpDataModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00068">SBMLImporter.h:68</a></div></div>
<div class="ttc" id="classCModel_html_ab30b51797988903a4af4e7fed3d163fa"><div class="ttname"><a href="../../d4/d04/classCModel.html#ab30b51797988903a4af4e7fed3d163fa">CModel::getQuantity2NumberFactor</a></div><div class="ttdeci">const C_FLOAT64 &amp; getQuantity2NumberFactor() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02354">CModel.cpp:2354</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ac4bdf302a8047d3398d6e6c796f3508d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ac4bdf302a8047d3398d6e6c796f3508d">SBMLImporter::mAvogadroSet</a></div><div class="ttdeci">bool mAvogadroSet</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00091">SBMLImporter.h:91</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af3884484e51df06669ba5bc4fc77c07c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">SBMLImporter::functionDB</a></div><div class="ttdeci">CFunctionDB * functionDB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00056">SBMLImporter.h:56</a></div></div>
<div class="ttc" id="classCModel_html_a607d468405aace77f2181ef72c73435ca852877a1fa93e102c671cc015189d7bb"><div class="ttname"><a href="../../d4/d04/classCModel.html#a607d468405aace77f2181ef72c73435ca852877a1fa93e102c671cc015189d7bb">CModel::deterministic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00112">CModel.h:112</a></div></div>
<div class="ttc" id="classCProcessReport_html_a4d231c54881f298ee86d1ae44bd6e034"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">CProcessReport::addItem</a></div><div class="ttdeci">size_t addItem(const std::string &amp;name, const std::string &amp;value, const std::string *pEndValue=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00092">CProcessReport.cpp:92</a></div></div>
<div class="ttc" id="classCFunction_html_af9762a77d28da2757878f1218ca4e04c"><div class="ttname"><a href="../../d9/d86/classCFunction.html#af9762a77d28da2757878f1218ca4e04c">CFunction::setSBMLId</a></div><div class="ttdeci">void setSBMLId(const std::string &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00063">CFunction.cpp:63</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a50b1ef1543256b1b2e0ae69c7f1ff7c6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a50b1ef1543256b1b2e0ae69c7f1ff7c6">SBMLImporter::setInitialValues</a></div><div class="ttdeci">bool setInitialValues(CModel *pModel, const std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l07169">SBMLImporter.cpp:7169</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_ad39689ede4b80c944660201e94c52705"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a></div><div class="ttdeci">struct MESSAGES Message</div></div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25baa03a13afa5e7de5f940f6841fe779d17"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa03a13afa5e7de5f940f6841fe779d17">CModel::Mol</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0e1dc15ef3ff133f828fb8f527ca7c68"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0e1dc15ef3ff133f828fb8f527ca7c68">SBMLImporter::areRulesUnique</a></div><div class="ttdeci">void areRulesUnique(const Model *copasiMode)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06662">SBMLImporter.cpp:6662</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a09fb60445d24cc1bd582e23869cfaee1"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">SBMLImporter::mDivisionByCompartmentReactions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mDivisionByCompartmentReactions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00071">SBMLImporter.h:71</a></div></div>
<div class="ttc" id="classCProcessReport_html_aefaaae08a9072b715c2f1a1a589efab0"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">CProcessReport::finishItem</a></div><div class="ttdeci">virtual bool finishItem(const size_t &amp;handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00199">CProcessReport.cpp:199</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a3eab269f4577f39f76b021c4e3f75b37"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a3eab269f4577f39f76b021c4e3f75b37">SBMLImporter::removeUnusedFunctions</a></div><div class="ttdeci">bool removeUnusedFunctions(CFunctionDB *pTmpFunctionDB, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06089">SBMLImporter.cpp:6089</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ac9b629c3ac0f557a6f94da2880781ed2"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ac9b629c3ac0f557a6f94da2880781ed2">SBMLImporter::isStochasticModel</a></div><div class="ttdeci">bool isStochasticModel(const Model *pSBMLModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06344">SBMLImporter.cpp:6344</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a47c92998532c601a66df4fae4e5a8b2d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">SBMLImporter::handleAreaUnit</a></div><div class="ttdeci">std::pair&lt; CModel::AreaUnit, bool &gt; handleAreaUnit(const UnitDefinition *uDef)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04073">SBMLImporter.cpp:4073</a></div></div>
<div class="ttc" id="classCCompartment_html"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html">CCompartment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d59/CCompartment_8h_source.html#l00037">CCompartment.h:37</a></div></div>
<div class="ttc" id="classCModel_html_a8c013aa7abfe257047fd0bd4a0da567c"><div class="ttname"><a href="../../d4/d04/classCModel.html#a8c013aa7abfe257047fd0bd4a0da567c">CModel::setCompileFlag</a></div><div class="ttdeci">void setCompileFlag(bool flag=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l00607">CModel.cpp:607</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a3d029d1a08dc8f22dba1eedc57b036e3"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">SBMLImporter::mFastReactions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mFastReactions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00077">SBMLImporter.h:77</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22ca4a35e788ac8194d4f2d1569516ea925d"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4a35e788ac8194d4f2d1569516ea925d">CModel::m</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a879076815531affcbd0768f405f76475"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a879076815531affcbd0768f405f76475">SBMLImporter::createCCompartmentFromCompartment</a></div><div class="ttdeci">CCompartment * createCCompartmentFromCompartment(const Compartment *sbmlComp, CModel *copasiModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, const Model *pSBMLModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l01950">SBMLImporter.cpp:1950</a></div></div>
<div class="ttc" id="classCModel_html_a607d468405aace77f2181ef72c73435cad3d8ea5931fe8a3440fa2805991d9c76"><div class="ttname"><a href="../../d4/d04/classCModel.html#a607d468405aace77f2181ef72c73435cad3d8ea5931fe8a3440fa2805991d9c76">CModel::stochastic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00112">CModel.h:112</a></div></div>
<div class="ttc" id="classCFunction_html_a8dca3a504b45b55d7af0ba49a2e9a9a0"><div class="ttname"><a href="../../d9/d86/classCFunction.html#a8dca3a504b45b55d7af0ba49a2e9a9a0">CFunction::getSBMLId</a></div><div class="ttdeci">const std::string &amp; getSBMLId() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00068">CFunction.cpp:68</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ac0d4d75e9f6785597142a2bce5131499"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ac0d4d75e9f6785597142a2bce5131499">SBMLImporter::importEvents</a></div><div class="ttdeci">void importEvents(Model *pSBMLModel, CModel *pCopasiModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09533">SBMLImporter.cpp:9533</a></div></div>
<div class="ttc" id="classCFunction_html"><div class="ttname"><a href="../../d9/d86/classCFunction.html">CFunction</a></div><div class="ttdoc">The class for handling a chemical kinetic function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df5/CFunction_8h_source.html#l00029">CFunction.h:29</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a779466459366c517247fc2598d5f56e8"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">SBMLImporter::sbmlIdMap</a></div><div class="ttdeci">std::map&lt; CFunction *, std::string &gt; sbmlIdMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00066">SBMLImporter.h:66</a></div></div>
<div class="ttc" id="classCModel_html_aa2708e11ebbd298911358a1f0a3cfe75"><div class="ttname"><a href="../../d4/d04/classCModel.html#aa2708e11ebbd298911358a1f0a3cfe75">CModel::setQuantityUnit</a></div><div class="ttdeci">bool setQuantityUnit(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02250">CModel.cpp:2250</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ac63af5c9fb48fdfac1fc3317954dca1f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">SBMLImporter::handleLengthUnit</a></div><div class="ttdeci">std::pair&lt; CModel::LengthUnit, bool &gt; handleLengthUnit(const UnitDefinition *uDef)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l03926">SBMLImporter.cpp:3926</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aab2342964defac3d15b32eed20211e13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a></div><div class="ttdeci">bool importMIRIAM(const SBase *pSBMLObject, CCopasiObject *pCOPASIObject)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09225">SBMLImporter.cpp:9225</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a4c76a3dbe6ad1f874f6d24b6bb7fb8f9"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">SBMLImporter::createCReactionFromReaction</a></div><div class="ttdeci">CReaction * createCReactionFromReaction(Reaction *sbmlReaction, Model *sbmlModel, CModel *cmodel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, CFunctionDB *pTmpFunctionDB)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l02146">SBMLImporter.cpp:2146</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8595689dd63fec1e462ee49fd16ea333"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">SBMLImporter::createCModelValueFromParameter</a></div><div class="ttdeci">CModelValue * createCModelValueFromParameter(const Parameter *sbmlParameter, CModel *copasiModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04436">SBMLImporter.cpp:4436</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2919a190a2cb8b7b5eb501af5c6f393e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">SBMLImporter::speciesMap</a></div><div class="ttdeci">std::map&lt; std::string, CMetab * &gt; speciesMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00055">SBMLImporter.h:55</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a43ba9124187b089d5fb4122e8d9d7be2"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">SBMLImporter::mIgnoredParameterUnits</a></div><div class="ttdeci">std::vector&lt; std::string &gt; mIgnoredParameterUnits</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00080">SBMLImporter.h:80</a></div></div>
<div class="ttc" id="classCModel_html"><div class="ttname"><a href="../../d4/d04/classCModel.html">CModel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00050">CModel.h:50</a></div></div>
<div class="ttc" id="SBMLImporter_8cpp_html_abb8ea6fa780c524cacf378894e59e960"><div class="ttname"><a href="../../df/dfd/SBMLImporter_8cpp.html#abb8ea6fa780c524cacf378894e59e960">getOriginalSBMLId</a></div><div class="ttdeci">std::string getOriginalSBMLId(Parameter *parameter)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00189">SBMLImporter.cpp:189</a></div></div>
<div class="ttc" id="classCCopasiContainer_html_a56ad5bdfd87327bed598c10461db695c"><div class="ttname"><a href="../../d9/dfd/classCCopasiContainer.html#a56ad5bdfd87327bed598c10461db695c">CCopasiContainer::getObject</a></div><div class="ttdeci">virtual const CObjectInterface * getObject(const CCopasiObjectName &amp;cn) const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddc/CCopasiContainer_8cpp_source.html#l00074">CCopasiContainer.cpp:74</a></div></div>
<div class="ttc" id="classCModel_html_a62086f2f71772b87e61beb6fa584cdab"><div class="ttname"><a href="../../d4/d04/classCModel.html#a62086f2f71772b87e61beb6fa584cdab">CModel::setAvogadro</a></div><div class="ttdeci">void setAvogadro(const C_FLOAT64 &amp;avogadro)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02342">CModel.cpp:2342</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2b5d21dd508be56977f4d2c642d89fa5"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a></div><div class="ttdeci">static bool importNotes(CAnnotation *pAnno, const SBase *pSBase)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10586">SBMLImporter.cpp:10586</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a6691431210bb58c9055c4d2847bd111c"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">CCopasiObject::setObjectName</a></div><div class="ttdeci">bool setObjectName(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00158">CCopasiObject.cpp:158</a></div></div>
<div class="ttc" id="classCModelEntity_html_a9bfa78ba4485c77792c9cac3dfb3ac2e"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">CModelEntity::setSBMLId</a></div><div class="ttdeci">void setSBMLId(const std::string &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00632">CModelValue.cpp:632</a></div></div>
<div class="ttc" id="classCModel_html_a427dcb87659bae4f0fc707c9e6f03f9d"><div class="ttname"><a href="../../d4/d04/classCModel.html#a427dcb87659bae4f0fc707c9e6f03f9d">CModel::setModelType</a></div><div class="ttdeci">void setModelType(const ModelType &amp;modelType)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02336">CModel.cpp:2336</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa1aca4da87cb2a912a7f27e0a21e6359"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">SBMLImporter::handleVolumeUnit</a></div><div class="ttdeci">std::pair&lt; CModel::VolumeUnit, bool &gt; handleVolumeUnit(const UnitDefinition *uDef)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04220">SBMLImporter.cpp:4220</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7d00c07d4d501255fa18951e949461b2"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7d00c07d4d501255fa18951e949461b2">SBMLImporter::applyStoichiometricExpressions</a></div><div class="ttdeci">void applyStoichiometricExpressions(std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Model *pSBMLModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l08980">SBMLImporter.cpp:8980</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a61d10c15681b398f297bee71eaa75dbe"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a61d10c15681b398f297bee71eaa75dbe">SBMLImporter::areSBMLUnitDefinitionsIdentical</a></div><div class="ttdeci">static bool areSBMLUnitDefinitionsIdentical(const UnitDefinition *pUdef1, const UnitDefinition *pUdef2)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l08297">SBMLImporter.cpp:8297</a></div></div>
<div class="ttc" id="classCModel_html_a7cffc171ec7d35ffd8f75c2d2ca8b9bd"><div class="ttname"><a href="../../d4/d04/classCModel.html#a7cffc171ec7d35ffd8f75c2d2ca8b9bd">CModel::forceCompile</a></div><div class="ttdeci">bool forceCompile(CProcessReport *pProcessReport)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l00636">CModel.cpp:636</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8595689dd63fec1e462ee49fd16ea333"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dec/classCModelValue.html">CModelValue</a> * SBMLImporter::createCModelValueFromParameter </td>
          <td>(</td>
          <td class="paramtype">const Parameter *&#160;</td>
          <td class="paramname"><em>sbmlParameter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>copasiModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates and returns a COPASI <a class="el" href="../../d7/dec/classCModelValue.html">CModelValue</a> from the given SBML Parameter object. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l04436">4436</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../d4/d04/classCModel.html#ae4dd50b9cd54857302a8cfc458ecc052">CModel::createModelValue()</a>, <a class="el" href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">CCopasiVectorN&lt; CType &gt;::getIndex()</a>, <a class="el" href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">CModel::getModelValues()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">importMIRIAM()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">importNotes()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">mIgnoredParameterUnits</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, and <a class="el" href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">CModelEntity::setSBMLId()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a851212f9fbd299a9a2deaadf2d7a5eb1">createHasOnlySubstanceUnitFactor()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aca53cdde28ce5bb980ece4371c055fc8">find_local_parameters_in_delay()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;{</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;  <span class="keywordflow">if</span> (sbmlParameter-&gt;isSetUnits())</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;    {</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;      <span class="comment">/* !!!! create a warning that the units will be ignored. */</span></div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;      <span class="comment">//CCopasiMessage Message(CCopasiMessage::WARNING, MCSBML + 26, sbmlParameter-&gt;getId().c_str());</span></div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">mIgnoredParameterUnits</a>.push_back(sbmlParameter-&gt;getId());</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;      <span class="keyword">const_cast&lt;</span>Parameter*<span class="keyword">&gt;</span>(sbmlParameter)-&gt;unsetUnits();</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;    }</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;  std::string name = sbmlParameter-&gt;getName();</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;  <span class="keywordflow">if</span> (!sbmlParameter-&gt;isSetName())</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;    {</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;      name = sbmlParameter-&gt;getId();</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;    }</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;  std::string appendix = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter = 2;</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;  std::ostringstream numberStream;</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;  <span class="keywordflow">while</span> (copasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">getModelValues</a>().<a class="code" href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">getIndex</a>(name + appendix) != <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>)</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;    {</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;      numberStream.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;      numberStream &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; counter;</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;      counter++;</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;      appendix = numberStream.str();</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;    }</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;  std::string sbmlId;</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;    {</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;      sbmlId = sbmlParameter-&gt;getName();</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;    }</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;    {</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;      sbmlId = sbmlParameter-&gt;getId();</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    }</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;  <a class="code" href="../../d7/dec/classCModelValue.html">CModelValue</a>* pMV = copasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ae4dd50b9cd54857302a8cfc458ecc052">createModelValue</a>(name + appendix, 0.0);</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;  copasi2sbmlmap[pMV] = <span class="keyword">const_cast&lt;</span>Parameter*<span class="keyword">&gt;</span>(sbmlParameter);</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;  pMV-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">setSBMLId</a>(sbmlId);</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a>(sbmlParameter, pMV);</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a>(pMV, sbmlParameter);</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;    {</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;      this-&gt;mSBMLIdModelValueMap[sbmlId] = pMV;</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;    }</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;  <span class="keywordflow">return</span> pMV;</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classCModel_html_ab3481ad574a3e1935a7617339970eab2"><div class="ttname"><a href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">CModel::getModelValues</a></div><div class="ttdeci">const CCopasiVectorN&lt; CModelValue &gt; &amp; getModelValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01060">CModel.cpp:1060</a></div></div>
<div class="ttc" id="classCModelValue_html"><div class="ttname"><a href="../../d7/dec/classCModelValue.html">CModelValue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00419">CModelValue.h:419</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classCModel_html_ae4dd50b9cd54857302a8cfc458ecc052"><div class="ttname"><a href="../../d4/d04/classCModel.html#ae4dd50b9cd54857302a8cfc458ecc052">CModel::createModelValue</a></div><div class="ttdeci">CModelValue * createModelValue(const std::string &amp;name, const C_FLOAT64 &amp;value=0.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02838">CModel.cpp:2838</a></div></div>
<div class="ttc" id="classCCopasiVectorN_html_a3588b566dfda5b5a4fc570936abf7c0a"><div class="ttname"><a href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">CCopasiVectorN::getIndex</a></div><div class="ttdeci">virtual size_t getIndex(const std::string &amp;name) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00774">CCopasiVector.h:774</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aab2342964defac3d15b32eed20211e13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a></div><div class="ttdeci">bool importMIRIAM(const SBase *pSBMLObject, CCopasiObject *pCOPASIObject)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09225">SBMLImporter.cpp:9225</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a43ba9124187b089d5fb4122e8d9d7be2"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a43ba9124187b089d5fb4122e8d9d7be2">SBMLImporter::mIgnoredParameterUnits</a></div><div class="ttdeci">std::vector&lt; std::string &gt; mIgnoredParameterUnits</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00080">SBMLImporter.h:80</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2b5d21dd508be56977f4d2c642d89fa5"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a></div><div class="ttdeci">static bool importNotes(CAnnotation *pAnno, const SBase *pSBase)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10586">SBMLImporter.cpp:10586</a></div></div>
<div class="ttc" id="classCModelEntity_html_a9bfa78ba4485c77792c9cac3dfb3ac2e"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a9bfa78ba4485c77792c9cac3dfb3ac2e">CModelEntity::setSBMLId</a></div><div class="ttdeci">void setSBMLId(const std::string &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00632">CModelValue.cpp:632</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4c76a3dbe6ad1f874f6d24b6bb7fb8f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/dcf/classCReaction.html">CReaction</a> * SBMLImporter::createCReactionFromReaction </td>
          <td>(</td>
          <td class="paramtype">Reaction *&#160;</td>
          <td class="paramname"><em>sbmlReaction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>copasiModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *&#160;</td>
          <td class="paramname"><em>pTmpFunctionDB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates and returns a COPASI <a class="el" href="../../d4/dcf/classCReaction.html">CReaction</a> object from the given SBML Reaction object. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l02146">2146</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../db/d9a/classCFunctionDB.html#af425d76a956e07032c2ab0428b3ea1ca">CFunctionDB::add()</a>, <a class="el" href="../../df/d44/classCEvaluationNodeCall.html#a6147ec0eb9c3a60469965d9ec5bc4b11">CEvaluationNodeCall::addChild()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#ad70f73e0550eb9df78c1da4bfd2d6c46">CReaction::addModifier()</a>, <a class="el" href="../../df/d89/classCCopasiParameterGroup.html#a662c3f2e34a2124b26900445e1f20015">CCopasiParameterGroup::addParameter()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#afb6bc2a72c7f1791d721f5f3be2e5164">CReaction::addProduct()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#a6a613da80f021481cc9a21c18549b2d7">CReaction::addSubstrate()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">CCopasiVector&lt; T &gt;::begin()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#ac4f8f8fcd12a8115cd9802d04a557125">C_FLOAT64</a>, <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#acdc9c870d380d660ef11b4389eaf5bc8">containsVolume()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">CEvaluationNode::copyBranch()</a>, <a class="el" href="../../d4/d04/classCModel.html#a47f7b8c04498563ba457a15cd8277611">CModel::createReaction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a42cbb6f094224d7ec795eb172e40ab57">doMapping()</a>, <a class="el" href="../../d5/db6/classCCopasiParameter.html#a18357c86629fe757e3120258ce81ef56a3b736192222fcb8ee487a9c36bbd9867">CCopasiParameter::DOUBLE</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">CCopasiVector&lt; T &gt;::end()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../df/d44/classCEvaluationNodeCall.html#a93a04c7bc0f741a21aaf2931c1a48a5aa5d43ba70c6ead890c617d6a52a43dbdd">CEvaluationNodeCall::EXPRESSION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a76e38c93eb85a4d0cf0b188674ac6ff3">findCorrespondingFunction()</a>, <a class="el" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">findIdInASTTree()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#abc741d5cf6e1842ecf0738c80e4b793d">CEvaluationTree::fromAST()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>, <a class="el" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">CReaction::getChemEq()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">CCopasiObject::getCN()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode&lt; _Data &gt;::getData()</a>, <a class="el" href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">CCompartment::getDimensionality()</a>, <a class="el" href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">CCopasiVectorN&lt; CType &gt;::getIndex()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#ab8b0078259e19d69c3e62b890197d601">CChemEq::getModifiers()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">CCopasiObject::getObjectType()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#a2afc8ee8b6ca18e954a447deb3acbe95">CReaction::getParameters()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">CChemEq::getProducts()</a>, <a class="el" href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">CModel::getReactions()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">CModelEntity::getSBMLId()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode&lt; _Data &gt;::getSibling()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">CEvaluationTree::getType()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType()</a>, <a class="el" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">importMIRIAM()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">importNotes()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#adaced01dad763bc9aabccdd95f818ae8">isConstantFlux()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5eccfb6bf7001137ae5b14ecbfd0c971">isMassAction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a632c364034d1112fdc3ed7e05dfd157c">isMultipliedByVolume()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">CReaction::isReversible()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#add8d8e41a0b4c3853049ee8f5d121d99">isSimpleFunctionCall()</a>, <a class="el" href="../../d9/d86/classCFunction.html#a0b9d00ff5364c43620b2d0a97b7c386e">CFunction::isSuitable()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">mDivisionByCompartmentReactions</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">mFastReactions</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>, <a class="el" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294">CChemEq::PRODUCT</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#afa0fbf5c970cdfc26118c33a921caa5d">renameMassActionParameters()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a3bf3c7539fc012eb3ca782f0ca44e5a8">sbmlId2CopasiCN()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#af9e224b58a1430f381d2096d8fe819c0">CReaction::setFunction()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#ab807fb099922f32e1c94c44b26bf1979">CReaction::setFunctionFromExpressionTree()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">CCopasiObject::setObjectName()</a>, <a class="el" href="../../d9/d86/classCFunction.html#aa3a7871b909987fffdfaecedde2dd9fa">CFunction::setReversible()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#a79b22760581d7d351fef1848eba420b7">CReaction::setReversible()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#a61ef1f775c492a0be897285e40fe0e0f">CReaction::setSBMLId()</a>, <a class="el" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">CFunctionParameters::size()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector&lt; T &gt;::size()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a>, <a class="el" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a27713ac73421a91bc85961a82e45635e">TriFalse</a>, <a class="el" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a8a0273b6da872343bab7a1278a8aa87e">TriTrue</a>, <a class="el" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a358d04006ba010a4e9258117031fb00c">TriUnspecified</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a9e1e81619841ec18ca458b1637e2601c">variables2objects()</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;{</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <span class="keywordflow">if</span> (sbmlReaction == NULL)</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    }</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  std::string name = sbmlReaction-&gt;getName();</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    {</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      name = sbmlReaction-&gt;getId();</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    }</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <span class="comment">/* Check if the name of the reaction is unique. */</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  std::string appendix = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter = 2;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  std::ostringstream numberStream;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  <span class="keywordflow">while</span> (copasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">getReactions</a>().<a class="code" href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">getIndex</a>(name + appendix) != <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>)</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    {</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      numberStream.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      numberStream &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; counter;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      counter++;</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      appendix = numberStream.str();</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    }</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="comment">/* create a new reaction with the unique name */</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <a class="code" href="../../d4/dcf/classCReaction.html">CReaction</a>* copasiReaction = copasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#a47f7b8c04498563ba457a15cd8277611">createReaction</a>(name + appendix);</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="keywordflow">if</span> (copasiReaction == NULL)</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    {</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    }</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a79b22760581d7d351fef1848eba420b7">setReversible</a>(sbmlReaction-&gt;getReversible());</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    {</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a61ef1f775c492a0be897285e40fe0e0f">setSBMLId</a>(sbmlReaction-&gt;getName());</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    }</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;      copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a61ef1f775c492a0be897285e40fe0e0f">setSBMLId</a>(sbmlReaction-&gt;getId());</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    }</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  copasi2sbmlmap[copasiReaction] = <span class="keyword">const_cast&lt;</span>Reaction*<span class="keyword">&gt;</span>(sbmlReaction);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <span class="keywordflow">if</span> (sbmlReaction-&gt;isSetFast() &amp;&amp; sbmlReaction-&gt;getFast() == <span class="keyword">true</span>)</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    {</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;      <span class="keyword">const_cast&lt;</span>Reaction*<span class="keyword">&gt;</span>(sbmlReaction)-&gt;setFast(<span class="keyword">false</span>);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">mFastReactions</a>.insert(sbmlReaction-&gt;getId());</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    }</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  <span class="comment">// store if the reaction involves species that need a conversion factor</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  <span class="keywordtype">bool</span> mConversionFactorNeeded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <span class="comment">/* Add all substrates to the reaction */</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> num = sbmlReaction-&gt;getNumReactants();</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="keywordtype">bool</span> singleCompartment = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d4/dd4/classCCompartment.html">CCompartment</a>* compartment = NULL;</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <span class="keywordtype">bool</span> hasOnlySubstanceUnitPresent = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <span class="keywordtype">bool</span> ignoreMassAction = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; num; counter++)</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    {</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="keyword">const</span> SpeciesReference* sr = sbmlReaction-&gt;getReactant(counter);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      <span class="keywordflow">if</span> (sr == NULL)</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        {</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;          <span class="keyword">delete</span> copasiReaction;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;        }</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;      <a class="code" href="../../dc/df8/copasi_8h.html#ac4f8f8fcd12a8115cd9802d04a557125">C_FLOAT64</a> stoi = 1.0;</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &lt; 3)</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        {</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;          <span class="comment">// We may not use Mass Action kinetics if we do not know the actual stoichiometry.</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;          <span class="keywordflow">if</span> (sr-&gt;isSetStoichiometryMath())</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            {</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;              ignoreMassAction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            }</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;            {</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;              stoi = sr-&gt;getStoichiometry() / sr-&gt;getDenominator();</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;            }</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        }</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;        {</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;          <span class="comment">// We may not use Mass Action kinetics if we do not know the actual stoichiometry.</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;          <span class="keywordflow">if</span> (sr-&gt;isSetId() &amp;&amp;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;              (pSBMLModel-&gt;getInitialAssignment(sr-&gt;getId()) ||</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;               pSBMLModel-&gt;getRule(sr-&gt;getId())))</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            {</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;              ignoreMassAction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;            }</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;          <span class="keywordflow">if</span> (sr-&gt;isSetStoichiometry())</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;            {</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;              stoi = sr-&gt;getStoichiometry();</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            }</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        }</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      std::map&lt;std::string, CMetab*&gt;::iterator pos;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      pos = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>.find(sr-&gt;getSpecies());</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;      <span class="comment">// check if we have a conversion factor</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      <span class="keywordflow">if</span> (pos == this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>.end())</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        {</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;          <span class="keyword">delete</span> copasiReaction;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        }</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;        {</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;          <span class="comment">// check if there is a conversion factor on the species</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;          <span class="keywordflow">if</span> (this-&gt;mpModelConversionFactor != NULL || this-&gt;mSpeciesConversionParameterMap.find(pos-&gt;second-&gt;getSBMLId()) != this-&gt;mSpeciesConversionParameterMap.end())</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            {</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;              mConversionFactorNeeded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            }</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        }</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator spos = copasi2sbmlmap.find(pos-&gt;second);</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      assert(spos != copasi2sbmlmap.end());</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      Species* pSBMLSpecies = <span class="keyword">dynamic_cast&lt;</span>Species*<span class="keyword">&gt;</span>(spos-&gt;second);</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      assert(pSBMLSpecies != NULL);</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      hasOnlySubstanceUnitPresent = (hasOnlySubstanceUnitPresent | (pSBMLSpecies-&gt;getHasOnlySubstanceUnits() == <span class="keyword">true</span>));</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;      <span class="keywordflow">if</span> (compartment == NULL)</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;        {</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;          compartment = pos-&gt;second-&gt;getCompartment();</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        }</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;        {</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;          <span class="keywordflow">if</span> (singleCompartment &amp;&amp; compartment != pos-&gt;second-&gt;getCompartment())</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            {</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;              singleCompartment = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;            }</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        }</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a6a613da80f021481cc9a21c18549b2d7">addSubstrate</a>(pos-&gt;second-&gt;getKey(), stoi);</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      <span class="comment">// we need to store the id of the species reference if it is set because SBML Level 3 allows</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      <span class="comment">// references to species references and if we want to support his, we need the id to import</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      <span class="comment">// expressions that reference a species reference</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        {</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;          <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt;CChemEqElement&gt;::const_iterator</a> it = copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>(), endit = copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;          <a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* pElement = NULL;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;          <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;            {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;              <span class="keywordflow">if</span> ((*it)-&gt;getMetaboliteKey() == pos-&gt;second-&gt;getKey())</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                {</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;                  pElement = <span class="keyword">const_cast&lt;</span><a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>*<span class="keyword">&gt;</span>(*it);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                }</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;              ++it;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;            }</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;          assert(pElement != NULL);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;          <span class="keywordflow">if</span> (pElement != NULL)</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;            {</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;              copasi2sbmlmap[pElement] = <span class="keyword">const_cast&lt;</span>SpeciesReference*<span class="keyword">&gt;</span>(sr);</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;              this-&gt;mChemEqElementSpeciesIdMap[pElement] = std::pair&lt;std::string, CChemEq::MetaboliteRole&gt;(sr-&gt;getSpecies(), <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a>);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;            }</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        }</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;      <span class="comment">// find the CChemEqElement that belongs to the added substrate</span></div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      <span class="keywordflow">if</span> (this-&gt;mLevel &lt; 3 &amp;&amp; sr-&gt;isSetStoichiometryMath())</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        {</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;          <a class="code" href="../../d1/dc0/classCChemEq.html">CChemEq</a>&amp; chemEq = copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>();</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;          <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector &lt; CChemEqElement &gt;::const_iterator</a> it = chemEq.<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>();</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;          <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector &lt; CChemEqElement &gt;::const_iterator</a> end = chemEq.<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;          <a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* pChemEqElement = NULL;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;          <span class="keywordflow">while</span> (it != end)</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;            {</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;              <span class="keywordflow">if</span> ((*it)-&gt;getMetabolite() == pos-&gt;second)</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                  pChemEqElement = (*it);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                }</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;              ++it;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;            }</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;          assert(pChemEqElement != NULL);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;          <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>.insert(std::make_pair(sr-&gt;getStoichiometryMath()-&gt;getMath(), pChemEqElement));</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;        }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    }</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  <span class="comment">/* Add all products to the reaction */</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  num = sbmlReaction-&gt;getNumProducts();</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; num; counter++)</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    {</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;      <span class="keyword">const</span> SpeciesReference* sr = sbmlReaction-&gt;getProduct(counter);</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <span class="keywordflow">if</span> (sr == NULL)</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        {</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;          <span class="keyword">delete</span> copasiReaction;</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        }</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      <a class="code" href="../../dc/df8/copasi_8h.html#ac4f8f8fcd12a8115cd9802d04a557125">C_FLOAT64</a> stoi = 1.0;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &lt; 3)</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        {</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;          <span class="keywordflow">if</span> (sr-&gt;isSetStoichiometryMath())</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;            {</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;              ignoreMassAction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;            }</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;            {</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;              stoi = sr-&gt;getStoichiometry() / sr-&gt;getDenominator();</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;            }</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        }</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        {</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;          <span class="comment">// We may not use Mass Action kinetics if we do not know the actual stoichiometry.</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;          <span class="keywordflow">if</span> (sr-&gt;isSetId() &amp;&amp;</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;              (pSBMLModel-&gt;getInitialAssignment(sr-&gt;getId()) ||</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;               pSBMLModel-&gt;getRule(sr-&gt;getId())))</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;            {</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;              ignoreMassAction = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;            }</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;          <span class="keywordflow">if</span> (sr-&gt;isSetStoichiometry())</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;            {</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;              stoi = sr-&gt;getStoichiometry();</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;            }</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        }</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      std::map&lt;std::string, CMetab*&gt;::iterator pos;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;      pos = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>.find(sr-&gt;getSpecies());</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      <span class="keywordflow">if</span> (pos == this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>.end())</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;        {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;          <span class="keyword">delete</span> copasiReaction;</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;        }</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        {</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;          <span class="comment">// check if there is a conversion factor on the species</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;          <span class="keywordflow">if</span> (this-&gt;mpModelConversionFactor != NULL || this-&gt;mSpeciesConversionParameterMap.find(pos-&gt;second-&gt;getSBMLId()) != this-&gt;mSpeciesConversionParameterMap.end())</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;            {</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;              mConversionFactorNeeded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;            }</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        }</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator spos = copasi2sbmlmap.find(pos-&gt;second);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      assert(spos != copasi2sbmlmap.end());</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;      Species* pSBMLSpecies = <span class="keyword">dynamic_cast&lt;</span>Species*<span class="keyword">&gt;</span>(spos-&gt;second);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      assert(pSBMLSpecies != NULL);</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      hasOnlySubstanceUnitPresent = (hasOnlySubstanceUnitPresent | (pSBMLSpecies-&gt;getHasOnlySubstanceUnits() == <span class="keyword">true</span>));</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      <span class="keywordflow">if</span> (compartment == NULL)</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        {</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;          compartment = pos-&gt;second-&gt;getCompartment();</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        }</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        {</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;          <span class="keywordflow">if</span> (singleCompartment &amp;&amp; compartment != pos-&gt;second-&gt;getCompartment())</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;            {</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;              singleCompartment = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;            }</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        }</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;      copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#afb6bc2a72c7f1791d721f5f3be2e5164">addProduct</a>(pos-&gt;second-&gt;getKey(), stoi);</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      <span class="comment">// we need to store the id of the species reference if it is set because SBML Level 3 allows</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;      <span class="comment">// references to species references and if we want to support his, we need the id to import</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;      <span class="comment">// expressions that reference a species reference</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        {</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;          <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt;CChemEqElement&gt;::const_iterator</a> it = copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>(), endit = copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;          <a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* pElement = NULL;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;          <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;            {</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;              <span class="keywordflow">if</span> ((*it)-&gt;getMetaboliteKey() == pos-&gt;second-&gt;getKey())</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;                {</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                  pElement = <span class="keyword">const_cast&lt;</span><a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>*<span class="keyword">&gt;</span>(*it);</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                }</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;              ++it;</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;            }</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;          assert(pElement != NULL);</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;          <span class="keywordflow">if</span> (pElement != NULL)</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;            {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;              copasi2sbmlmap[pElement] = <span class="keyword">const_cast&lt;</span>SpeciesReference*<span class="keyword">&gt;</span>(sr);</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;              this-&gt;mChemEqElementSpeciesIdMap[pElement] = std::pair&lt;std::string, CChemEq::MetaboliteRole&gt;(sr-&gt;getSpecies(), <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294">CChemEq::PRODUCT</a>);</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            }</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        }</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      <span class="keywordflow">if</span> (sr-&gt;isSetStoichiometryMath())</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        {</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;          <a class="code" href="../../d1/dc0/classCChemEq.html">CChemEq</a>&amp; chemEq = copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>();</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;          <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector &lt; CChemEqElement &gt;::const_iterator</a> it = chemEq.<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>();</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;          <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector &lt; CChemEqElement &gt;::const_iterator</a> end = chemEq.<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;          <a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* pChemEqElement = NULL;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;          <span class="keywordflow">while</span> (it != end)</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;            {</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;              <span class="keywordflow">if</span> ((*it)-&gt;getMetabolite() == pos-&gt;second)</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                {</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                  pChemEqElement = (*it);</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                }</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;              ++it;</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;            }</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;          assert(pChemEqElement != NULL);</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;          <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>.insert(std::make_pair(sr-&gt;getStoichiometryMath()-&gt;getMath(), pChemEqElement));</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        }</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    }</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  <span class="comment">/* Add all modifiers to the reaction */</span></div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  num = sbmlReaction-&gt;getNumModifiers();</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; num; counter++)</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    {</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;      <span class="keyword">const</span> ModifierSpeciesReference* sr = sbmlReaction-&gt;getModifier(counter);</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;      <span class="keywordflow">if</span> (sr == NULL)</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        {</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;          <span class="keyword">delete</span> copasiReaction;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;        }</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;      std::map&lt;std::string, CMetab*&gt;::iterator pos;</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;      pos = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>.find(sr-&gt;getSpecies());</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      <span class="keywordflow">if</span> (pos == this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">speciesMap</a>.end())</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        {</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;          <span class="keyword">delete</span> copasiReaction;</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        }</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;      std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator spos = copasi2sbmlmap.find(pos-&gt;second);</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;      assert(spos != copasi2sbmlmap.end());</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;      Species* pSBMLSpecies = <span class="keyword">dynamic_cast&lt;</span>Species*<span class="keyword">&gt;</span>(spos-&gt;second);</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      assert(pSBMLSpecies != NULL);</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;      hasOnlySubstanceUnitPresent = (hasOnlySubstanceUnitPresent | (pSBMLSpecies-&gt;getHasOnlySubstanceUnits() == <span class="keyword">true</span>));</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;      copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ad70f73e0550eb9df78c1da4bfd2d6c46">addModifier</a>(pos-&gt;second-&gt;getKey());</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;      <span class="comment">// we need to store the id of the species reference if it is set because SBML Level 3 allows</span></div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;      <span class="comment">// references to species references and if we want to support his, we need the id to import</span></div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      <span class="comment">// expressions that reference a species reference</span></div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        {</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;          <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt;CChemEqElement&gt;::const_iterator</a> it = copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#ab8b0078259e19d69c3e62b890197d601">getModifiers</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>(), endit = copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#ab8b0078259e19d69c3e62b890197d601">getModifiers</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;          <a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* pElement = NULL;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;          <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;            {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;              <span class="keywordflow">if</span> ((*it)-&gt;getMetaboliteKey() == pos-&gt;second-&gt;getKey())</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                {</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;                  pElement = <span class="keyword">const_cast&lt;</span><a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>*<span class="keyword">&gt;</span>(*it);</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                }</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;              ++it;</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;            }</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;          assert(pElement != NULL);</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;          <span class="keywordflow">if</span> (pElement != NULL)</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;            {</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;              copasi2sbmlmap[pElement] = <span class="keyword">const_cast&lt;</span>ModifierSpeciesReference*<span class="keyword">&gt;</span>(sr);</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;            }</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;        }</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    }</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <span class="comment">/* in the newly created CFunction set the types for all parameters and</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;<span class="comment">   * either a mapping or a value</span></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  <span class="keyword">const</span> KineticLaw* kLaw = sbmlReaction-&gt;getKineticLaw();</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <span class="keywordflow">if</span> (kLaw != NULL)</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    {</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      <span class="keyword">const</span> ListOfParameters* pParamList = NULL;</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;        {</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;          pParamList = kLaw-&gt;getListOfLocalParameters();</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        }</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;        {</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;          pParamList = kLaw-&gt;getListOfParameters();</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        }</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      <span class="keywordflow">for</span> (counter = 0; counter &lt; pParamList-&gt;size(); ++counter)</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;        {</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;          <span class="keyword">const</span> Parameter* pSBMLParameter = pParamList-&gt;get(counter);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;          std::string <a class="code" href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">id</a>;</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;          <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;            {</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;              <span class="keywordtype">id</span> = pSBMLParameter-&gt;getName();</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;            }</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;            {</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;              <span class="keywordtype">id</span> = pSBMLParameter-&gt;getId();</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;            }</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;          <span class="keywordtype">double</span> value;</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;          <span class="keywordflow">if</span> (pSBMLParameter-&gt;isSetValue() &amp;&amp; pSBMLParameter-&gt;getValue() == pSBMLParameter-&gt;getValue()) <span class="comment">// make sure it is not set to NaN</span></div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;            {</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;              value = pSBMLParameter-&gt;getValue();</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;            }</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;            {</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;              <span class="comment">// Set value to NaN and create a warning if it is the first time</span></div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;              <span class="comment">// this happend</span></div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;              value = std::numeric_limits&lt;C_FLOAT64&gt;::quiet_NaN();</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;              <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a>)</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                {</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 42, pSBMLParameter-&gt;getId().c_str());</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                }</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;            }</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;          copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a2afc8ee8b6ca18e954a447deb3acbe95">getParameters</a>().<a class="code" href="../../df/d89/classCCopasiParameterGroup.html#a662c3f2e34a2124b26900445e1f20015">addParameter</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d5/db6/classCCopasiParameter.html#a18357c86629fe757e3120258ce81ef56a3b736192222fcb8ee487a9c36bbd9867">CCopasiParameter::DOUBLE</a>, value);</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        }</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      <span class="keyword">const</span> ASTNode* kLawMath = kLaw-&gt;getMath();</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;      <span class="keywordflow">if</span> (kLawMath == NULL || kLawMath-&gt;getType() == AST_UNKNOWN)</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;        {</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;          copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#af9e224b58a1430f381d2096d8fe819c0">setFunction</a>(NULL);</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 56, sbmlReaction-&gt;getId().c_str());</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;        }</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;        {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;          <span class="comment">// check for references to species references in the expression because we don&#39;t support them yet</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a>(kLawMath, this-&gt;mSBMLSpeciesReferenceIds).empty())</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;            {</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 95);</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;            }</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;          <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>* node = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>(*kLawMath);</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode</a>(node, pSBMLModel, copasi2sbmlmap, sbmlReaction);</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;          <span class="keywordflow">if</span> (node == NULL)</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;            {</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;              <span class="keyword">delete</span> copasiReaction;</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;            }</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;          <span class="comment">/* if it is a single compartment reaction, we have to divide the whole kinetic</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="comment">          ** equation by the compartment because COPASI expects</span></div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="comment">          ** kinetic laws that specify concentration/time for single compartment</span></div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;<span class="comment">          ** reactions.</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="comment">          */</span></div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;          <span class="keywordflow">if</span> (singleCompartment)</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;            {</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;              <span class="keywordflow">if</span> (compartment != NULL)</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                {</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                  <span class="comment">// only divide if it is not a 0-dimensional compartment</span></div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;                  <span class="keywordflow">if</span> (compartment-&gt;<a class="code" href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">getDimensionality</a>() != 0)</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                    {</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;                      <span class="comment">// check if the root node is a multiplication node and it&#39;s first child</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                      <span class="comment">// is a compartment node, if so, drop those two and make the second child</span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                      <span class="comment">// new new root node</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;                      <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>* tmpNode1 = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a632c364034d1112fdc3ed7e05dfd157c">isMultipliedByVolume</a>(node, compartment-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">getSBMLId</a>());</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                      <span class="keywordflow">if</span> (tmpNode1)</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                        {</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;                          <span class="keyword">delete</span> node;</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                          node = tmpNode1;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                          <span class="keywordflow">if</span> (node-&gt;getType() == AST_DIVIDE &amp;&amp; node-&gt;getNumChildren() != 2)</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                            {</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                              <span class="keyword">delete</span> tmpNode1;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;                              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                            }</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                        }</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;                        {</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;                          tmpNode1 = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>();</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;                          tmpNode1-&gt;setType(AST_DIVIDE);</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                          tmpNode1-&gt;addChild(node);</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                          <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>* tmpNode2 = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>();</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;                          tmpNode2-&gt;setType(AST_NAME);</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;                          tmpNode2-&gt;setName(compartment-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">getSBMLId</a>().c_str());</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;                          tmpNode1-&gt;addChild(tmpNode2);</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;                          node = tmpNode1;</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;                          std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator pos = copasi2sbmlmap.find(const_cast&lt;CCompartment*&gt;(compartment));</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;                          assert(pos != copasi2sbmlmap.end());</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;                          Compartment* pSBMLCompartment = <span class="keyword">dynamic_cast&lt;</span>Compartment*<span class="keyword">&gt;</span>(pos-&gt;second);</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;                          assert(pSBMLCompartment != NULL);</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;                          <span class="keywordflow">if</span> (!hasOnlySubstanceUnitPresent &amp;&amp; ((this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1 &amp;&amp; pSBMLCompartment-&gt;isSetVolume()) || (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt;= 2 &amp;&amp; pSBMLCompartment-&gt;isSetSize())) &amp;&amp; pSBMLCompartment-&gt;getSize() == 1.0)</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;                            {</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;                              <span class="comment">// we have to check if all species used in the reaction</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;                              <span class="comment">// have the hasOnlySubstance flag set</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;                              <span class="keywordflow">if</span> (node-&gt;getChild(0)-&gt;getType() == AST_FUNCTION &amp;&amp; (!this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#acdc9c870d380d660ef11b4389eaf5bc8">containsVolume</a>(node-&gt;getChild(0), compartment-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">getSBMLId</a>())))</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                                {</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                                  <span class="comment">// add the id of the reaction to the set so that we can create an error message later.</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;                                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">mDivisionByCompartmentReactions</a>.insert(sbmlReaction-&gt;getId());</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;                                }</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;                            }</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;                        }</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;                    }</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;                }</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;                {</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                  <span class="keyword">delete</span> node;</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;                  <span class="keyword">delete</span> copasiReaction;</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;                  <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;                }</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;            }</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;          <span class="comment">/* Create a new user defined CKinFunction */</span></div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a3bf3c7539fc012eb3ca782f0ca44e5a8">sbmlId2CopasiCN</a>(node, copasi2sbmlmap, copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a2afc8ee8b6ca18e954a447deb3acbe95">getParameters</a>()))</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 27, copasiReaction-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>().c_str());</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;            }</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;          <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pExpressionTreeRoot = <a class="code" href="../../d1/d50/classCEvaluationTree.html#abc741d5cf6e1842ecf0738c80e4b793d">CEvaluationTree::fromAST</a>(node);</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;          <span class="keyword">delete</span> node;</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;          node = NULL;</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;          <span class="keywordflow">if</span> (pExpressionTreeRoot)</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;            {</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;              <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a> KineticLawExpression;</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;              KineticLawExpression.<a class="code" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">setRoot</a>(pExpressionTreeRoot);</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;              <span class="comment">// check if the expression is constant flux</span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;              <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pParamObject = <a class="code" href="../../d7/d6d/classSBMLImporter.html#adaced01dad763bc9aabccdd95f818ae8">SBMLImporter::isConstantFlux</a>(pExpressionTreeRoot, copasiModel, pTmpFunctionDB);</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;              <span class="keywordflow">if</span> (pParamObject != NULL)</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;                {</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;                  <span class="comment">// assert that the object really is a local or global</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                  <span class="comment">// parameter</span></div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                  assert(dynamic_cast&lt;const CCopasiParameter*&gt;(pParamObject) || dynamic_cast&lt;const CModelValue*&gt;(pParamObject));</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;                  std::string functionName;</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;                  <span class="keywordflow">if</span> (copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">isReversible</a>())</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                    {</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                      <span class="comment">// set the function to Constant flux (reversible)</span></div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                      functionName = <span class="stringliteral">&quot;Constant flux (reversible)&quot;</span>;</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;                    }</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                    {</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;                      <span class="comment">// set the function to Constant flux (irreversible)</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;                      functionName = <span class="stringliteral">&quot;Constant flux (irreversible)&quot;</span>;</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                    }</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;                  <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pCFFun = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>*<span class="keyword">&gt;</span>(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(functionName));</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;                  assert(pCFFun != NULL);</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                  <a class="code" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a>* pCallNode = NULL;</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>(pExpressionTreeRoot-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>()) == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>)</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;                    {</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;                      pCallNode = <span class="keyword">new</span> <a class="code" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a>(<a class="code" href="../../df/d44/classCEvaluationNodeCall.html#a93a04c7bc0f741a21aaf2931c1a48a5aa5d43ba70c6ead890c617d6a52a43dbdd">CEvaluationNodeCall::EXPRESSION</a>, <span class="stringliteral">&quot;dummy_call&quot;</span>);</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;                      <span class="comment">// add the parameter</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;                      pCallNode-&gt;<a class="code" href="../../df/d44/classCEvaluationNodeCall.html#a6147ec0eb9c3a60469965d9ec5bc4b11">addChild</a>(pExpressionTreeRoot-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">copyBranch</a>());</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;                    }</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;                    {</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;                      pCallNode = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a>*<span class="keyword">&gt;</span>(pExpressionTreeRoot-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">copyBranch</a>());</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;                      assert(pCallNode != NULL);</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;                    }</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;                  <span class="keywordflow">if</span> (pParamObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">getObjectType</a>() == <span class="stringliteral">&quot;Parameter&quot;</span>)</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;                    {</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;                      pParamObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">setObjectName</a>(<span class="stringliteral">&quot;v&quot;</span>);</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;                      <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pCallNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>())-&gt;setData(<span class="stringliteral">&quot;&lt;&quot;</span> + pParamObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;&gt;&quot;</span>);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;                    }</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;                  copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#af9e224b58a1430f381d2096d8fe819c0">setFunction</a>(pCFFun);</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;                  <span class="comment">// map the parameter</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a42cbb6f094224d7ec795eb172e40ab57">doMapping</a>(copasiReaction, pCallNode);</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;                  <span class="keyword">delete</span> pCallNode;</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;                }</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;                {</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;                  <span class="comment">// check if the root node is a simple function call</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;                  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#add8d8e41a0b4c3853049ee8f5d121d99">isSimpleFunctionCall</a>(pExpressionTreeRoot))</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;                    {</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;                      <span class="comment">// if yes, we check if it corresponds to an already existing function</span></div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;                      std::string functionName = pExpressionTreeRoot-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>();</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;                      <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pImportedFunction = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(functionName));</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;                      assert(pImportedFunction);</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;                      std::vector&lt;CEvaluationNodeObject*&gt;* v = NULL;</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;                      <span class="comment">// only check for mass action if there is no conversion factor involved</span></div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;                      <span class="comment">// for any of the species involved in the reaction (substrates and products)</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;                      <span class="keywordflow">if</span> (!mConversionFactorNeeded &amp;&amp; !ignoreMassAction)</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;                        {</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;                          v = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5eccfb6bf7001137ae5b14ecbfd0c971">isMassAction</a>(pImportedFunction, copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>(), <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a>*<span class="keyword">&gt;</span>(pExpressionTreeRoot));</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;                          <span class="keywordflow">if</span> (!v)</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;                            {</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;                              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 27, copasiReaction-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>().c_str());</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;                            }</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;                        }</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;                      <span class="keywordflow">if</span> (v &amp;&amp; !v-&gt;empty())</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;                        {</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;                          <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pFun = NULL;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;                          <span class="keywordflow">if</span> (copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">isReversible</a>())</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;                            {</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;                              pFun = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>*<span class="keyword">&gt;</span>(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(<span class="stringliteral">&quot;Mass action (reversible)&quot;</span>));</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;                            }</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;                          <span class="keywordflow">else</span></div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;                            {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;                              pFun = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>*<span class="keyword">&gt;</span>(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(<span class="stringliteral">&quot;Mass action (irreversible)&quot;</span>));</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;                            }</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;                          <span class="keywordflow">if</span> (!pFun)</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                            {</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;                              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;                            }</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;                          <span class="comment">// do the mapping</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;                          <a class="code" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a>* pCallNode = <span class="keyword">new</span> <a class="code" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a>(<a class="code" href="../../df/d44/classCEvaluationNodeCall.html#a93a04c7bc0f741a21aaf2931c1a48a5aa5d43ba70c6ead890c617d6a52a43dbdd">CEvaluationNodeCall::EXPRESSION</a>, <span class="stringliteral">&quot;dummy_call&quot;</span>);</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;                          <span class="keywordtype">size_t</span> i, iMax = v-&gt;size();</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;                          <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;                            {</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;                              pCallNode-&gt;<a class="code" href="../../df/d44/classCEvaluationNodeCall.html#a6147ec0eb9c3a60469965d9ec5bc4b11">addChild</a>((*v)[i]);</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;                            }</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;                          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#afa0fbf5c970cdfc26118c33a921caa5d">renameMassActionParameters</a>(pCallNode);</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;                          copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#af9e224b58a1430f381d2096d8fe819c0">setFunction</a>(pFun);</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;                          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a42cbb6f094224d7ec795eb172e40ab57">doMapping</a>(copasiReaction, pCallNode);</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;                          <span class="keyword">delete</span> pCallNode;</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;                        }</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;                        {</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;                          <span class="comment">// find corresponding reaction does *not* return the function if it is already in the function db</span></div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;                          <span class="comment">// we better change this to return this instance.</span></div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;                          <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pExistingFunction = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a76e38c93eb85a4d0cf0b188674ac6ff3">findCorrespondingFunction</a>(&amp;KineticLawExpression, copasiReaction);</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;                          <span class="comment">// if it does, we set the existing function for this reaction</span></div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;                          <span class="keywordflow">if</span> (pExistingFunction)</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;                            {</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;                              copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#af9e224b58a1430f381d2096d8fe819c0">setFunction</a>(pExistingFunction);</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;                              <span class="comment">// do the mapping</span></div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;                              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a42cbb6f094224d7ec795eb172e40ab57">doMapping</a>(copasiReaction, dynamic_cast&lt;const CEvaluationNodeCall*&gt;(pExpressionTreeRoot));</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;                            }</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;                          <span class="comment">// else we take the function from the pTmpFunctionDB, copy it and set the usage correctly</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;                          <span class="keywordflow">else</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;                            {</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;                              <span class="comment">// replace the variable nodes in pImportedFunction with  nodes from</span></div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;                              std::map&lt;std::string, std::string &gt; arguments;</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;                              <span class="keyword">const</span> <a class="code" href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a>&amp; funParams = pImportedFunction-&gt;<a class="code" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">getVariables</a>();</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;                              <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pTmpNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pExpressionTreeRoot-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;                              <span class="keywordtype">size_t</span> i, iMax = funParams.<a class="code" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">size</a>();</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;                              <span class="keywordflow">for</span> (i = 0; (i &lt; iMax) &amp;&amp; pTmpNode; ++i)</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;                                {</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;                                  <span class="keywordflow">if</span> (!(pTmpNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>() == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>)) <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;                                  arguments[funParams[i]-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>()] = pTmpNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>().substr(1, pTmpNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>().length() - 2);</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;                                  pTmpNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pTmpNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;                                }</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;                              assert((i == iMax) &amp;&amp; pTmpNode == NULL);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;                              <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pTmpExpression = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e1e81619841ec18ca458b1637e2601c">variables2objects</a>(pImportedFunction-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>()-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">copyBranch</a>(), arguments);</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;                              <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a> TmpTree2;</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;                              TmpTree2.<a class="code" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">setRoot</a>(pTmpExpression);</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;                              <span class="comment">// code to fix bug 1874</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;                              <span class="comment">// since this is a user defined function, we want to retain the original name</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;                              <span class="comment">// next setFunctionFromExpressionTree will take this name if it is not &#39;Expression&#39;</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;                              <span class="comment">// (the default)</span></div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;                              TmpTree2.setObjectName(functionName);</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;                              <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a> * pNewFunction = copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ab807fb099922f32e1c94c44b26bf1979">setFunctionFromExpressionTree</a>(TmpTree2, copasi2sbmlmap, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>);</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;                              <span class="keywordflow">if</span> (pNewFunction != NULL &amp;&amp;</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;                                  pNewFunction-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">getType</a>() == <a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a>)</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;                                {</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;                                  <span class="comment">// code to fix Bug 1015</span></div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;                                  <span class="keywordflow">if</span> (!pNewFunction-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a0b9d00ff5364c43620b2d0a97b7c386e">isSuitable</a>(copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>(),</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;                                                                copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>(),</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;                                                                copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">isReversible</a>() ? <a class="code" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a8a0273b6da872343bab7a1278a8aa87e">TriTrue</a> : <a class="code" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a27713ac73421a91bc85961a82e45635e">TriFalse</a>))</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;                                    {</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;                                      pNewFunction-&gt;<a class="code" href="../../d9/d86/classCFunction.html#aa3a7871b909987fffdfaecedde2dd9fa">setReversible</a>(<a class="code" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a358d04006ba010a4e9258117031fb00c">TriUnspecified</a>);</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;                                    }</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;                                  pTmpFunctionDB-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#af425d76a956e07032c2ab0428b3ea1ca">add</a>(pNewFunction, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                                  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>.insert(pNewFunction-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>());</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;                                }</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;                            }</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;                        }</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;                      <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(v);</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;                    }</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;                    {</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;                      std::vector&lt;CEvaluationNodeObject*&gt;* v = NULL;</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;                      <span class="comment">// only check for mass action if there is no conversion factor involved</span></div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;                      <span class="comment">// for any of the species involved in the reaction (substrates and products)</span></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;                      <span class="keywordflow">if</span> (!mConversionFactorNeeded &amp;&amp; !ignoreMassAction)</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;                        {</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;                          v = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5eccfb6bf7001137ae5b14ecbfd0c971">isMassAction</a>(&amp;KineticLawExpression, copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>());</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;                          <span class="keywordflow">if</span> (!v)</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;                            {</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 27, copasiReaction-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>().c_str());</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;                            }</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;                        }</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;                      <span class="keywordflow">if</span> (v &amp;&amp; !v-&gt;empty())</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;                        {</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;                          <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pFun = NULL;</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;                          <span class="keywordflow">if</span> (copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">isReversible</a>())</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;                            {</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;                              pFun = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>*<span class="keyword">&gt;</span>(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(<span class="stringliteral">&quot;Mass action (reversible)&quot;</span>));</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;                            }</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;                          <span class="keywordflow">else</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;                            {</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;                              pFun = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>*<span class="keyword">&gt;</span>(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(<span class="stringliteral">&quot;Mass action (irreversible)&quot;</span>));</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;                            }</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;                          <span class="keywordflow">if</span> (!pFun)</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;                            {</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;                              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;                            }</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;                          <span class="comment">// do the mapping</span></div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;                          <a class="code" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a>* pCallNode = <span class="keyword">new</span> <a class="code" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a>(<a class="code" href="../../df/d44/classCEvaluationNodeCall.html#a93a04c7bc0f741a21aaf2931c1a48a5aa5d43ba70c6ead890c617d6a52a43dbdd">CEvaluationNodeCall::EXPRESSION</a>, <span class="stringliteral">&quot;dummy_call&quot;</span>);</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;                          <span class="keywordtype">size_t</span> i, iMax = v-&gt;size();</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;                          <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;                            {</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;                              pCallNode-&gt;<a class="code" href="../../df/d44/classCEvaluationNodeCall.html#a6147ec0eb9c3a60469965d9ec5bc4b11">addChild</a>((*v)[i]);</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;                            }</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;                          <span class="comment">// rename the function parameters to k1 and k2</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;                          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#afa0fbf5c970cdfc26118c33a921caa5d">renameMassActionParameters</a>(pCallNode);</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;                          copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#af9e224b58a1430f381d2096d8fe819c0">setFunction</a>(pFun);</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;                          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a42cbb6f094224d7ec795eb172e40ab57">doMapping</a>(copasiReaction, pCallNode);</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;                          <span class="keyword">delete</span> pCallNode;</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;                        }</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;                        {</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;                          <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pNonconstFun = copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ab807fb099922f32e1c94c44b26bf1979">setFunctionFromExpressionTree</a>(KineticLawExpression, copasi2sbmlmap, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>);</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;                          <span class="keywordflow">if</span> (pNonconstFun != NULL &amp;&amp;</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;                              pNonconstFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">getType</a>() == <a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a>)</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;                            {</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;                              <span class="comment">// code to fix Bug 1015</span></div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;                              <span class="keywordflow">if</span> (!pNonconstFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a0b9d00ff5364c43620b2d0a97b7c386e">isSuitable</a>(copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>(),</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;                                                            copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>(),</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;                                                            copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">isReversible</a>() ? <a class="code" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a8a0273b6da872343bab7a1278a8aa87e">TriTrue</a> : <a class="code" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a27713ac73421a91bc85961a82e45635e">TriFalse</a>))</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;                                {</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;                                  pNonconstFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#aa3a7871b909987fffdfaecedde2dd9fa">setReversible</a>(<a class="code" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a358d04006ba010a4e9258117031fb00c">TriUnspecified</a>);</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;                                }</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;                              pTmpFunctionDB-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#af425d76a956e07032c2ab0428b3ea1ca">add</a>(pNonconstFun, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;                              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>.insert(pNonconstFun-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>());</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;                            }</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;                        }</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;                      <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(v);</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;                    }</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;                }</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;            }</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;            {</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;              <span class="comment">// error message</span></div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 8, copasiReaction-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>().c_str());</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;            }</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        }</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    }</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    {</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      <span class="comment">/* if no KineticLaw was defined for the reaction. */</span></div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;      copasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#af9e224b58a1430f381d2096d8fe819c0">setFunction</a>(NULL);</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    }</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;  <span class="comment">//DebugFile &lt;&lt; &quot;Created reaction: &quot; &lt;&lt; copasiReaction-&gt;getObjectName() &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a>(sbmlReaction, copasiReaction);</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a>(copasiReaction, sbmlReaction);</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;  <span class="keywordflow">return</span> copasiReaction;</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;}</div>
<div class="ttc" id="classCReaction_html_a79b22760581d7d351fef1848eba420b7"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#a79b22760581d7d351fef1848eba420b7">CReaction::setReversible</a></div><div class="ttdeci">void setReversible(bool reversible)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00247">CReaction.cpp:247</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a02df7d07b1a27c8515d3580203c9f104"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot</a></div><div class="ttdeci">virtual bool setRoot(CEvaluationNode *pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00422">CEvaluationTree.cpp:422</a></div></div>
<div class="ttc" id="classCChemEqElement_html"><div class="ttname"><a href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8d/CChemEqElement_8h_source.html#l00041">CChemEqElement.h:41</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a76178fce53d44b1f5c6c7e95dae460d5"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">CEvaluationNode::copyBranch</a></div><div class="ttdeci">CEvaluationNode * copyBranch() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00404">CEvaluationNode.cpp:404</a></div></div>
<div class="ttc" id="classCFunctionParameters_html_a25eebb18490f1fd552a39faae2120453"><div class="ttname"><a href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">CFunctionParameters::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db1/CFunctionParameters_8cpp_source.html#l00100">CFunctionParameters.cpp:100</a></div></div>
<div class="ttc" id="classCEvaluationNodeCall_html_a6147ec0eb9c3a60469965d9ec5bc4b11"><div class="ttname"><a href="../../df/d44/classCEvaluationNodeCall.html#a6147ec0eb9c3a60469965d9ec5bc4b11">CEvaluationNodeCall::addChild</a></div><div class="ttdeci">virtual bool addChild(CCopasiNode&lt; Data &gt; *pChild, CCopasiNode&lt; Data &gt; *pAfter=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d90/CEvaluationNodeCall_8cpp_source.html#l00465">CEvaluationNodeCall.cpp:465</a></div></div>
<div class="ttc" id="classConverterASTNode_html"><div class="ttname"><a href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/ConverterASTNode_8h_source.html#l00023">ConverterASTNode.h:23</a></div></div>
<div class="ttc" id="copasi_8h_html_ac9efe23516fb43b7adc59fbad1c221b8"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a></div><div class="ttdeci">#define pdelete(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00215">copasi.h:215</a></div></div>
<div class="ttc" id="classCExpression_html"><div class="ttname"><a href="../../dc/dbd/classCExpression.html">CExpression</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dcc/CExpression_8h_source.html#l00028">CExpression.h:28</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a0730aecebb9ca0f8401b7d0223e266e8"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode::getSibling</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getSibling()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00353">CCopasiNode.h:353</a></div></div>
<div class="ttc" id="classCReaction_html_ab807fb099922f32e1c94c44b26bf1979"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#ab807fb099922f32e1c94c44b26bf1979">CReaction::setFunctionFromExpressionTree</a></div><div class="ttdeci">CFunction * setFunctionFromExpressionTree(const CExpression &amp;tree, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, CFunctionDB *pFunctionDB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l01343">CReaction.cpp:1343</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a1f5e2625716c1ac192561974bd17b3cb"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">CCopasiObject::getCN</a></div><div class="ttdeci">virtual CCopasiObjectName getCN() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00103">CCopasiObject.cpp:103</a></div></div>
<div class="ttc" id="classCReaction_html_a6a613da80f021481cc9a21c18549b2d7"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#a6a613da80f021481cc9a21c18549b2d7">CReaction::addSubstrate</a></div><div class="ttdeci">bool addSubstrate(const std::string &amp;metabKey, const C_FLOAT64 &amp;multiplicity=1.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00232">CReaction.cpp:232</a></div></div>
<div class="ttc" id="classCModelEntity_html_a5c8d403c6027f59d1cc3e1ccc2d9efac"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">CModelEntity::getSBMLId</a></div><div class="ttdeci">const std::string &amp; getSBMLId() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00637">CModelValue.cpp:637</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classSBMLImporter_html_acdc9c870d380d660ef11b4389eaf5bc8"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#acdc9c870d380d660ef11b4389eaf5bc8">SBMLImporter::containsVolume</a></div><div class="ttdeci">bool containsVolume(const ASTNode *pNode, const std::string &amp;compartmentCN)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06065">SBMLImporter.cpp:6065</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a879d6756b51f6b58d307940e1343bd10"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName</a></div><div class="ttdeci">const std::string &amp; getObjectName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00258">CCopasiObject.cpp:258</a></div></div>
<div class="ttc" id="classCCompartment_html_a977268782cb7d6cd7a01cab642b45c09"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">CCompartment::getDimensionality</a></div><div class="ttdeci">unsigned C_INT32 getDimensionality() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/CCompartment_8cpp_source.html#l00204">CCompartment.cpp:204</a></div></div>
<div class="ttc" id="classCCopasiVector_html_ab7e0e37022783eddfe85abf9339b05c0"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector::size</a></div><div class="ttdeci">virtual size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00386">CCopasiVector.h:386</a></div></div>
<div class="ttc" id="classCCopasiVector_html_acb26711fe72be0d2cb3a37c2fbcc031f"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">CCopasiVector::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00185">CCopasiVector.h:185</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_ae24b55d848d78cec0a359fd199c76562"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType</a></div><div class="ttdeci">const Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00357">CEvaluationNode.cpp:357</a></div></div>
<div class="ttc" id="classCChemEq_html"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html">CChemEq</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00033">CChemEq.h:33</a></div></div>
<div class="ttc" id="classCReaction_html_afb6bc2a72c7f1791d721f5f3be2e5164"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#afb6bc2a72c7f1791d721f5f3be2e5164">CReaction::addProduct</a></div><div class="ttdeci">bool addProduct(const std::string &amp;metabKey, const C_FLOAT64 &amp;multiplicity=1.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00236">CReaction.cpp:236</a></div></div>
<div class="ttc" id="classCChemEq_html_a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294">CChemEq::PRODUCT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00038">CChemEq.h:38</a></div></div>
<div class="ttc" id="classCEvaluationNodeCall_html"><div class="ttname"><a href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/CEvaluationNodeCall_8h_source.html#l00030">CEvaluationNodeCall.h:30</a></div></div>
<div class="ttc" id="classCFunction_html_a0b9d00ff5364c43620b2d0a97b7c386e"><div class="ttname"><a href="../../d9/d86/classCFunction.html#a0b9d00ff5364c43620b2d0a97b7c386e">CFunction::isSuitable</a></div><div class="ttdeci">bool isSuitable(const size_t noSubstrates, const size_t noProducts, const TriLogic reversible)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00254">CFunction.cpp:254</a></div></div>
<div class="ttc" id="classSBMLImporter_html_afa0fbf5c970cdfc26118c33a921caa5d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#afa0fbf5c970cdfc26118c33a921caa5d">SBMLImporter::renameMassActionParameters</a></div><div class="ttdeci">void renameMassActionParameters(CEvaluationNodeCall *pCallNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06033">SBMLImporter.cpp:6033</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a09abd66dddd22b300853b0e2de8f392f"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">CEvaluationTree::getType</a></div><div class="ttdeci">const CEvaluationTree::Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00167">CEvaluationTree.cpp:167</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="classCCopasiObject_html"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9f/CCopasiObject_8h_source.html#l00216">CCopasiObject.h:216</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a56790cb06e1980712599250f3e695c6a"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">CCopasiObject::getObjectType</a></div><div class="ttdeci">const std::string &amp; getObjectType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00260">CCopasiObject.cpp:260</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classCFunctionParameters_html"><div class="ttname"><a href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de1/CFunctionParameters_8h_source.html#l00030">CFunctionParameters.h:30</a></div></div>
<div class="ttc" id="classCCopasiVectorN_html_a3588b566dfda5b5a4fc570936abf7c0a"><div class="ttname"><a href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">CCopasiVectorN::getIndex</a></div><div class="ttdeci">virtual size_t getIndex(const std::string &amp;name) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00774">CCopasiVector.h:774</a></div></div>
<div class="ttc" id="classCFunction_html_aa3a7871b909987fffdfaecedde2dd9fa"><div class="ttname"><a href="../../d9/d86/classCFunction.html#aa3a7871b909987fffdfaecedde2dd9fa">CFunction::setReversible</a></div><div class="ttdeci">void setReversible(const TriLogic &amp;reversible)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00142">CFunction.cpp:142</a></div></div>
<div class="ttc" id="classCEvaluationNodeCall_html_a93a04c7bc0f741a21aaf2931c1a48a5aa5d43ba70c6ead890c617d6a52a43dbdd"><div class="ttname"><a href="../../df/d44/classCEvaluationNodeCall.html#a93a04c7bc0f741a21aaf2931c1a48a5aa5d43ba70c6ead890c617d6a52a43dbdd">CEvaluationNodeCall::EXPRESSION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/CEvaluationNodeCall_8h_source.html#l00040">CEvaluationNodeCall.h:40</a></div></div>
<div class="ttc" id="classSBMLImporter_html_adaced01dad763bc9aabccdd95f818ae8"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#adaced01dad763bc9aabccdd95f818ae8">SBMLImporter::isConstantFlux</a></div><div class="ttdeci">CCopasiObject * isConstantFlux(const CEvaluationNode *pRoot, CModel *pModel, CFunctionDB *pFunctionDB)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09420">SBMLImporter.cpp:9420</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00045">CEvaluationNode.h:45</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_abc741d5cf6e1842ecf0738c80e4b793d"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#abc741d5cf6e1842ecf0738c80e4b793d">CEvaluationTree::fromAST</a></div><div class="ttdeci">static CEvaluationNode * fromAST(const ASTNode *pASTNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00472">CEvaluationTree.cpp:472</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a64e5323f84c8730e7c120e8e9a965d13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">SBMLImporter::mUsedFunctions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mUsedFunctions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00067">SBMLImporter.h:67</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a632c364034d1112fdc3ed7e05dfd157c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a632c364034d1112fdc3ed7e05dfd157c">SBMLImporter::isMultipliedByVolume</a></div><div class="ttdeci">ConverterASTNode * isMultipliedByVolume(const ASTNode *node, const std::string &amp;compartmentSBMLId)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05927">SBMLImporter.cpp:5927</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classCChemEq_html_ac7001192479e074d3696734187ec50d8"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">CChemEq::getProducts</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getProducts() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00063">CChemEq.cpp:63</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a9e5fcf60f22d2701417f90756847d37b"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a></div><div class="ttdeci">static Type type(const Type &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00123">CEvaluationNode.cpp:123</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCCopasiVector_html_a44c97a5f614c885495c437f2a8d20954"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">CCopasiVector::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00191">CCopasiVector.h:191</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a5eccfb6bf7001137ae5b14ecbfd0c971"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a5eccfb6bf7001137ae5b14ecbfd0c971">SBMLImporter::isMassAction</a></div><div class="ttdeci">std::vector&lt; CEvaluationNodeObject * &gt; * isMassAction(const CEvaluationTree *pTree, const CChemEq &amp;chemicalEquation, const CEvaluationNodeCall *pCallNode=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05177">SBMLImporter.cpp:5177</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af3884484e51df06669ba5bc4fc77c07c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">SBMLImporter::functionDB</a></div><div class="ttdeci">CFunctionDB * functionDB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00056">SBMLImporter.h:56</a></div></div>
<div class="ttc" id="classCReaction_html_ad70f73e0550eb9df78c1da4bfd2d6c46"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#ad70f73e0550eb9df78c1da4bfd2d6c46">CReaction::addModifier</a></div><div class="ttdeci">bool addModifier(const std::string &amp;metabKey, const C_FLOAT64 &amp;multiplicity=1.0)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00240">CReaction.cpp:240</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00040">CEvaluationTree.h:40</a></div></div>
<div class="ttc" id="copasi_8h_html_a4cd90bcaf1a35317678ec47713b5f629a27713ac73421a91bc85961a82e45635e"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a27713ac73421a91bc85961a82e45635e">TriFalse</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00128">copasi.h:128</a></div></div>
<div class="ttc" id="classCReaction_html_af9e224b58a1430f381d2096d8fe819c0"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#af9e224b58a1430f381d2096d8fe819c0">CReaction::setFunction</a></div><div class="ttdeci">bool setFunction(const std::string &amp;functionName)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00255">CReaction.cpp:255</a></div></div>
<div class="ttc" id="classCModel_html_a47f7b8c04498563ba457a15cd8277611"><div class="ttname"><a href="../../d4/d04/classCModel.html#a47f7b8c04498563ba457a15cd8277611">CModel::createReaction</a></div><div class="ttdeci">CReaction * createReaction(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02760">CModel.cpp:2760</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_ad39689ede4b80c944660201e94c52705"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a></div><div class="ttdeci">struct MESSAGES Message</div></div>
<div class="ttc" id="classCReaction_html_a61ef1f775c492a0be897285e40fe0e0f"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#a61ef1f775c492a0be897285e40fe0e0f">CReaction::setSBMLId</a></div><div class="ttdeci">void setSBMLId(const std::string &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l01649">CReaction.cpp:1649</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af39d5f3762cee43875daadd002af6f0e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">SBMLImporter::mIncompleteModel</a></div><div class="ttdeci">bool mIncompleteModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00057">SBMLImporter.h:57</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a76e38c93eb85a4d0cf0b188674ac6ff3"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a76e38c93eb85a4d0cf0b188674ac6ff3">SBMLImporter::findCorrespondingFunction</a></div><div class="ttdeci">CFunction * findCorrespondingFunction(const CExpression *pExpression, const CReaction *reaction)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05052">SBMLImporter.cpp:5052</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9e1e81619841ec18ca458b1637e2601c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9e1e81619841ec18ca458b1637e2601c">SBMLImporter::variables2objects</a></div><div class="ttdeci">CEvaluationNode * variables2objects(const CEvaluationNode *pOrigNode, const std::map&lt; std::string, std::string &gt; &amp;replacementMap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06005">SBMLImporter.cpp:6005</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0bdaab30af2fb7e2bc5e637a2b40134a"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">SBMLImporter::preprocessNode</a></div><div class="ttdeci">void preprocessNode(ConverterASTNode *pNode, Model *pSBMLModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Reaction *pSBMLReaction=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04681">SBMLImporter.cpp:4681</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a3bf3c7539fc012eb3ca782f0ca44e5a8"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a3bf3c7539fc012eb3ca782f0ca44e5a8">SBMLImporter::sbmlId2CopasiCN</a></div><div class="ttdeci">bool sbmlId2CopasiCN(ASTNode *pNode, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, CCopasiParameterGroup &amp;pParamGroup)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04490">SBMLImporter.cpp:4490</a></div></div>
<div class="ttc" id="classSBMLImporter_html_add8d8e41a0b4c3853049ee8f5d121d99"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#add8d8e41a0b4c3853049ee8f5d121d99">SBMLImporter::isSimpleFunctionCall</a></div><div class="ttdeci">bool isSimpleFunctionCall(const CEvaluationNode *pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05892">SBMLImporter.cpp:5892</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8ff64c7fedb1863cac4572f246ca65f7"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">SBMLImporter::mStoichiometricExpressionMap</a></div><div class="ttdeci">std::map&lt; const ASTNode *, CChemEqElement * &gt; mStoichiometricExpressionMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00081">SBMLImporter.h:81</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a09fb60445d24cc1bd582e23869cfaee1"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a09fb60445d24cc1bd582e23869cfaee1">SBMLImporter::mDivisionByCompartmentReactions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mDivisionByCompartmentReactions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00071">SBMLImporter.h:71</a></div></div>
<div class="ttc" id="classCCopasiParameter_html_a18357c86629fe757e3120258ce81ef56a3b736192222fcb8ee487a9c36bbd9867"><div class="ttname"><a href="../../d5/db6/classCCopasiParameter.html#a18357c86629fe757e3120258ce81ef56a3b736192222fcb8ee487a9c36bbd9867">CCopasiParameter::DOUBLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df7/CCopasiParameter_8h_source.html#l00041">CCopasiParameter.h:41</a></div></div>
<div class="ttc" id="classCChemEq_html_abbcd10e89a632f5a7c225fee6975c6d9"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getSubstrates() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00060">CChemEq.cpp:60</a></div></div>
<div class="ttc" id="copasi_8h_html_a4cd90bcaf1a35317678ec47713b5f629a358d04006ba010a4e9258117031fb00c"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a358d04006ba010a4e9258117031fb00c">TriUnspecified</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00127">copasi.h:127</a></div></div>
<div class="ttc" id="classCReaction_html_abdbb7b72fec3ce08e729bbe171c9dc53"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">CReaction::isReversible</a></div><div class="ttdeci">bool isReversible() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00229">CReaction.cpp:229</a></div></div>
<div class="ttc" id="classCCompartment_html"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html">CCompartment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d59/CCompartment_8h_source.html#l00037">CCompartment.h:37</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a3d029d1a08dc8f22dba1eedc57b036e3"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a3d029d1a08dc8f22dba1eedc57b036e3">SBMLImporter::mFastReactions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mFastReactions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00077">SBMLImporter.h:77</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a42cbb6f094224d7ec795eb172e40ab57"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a42cbb6f094224d7ec795eb172e40ab57">SBMLImporter::doMapping</a></div><div class="ttdeci">void doMapping(CReaction *pCopasiReaction, const CEvaluationNodeCall *pCallNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05740">SBMLImporter.cpp:5740</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2d5ef4903a7ed12d178107ef819b3b66"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a></div><div class="ttdeci">std::string findIdInASTTree(const ASTNode *pMath, const std::set&lt; std::string &gt; &amp;reactionIds)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06900">SBMLImporter.cpp:6900</a></div></div>
<div class="ttc" id="copasi_8h_html_ac4f8f8fcd12a8115cd9802d04a557125"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#ac4f8f8fcd12a8115cd9802d04a557125">C_FLOAT64</a></div><div class="ttdeci">#define C_FLOAT64</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00092">copasi.h:92</a></div></div>
<div class="ttc" id="classCChemEq_html_ab8b0078259e19d69c3e62b890197d601"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ab8b0078259e19d69c3e62b890197d601">CChemEq::getModifiers</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getModifiers() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00066">CChemEq.cpp:66</a></div></div>
<div class="ttc" id="classCReaction_html_a2afc8ee8b6ca18e954a447deb3acbe95"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#a2afc8ee8b6ca18e954a447deb3acbe95">CReaction::getParameters</a></div><div class="ttdeci">const CCopasiParameterGroup &amp; getParameters() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00333">CReaction.cpp:333</a></div></div>
<div class="ttc" id="classCCopasiParameterGroup_html_a662c3f2e34a2124b26900445e1f20015"><div class="ttname"><a href="../../df/d89/classCCopasiParameterGroup.html#a662c3f2e34a2124b26900445e1f20015">CCopasiParameterGroup::addParameter</a></div><div class="ttdeci">bool addParameter(const CCopasiParameter &amp;parameter)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d56/CCopasiParameterGroup_8cpp_source.html#l00239">CCopasiParameterGroup.cpp:239</a></div></div>
<div class="ttc" id="classCFunction_html"><div class="ttname"><a href="../../d9/d86/classCFunction.html">CFunction</a></div><div class="ttdoc">The class for handling a chemical kinetic function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df5/CFunction_8h_source.html#l00029">CFunction.h:29</a></div></div>
<div class="ttc" id="classCModel_html_ad9a3dc1905f1f38f689f728b829f285d"><div class="ttname"><a href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">CModel::getReactions</a></div><div class="ttdeci">CCopasiVectorNS&lt; CReaction &gt; &amp; getReactions()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01039">CModel.cpp:1039</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aab2342964defac3d15b32eed20211e13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a></div><div class="ttdeci">bool importMIRIAM(const SBase *pSBMLObject, CCopasiObject *pCOPASIObject)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09225">SBMLImporter.cpp:9225</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2919a190a2cb8b7b5eb501af5c6f393e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2919a190a2cb8b7b5eb501af5c6f393e">SBMLImporter::speciesMap</a></div><div class="ttdeci">std::map&lt; std::string, CMetab * &gt; speciesMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00055">SBMLImporter.h:55</a></div></div>
<div class="ttc" id="classCReaction_html"><div class="ttname"><a href="../../d4/dcf/classCReaction.html">CReaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc3/CReaction_8h_source.html#l00044">CReaction.h:44</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a761f04c57a75e99a63ee0700c76fdafe"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode::getData</a></div><div class="ttdeci">virtual const Data &amp; getData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00118">CCopasiNode.h:118</a></div></div>
<div class="ttc" id="copasi_8h_html_a4cd90bcaf1a35317678ec47713b5f629a8a0273b6da872343bab7a1278a8aa87e"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a8a0273b6da872343bab7a1278a8aa87e">TriTrue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00129">copasi.h:129</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2b5d21dd508be56977f4d2c642d89fa5"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a></div><div class="ttdeci">static bool importNotes(CAnnotation *pAnno, const SBase *pSBase)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10586">SBMLImporter.cpp:10586</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a6691431210bb58c9055c4d2847bd111c"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">CCopasiObject::setObjectName</a></div><div class="ttdeci">bool setObjectName(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00158">CCopasiObject.cpp:158</a></div></div>
<div class="ttc" id="classCFunctionDB_html_aa25aabb5ce2677103813278c014e06fb"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction</a></div><div class="ttdeci">CFunction * findFunction(const std::string &amp;functionName)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00325">CFunctionDB.cpp:325</a></div></div>
<div class="ttc" id="classCChemEq_html_a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00039">CChemEq.h:39</a></div></div>
<div class="ttc" id="structNamespace_html_a715d108cd7f9d5a482c1f485368e883d"><div class="ttname"><a href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">Namespace::id</a></div><div class="ttdeci">const char * id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6c/stdsoap2_8h_source.html#l01262">stdsoap2.h:1262</a></div></div>
<div class="ttc" id="classCReaction_html_ade6a66098c2f04f6e91d916029fe23e2"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">CReaction::getChemEq</a></div><div class="ttdeci">const CChemEq &amp; getChemEq() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00223">CReaction.cpp:223</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
<div class="ttc" id="classCFunction_html_ab30b89a5603c9e0aa76b9cf2345f2e57"><div class="ttname"><a href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables</a></div><div class="ttdeci">CFunctionParameters &amp; getVariables()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00148">CFunction.cpp:148</a></div></div>
<div class="ttc" id="classCCopasiVector_html"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html">CCopasiVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d60/compare__utilities_8h_source.html#l00034">compare_utilities.h:34</a></div></div>
<div class="ttc" id="classCFunctionDB_html_af425d76a956e07032c2ab0428b3ea1ca"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#af425d76a956e07032c2ab0428b3ea1ca">CFunctionDB::add</a></div><div class="ttdeci">bool add(CFunction *pFunction, const bool &amp;adopt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00254">CFunctionDB.cpp:254</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a359d319f85cd1bb24d2811b2b23fb7ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::createDelayFunctionDefinition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a function definition for the delay function. </p>

</div>
</div>
<a class="anchor" id="a7d44bd16667ac649b9186979da296734"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a> * SBMLImporter::createExpressionFromFunction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *&#160;</td>
          <td class="paramname"><em>pFun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; std::string &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>functionArgumentCNs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05516">5516</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d1/d50/classCEvaluationTree.html#a467ef0af15585a1719afe85eaffbc4ab">CEvaluationTree::create()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4">CEvaluationTree::Expression</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot()</a>, <a class="el" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">CFunctionParameters::size()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a9e1e81619841ec18ca458b1637e2601c">variables2objects()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8d114872c119310ca821f8f054b1b6e6">isMassActionFunction()</a>.</p>
<div class="fragment"><div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;{</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;  <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = NULL;</div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a>&amp; pFunParams = pFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">getVariables</a>();</div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;  std::string str;</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;</div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;  <span class="keywordflow">if</span> (pFunParams.<a class="code" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">size</a>() == functionArgumentCNs.size())</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;    {</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;      std::map&lt;std::string , std::string&gt; variable2CNMap;</div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;      <span class="keywordtype">size_t</span> i, iMax = pFunParams.<a class="code" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">size</a>();</div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;        {</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;          <span class="comment">// vectors should not occur here</span></div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;          assert(functionArgumentCNs[i].size() == 1);</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;          variable2CNMap[pFunParams[i]-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>()] = functionArgumentCNs[i][0];</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;        }</div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;</div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;      <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pTmpNode = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e1e81619841ec18ca458b1637e2601c">variables2objects</a>(pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), variable2CNMap);</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;      assert(pTmpNode);</div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;      pTree = <a class="code" href="../../d1/d50/classCEvaluationTree.html#a467ef0af15585a1719afe85eaffbc4ab">CEvaluationTree::create</a>(<a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4">CEvaluationTree::Expression</a>);</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;      pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">setRoot</a>(pTmpNode);</div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;    }</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;  <span class="keywordflow">return</span> pTree;</div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;}</div>
<div class="ttc" id="classCEvaluationTree_html_a02df7d07b1a27c8515d3580203c9f104"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot</a></div><div class="ttdeci">virtual bool setRoot(CEvaluationNode *pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00422">CEvaluationTree.cpp:422</a></div></div>
<div class="ttc" id="classCFunctionParameters_html_a25eebb18490f1fd552a39faae2120453"><div class="ttname"><a href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">CFunctionParameters::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db1/CFunctionParameters_8cpp_source.html#l00100">CFunctionParameters.cpp:100</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a879d6756b51f6b58d307940e1343bd10"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName</a></div><div class="ttdeci">const std::string &amp; getObjectName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00258">CCopasiObject.cpp:258</a></div></div>
<div class="ttc" id="classCFunctionParameters_html"><div class="ttname"><a href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de1/CFunctionParameters_8h_source.html#l00030">CFunctionParameters.h:30</a></div></div>
<div class="ttc" id="classCEvaluationTree_html"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00028">CEvaluationTree.h:28</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4">CEvaluationTree::Expression</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00041">CEvaluationTree.h:41</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9e1e81619841ec18ca458b1637e2601c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9e1e81619841ec18ca458b1637e2601c">SBMLImporter::variables2objects</a></div><div class="ttdeci">CEvaluationNode * variables2objects(const CEvaluationNode *pOrigNode, const std::map&lt; std::string, std::string &gt; &amp;replacementMap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06005">SBMLImporter.cpp:6005</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
<div class="ttc" id="classCFunction_html_ab30b89a5603c9e0aa76b9cf2345f2e57"><div class="ttname"><a href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables</a></div><div class="ttdeci">CFunctionParameters &amp; getVariables()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00148">CFunction.cpp:148</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a467ef0af15585a1719afe85eaffbc4ab"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a467ef0af15585a1719afe85eaffbc4ab">CEvaluationTree::create</a></div><div class="ttdeci">static CEvaluationTree * create(CEvaluationTree::Type type)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00062">CEvaluationTree.cpp:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a851212f9fbd299a9a2deaadf2d7a5eb1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::createHasOnlySubstanceUnitFactor </td>
          <td>(</td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method creates a global parameter the represents the factor that is used to convert a particle number into the amount units set on the model. The parameter is only created if it is needed and after exporting the model, the parameter is deleted from the COPASI model again. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09106">9106</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">mAvogadroCreated</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aaaae9a79b256a2015377b6fd36613deb">replaceAmountReferences()</a>.</p>
<div class="fragment"><div class="line"><a name="l09107"></a><span class="lineno"> 9107</span>&#160;{</div>
<div class="line"><a name="l09108"></a><span class="lineno"> 9108</span>&#160;  <span class="comment">// find an ID that is unique at least within the list of parameters</span></div>
<div class="line"><a name="l09109"></a><span class="lineno"> 9109</span>&#160;  <span class="comment">// since we remove this created parameter after import, it does not</span></div>
<div class="line"><a name="l09110"></a><span class="lineno"> 9110</span>&#160;  <span class="comment">// have to be unique within the whole model</span></div>
<div class="line"><a name="l09111"></a><span class="lineno"> 9111</span>&#160;  std::set&lt;std::string&gt; ids;</div>
<div class="line"><a name="l09112"></a><span class="lineno"> 9112</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pSBMLModel-&gt;getListOfParameters()-&gt;size();</div>
<div class="line"><a name="l09113"></a><span class="lineno"> 9113</span>&#160;</div>
<div class="line"><a name="l09114"></a><span class="lineno"> 9114</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l09115"></a><span class="lineno"> 9115</span>&#160;    {</div>
<div class="line"><a name="l09116"></a><span class="lineno"> 9116</span>&#160;      ids.insert(pSBMLModel-&gt;getListOfParameters()-&gt;get(i)-&gt;getId());</div>
<div class="line"><a name="l09117"></a><span class="lineno"> 9117</span>&#160;    }</div>
<div class="line"><a name="l09118"></a><span class="lineno"> 9118</span>&#160;</div>
<div class="line"><a name="l09119"></a><span class="lineno"> 9119</span>&#160;  std::ostringstream os;</div>
<div class="line"><a name="l09120"></a><span class="lineno"> 9120</span>&#160;  i = 1;</div>
<div class="line"><a name="l09121"></a><span class="lineno"> 9121</span>&#160;  os &lt;&lt; <span class="stringliteral">&quot;parameter_&quot;</span> &lt;&lt; i;</div>
<div class="line"><a name="l09122"></a><span class="lineno"> 9122</span>&#160;</div>
<div class="line"><a name="l09123"></a><span class="lineno"> 9123</span>&#160;  <span class="keywordflow">while</span> (ids.find(os.str()) != ids.end())</div>
<div class="line"><a name="l09124"></a><span class="lineno"> 9124</span>&#160;    {</div>
<div class="line"><a name="l09125"></a><span class="lineno"> 9125</span>&#160;      ++i;</div>
<div class="line"><a name="l09126"></a><span class="lineno"> 9126</span>&#160;      os.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l09127"></a><span class="lineno"> 9127</span>&#160;      os &lt;&lt; <span class="stringliteral">&quot;parameter_&quot;</span> &lt;&lt; i;</div>
<div class="line"><a name="l09128"></a><span class="lineno"> 9128</span>&#160;    }</div>
<div class="line"><a name="l09129"></a><span class="lineno"> 9129</span>&#160;</div>
<div class="line"><a name="l09130"></a><span class="lineno"> 9130</span>&#160;  Parameter *pParameter = pSBMLModel-&gt;createParameter();</div>
<div class="line"><a name="l09131"></a><span class="lineno"> 9131</span>&#160;  pParameter-&gt;setId(os.str());</div>
<div class="line"><a name="l09132"></a><span class="lineno"> 9132</span>&#160;  pParameter-&gt;setName(<span class="stringliteral">&quot;amount to particle factor&quot;</span>);</div>
<div class="line"><a name="l09133"></a><span class="lineno"> 9133</span>&#160;  pParameter-&gt;setConstant(<span class="keyword">true</span>);</div>
<div class="line"><a name="l09134"></a><span class="lineno"> 9134</span>&#160;  pParameter-&gt;setValue(factor);</div>
<div class="line"><a name="l09135"></a><span class="lineno"> 9135</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">mAvogadroCreated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09136"></a><span class="lineno"> 9136</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>.insert(pParameter);</div>
<div class="line"><a name="l09137"></a><span class="lineno"> 9137</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter</a>(pParameter, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, copasi2sbmlmap);</div>
<div class="line"><a name="l09138"></a><span class="lineno"> 9138</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a057bc71f45b8f39fa15355f653163842"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a057bc71f45b8f39fa15355f653163842">SBMLImporter::mAvogadroCreated</a></div><div class="ttdeci">bool mAvogadroCreated</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00084">SBMLImporter.h:84</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a273943602d6059106e5d0ef3dd3e6e45"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">SBMLImporter::mPotentialAvogadroNumbers</a></div><div class="ttdeci">std::set&lt; const Parameter * &gt; mPotentialAvogadroNumbers</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00083">SBMLImporter.h:83</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8595689dd63fec1e462ee49fd16ea333"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">SBMLImporter::createCModelValueFromParameter</a></div><div class="ttdeci">CModelValue * createCModelValueFromParameter(const Parameter *sbmlParameter, CModel *copasiModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04436">SBMLImporter.cpp:4436</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6e09213163faf2321292aa2f5b48f735"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::deleteCopasiModel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This call deletes an existing COPASI model. The method can e.g. be called to clean up if an import fails. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l10681">10681</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d91/classSEDMLImporter.html#a7d255bec8ba02e1f15f89f47071e96a0">SEDMLImporter::importFirstSBMLModel()</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a6cba7496dde125f853b2868590f309c2">CCopasiDataModel::importSBML()</a>, and <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a197b897c98be7e00c13e143b70434c31">CCopasiDataModel::importSBMLFromString()</a>.</p>
<div class="fragment"><div class="line"><a name="l10682"></a><span class="lineno">10682</span>&#160;{</div>
<div class="line"><a name="l10683"></a><span class="lineno">10683</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a> != NULL)</div>
<div class="line"><a name="l10684"></a><span class="lineno">10684</span>&#160;    {</div>
<div class="line"><a name="l10685"></a><span class="lineno">10685</span>&#160;      <span class="keyword">delete</span> this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>;</div>
<div class="line"><a name="l10686"></a><span class="lineno">10686</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a> = NULL;</div>
<div class="line"><a name="l10687"></a><span class="lineno">10687</span>&#160;    }</div>
<div class="line"><a name="l10688"></a><span class="lineno">10688</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a72ccaf784cfdbf62a852dd1a3d8ad6c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> * SBMLImporter::divideByObject </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td>
          <td class="paramname"><em>pOrigNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *&#160;</td>
          <td class="paramname"><em>pObject</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method divides the given expression by the given object and returns a new expression. The caller is responsible for freeing the memory for the new expression. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l10533">10533</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d9/d9d/classCCopasiNode.html#a76b012dfe6d52644d19808875a71db4e">CCopasiNode&lt; _Data &gt;::addChild()</a>, <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html#ac395d4a167d9c1848c3872ee94074d86af646af56f5c9953bce5ba78b399fee72">CEvaluationNodeObject::CN</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">CEvaluationNode::copyBranch()</a>, <a class="el" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98ac57c4c4ad14989329031b3805fed9137">CEvaluationNodeOperator::DIVIDE</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">CCopasiObject::getCN()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode&lt; _Data &gt;::getSibling()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType()</a>, <a class="el" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98af9d4b686c9ae4f20ca8f1cd707fbe6a0">CEvaluationNodeOperator::MULTIPLY</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a745531dbd3babe952bfaa4176744dbac">CEvaluationNode::OPERATOR</a>, <a class="el" href="../../d7/de4/CQTSSAResultSubWidget_8cpp.html#a015b908fb74f75922e0bc448af09d9d1">pResult</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType()</a>, and <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a54e987b86e2c598008f5013b16eacc35">importRuleForModelEntity()</a>.</p>
<div class="fragment"><div class="line"><a name="l10534"></a><span class="lineno">10534</span>&#160;{</div>
<div class="line"><a name="l10535"></a><span class="lineno">10535</span>&#160;  <span class="keywordtype">bool</span> reverse = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10536"></a><span class="lineno">10536</span>&#160;  <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* <a class="code" href="../../d7/de4/CQTSSAResultSubWidget_8cpp.html#a015b908fb74f75922e0bc448af09d9d1">pResult</a> = NULL;</div>
<div class="line"><a name="l10537"></a><span class="lineno">10537</span>&#160;  assert(pOrigNode != NULL);</div>
<div class="line"><a name="l10538"></a><span class="lineno">10538</span>&#160;  assert(pObject != NULL);</div>
<div class="line"><a name="l10539"></a><span class="lineno">10539</span>&#160;</div>
<div class="line"><a name="l10540"></a><span class="lineno">10540</span>&#160;  <span class="keywordflow">if</span> (pOrigNode != NULL &amp;&amp; pObject != NULL)</div>
<div class="line"><a name="l10541"></a><span class="lineno">10541</span>&#160;    {</div>
<div class="line"><a name="l10542"></a><span class="lineno">10542</span>&#160;      <span class="comment">// first we check if this is thie reverse operation with the object</span></div>
<div class="line"><a name="l10543"></a><span class="lineno">10543</span>&#160;      <span class="comment">// if so, we just drop the reverse operaqtion, otherwise we apply the operation with the</span></div>
<div class="line"><a name="l10544"></a><span class="lineno">10544</span>&#160;      <span class="comment">// object</span></div>
<div class="line"><a name="l10545"></a><span class="lineno">10545</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>(pOrigNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>()) == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a745531dbd3babe952bfaa4176744dbac">CEvaluationNode::OPERATOR</a> &amp;&amp;</div>
<div class="line"><a name="l10546"></a><span class="lineno">10546</span>&#160;          (<a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98">CEvaluationNodeOperator::SubType</a>)<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a>(pOrigNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>()) == <a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98af9d4b686c9ae4f20ca8f1cd707fbe6a0">CEvaluationNodeOperator::MULTIPLY</a>)</div>
<div class="line"><a name="l10547"></a><span class="lineno">10547</span>&#160;        {</div>
<div class="line"><a name="l10548"></a><span class="lineno">10548</span>&#160;          <span class="comment">// either child can be the object</span></div>
<div class="line"><a name="l10549"></a><span class="lineno">10549</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pChild = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pOrigNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l10550"></a><span class="lineno">10550</span>&#160;</div>
<div class="line"><a name="l10551"></a><span class="lineno">10551</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>(pChild-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>()) == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a> &amp;&amp; dynamic_cast&lt;const CEvaluationNodeObject*&gt;(pChild)-&gt;getData() == std::string(<span class="stringliteral">&quot;&lt;&quot;</span> + pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;&gt;&quot;</span>))</div>
<div class="line"><a name="l10552"></a><span class="lineno">10552</span>&#160;            {</div>
<div class="line"><a name="l10553"></a><span class="lineno">10553</span>&#160;</div>
<div class="line"><a name="l10554"></a><span class="lineno">10554</span>&#160;              pResult = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pOrigNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>())-&gt;copyBranch();</div>
<div class="line"><a name="l10555"></a><span class="lineno">10555</span>&#160;              reverse = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10556"></a><span class="lineno">10556</span>&#160;            }</div>
<div class="line"><a name="l10557"></a><span class="lineno">10557</span>&#160;</div>
<div class="line"><a name="l10558"></a><span class="lineno">10558</span>&#160;          <span class="keywordflow">if</span> (reverse == <span class="keyword">false</span>)</div>
<div class="line"><a name="l10559"></a><span class="lineno">10559</span>&#160;            {</div>
<div class="line"><a name="l10560"></a><span class="lineno">10560</span>&#160;              pChild = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pChild-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l10561"></a><span class="lineno">10561</span>&#160;</div>
<div class="line"><a name="l10562"></a><span class="lineno">10562</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>(pChild-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>()) == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a> &amp;&amp; dynamic_cast&lt;const CEvaluationNodeObject*&gt;(pChild)-&gt;getData() == std::string(<span class="stringliteral">&quot;&lt;&quot;</span> + pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;&gt;&quot;</span>))</div>
<div class="line"><a name="l10563"></a><span class="lineno">10563</span>&#160;                {</div>
<div class="line"><a name="l10564"></a><span class="lineno">10564</span>&#160;</div>
<div class="line"><a name="l10565"></a><span class="lineno">10565</span>&#160;                  pResult = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pOrigNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>())-&gt;copyBranch();</div>
<div class="line"><a name="l10566"></a><span class="lineno">10566</span>&#160;                  reverse = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10567"></a><span class="lineno">10567</span>&#160;                }</div>
<div class="line"><a name="l10568"></a><span class="lineno">10568</span>&#160;            }</div>
<div class="line"><a name="l10569"></a><span class="lineno">10569</span>&#160;        }</div>
<div class="line"><a name="l10570"></a><span class="lineno">10570</span>&#160;</div>
<div class="line"><a name="l10571"></a><span class="lineno">10571</span>&#160;      <span class="keywordflow">if</span> (reverse == <span class="keyword">false</span>)</div>
<div class="line"><a name="l10572"></a><span class="lineno">10572</span>&#160;        {</div>
<div class="line"><a name="l10573"></a><span class="lineno">10573</span>&#160;          <a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>* pVolumeNode = <span class="keyword">new</span> <a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>(<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#ac395d4a167d9c1848c3872ee94074d86af646af56f5c9953bce5ba78b399fee72">CEvaluationNodeObject::CN</a>, <span class="stringliteral">&quot;&lt;&quot;</span> + pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;&gt;&quot;</span>);</div>
<div class="line"><a name="l10574"></a><span class="lineno">10574</span>&#160;          pResult = <span class="keyword">new</span> <a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html">CEvaluationNodeOperator</a>(<a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98ac57c4c4ad14989329031b3805fed9137">CEvaluationNodeOperator::DIVIDE</a>, <span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line"><a name="l10575"></a><span class="lineno">10575</span>&#160;          pResult-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a76b012dfe6d52644d19808875a71db4e">addChild</a>(pOrigNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">copyBranch</a>());</div>
<div class="line"><a name="l10576"></a><span class="lineno">10576</span>&#160;          pResult-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a76b012dfe6d52644d19808875a71db4e">addChild</a>(pVolumeNode);</div>
<div class="line"><a name="l10577"></a><span class="lineno">10577</span>&#160;        }</div>
<div class="line"><a name="l10578"></a><span class="lineno">10578</span>&#160;    }</div>
<div class="line"><a name="l10579"></a><span class="lineno">10579</span>&#160;</div>
<div class="line"><a name="l10580"></a><span class="lineno">10580</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d7/de4/CQTSSAResultSubWidget_8cpp.html#a015b908fb74f75922e0bc448af09d9d1">pResult</a>;</div>
<div class="line"><a name="l10581"></a><span class="lineno">10581</span>&#160;}</div>
<div class="ttc" id="classCEvaluationNode_html_a76178fce53d44b1f5c6c7e95dae460d5"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">CEvaluationNode::copyBranch</a></div><div class="ttdeci">CEvaluationNode * copyBranch() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00404">CEvaluationNode.cpp:404</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a0730aecebb9ca0f8401b7d0223e266e8"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode::getSibling</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getSibling()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00353">CCopasiNode.h:353</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a1f5e2625716c1ac192561974bd17b3cb"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">CCopasiObject::getCN</a></div><div class="ttdeci">virtual CCopasiObjectName getCN() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00103">CCopasiObject.cpp:103</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_ae24b55d848d78cec0a359fd199c76562"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType</a></div><div class="ttdeci">const Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00357">CEvaluationNode.cpp:357</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00045">CEvaluationNode.h:45</a></div></div>
<div class="ttc" id="classCEvaluationNodeOperator_html_a39e738b7acfcf431f7c72e76b68ffa98af9d4b686c9ae4f20ca8f1cd707fbe6a0"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98af9d4b686c9ae4f20ca8f1cd707fbe6a0">CEvaluationNodeOperator::MULTIPLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00042">CEvaluationNodeOperator.h:42</a></div></div>
<div class="ttc" id="classCEvaluationNodeOperator_html_a39e738b7acfcf431f7c72e76b68ffa98"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98">CEvaluationNodeOperator::SubType</a></div><div class="ttdeci">SubType</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00038">CEvaluationNodeOperator.h:38</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a9e5fcf60f22d2701417f90756847d37b"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a></div><div class="ttdeci">static Type type(const Type &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00123">CEvaluationNode.cpp:123</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html_ac395d4a167d9c1848c3872ee94074d86af646af56f5c9953bce5ba78b399fee72"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html#ac395d4a167d9c1848c3872ee94074d86af646af56f5c9953bce5ba78b399fee72">CEvaluationNodeObject::CN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00044">CEvaluationNodeObject.h:44</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a76b012dfe6d52644d19808875a71db4e"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a76b012dfe6d52644d19808875a71db4e">CCopasiNode::addChild</a></div><div class="ttdeci">virtual bool addChild(CCopasiNode&lt; Data &gt; *pChild, CCopasiNode&lt; Data &gt; *pAfter=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00156">CCopasiNode.h:156</a></div></div>
<div class="ttc" id="CQTSSAResultSubWidget_8cpp_html_a015b908fb74f75922e0bc448af09d9d1"><div class="ttname"><a href="../../d7/de4/CQTSSAResultSubWidget_8cpp.html#a015b908fb74f75922e0bc448af09d9d1">pResult</a></div><div class="ttdeci">const CArrayAnnotation * pResult</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de4/CQTSSAResultSubWidget_8cpp_source.html#l00028">CQTSSAResultSubWidget.cpp:28</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a2cb02df3d57dad7ad1f9654941135c31"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a></div><div class="ttdeci">static Type subType(const Type &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00120">CEvaluationNode.cpp:120</a></div></div>
<div class="ttc" id="classCEvaluationNodeOperator_html_a39e738b7acfcf431f7c72e76b68ffa98ac57c4c4ad14989329031b3805fed9137"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98ac57c4c4ad14989329031b3805fed9137">CEvaluationNodeOperator::DIVIDE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00043">CEvaluationNodeOperator.h:43</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a745531dbd3babe952bfaa4176744dbac"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a745531dbd3babe952bfaa4176744dbac">CEvaluationNode::OPERATOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00044">CEvaluationNode.h:44</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00034">CEvaluationNodeObject.h:34</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
<div class="ttc" id="classCEvaluationNodeOperator_html"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html">CEvaluationNodeOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00032">CEvaluationNodeOperator.h:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a42cbb6f094224d7ec795eb172e40ab57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::doMapping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dcf/classCReaction.html">CReaction</a> *&#160;</td>
          <td class="paramname"><em>pCopasiReaction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a> *&#160;</td>
          <td class="paramname"><em>pCallNode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05740">5740</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d4/dcf/classCReaction.html#a8df89c11c8352eeb6b09b56aa5ce9ae9">CReaction::addParameterMapping()</a>, <a class="el" href="../../df/dfd/SBMLImporter_8cpp.html#abf504bd5a04a40d6cabdc389ac64c5df">containsKey()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">CReaction::getChemEq()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">CEvaluationNodeObject::getData()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#a5028bbc1b79e8a72071c7222cfeef9a2">CReaction::getFunction()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">CCopasiObject::getKey()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#ab8b0078259e19d69c3e62b890197d601">CChemEq::getModifiers()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">CCopasiObject::getObjectParent()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">CCopasiObject::getObjectType()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">CChemEq::getProducts()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#ab2429ddb26864468a33218f6b8fcfdd6">CChemEq::getReversibility()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode&lt; _Data &gt;::getSibling()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates()</a>, <a class="el" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">CCopasiObject::isReference()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">CReaction::isReversible()</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baffafab5a317fd2de22c4c5be009694d7">CFunctionParameter::MODIFIER</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">CCopasiDataModel::ObjectFromName()</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1">CFunctionParameter::PARAMETER</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba8ee65ab9f88bc857172a80b0ca3a7cc1">CFunctionParameter::PRODUCT</a>, <a class="el" href="../../d4/dcf/classCReaction.html#a99902ba86220bc35193e33a08b93d858">CReaction::setParameterMapping()</a>, <a class="el" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">CFunctionParameters::size()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector&lt; T &gt;::size()</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1bac081d570aadb879a8274d4f4d5bea203">CFunctionParameter::SUBSTRATE</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba9e8507f534a74e943a9eb1a3bfe2a12d">CFunctionParameter::TIME</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba3ae891357cbcf064f1bde6174a6e75eb">CFunctionParameter::VARIABLE</a>, and <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baf3f11f4ddabe0443546c4e33dc7d9ba6">CFunctionParameter::VOLUME</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;{</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;  <span class="comment">// map the first argument of the call node to the first variable of the function of the reaction</span></div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;  <span class="comment">// and so on</span></div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;  <span class="keywordflow">if</span> (!pCallNode)</div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;    {</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;    }</div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;  std::vector&lt;CCopasiContainer*&gt; listOfContainers;</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;  listOfContainers.push_back(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>);</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;</div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;  <span class="keywordflow">if</span> (dynamic_cast&lt;const CMassAction*&gt;(pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a5028bbc1b79e8a72071c7222cfeef9a2">getFunction</a>()))</div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;    {</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>* pChild = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>*<span class="keyword">&gt;</span>(pCallNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;      std::string objectCN = pChild-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">getData</a>();</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;      objectCN = objectCN.substr(1, objectCN.length() - 2);</div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;      <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pObject = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">ObjectFromName</a>(listOfContainers, objectCN);</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;</div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;      <span class="keywordflow">if</span> (!pObject)</div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;        {</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;        }</div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;</div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;      <span class="keywordflow">if</span> (pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">isReference</a>())</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;        {</div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;          pObject = pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>();</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;        }</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;</div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;      <span class="keyword">const</span> std::string&amp; objectKey = pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">getKey</a>();</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;</div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;      pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a99902ba86220bc35193e33a08b93d858">setParameterMapping</a>(<span class="stringliteral">&quot;k1&quot;</span>, objectKey);</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt;CChemEqElement&gt;</a>* metabolites = &amp;pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>();</div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;      <span class="keywordtype">size_t</span> i, iMax = metabolites-&gt;<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;</div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;      <span class="keywordtype">size_t</span> j, jMax;</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;</div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;        <span class="keywordflow">for</span> (j = 0, jMax = static_cast&lt;int&gt;(fabs((*metabolites)[i]-&gt;getMultiplicity())); j &lt; jMax; j++)</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;          pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a8df89c11c8352eeb6b09b56aa5ce9ae9">addParameterMapping</a>(<span class="stringliteral">&quot;substrate&quot;</span>, (*metabolites)[i]-&gt;getMetaboliteKey());</div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;</div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;      <span class="keywordflow">if</span> (pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">isReversible</a>())</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;        {</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;          pChild = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>*<span class="keyword">&gt;</span>(pChild-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;          std::string objectCN = pChild-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">getData</a>();</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;          objectCN = objectCN.substr(1, objectCN.length() - 2);</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;          <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pObject = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">ObjectFromName</a>(listOfContainers, objectCN);</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;          <span class="keywordflow">if</span> (!pObject)</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;            {</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;            }</div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;          <span class="keywordflow">if</span> (pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">isReference</a>())</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;            {</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;              pObject = pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>();</div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;            }</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;          <span class="keyword">const</span> std::string&amp; objectKey = pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">getKey</a>();</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;</div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;          pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a99902ba86220bc35193e33a08b93d858">setParameterMapping</a>(<span class="stringliteral">&quot;k2&quot;</span>, objectKey);</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt;CChemEqElement&gt;</a>* metabolites = &amp;pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>();</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;          iMax = metabolites-&gt;<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;          <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;            <span class="keywordflow">for</span> (j = 0, jMax = static_cast&lt;int&gt;(fabs((*metabolites)[i]-&gt;getMultiplicity())); j &lt; jMax; j++)</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;              pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a8df89c11c8352eeb6b09b56aa5ce9ae9">addParameterMapping</a>(<span class="stringliteral">&quot;product&quot;</span>, (*metabolites)[i]-&gt;getMetaboliteKey());</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;        }</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;    }</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;    {</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a> &amp; Variables = pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a5028bbc1b79e8a72071c7222cfeef9a2">getFunction</a>()-&gt;<a class="code" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">getVariables</a>();</div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;      <span class="keywordtype">size_t</span> i, iMax = Variables.<a class="code" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">size</a>();</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>* pChild = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>*<span class="keyword">&gt;</span>(pCallNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;</div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;        {</div>
<div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;          <span class="keywordflow">if</span> (!pChild)</div>
<div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;            {</div>
<div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;            }</div>
<div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;</div>
<div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;          std::string objectCN = pChild-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">getData</a>();</div>
<div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;          objectCN = objectCN.substr(1, objectCN.length() - 2);</div>
<div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;          <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pObject = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">ObjectFromName</a>(listOfContainers, objectCN);</div>
<div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;</div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;          <span class="keywordflow">if</span> (!pObject)</div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;            {</div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;            }</div>
<div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;</div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;          <span class="keywordflow">if</span> (pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">isReference</a>())</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;            {</div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;              pObject = pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>();</div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;            }</div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;          <span class="keyword">const</span> std::string&amp; objectKey = pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">getKey</a>();</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;</div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;          pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a99902ba86220bc35193e33a08b93d858">setParameterMapping</a>(i, objectKey);</div>
<div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;</div>
<div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d1/dc0/classCChemEq.html">CChemEq</a>&amp; eqn = pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>();</div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;</div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;          <span class="keywordtype">bool</span> reversible = eqn.<a class="code" href="../../d1/dc0/classCChemEq.html#ab2429ddb26864468a33218f6b8fcfdd6">getReversibility</a>();</div>
<div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;</div>
<div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;          <span class="comment">// We guess what the role of a variable of newly imported function is:</span></div>
<div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;          <span class="keywordflow">if</span> (Variables[i]-&gt;getUsage() == <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba3ae891357cbcf064f1bde6174a6e75eb">CFunctionParameter::VARIABLE</a>)</div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;            {</div>
<div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;              <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1b">CFunctionParameter::Role</a> Role = <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1">CFunctionParameter::PARAMETER</a>;</div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;</div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;              <span class="keywordflow">if</span> (pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">getObjectType</a>() == <span class="stringliteral">&quot;Metabolite&quot;</span>)</div>
<div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;                {</div>
<div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../df/dfd/SBMLImporter_8cpp.html#abf504bd5a04a40d6cabdc389ac64c5df">containsKey</a>(eqn.<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>(), objectKey))</div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;                    Role = <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1bac081d570aadb879a8274d4f4d5bea203">CFunctionParameter::SUBSTRATE</a>;</div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;</div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;                  <span class="keywordflow">if</span> (Role == <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1">CFunctionParameter::PARAMETER</a> &amp;&amp;</div>
<div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;                      <a class="code" href="../../df/dfd/SBMLImporter_8cpp.html#abf504bd5a04a40d6cabdc389ac64c5df">containsKey</a>(eqn.<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>(), objectKey))</div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;                    {</div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;                      <span class="comment">// Fix for Bug 1882: if not reversible, only mark as product if it does</span></div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;                      <span class="comment">// not appear in the list of modifiers</span></div>
<div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;                      <span class="keywordflow">if</span> (!reversible &amp;&amp; <a class="code" href="../../df/dfd/SBMLImporter_8cpp.html#abf504bd5a04a40d6cabdc389ac64c5df">containsKey</a>(eqn.<a class="code" href="../../d1/dc0/classCChemEq.html#ab8b0078259e19d69c3e62b890197d601">getModifiers</a>(), objectKey))</div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;                        Role =  <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baffafab5a317fd2de22c4c5be009694d7">CFunctionParameter::MODIFIER</a>;</div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;                        Role =  <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba8ee65ab9f88bc857172a80b0ca3a7cc1">CFunctionParameter::PRODUCT</a>;</div>
<div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;                    }</div>
<div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;</div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;                  <span class="comment">// It is not a substrate and not a product therefore we must have a modifier</span></div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;                  <span class="keywordflow">if</span> (Role == <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1">CFunctionParameter::PARAMETER</a>)</div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;                    {</div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;                      Role = <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baffafab5a317fd2de22c4c5be009694d7">CFunctionParameter::MODIFIER</a>;</div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;                    }</div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;                }</div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">getObjectType</a>() == <span class="stringliteral">&quot;Model&quot;</span>)</div>
<div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;                {</div>
<div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;                  Role = <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba9e8507f534a74e943a9eb1a3bfe2a12d">CFunctionParameter::TIME</a>;</div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;                }</div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">getObjectType</a>() == <span class="stringliteral">&quot;Compartment&quot;</span>)</div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;                {</div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;                  Role = <a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baf3f11f4ddabe0443546c4e33dc7d9ba6">CFunctionParameter::VOLUME</a>;</div>
<div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;                }</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;</div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;              <span class="keyword">const_cast&lt;</span> <a class="code" href="../../d2/d4b/classCFunctionParameter.html">CFunctionParameter</a> * <span class="keyword">&gt;</span>(Variables[i])-&gt;setUsage(Role);</div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;            }</div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;          pChild = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>*<span class="keyword">&gt;</span>(pChild-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;        }</div>
<div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;    }</div>
<div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;}</div>
<div class="ttc" id="classCFunctionParameters_html_a25eebb18490f1fd552a39faae2120453"><div class="ttname"><a href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">CFunctionParameters::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db1/CFunctionParameters_8cpp_source.html#l00100">CFunctionParameters.cpp:100</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a0730aecebb9ca0f8401b7d0223e266e8"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode::getSibling</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getSibling()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00353">CCopasiNode.h:353</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1ba9e8507f534a74e943a9eb1a3bfe2a12d"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba9e8507f534a74e943a9eb1a3bfe2a12d">CFunctionParameter::TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00049">CFunctionParameter.h:49</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classCCopasiVector_html_ab7e0e37022783eddfe85abf9339b05c0"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector::size</a></div><div class="ttdeci">virtual size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00386">CCopasiVector.h:386</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1ba3ae891357cbcf064f1bde6174a6e75eb"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba3ae891357cbcf064f1bde6174a6e75eb">CFunctionParameter::VARIABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00050">CFunctionParameter.h:50</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCChemEq_html"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html">CChemEq</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00033">CChemEq.h:33</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1ba8ee65ab9f88bc857172a80b0ca3a7cc1"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba8ee65ab9f88bc857172a80b0ca3a7cc1">CFunctionParameter::PRODUCT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00045">CFunctionParameter.h:45</a></div></div>
<div class="ttc" id="classCCopasiObject_html"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9f/CCopasiObject_8h_source.html#l00216">CCopasiObject.h:216</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a56790cb06e1980712599250f3e695c6a"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">CCopasiObject::getObjectType</a></div><div class="ttdeci">const std::string &amp; getObjectType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00260">CCopasiObject.cpp:260</a></div></div>
<div class="ttc" id="classCFunctionParameters_html"><div class="ttname"><a href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de1/CFunctionParameters_8h_source.html#l00030">CFunctionParameters.h:30</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1baffafab5a317fd2de22c4c5be009694d7"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baffafab5a317fd2de22c4c5be009694d7">CFunctionParameter::MODIFIER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00046">CFunctionParameter.h:46</a></div></div>
<div class="ttc" id="classCCopasiObject_html_aeeec4db3332a6886c76ace4c3fe62b7d"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">CCopasiObject::getKey</a></div><div class="ttdeci">virtual const std::string &amp; getKey() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00608">CCopasiObject.cpp:608</a></div></div>
<div class="ttc" id="classCChemEq_html_ac7001192479e074d3696734187ec50d8"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">CChemEq::getProducts</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getProducts() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00063">CChemEq.cpp:63</a></div></div>
<div class="ttc" id="classCReaction_html_a5028bbc1b79e8a72071c7222cfeef9a2"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#a5028bbc1b79e8a72071c7222cfeef9a2">CReaction::getFunction</a></div><div class="ttdeci">const CFunction * getFunction() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00252">CReaction.cpp:252</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2aa8c57db3550fc84175ad38f1f3661e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">SBMLImporter::mpDataModel</a></div><div class="ttdeci">CCopasiDataModel * mpDataModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00068">SBMLImporter.h:68</a></div></div>
<div class="ttc" id="classCCopasiObject_html_aab9462de68df423ab9eaebaafabcf783"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">CCopasiObject::isReference</a></div><div class="ttdeci">bool isReference() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00572">CCopasiObject.cpp:572</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1b"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1b">CFunctionParameter::Role</a></div><div class="ttdeci">Role</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00042">CFunctionParameter.h:42</a></div></div>
<div class="ttc" id="classCChemEq_html_ab2429ddb26864468a33218f6b8fcfdd6"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ab2429ddb26864468a33218f6b8fcfdd6">CChemEq::getReversibility</a></div><div class="ttdeci">const bool &amp; getReversibility() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00077">CChemEq.cpp:77</a></div></div>
<div class="ttc" id="SBMLImporter_8cpp_html_abf504bd5a04a40d6cabdc389ac64c5df"><div class="ttname"><a href="../../df/dfd/SBMLImporter_8cpp.html#abf504bd5a04a40d6cabdc389ac64c5df">containsKey</a></div><div class="ttdeci">bool containsKey(const CCopasiVector&lt; CChemEqElement &gt; &amp;list, const std::string &amp;key)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05724">SBMLImporter.cpp:5724</a></div></div>
<div class="ttc" id="classCChemEq_html_abbcd10e89a632f5a7c225fee6975c6d9"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getSubstrates() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00060">CChemEq.cpp:60</a></div></div>
<div class="ttc" id="classCReaction_html_abdbb7b72fec3ce08e729bbe171c9dc53"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">CReaction::isReversible</a></div><div class="ttdeci">bool isReversible() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00229">CReaction.cpp:229</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1baf3f11f4ddabe0443546c4e33dc7d9ba6"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baf3f11f4ddabe0443546c4e33dc7d9ba6">CFunctionParameter::VOLUME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00048">CFunctionParameter.h:48</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1bac081d570aadb879a8274d4f4d5bea203"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1bac081d570aadb879a8274d4f4d5bea203">CFunctionParameter::SUBSTRATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00044">CFunctionParameter.h:44</a></div></div>
<div class="ttc" id="classCFunctionParameter_html"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html">CFunctionParameter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00034">CFunctionParameter.h:34</a></div></div>
<div class="ttc" id="classCChemEq_html_ab8b0078259e19d69c3e62b890197d601"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ab8b0078259e19d69c3e62b890197d601">CChemEq::getModifiers</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getModifiers() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00066">CChemEq.cpp:66</a></div></div>
<div class="ttc" id="classCReaction_html_a99902ba86220bc35193e33a08b93d858"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#a99902ba86220bc35193e33a08b93d858">CReaction::setParameterMapping</a></div><div class="ttdeci">void setParameterMapping(const size_t &amp;index, const std::string &amp;key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00339">CReaction.cpp:339</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1">CFunctionParameter::PARAMETER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00047">CFunctionParameter.h:47</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00034">CEvaluationNodeObject.h:34</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html_a32f6a30d58655b215bd68a01b26b47a3"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">CEvaluationNodeObject::getData</a></div><div class="ttdeci">virtual const Data &amp; getData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db2/CEvaluationNodeObject_8cpp_source.html#l00135">CEvaluationNodeObject.cpp:135</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
<div class="ttc" id="classCCopasiDataModel_html_a9d54888c14c755abec4c757289ee26f7"><div class="ttname"><a href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">CCopasiDataModel::ObjectFromName</a></div><div class="ttdeci">CCopasiObject * ObjectFromName(const std::vector&lt; CCopasiContainer * &gt; &amp;listOfContainer, const CCopasiObjectName &amp;CN) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d38/CCopasiDataModel_8cpp_source.html#l01940">CCopasiDataModel.cpp:1940</a></div></div>
<div class="ttc" id="classCReaction_html_ade6a66098c2f04f6e91d916029fe23e2"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">CReaction::getChemEq</a></div><div class="ttdeci">const CChemEq &amp; getChemEq() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00223">CReaction.cpp:223</a></div></div>
<div class="ttc" id="classCFunction_html_ab30b89a5603c9e0aa76b9cf2345f2e57"><div class="ttname"><a href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables</a></div><div class="ttdeci">CFunctionParameters &amp; getVariables()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00148">CFunction.cpp:148</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a33bb5035eec7ebc5e3ecac4771316405"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">CCopasiObject::getObjectParent</a></div><div class="ttdeci">CCopasiContainer * getObjectParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00276">CCopasiObject.cpp:276</a></div></div>
<div class="ttc" id="classCReaction_html_a8df89c11c8352eeb6b09b56aa5ce9ae9"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#a8df89c11c8352eeb6b09b56aa5ce9ae9">CReaction::addParameterMapping</a></div><div class="ttdeci">void addParameterMapping(const size_t &amp;index, const std::string &amp;key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00348">CReaction.cpp:348</a></div></div>
<div class="ttc" id="classCCopasiVector_html"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt; CChemEqElement &gt;</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aca53cdde28ce5bb980ece4371c055fc8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::find_local_parameters_in_delay </td>
          <td>(</td>
          <td class="paramtype">ASTNode *&#160;</td>
          <td class="paramname"><em>pASTNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Reaction *&#160;</td>
          <td class="paramname"><em>pSBMLReaction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>localReplacementMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>localIds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If we replace delay nodes within kineitc laws, we have to make sure that there is no reference to a local parameter within the replaced delay node because that would mean that we end up with a reference to a local parameter in the rule for the delay replacement which is not allowed in SBML. Therefore we have to convert all local parameters which occur within a delay call into global parameters. This method finds all local parameters that have to be converted to global parameters and it already creates the necessary global parameters. The localReplacementMap returns a mapping between the is of the original parameter and the id of the new parameter it will be replaced with. This map is used in a second step to actually replace the nodes in the expression.</p>
<p>If we replace delay nodes within kinetic laws, we have to make sure that there is no reference to a local parameter within the replaced delay node because that would mean that we end up with a reference to a local parameter in the rule for the delay replacement which is not allowed in SBML. Therefore we have to convert all local parameters which occur within a delay call into global parameters. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l10234">10234</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter()</a>, <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l10235"></a><span class="lineno">10235</span>&#160;{</div>
<div class="line"><a name="l10236"></a><span class="lineno">10236</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l10237"></a><span class="lineno">10237</span>&#160;</div>
<div class="line"><a name="l10238"></a><span class="lineno">10238</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l10239"></a><span class="lineno">10239</span>&#160;    {</div>
<div class="line"><a name="l10240"></a><span class="lineno">10240</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l10241"></a><span class="lineno">10241</span>&#160;        {</div>
<div class="line"><a name="l10242"></a><span class="lineno">10242</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10243"></a><span class="lineno">10243</span>&#160;        }</div>
<div class="line"><a name="l10244"></a><span class="lineno">10244</span>&#160;</div>
<div class="line"><a name="l10245"></a><span class="lineno">10245</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l10246"></a><span class="lineno">10246</span>&#160;        {</div>
<div class="line"><a name="l10247"></a><span class="lineno">10247</span>&#160;          <span class="comment">// check it this is the name of a local parameter</span></div>
<div class="line"><a name="l10248"></a><span class="lineno">10248</span>&#160;</div>
<div class="line"><a name="l10249"></a><span class="lineno">10249</span>&#160;          <span class="comment">// maybe there already is a replacement for this</span></div>
<div class="line"><a name="l10250"></a><span class="lineno">10250</span>&#160;          std::map&lt;std::string, std::string&gt;::const_iterator pos = localReplacementMap.find(itNode-&gt;getName());</div>
<div class="line"><a name="l10251"></a><span class="lineno">10251</span>&#160;</div>
<div class="line"><a name="l10252"></a><span class="lineno">10252</span>&#160;          <span class="keywordflow">if</span> (pos == localReplacementMap.end())</div>
<div class="line"><a name="l10253"></a><span class="lineno">10253</span>&#160;            {</div>
<div class="line"><a name="l10254"></a><span class="lineno">10254</span>&#160;              <span class="comment">// now we check if this is a reference to a local parameter</span></div>
<div class="line"><a name="l10255"></a><span class="lineno">10255</span>&#160;              <span class="keywordflow">if</span> (localIds.find(itNode-&gt;getName()) != localIds.end())</div>
<div class="line"><a name="l10256"></a><span class="lineno">10256</span>&#160;                {</div>
<div class="line"><a name="l10257"></a><span class="lineno">10257</span>&#160;                  <span class="comment">// we need to create a new global parameter with a unique name</span></div>
<div class="line"><a name="l10258"></a><span class="lineno">10258</span>&#160;                  <span class="comment">// the name should laso be unique within the localId set so we surely won&#39;t run</span></div>
<div class="line"><a name="l10259"></a><span class="lineno">10259</span>&#160;                  <span class="comment">// into problems</span></div>
<div class="line"><a name="l10260"></a><span class="lineno">10260</span>&#160;                  <span class="comment">//</span></div>
<div class="line"><a name="l10261"></a><span class="lineno">10261</span>&#160;                  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = 0;</div>
<div class="line"><a name="l10262"></a><span class="lineno">10262</span>&#160;                  std::ostringstream os;</div>
<div class="line"><a name="l10263"></a><span class="lineno">10263</span>&#160;                  os &lt;&lt; pSBMLReaction-&gt;getId() &lt;&lt; <span class="stringliteral">&quot;_local_&quot;</span>;</div>
<div class="line"><a name="l10264"></a><span class="lineno">10264</span>&#160;                  std::string prefix(os.str());</div>
<div class="line"><a name="l10265"></a><span class="lineno">10265</span>&#160;                  os &lt;&lt; index;</div>
<div class="line"><a name="l10266"></a><span class="lineno">10266</span>&#160;</div>
<div class="line"><a name="l10267"></a><span class="lineno">10267</span>&#160;                  <span class="keywordflow">while</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>.find(os.str()) != this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>.end() || localIds.find(os.str()) != localIds.end())</div>
<div class="line"><a name="l10268"></a><span class="lineno">10268</span>&#160;                    {</div>
<div class="line"><a name="l10269"></a><span class="lineno">10269</span>&#160;                      os.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l10270"></a><span class="lineno">10270</span>&#160;                      os &lt;&lt; prefix;</div>
<div class="line"><a name="l10271"></a><span class="lineno">10271</span>&#160;                      ++index;</div>
<div class="line"><a name="l10272"></a><span class="lineno">10272</span>&#160;                      os &lt;&lt; index;</div>
<div class="line"><a name="l10273"></a><span class="lineno">10273</span>&#160;                    }</div>
<div class="line"><a name="l10274"></a><span class="lineno">10274</span>&#160;</div>
<div class="line"><a name="l10275"></a><span class="lineno">10275</span>&#160;                  <span class="comment">// create the global parameter</span></div>
<div class="line"><a name="l10276"></a><span class="lineno">10276</span>&#160;                  <span class="keywordflow">if</span> (pModel == NULL)</div>
<div class="line"><a name="l10277"></a><span class="lineno">10277</span>&#160;                    {</div>
<div class="line"><a name="l10278"></a><span class="lineno">10278</span>&#160;                      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l10279"></a><span class="lineno">10279</span>&#160;                    }</div>
<div class="line"><a name="l10280"></a><span class="lineno">10280</span>&#160;</div>
<div class="line"><a name="l10281"></a><span class="lineno">10281</span>&#160;                  Parameter* pParameter = pModel-&gt;createParameter();</div>
<div class="line"><a name="l10282"></a><span class="lineno">10282</span>&#160;                  assert(pParameter != NULL);</div>
<div class="line"><a name="l10283"></a><span class="lineno">10283</span>&#160;</div>
<div class="line"><a name="l10284"></a><span class="lineno">10284</span>&#160;                  <span class="keywordflow">if</span> (pParameter == NULL)</div>
<div class="line"><a name="l10285"></a><span class="lineno">10285</span>&#160;                    {</div>
<div class="line"><a name="l10286"></a><span class="lineno">10286</span>&#160;                      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l10287"></a><span class="lineno">10287</span>&#160;                    }</div>
<div class="line"><a name="l10288"></a><span class="lineno">10288</span>&#160;</div>
<div class="line"><a name="l10289"></a><span class="lineno">10289</span>&#160;                  <span class="keyword">const</span> Parameter* pOldParam = pSBMLReaction-&gt;getKineticLaw()-&gt;getParameter(itNode-&gt;getName());</div>
<div class="line"><a name="l10290"></a><span class="lineno">10290</span>&#160;</div>
<div class="line"><a name="l10291"></a><span class="lineno">10291</span>&#160;                  assert(pOldParam != NULL);</div>
<div class="line"><a name="l10292"></a><span class="lineno">10292</span>&#160;</div>
<div class="line"><a name="l10293"></a><span class="lineno">10293</span>&#160;                  <span class="keywordflow">if</span> (pOldParam == NULL)</div>
<div class="line"><a name="l10294"></a><span class="lineno">10294</span>&#160;                    {</div>
<div class="line"><a name="l10295"></a><span class="lineno">10295</span>&#160;                      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l10296"></a><span class="lineno">10296</span>&#160;                    }</div>
<div class="line"><a name="l10297"></a><span class="lineno">10297</span>&#160;</div>
<div class="line"><a name="l10298"></a><span class="lineno">10298</span>&#160;                  <span class="comment">// make a copy, we he hopefully don&#39;t loose important annotations</span></div>
<div class="line"><a name="l10299"></a><span class="lineno">10299</span>&#160;                  (*pParameter) = (*pOldParam);</div>
<div class="line"><a name="l10300"></a><span class="lineno">10300</span>&#160;</div>
<div class="line"><a name="l10301"></a><span class="lineno">10301</span>&#160;                  <span class="keywordflow">if</span> (!pOldParam-&gt;isSetValue())</div>
<div class="line"><a name="l10302"></a><span class="lineno">10302</span>&#160;                    {</div>
<div class="line"><a name="l10303"></a><span class="lineno">10303</span>&#160;                      pParameter-&gt;setValue(std::numeric_limits&lt;C_FLOAT64&gt;::quiet_NaN());</div>
<div class="line"><a name="l10304"></a><span class="lineno">10304</span>&#160;                    }</div>
<div class="line"><a name="l10305"></a><span class="lineno">10305</span>&#160;</div>
<div class="line"><a name="l10306"></a><span class="lineno">10306</span>&#160;                  <span class="comment">// mark the id as used</span></div>
<div class="line"><a name="l10307"></a><span class="lineno">10307</span>&#160;                  pParameter-&gt;setId(os.str());</div>
<div class="line"><a name="l10308"></a><span class="lineno">10308</span>&#160;                  pParameter-&gt;setName(os.str());</div>
<div class="line"><a name="l10309"></a><span class="lineno">10309</span>&#160;                  pParameter-&gt;setConstant(<span class="keyword">true</span>);</div>
<div class="line"><a name="l10310"></a><span class="lineno">10310</span>&#160;                  localReplacementMap.insert(std::pair&lt;std::string, std::string&gt;(itNode-&gt;getName(), pParameter-&gt;getId()));</div>
<div class="line"><a name="l10311"></a><span class="lineno">10311</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>.insert(pParameter-&gt;getId());</div>
<div class="line"><a name="l10312"></a><span class="lineno">10312</span>&#160;</div>
<div class="line"><a name="l10313"></a><span class="lineno">10313</span>&#160;                  <span class="comment">// now we need to import that parameter</span></div>
<div class="line"><a name="l10314"></a><span class="lineno">10314</span>&#160;                  <span class="keywordflow">try</span></div>
<div class="line"><a name="l10315"></a><span class="lineno">10315</span>&#160;                    {</div>
<div class="line"><a name="l10316"></a><span class="lineno">10316</span>&#160;                      assert(<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a> != NULL);</div>
<div class="line"><a name="l10317"></a><span class="lineno">10317</span>&#160;                      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter</a>(pParameter, <a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, copasi2sbmlmap);</div>
<div class="line"><a name="l10318"></a><span class="lineno">10318</span>&#160;                    }</div>
<div class="line"><a name="l10319"></a><span class="lineno">10319</span>&#160;                  <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l10320"></a><span class="lineno">10320</span>&#160;                    {</div>
<div class="line"><a name="l10321"></a><span class="lineno">10321</span>&#160;                      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <span class="stringliteral">&quot;An unknown error has occurred while converting a local reaction parameter to a global parameter. Please report this to the authors of COPASI.&quot;</span>);</div>
<div class="line"><a name="l10322"></a><span class="lineno">10322</span>&#160;                    }</div>
<div class="line"><a name="l10323"></a><span class="lineno">10323</span>&#160;                }</div>
<div class="line"><a name="l10324"></a><span class="lineno">10324</span>&#160;            }</div>
<div class="line"><a name="l10325"></a><span class="lineno">10325</span>&#160;        }</div>
<div class="line"><a name="l10326"></a><span class="lineno">10326</span>&#160;    }</div>
<div class="line"><a name="l10327"></a><span class="lineno">10327</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8f78f336ef119556c847afdb8e86674d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">SBMLImporter::mUsedSBMLIds</a></div><div class="ttdeci">std::set&lt; std::string &gt; mUsedSBMLIds</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00089">SBMLImporter.h:89</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8595689dd63fec1e462ee49fd16ea333"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">SBMLImporter::createCModelValueFromParameter</a></div><div class="ttdeci">CModelValue * createCModelValueFromParameter(const Parameter *sbmlParameter, CModel *copasiModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04436">SBMLImporter.cpp:4436</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e283899bb37b21959fa43ebe792588d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::findAvogadroConstant </td>
          <td>(</td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>factor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method goes through the list of global parameters and tries to find a parameter that could correspond to avogadros number. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09058">9058</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l09059"></a><span class="lineno"> 9059</span>&#160;{</div>
<div class="line"><a name="l09060"></a><span class="lineno"> 9060</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pSBMLModel-&gt;getListOfParameters()-&gt;size();</div>
<div class="line"><a name="l09061"></a><span class="lineno"> 9061</span>&#160;</div>
<div class="line"><a name="l09062"></a><span class="lineno"> 9062</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l09063"></a><span class="lineno"> 9063</span>&#160;    {</div>
<div class="line"><a name="l09064"></a><span class="lineno"> 9064</span>&#160;      <span class="keyword">const</span> Parameter* pParameter = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>Parameter*<span class="keyword">&gt;</span>(pSBMLModel-&gt;getListOfParameters()-&gt;get(i));</div>
<div class="line"><a name="l09065"></a><span class="lineno"> 9065</span>&#160;</div>
<div class="line"><a name="l09066"></a><span class="lineno"> 9066</span>&#160;      <span class="keywordflow">if</span> (pParameter-&gt;getConstant() == <span class="keyword">true</span> &amp;&amp; pParameter-&gt;isSetValue() == <span class="keyword">true</span>)</div>
<div class="line"><a name="l09067"></a><span class="lineno"> 9067</span>&#160;        {</div>
<div class="line"><a name="l09068"></a><span class="lineno"> 9068</span>&#160;          <span class="keywordtype">double</span> value = pParameter-&gt;getValue();</div>
<div class="line"><a name="l09069"></a><span class="lineno"> 9069</span>&#160;</div>
<div class="line"><a name="l09070"></a><span class="lineno"> 9070</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(factor, value, 1e-3))</div>
<div class="line"><a name="l09071"></a><span class="lineno"> 9071</span>&#160;            {</div>
<div class="line"><a name="l09072"></a><span class="lineno"> 9072</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>.insert(pParameter);</div>
<div class="line"><a name="l09073"></a><span class="lineno"> 9073</span>&#160;            }</div>
<div class="line"><a name="l09074"></a><span class="lineno"> 9074</span>&#160;        }</div>
<div class="line"><a name="l09075"></a><span class="lineno"> 9075</span>&#160;    }</div>
<div class="line"><a name="l09076"></a><span class="lineno"> 9076</span>&#160;</div>
<div class="line"><a name="l09077"></a><span class="lineno"> 9077</span>&#160;  <span class="comment">//  if (this-&gt;mPotentialAvogadroNumbers.empty())</span></div>
<div class="line"><a name="l09078"></a><span class="lineno"> 9078</span>&#160;  <span class="comment">//    {</span></div>
<div class="line"><a name="l09079"></a><span class="lineno"> 9079</span>&#160;  <span class="comment">//      // find an ID that is unique at least within the list of parameters</span></div>
<div class="line"><a name="l09080"></a><span class="lineno"> 9080</span>&#160;  <span class="comment">//      // since we remove this created parameter after import, it does not</span></div>
<div class="line"><a name="l09081"></a><span class="lineno"> 9081</span>&#160;  <span class="comment">//      // have to be unique within the whole model</span></div>
<div class="line"><a name="l09082"></a><span class="lineno"> 9082</span>&#160;  <span class="comment">//      std::set&lt;std::string&gt; ids;</span></div>
<div class="line"><a name="l09083"></a><span class="lineno"> 9083</span>&#160;  <span class="comment">//      for (i = 0;i &lt; iMax;++i)</span></div>
<div class="line"><a name="l09084"></a><span class="lineno"> 9084</span>&#160;  <span class="comment">//        {</span></div>
<div class="line"><a name="l09085"></a><span class="lineno"> 9085</span>&#160;  <span class="comment">//          ids.insert(pSBMLModel-&gt;getListOfParameters()-&gt;get(i)-&gt;getId());</span></div>
<div class="line"><a name="l09086"></a><span class="lineno"> 9086</span>&#160;  <span class="comment">//}</span></div>
<div class="line"><a name="l09087"></a><span class="lineno"> 9087</span>&#160;  <span class="comment">//      std::ostringstream os;</span></div>
<div class="line"><a name="l09088"></a><span class="lineno"> 9088</span>&#160;  <span class="comment">//      i = 1;</span></div>
<div class="line"><a name="l09089"></a><span class="lineno"> 9089</span>&#160;  <span class="comment">//      os &lt;&lt; &quot;parameter_&quot; &lt;&lt; i;</span></div>
<div class="line"><a name="l09090"></a><span class="lineno"> 9090</span>&#160;  <span class="comment">//      while (ids.find(os.str()) != ids.end())</span></div>
<div class="line"><a name="l09091"></a><span class="lineno"> 9091</span>&#160;  <span class="comment">//        {</span></div>
<div class="line"><a name="l09092"></a><span class="lineno"> 9092</span>&#160;  <span class="comment">//          ++i;</span></div>
<div class="line"><a name="l09093"></a><span class="lineno"> 9093</span>&#160;  <span class="comment">//          os.str(&quot;&quot;);</span></div>
<div class="line"><a name="l09094"></a><span class="lineno"> 9094</span>&#160;  <span class="comment">//          os &lt;&lt; &quot;parameter_&quot; &lt;&lt; i;</span></div>
<div class="line"><a name="l09095"></a><span class="lineno"> 9095</span>&#160;  <span class="comment">//}</span></div>
<div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160;  <span class="comment">//      Parameter *pParameter = pSBMLModel-&gt;createParameter();</span></div>
<div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;  <span class="comment">//      pParameter-&gt;setId(os.str());</span></div>
<div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160;  <span class="comment">//      pParameter-&gt;setName(&quot;amount to particle factor&quot;);</span></div>
<div class="line"><a name="l09099"></a><span class="lineno"> 9099</span>&#160;  <span class="comment">//      pParameter-&gt;setConstant(true);</span></div>
<div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;  <span class="comment">//      pParameter-&gt;setValue(factor);</span></div>
<div class="line"><a name="l09101"></a><span class="lineno"> 9101</span>&#160;  <span class="comment">//      this-&gt;mAvogadroCreated = true;</span></div>
<div class="line"><a name="l09102"></a><span class="lineno"> 9102</span>&#160;  <span class="comment">//      this-&gt;mPotentialAvogadroNumbers.insert(pParameter);</span></div>
<div class="line"><a name="l09103"></a><span class="lineno"> 9103</span>&#160;  <span class="comment">//}</span></div>
<div class="line"><a name="l09104"></a><span class="lineno"> 9104</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a273943602d6059106e5d0ef3dd3e6e45"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">SBMLImporter::mPotentialAvogadroNumbers</a></div><div class="ttdeci">std::set&lt; const Parameter * &gt; mPotentialAvogadroNumbers</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00083">SBMLImporter.h:83</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a34f24c83698b4184ec7c8ab795efdee4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">SBMLImporter::areApproximatelyEqual</a></div><div class="ttdeci">static bool areApproximatelyEqual(const double &amp;x, const double &amp;y, const double &amp;t=1e-9)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00177">SBMLImporter.cpp:177</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a76e38c93eb85a4d0cf0b188674ac6ff3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> * SBMLImporter::findCorrespondingFunction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dc/dbd/classCExpression.html">CExpression</a> *&#160;</td>
          <td class="paramname"><em>pExpression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/dcf/classCReaction.html">CReaction</a> *&#160;</td>
          <td class="paramname"><em>pCopasiReaction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The methods gets a function where all the parameters have a usage of "PARAMETER". In addition it get the root node of a call to that function which is an expression and contains the actual objects with which the function is called in a certain reaction. From this expression we can determine if there already is a function in the database that does the same. Or we can find out if this function is a Mass Action kinetic. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05052">5052</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a41bd8f0562db3137b54c8f595a9b5f5c">areEqualFunctions()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>, <a class="el" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">CReaction::getChemEq()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode&lt; _Data &gt;::getData()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#a7e608ddb2f667fe661ba05b319e84d01">CReaction::getParameterIndex()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">CChemEq::getProducts()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates()</a>, <a class="el" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">CReaction::isReversible()</a>, <a class="el" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">CFunctionParameters::size()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector&lt; T &gt;::size()</a>, <a class="el" href="../../db/d9a/classCFunctionDB.html#ad8217c9a6e854a87021cc4b6f96d6724">CFunctionDB::suitableFunctions()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a27713ac73421a91bc85961a82e45635e">TriFalse</a>, and <a class="el" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a8a0273b6da872343bab7a1278a8aa87e">TriTrue</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;{</div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;  <span class="comment">// We are certain at this point that pExpression is a simple function call.</span></div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;  <span class="comment">// Check whether a function with the name exists in COPASI and whether it is suitable</span></div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;  <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pCorrespondingFunction = NULL;</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;  std::string Name = pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>()-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>();</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;  pCorrespondingFunction = <a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(Name);</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;  <span class="keywordflow">if</span> (pCorrespondingFunction != NULL)</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;    {</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a> &amp; Variables = pCorrespondingFunction-&gt;<a class="code" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">getVariables</a>();</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;</div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; Variables.<a class="code" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">size</a>(); ++i)</div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;        {</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;          <span class="comment">// This fails for global parameters but those are handled in a second attempt</span></div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;          <span class="keywordflow">if</span> (pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a7e608ddb2f667fe661ba05b319e84d01">getParameterIndex</a>(Variables[i]-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>()) == <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>)</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;            {</div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;              pCorrespondingFunction = NULL;</div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;            }</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;        }</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;    }</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;  <span class="keywordflow">if</span> (pCorrespondingFunction != NULL)</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;    {</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;      <span class="keywordflow">return</span> pCorrespondingFunction;</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;    }</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;  <span class="comment">// TODO This has never worked</span></div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;<span class="preprocessor">#ifdef XXXX</span></div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;<span class="preprocessor"></span>  <span class="comment">// Check for suitable functions which have a different name but have the same call tree as</span></div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;  std::vector&lt; CFunction * &gt; functions = <a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#ad8217c9a6e854a87021cc4b6f96d6724">suitableFunctions</a>(pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>(),</div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;                                         pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>().<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>(),</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;                                         pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">isReversible</a>() ? <a class="code" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a8a0273b6da872343bab7a1278a8aa87e">TriTrue</a> : <a class="code" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a27713ac73421a91bc85961a82e45635e">TriFalse</a>);</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;  <span class="keywordtype">size_t</span> i, iMax = functions.size();</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;    {</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;      pCorrespondingFunction = (functions[i]);</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;      <span class="comment">// make sure the function is not compared to itself since it can already</span></div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;      <span class="comment">// be in the database if it has been used a call in another function</span></div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;      <span class="comment">// don&#39;t compare the mass action kinetics</span></div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;      <span class="keywordflow">if</span> ((pCorrespondingFunction != tree) &amp;&amp; (!<span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d9/d88/classCMassAction.html">CMassAction</a>*<span class="keyword">&gt;</span>(pCorrespondingFunction)) &amp;&amp; <a class="code" href="../../d7/d6d/classSBMLImporter.html#a41bd8f0562db3137b54c8f595a9b5f5c">areEqualFunctions</a>(pCorrespondingFunction, tree))</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;        {</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a> &amp; Variables = pFun-&gt;getVariables();</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; Variables.<a class="code" href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">size</a>(); ++i)</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;            {</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;              <span class="keywordflow">if</span> (pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a7e608ddb2f667fe661ba05b319e84d01">getParameterIndex</a>(Variables[i]-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>()) == <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>)</div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;                {</div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;                  pCorrespondingFunction = NULL;</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;                }</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;            }</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;</div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;          pCorrespondingFunction = pFun;</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;        }</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;    }</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;<span class="preprocessor">#endif // XXXX</span></div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;  <span class="keywordflow">return</span> pCorrespondingFunction;</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;}</div>
<div class="ttc" id="classCMassAction_html"><div class="ttname"><a href="../../d9/d88/classCMassAction.html">CMassAction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d50/CMassAction_8h_source.html#l00030">CMassAction.h:30</a></div></div>
<div class="ttc" id="classCFunctionParameters_html_a25eebb18490f1fd552a39faae2120453"><div class="ttname"><a href="../../d0/d1f/classCFunctionParameters.html#a25eebb18490f1fd552a39faae2120453">CFunctionParameters::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db1/CFunctionParameters_8cpp_source.html#l00100">CFunctionParameters.cpp:100</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a879d6756b51f6b58d307940e1343bd10"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName</a></div><div class="ttdeci">const std::string &amp; getObjectName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00258">CCopasiObject.cpp:258</a></div></div>
<div class="ttc" id="classCCopasiVector_html_ab7e0e37022783eddfe85abf9339b05c0"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector::size</a></div><div class="ttdeci">virtual size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00386">CCopasiVector.h:386</a></div></div>
<div class="ttc" id="classCFunctionDB_html_ad8217c9a6e854a87021cc4b6f96d6724"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#ad8217c9a6e854a87021cc4b6f96d6724">CFunctionDB::suitableFunctions</a></div><div class="ttdeci">std::vector&lt; CFunction * &gt; suitableFunctions(const size_t noSubstrates, const size_t noProducts, const TriLogic reversibility)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00350">CFunctionDB.cpp:350</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classCFunctionParameters_html"><div class="ttname"><a href="../../d0/d1f/classCFunctionParameters.html">CFunctionParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de1/CFunctionParameters_8h_source.html#l00030">CFunctionParameters.h:30</a></div></div>
<div class="ttc" id="classCChemEq_html_ac7001192479e074d3696734187ec50d8"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">CChemEq::getProducts</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getProducts() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00063">CChemEq.cpp:63</a></div></div>
<div class="ttc" id="classCReaction_html_a7e608ddb2f667fe661ba05b319e84d01"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#a7e608ddb2f667fe661ba05b319e84d01">CReaction::getParameterIndex</a></div><div class="ttdeci">size_t getParameterIndex(const std::string &amp;parameterName, CFunctionParameter::DataType *pType=NULL) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00292">CReaction.cpp:292</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af3884484e51df06669ba5bc4fc77c07c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">SBMLImporter::functionDB</a></div><div class="ttdeci">CFunctionDB * functionDB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00056">SBMLImporter.h:56</a></div></div>
<div class="ttc" id="copasi_8h_html_a4cd90bcaf1a35317678ec47713b5f629a27713ac73421a91bc85961a82e45635e"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a27713ac73421a91bc85961a82e45635e">TriFalse</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00128">copasi.h:128</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a41bd8f0562db3137b54c8f595a9b5f5c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a41bd8f0562db3137b54c8f595a9b5f5c">SBMLImporter::areEqualFunctions</a></div><div class="ttdeci">static bool areEqualFunctions(const CFunction *pFun, const CFunction *pFun2)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05121">SBMLImporter.cpp:5121</a></div></div>
<div class="ttc" id="classCChemEq_html_abbcd10e89a632f5a7c225fee6975c6d9"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getSubstrates() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00060">CChemEq.cpp:60</a></div></div>
<div class="ttc" id="classCReaction_html_abdbb7b72fec3ce08e729bbe171c9dc53"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#abdbb7b72fec3ce08e729bbe171c9dc53">CReaction::isReversible</a></div><div class="ttdeci">bool isReversible() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00229">CReaction.cpp:229</a></div></div>
<div class="ttc" id="classCFunction_html"><div class="ttname"><a href="../../d9/d86/classCFunction.html">CFunction</a></div><div class="ttdoc">The class for handling a chemical kinetic function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df5/CFunction_8h_source.html#l00029">CFunction.h:29</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a761f04c57a75e99a63ee0700c76fdafe"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode::getData</a></div><div class="ttdeci">virtual const Data &amp; getData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00118">CCopasiNode.h:118</a></div></div>
<div class="ttc" id="copasi_8h_html_a4cd90bcaf1a35317678ec47713b5f629a8a0273b6da872343bab7a1278a8aa87e"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a8a0273b6da872343bab7a1278a8aa87e">TriTrue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00129">copasi.h:129</a></div></div>
<div class="ttc" id="classCFunctionDB_html_aa25aabb5ce2677103813278c014e06fb"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction</a></div><div class="ttdeci">CFunction * findFunction(const std::string &amp;functionName)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00325">CFunctionDB.cpp:325</a></div></div>
<div class="ttc" id="classCReaction_html_ade6a66098c2f04f6e91d916029fe23e2"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">CReaction::getChemEq</a></div><div class="ttdeci">const CChemEq &amp; getChemEq() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00223">CReaction.cpp:223</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
<div class="ttc" id="classCFunction_html_ab30b89a5603c9e0aa76b9cf2345f2e57"><div class="ttname"><a href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables</a></div><div class="ttdeci">CFunctionParameters &amp; getVariables()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00148">CFunction.cpp:148</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57920640816814412246e023fd98da7d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::findDirectDependencies </td>
          <td>(</td>
          <td class="paramtype">const FunctionDefinition *&#160;</td>
          <td class="paramname"><em>pFunDef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; const FunctionDefinition *, std::set&lt; std::string &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>dependencies</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>static method that finds all direct function dependencies of a given function definition. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l10026">10026</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a3c3f358688531e3fba25e2476a02e248">findDirectDependencies()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#ad01e17c0afbe5350a9c4474dadc0d168">importFunctionDefinitions()</a>.</p>
<div class="fragment"><div class="line"><a name="l10027"></a><span class="lineno">10027</span>&#160;{</div>
<div class="line"><a name="l10028"></a><span class="lineno">10028</span>&#160;  <span class="comment">// if we don&#39;t have math, we don&#39;t have dependencies</span></div>
<div class="line"><a name="l10029"></a><span class="lineno">10029</span>&#160;  <span class="keywordflow">if</span> (pFunDef == NULL || !pFunDef-&gt;isSetMath() || pFunDef-&gt;getMath()-&gt;getNumChildren() == 0)</div>
<div class="line"><a name="l10030"></a><span class="lineno">10030</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l10031"></a><span class="lineno">10031</span>&#160;</div>
<div class="line"><a name="l10032"></a><span class="lineno">10032</span>&#160;  assert(pFunDef != NULL);</div>
<div class="line"><a name="l10033"></a><span class="lineno">10033</span>&#160;  std::set&lt;std::string&gt; deps;</div>
<div class="line"><a name="l10034"></a><span class="lineno">10034</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a57920640816814412246e023fd98da7d">SBMLImporter::findDirectDependencies</a>(pFunDef-&gt;getMath()-&gt;getChild(pFunDef-&gt;getMath()-&gt;getNumChildren() - 1), deps);</div>
<div class="line"><a name="l10035"></a><span class="lineno">10035</span>&#160;  dependencies.insert(std::pair&lt;<span class="keyword">const</span> FunctionDefinition*, std::set&lt;std::string&gt; &gt;(pFunDef, deps));</div>
<div class="line"><a name="l10036"></a><span class="lineno">10036</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a57920640816814412246e023fd98da7d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a57920640816814412246e023fd98da7d">SBMLImporter::findDirectDependencies</a></div><div class="ttdeci">static void findDirectDependencies(const FunctionDefinition *pFunDef, std::map&lt; const FunctionDefinition *, std::set&lt; std::string &gt; &gt; &amp;dependencies)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10026">SBMLImporter.cpp:10026</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3c3f358688531e3fba25e2476a02e248"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::findDirectDependencies </td>
          <td>(</td>
          <td class="paramtype">const ASTNode *&#160;</td>
          <td class="paramname"><em>pNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>dependencies</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>static method that recursively finds all direct function dependencies of the expression rooted at the given node. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l10042">10042</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a57920640816814412246e023fd98da7d">findDirectDependencies()</a>.</p>
<div class="fragment"><div class="line"><a name="l10043"></a><span class="lineno">10043</span>&#160;{</div>
<div class="line"><a name="l10044"></a><span class="lineno">10044</span>&#160;  <span class="comment">// TODO CRITICAL We need to use a node iterator</span></div>
<div class="line"><a name="l10045"></a><span class="lineno">10045</span>&#160;  assert(pNode != NULL);</div>
<div class="line"><a name="l10046"></a><span class="lineno">10046</span>&#160;</div>
<div class="line"><a name="l10047"></a><span class="lineno">10047</span>&#160;  <span class="keywordflow">if</span> (pNode-&gt;getType() == AST_FUNCTION)</div>
<div class="line"><a name="l10048"></a><span class="lineno">10048</span>&#160;    {</div>
<div class="line"><a name="l10049"></a><span class="lineno">10049</span>&#160;      <span class="comment">// found a function call</span></div>
<div class="line"><a name="l10050"></a><span class="lineno">10050</span>&#160;      dependencies.insert(pNode-&gt;getName());</div>
<div class="line"><a name="l10051"></a><span class="lineno">10051</span>&#160;    }</div>
<div class="line"><a name="l10052"></a><span class="lineno">10052</span>&#160;</div>
<div class="line"><a name="l10053"></a><span class="lineno">10053</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, iMax = pNode-&gt;getNumChildren();</div>
<div class="line"><a name="l10054"></a><span class="lineno">10054</span>&#160;</div>
<div class="line"><a name="l10055"></a><span class="lineno">10055</span>&#160;  <span class="keywordflow">for</span> (; i &lt; iMax; ++i)</div>
<div class="line"><a name="l10056"></a><span class="lineno">10056</span>&#160;    {</div>
<div class="line"><a name="l10057"></a><span class="lineno">10057</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a57920640816814412246e023fd98da7d">SBMLImporter::findDirectDependencies</a>(pNode-&gt;getChild(i), dependencies);</div>
<div class="line"><a name="l10058"></a><span class="lineno">10058</span>&#160;    }</div>
<div class="line"><a name="l10059"></a><span class="lineno">10059</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a57920640816814412246e023fd98da7d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a57920640816814412246e023fd98da7d">SBMLImporter::findDirectDependencies</a></div><div class="ttdeci">static void findDirectDependencies(const FunctionDefinition *pFunDef, std::map&lt; const FunctionDefinition *, std::set&lt; std::string &gt; &gt; &amp;dependencies)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10026">SBMLImporter.cpp:10026</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a175d4d5e664bd89964dccf5ba89d25de"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::findFunctionCalls </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td>
          <td class="paramname"><em>pNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>functionNameSet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Finds all functions calls directly or indirectly used in a function tree. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06318">6318</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a9850f90ad614378da22df5bab569a3b6">CEvaluationNode::CALL</a>, <a class="el" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction()</a>, <a class="el" href="../../d3/db1/classCCopasiRootContainer.html#afd5e8541f181260daf7515b28f0612c3">CCopasiRootContainer::getFunctionList()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, and <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a3eab269f4577f39f76b021c4e3f75b37">removeUnusedFunctions()</a>.</p>
<div class="fragment"><div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;{</div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;  <span class="keywordflow">if</span> (pNode)</div>
<div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;    {</div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;      <a class="code" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a>* pFunctionDB = <a class="code" href="../../d3/db1/classCCopasiRootContainer.html#afd5e8541f181260daf7515b28f0612c3">CCopasiRootContainer::getFunctionList</a>();</div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;      <a class="code" href="../../de/d73/classCCopasiTree_1_1iterator.html">CCopasiTree&lt;const CEvaluationNode&gt;::iterator</a> treeIt = pNode;</div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;</div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;      <span class="keywordflow">while</span> (treeIt != NULL)</div>
<div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;        {</div>
<div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>((*treeIt).getType()) == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a9850f90ad614378da22df5bab569a3b6">CEvaluationNode::CALL</a>)</div>
<div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;            {</div>
<div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;              <span class="comment">// unQuote not necessary since getIndex in CCopasiVector takes care of this.</span></div>
<div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;              <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = pFunctionDB-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>((*treeIt).getData());</div>
<div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;</div>
<div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;              <span class="keywordflow">if</span> (functionNameSet.find(pTree-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>()) == functionNameSet.end())</div>
<div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;                {</div>
<div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;                  functionNameSet.insert(pTree-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>());</div>
<div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;                }</div>
<div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;            }</div>
<div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;</div>
<div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;          ++treeIt;</div>
<div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;        }</div>
<div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;    }</div>
<div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;}</div>
<div class="ttc" id="classCCopasiTree_1_1iterator_html"><div class="ttname"><a href="../../de/d73/classCCopasiTree_1_1iterator.html">CCopasiTree::iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4e/CCopasiTree_8h_source.html#l00081">CCopasiTree.h:81</a></div></div>
<div class="ttc" id="classCFunctionDB_html"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/CFunctionDB_8h_source.html#l00035">CFunctionDB.h:35</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a879d6756b51f6b58d307940e1343bd10"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName</a></div><div class="ttdeci">const std::string &amp; getObjectName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00258">CCopasiObject.cpp:258</a></div></div>
<div class="ttc" id="classCEvaluationTree_html"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00028">CEvaluationTree.h:28</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a9e5fcf60f22d2701417f90756847d37b"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a></div><div class="ttdeci">static Type type(const Type &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00123">CEvaluationNode.cpp:123</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a175d4d5e664bd89964dccf5ba89d25de"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">SBMLImporter::findFunctionCalls</a></div><div class="ttdeci">void findFunctionCalls(const CEvaluationNode *pNode, std::set&lt; std::string &gt; &amp;functionNameSet)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06318">SBMLImporter.cpp:6318</a></div></div>
<div class="ttc" id="classCCopasiRootContainer_html_afd5e8541f181260daf7515b28f0612c3"><div class="ttname"><a href="../../d3/db1/classCCopasiRootContainer.html#afd5e8541f181260daf7515b28f0612c3">CCopasiRootContainer::getFunctionList</a></div><div class="ttdeci">static CFunctionDB * getFunctionList()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4b/CCopasiRootContainer_8cpp_source.html#l00137">CCopasiRootContainer.cpp:137</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a9850f90ad614378da22df5bab569a3b6"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a9850f90ad614378da22df5bab569a3b6">CEvaluationNode::CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00047">CEvaluationNode.h:47</a></div></div>
<div class="ttc" id="classCFunctionDB_html_aa25aabb5ce2677103813278c014e06fb"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction</a></div><div class="ttdeci">CFunction * findFunction(const std::string &amp;functionName)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00325">CFunctionDB.cpp:325</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2d5ef4903a7ed12d178107ef819b3b66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string SBMLImporter::findIdInASTTree </td>
          <td>(</td>
          <td class="paramtype">const ASTNode *&#160;</td>
          <td class="paramname"><em>pMath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>reactionIds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method takes an AST node and a set of ids and returns the first id from the set it finds in the AST tree. This is e.g. used to check if expression in L2V1 contain references to reaction ids. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06900">6900</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6d9048bf3ddc66ce0304345a54f6fa2f">checkRuleMathConsistency()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a54e987b86e2c598008f5013b16eacc35">importRuleForModelEntity()</a>.</p>
<div class="fragment"><div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;{</div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;  std::string <span class="keywordtype">id</span> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; const ASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;</div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;    {</div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;        {</div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;        }</div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;        {</div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;          <span class="keywordflow">if</span> (reactionIds.find(itNode-&gt;getName()) != reactionIds.end())</div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;            {</div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;              <span class="keywordtype">id</span> = itNode-&gt;getName();</div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;            }</div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;        }</div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;    }</div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;</div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">id</a>;</div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;}</div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="structNamespace_html_a715d108cd7f9d5a482c1f485368e883d"><div class="ttname"><a href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">Namespace::id</a></div><div class="ttdeci">const char * id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6c/stdsoap2_8h_source.html#l01262">stdsoap2.h:1262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8c121aa8af8dabb6da1e76fe181363b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string SBMLImporter::findIdInASTTree </td>
          <td>(</td>
          <td class="paramtype">const ASTNode *&#160;</td>
          <td class="paramname"><em>pASTNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, double &gt; &amp;&#160;</td>
          <td class="paramname"><em>reactionIds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method takes an AST node and a set of ids and returns the first id from the set it finds in the AST tree. This is e.g. used to check if expression in L2V1 contain references to reaction ids. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06876">6876</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>
<div class="fragment"><div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;{</div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;  std::string <span class="keywordtype">id</span> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; const ASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;</div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;    {</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;        {</div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;        }</div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;</div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;        {</div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;          <span class="keywordflow">if</span> (reactionIds.find(itNode-&gt;getName()) != reactionIds.end())</div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;            {</div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;              <span class="keywordtype">id</span> = itNode-&gt;getName();</div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;            }</div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;        }</div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;    }</div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;</div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">id</a>;</div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;}</div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="structNamespace_html_a715d108cd7f9d5a482c1f485368e883d"><div class="ttname"><a href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">Namespace::id</a></div><div class="ttdeci">const char * id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6c/stdsoap2_8h_source.html#l01262">stdsoap2.h:1262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a82afb75ea3c9cd40eead5e449007e23f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const FunctionDefinition * SBMLImporter::getFunctionDefinitionForName </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Model *&#160;</td>
          <td class="paramname"><em>sbmlModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the user defined SBML function definition that belongs to the given name, or NULL if none can be found. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l02981">2981</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;{</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <span class="keyword">const</span> FunctionDefinition* fDef = NULL;</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter;</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;  <span class="keywordflow">for</span> (counter = 0; counter &lt; sbmlModel-&gt;getNumFunctionDefinitions(); counter++)</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    {</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      std::string functionName = sbmlModel-&gt;getFunctionDefinition(counter)-&gt;getName();</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <span class="keywordflow">if</span> (sbmlModel-&gt;getFunctionDefinition(counter)-&gt;isSetId())</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;        {</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;          functionName = sbmlModel-&gt;getFunctionDefinition(counter)-&gt;getId();</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;        }</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;      <span class="keywordflow">if</span> (functionName == name)</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;        {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;          fDef = sbmlModel-&gt;getFunctionDefinition(counter);</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;        }</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    }</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;  <span class="keywordflow">return</span> fDef;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5ac2addc8f38864b9b616830635b110a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::getIdsFromNode </td>
          <td>(</td>
          <td class="paramtype">const ASTNode *&#160;</td>
          <td class="paramname"><em>pNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>idSet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Recurses an ASTNode tree and gets all SBML Ids in the tree. The ids are stored in the given set. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06925">6925</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6d9048bf3ddc66ce0304345a54f6fa2f">checkRuleMathConsistency()</a>.</p>
<div class="fragment"><div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;{</div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; const ASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;</div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;    {</div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;        {</div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;        }</div>
<div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;</div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;        {</div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;          idSet.insert(itNode-&gt;getName());</div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;        }</div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;    }</div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;}</div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a86d7db236b41c28aaa476fb09f67678b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::getImportCOPASIMIRIAM </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the flag that determines whether COPASI MIRIAM annotation is imported if it is present. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09494">9494</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">mImportCOPASIMIRIAM</a>.</p>
<div class="fragment"><div class="line"><a name="l09495"></a><span class="lineno"> 9495</span>&#160;{</div>
<div class="line"><a name="l09496"></a><span class="lineno"> 9496</span>&#160;  <span class="keywordflow">return</span> this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">mImportCOPASIMIRIAM</a>;</div>
<div class="line"><a name="l09497"></a><span class="lineno"> 9497</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a4588fba30554cfe8dbe394a6ad6685eb"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">SBMLImporter::mImportCOPASIMIRIAM</a></div><div class="ttdeci">bool mImportCOPASIMIRIAM</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00085">SBMLImporter.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8ec2db84bd14fc7d2842a0463b481e0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/da5/classCProcessReport.html">CProcessReport</a> * SBMLImporter::getImportHandlerAddr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06086">6086</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>.</p>
<div class="fragment"><div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;{<span class="keywordflow">return</span> <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>;}</div>
<div class="ttc" id="classSBMLImporter_html_a32b10e0dc03fc5bbf7b4842b0d314ff6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">SBMLImporter::mpImportHandler</a></div><div class="ttdeci">CProcessReport * mpImportHandler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00072">SBMLImporter.h:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2511a51a2a17ac94c63dcf719f18f779"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UnitDefinition * SBMLImporter::getSBMLUnitDefinitionForId </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>unitId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method takes the id of a unit as it can appear in an SBML file, and returns a new UnitDefinition object for that id. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l08400">8400</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../df/d80/classCSBMLExporter.html#a434c0e84d0593abf69165c1a73760b9e">CSBMLExporter::check_for_spatial_size_units()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">checkElementUnits()</a>.</p>
<div class="fragment"><div class="line"><a name="l08401"></a><span class="lineno"> 8401</span>&#160;{</div>
<div class="line"><a name="l08402"></a><span class="lineno"> 8402</span>&#160;  UnitDefinition* pUnitDefinition = NULL;</div>
<div class="line"><a name="l08403"></a><span class="lineno"> 8403</span>&#160;  <span class="keyword">const</span> UnitDefinition* pTmpUnitDefinition = pSBMLModel-&gt;getUnitDefinition(unitId);</div>
<div class="line"><a name="l08404"></a><span class="lineno"> 8404</span>&#160;</div>
<div class="line"><a name="l08405"></a><span class="lineno"> 8405</span>&#160;  <span class="keywordflow">if</span> (pTmpUnitDefinition != NULL) <span class="comment">// there was a unit definition with that id</span></div>
<div class="line"><a name="l08406"></a><span class="lineno"> 8406</span>&#160;    {</div>
<div class="line"><a name="l08407"></a><span class="lineno"> 8407</span>&#160;      pUnitDefinition = <span class="keyword">dynamic_cast&lt;</span>UnitDefinition*<span class="keyword">&gt;</span>(pTmpUnitDefinition-&gt;clone());</div>
<div class="line"><a name="l08408"></a><span class="lineno"> 8408</span>&#160;      assert(pUnitDefinition != NULL);</div>
<div class="line"><a name="l08409"></a><span class="lineno"> 8409</span>&#160;    }</div>
<div class="line"><a name="l08410"></a><span class="lineno"> 8410</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l08411"></a><span class="lineno"> 8411</span>&#160;    {</div>
<div class="line"><a name="l08412"></a><span class="lineno"> 8412</span>&#160;      <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;volume&quot;</span> || unitId == <span class="stringliteral">&quot;litre&quot;</span>)</div>
<div class="line"><a name="l08413"></a><span class="lineno"> 8413</span>&#160;        {</div>
<div class="line"><a name="l08414"></a><span class="lineno"> 8414</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08415"></a><span class="lineno"> 8415</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_volume&quot;</span>);</div>
<div class="line"><a name="l08416"></a><span class="lineno"> 8416</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_volume&quot;</span>);</div>
<div class="line"><a name="l08417"></a><span class="lineno"> 8417</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08418"></a><span class="lineno"> 8418</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_LITRE);</div>
<div class="line"><a name="l08419"></a><span class="lineno"> 8419</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08420"></a><span class="lineno"> 8420</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08421"></a><span class="lineno"> 8421</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08422"></a><span class="lineno"> 8422</span>&#160;        }</div>
<div class="line"><a name="l08423"></a><span class="lineno"> 8423</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;substance&quot;</span> || unitId == <span class="stringliteral">&quot;mole&quot;</span>)</div>
<div class="line"><a name="l08424"></a><span class="lineno"> 8424</span>&#160;        {</div>
<div class="line"><a name="l08425"></a><span class="lineno"> 8425</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08426"></a><span class="lineno"> 8426</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_substance&quot;</span>);</div>
<div class="line"><a name="l08427"></a><span class="lineno"> 8427</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_substance&quot;</span>);</div>
<div class="line"><a name="l08428"></a><span class="lineno"> 8428</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08429"></a><span class="lineno"> 8429</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_MOLE);</div>
<div class="line"><a name="l08430"></a><span class="lineno"> 8430</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08431"></a><span class="lineno"> 8431</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08432"></a><span class="lineno"> 8432</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08433"></a><span class="lineno"> 8433</span>&#160;        }</div>
<div class="line"><a name="l08434"></a><span class="lineno"> 8434</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;time&quot;</span> || unitId == <span class="stringliteral">&quot;second&quot;</span>)</div>
<div class="line"><a name="l08435"></a><span class="lineno"> 8435</span>&#160;        {</div>
<div class="line"><a name="l08436"></a><span class="lineno"> 8436</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08437"></a><span class="lineno"> 8437</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_time&quot;</span>);</div>
<div class="line"><a name="l08438"></a><span class="lineno"> 8438</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_time&quot;</span>);</div>
<div class="line"><a name="l08439"></a><span class="lineno"> 8439</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08440"></a><span class="lineno"> 8440</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_SECOND);</div>
<div class="line"><a name="l08441"></a><span class="lineno"> 8441</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08442"></a><span class="lineno"> 8442</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08443"></a><span class="lineno"> 8443</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08444"></a><span class="lineno"> 8444</span>&#160;        }</div>
<div class="line"><a name="l08445"></a><span class="lineno"> 8445</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;area&quot;</span>)</div>
<div class="line"><a name="l08446"></a><span class="lineno"> 8446</span>&#160;        {</div>
<div class="line"><a name="l08447"></a><span class="lineno"> 8447</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08448"></a><span class="lineno"> 8448</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_area&quot;</span>);</div>
<div class="line"><a name="l08449"></a><span class="lineno"> 8449</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_area&quot;</span>);</div>
<div class="line"><a name="l08450"></a><span class="lineno"> 8450</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08451"></a><span class="lineno"> 8451</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_METRE);</div>
<div class="line"><a name="l08452"></a><span class="lineno"> 8452</span>&#160;          pUnit-&gt;setExponent(2);</div>
<div class="line"><a name="l08453"></a><span class="lineno"> 8453</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08454"></a><span class="lineno"> 8454</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08455"></a><span class="lineno"> 8455</span>&#160;        }</div>
<div class="line"><a name="l08456"></a><span class="lineno"> 8456</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;length&quot;</span> || unitId == <span class="stringliteral">&quot;metre&quot;</span>)</div>
<div class="line"><a name="l08457"></a><span class="lineno"> 8457</span>&#160;        {</div>
<div class="line"><a name="l08458"></a><span class="lineno"> 8458</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08459"></a><span class="lineno"> 8459</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_length&quot;</span>);</div>
<div class="line"><a name="l08460"></a><span class="lineno"> 8460</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_length&quot;</span>);</div>
<div class="line"><a name="l08461"></a><span class="lineno"> 8461</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08462"></a><span class="lineno"> 8462</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_METRE);</div>
<div class="line"><a name="l08463"></a><span class="lineno"> 8463</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08464"></a><span class="lineno"> 8464</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08465"></a><span class="lineno"> 8465</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08466"></a><span class="lineno"> 8466</span>&#160;        }</div>
<div class="line"><a name="l08467"></a><span class="lineno"> 8467</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;ampere&quot;</span>)</div>
<div class="line"><a name="l08468"></a><span class="lineno"> 8468</span>&#160;        {</div>
<div class="line"><a name="l08469"></a><span class="lineno"> 8469</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08470"></a><span class="lineno"> 8470</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_ampere&quot;</span>);</div>
<div class="line"><a name="l08471"></a><span class="lineno"> 8471</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_ampere&quot;</span>);</div>
<div class="line"><a name="l08472"></a><span class="lineno"> 8472</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08473"></a><span class="lineno"> 8473</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_AMPERE);</div>
<div class="line"><a name="l08474"></a><span class="lineno"> 8474</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08475"></a><span class="lineno"> 8475</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08476"></a><span class="lineno"> 8476</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08477"></a><span class="lineno"> 8477</span>&#160;        }</div>
<div class="line"><a name="l08478"></a><span class="lineno"> 8478</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;farad&quot;</span>)</div>
<div class="line"><a name="l08479"></a><span class="lineno"> 8479</span>&#160;        {</div>
<div class="line"><a name="l08480"></a><span class="lineno"> 8480</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08481"></a><span class="lineno"> 8481</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_farad&quot;</span>);</div>
<div class="line"><a name="l08482"></a><span class="lineno"> 8482</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_farad&quot;</span>);</div>
<div class="line"><a name="l08483"></a><span class="lineno"> 8483</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08484"></a><span class="lineno"> 8484</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_FARAD);</div>
<div class="line"><a name="l08485"></a><span class="lineno"> 8485</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08486"></a><span class="lineno"> 8486</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08487"></a><span class="lineno"> 8487</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08488"></a><span class="lineno"> 8488</span>&#160;        }</div>
<div class="line"><a name="l08489"></a><span class="lineno"> 8489</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;joule&quot;</span>)</div>
<div class="line"><a name="l08490"></a><span class="lineno"> 8490</span>&#160;        {</div>
<div class="line"><a name="l08491"></a><span class="lineno"> 8491</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08492"></a><span class="lineno"> 8492</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_joule&quot;</span>);</div>
<div class="line"><a name="l08493"></a><span class="lineno"> 8493</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_joule&quot;</span>);</div>
<div class="line"><a name="l08494"></a><span class="lineno"> 8494</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08495"></a><span class="lineno"> 8495</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_JOULE);</div>
<div class="line"><a name="l08496"></a><span class="lineno"> 8496</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08497"></a><span class="lineno"> 8497</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08498"></a><span class="lineno"> 8498</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08499"></a><span class="lineno"> 8499</span>&#160;        }</div>
<div class="line"><a name="l08500"></a><span class="lineno"> 8500</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;lux&quot;</span>)</div>
<div class="line"><a name="l08501"></a><span class="lineno"> 8501</span>&#160;        {</div>
<div class="line"><a name="l08502"></a><span class="lineno"> 8502</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08503"></a><span class="lineno"> 8503</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_lux&quot;</span>);</div>
<div class="line"><a name="l08504"></a><span class="lineno"> 8504</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_lux&quot;</span>);</div>
<div class="line"><a name="l08505"></a><span class="lineno"> 8505</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08506"></a><span class="lineno"> 8506</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_LUX);</div>
<div class="line"><a name="l08507"></a><span class="lineno"> 8507</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08508"></a><span class="lineno"> 8508</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08509"></a><span class="lineno"> 8509</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08510"></a><span class="lineno"> 8510</span>&#160;        }</div>
<div class="line"><a name="l08511"></a><span class="lineno"> 8511</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;radian&quot;</span>)</div>
<div class="line"><a name="l08512"></a><span class="lineno"> 8512</span>&#160;        {</div>
<div class="line"><a name="l08513"></a><span class="lineno"> 8513</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08514"></a><span class="lineno"> 8514</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_radian&quot;</span>);</div>
<div class="line"><a name="l08515"></a><span class="lineno"> 8515</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_radian&quot;</span>);</div>
<div class="line"><a name="l08516"></a><span class="lineno"> 8516</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08517"></a><span class="lineno"> 8517</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_RADIAN);</div>
<div class="line"><a name="l08518"></a><span class="lineno"> 8518</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08519"></a><span class="lineno"> 8519</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08520"></a><span class="lineno"> 8520</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08521"></a><span class="lineno"> 8521</span>&#160;        }</div>
<div class="line"><a name="l08522"></a><span class="lineno"> 8522</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;volt&quot;</span>)</div>
<div class="line"><a name="l08523"></a><span class="lineno"> 8523</span>&#160;        {</div>
<div class="line"><a name="l08524"></a><span class="lineno"> 8524</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08525"></a><span class="lineno"> 8525</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_volt&quot;</span>);</div>
<div class="line"><a name="l08526"></a><span class="lineno"> 8526</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_volt&quot;</span>);</div>
<div class="line"><a name="l08527"></a><span class="lineno"> 8527</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08528"></a><span class="lineno"> 8528</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_VOLT);</div>
<div class="line"><a name="l08529"></a><span class="lineno"> 8529</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08530"></a><span class="lineno"> 8530</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08531"></a><span class="lineno"> 8531</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08532"></a><span class="lineno"> 8532</span>&#160;        }</div>
<div class="line"><a name="l08533"></a><span class="lineno"> 8533</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;becquerel&quot;</span>)</div>
<div class="line"><a name="l08534"></a><span class="lineno"> 8534</span>&#160;        {</div>
<div class="line"><a name="l08535"></a><span class="lineno"> 8535</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08536"></a><span class="lineno"> 8536</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_becquerel&quot;</span>);</div>
<div class="line"><a name="l08537"></a><span class="lineno"> 8537</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_becquerel&quot;</span>);</div>
<div class="line"><a name="l08538"></a><span class="lineno"> 8538</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08539"></a><span class="lineno"> 8539</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_BECQUEREL);</div>
<div class="line"><a name="l08540"></a><span class="lineno"> 8540</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08541"></a><span class="lineno"> 8541</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08542"></a><span class="lineno"> 8542</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08543"></a><span class="lineno"> 8543</span>&#160;        }</div>
<div class="line"><a name="l08544"></a><span class="lineno"> 8544</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;gram&quot;</span>)</div>
<div class="line"><a name="l08545"></a><span class="lineno"> 8545</span>&#160;        {</div>
<div class="line"><a name="l08546"></a><span class="lineno"> 8546</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08547"></a><span class="lineno"> 8547</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_gram&quot;</span>);</div>
<div class="line"><a name="l08548"></a><span class="lineno"> 8548</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_gram&quot;</span>);</div>
<div class="line"><a name="l08549"></a><span class="lineno"> 8549</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08550"></a><span class="lineno"> 8550</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_GRAM);</div>
<div class="line"><a name="l08551"></a><span class="lineno"> 8551</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08552"></a><span class="lineno"> 8552</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08553"></a><span class="lineno"> 8553</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08554"></a><span class="lineno"> 8554</span>&#160;        }</div>
<div class="line"><a name="l08555"></a><span class="lineno"> 8555</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;katal&quot;</span>)</div>
<div class="line"><a name="l08556"></a><span class="lineno"> 8556</span>&#160;        {</div>
<div class="line"><a name="l08557"></a><span class="lineno"> 8557</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08558"></a><span class="lineno"> 8558</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_katal&quot;</span>);</div>
<div class="line"><a name="l08559"></a><span class="lineno"> 8559</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_katal&quot;</span>);</div>
<div class="line"><a name="l08560"></a><span class="lineno"> 8560</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08561"></a><span class="lineno"> 8561</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_KATAL);</div>
<div class="line"><a name="l08562"></a><span class="lineno"> 8562</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08563"></a><span class="lineno"> 8563</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08564"></a><span class="lineno"> 8564</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08565"></a><span class="lineno"> 8565</span>&#160;        }</div>
<div class="line"><a name="l08566"></a><span class="lineno"> 8566</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;candela&quot;</span>)</div>
<div class="line"><a name="l08567"></a><span class="lineno"> 8567</span>&#160;        {</div>
<div class="line"><a name="l08568"></a><span class="lineno"> 8568</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08569"></a><span class="lineno"> 8569</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_candela&quot;</span>);</div>
<div class="line"><a name="l08570"></a><span class="lineno"> 8570</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_candela&quot;</span>);</div>
<div class="line"><a name="l08571"></a><span class="lineno"> 8571</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08572"></a><span class="lineno"> 8572</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_CANDELA);</div>
<div class="line"><a name="l08573"></a><span class="lineno"> 8573</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08574"></a><span class="lineno"> 8574</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08575"></a><span class="lineno"> 8575</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08576"></a><span class="lineno"> 8576</span>&#160;        }</div>
<div class="line"><a name="l08577"></a><span class="lineno"> 8577</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;gray&quot;</span>)</div>
<div class="line"><a name="l08578"></a><span class="lineno"> 8578</span>&#160;        {</div>
<div class="line"><a name="l08579"></a><span class="lineno"> 8579</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08580"></a><span class="lineno"> 8580</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_gray&quot;</span>);</div>
<div class="line"><a name="l08581"></a><span class="lineno"> 8581</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_gray&quot;</span>);</div>
<div class="line"><a name="l08582"></a><span class="lineno"> 8582</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08583"></a><span class="lineno"> 8583</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_GRAY);</div>
<div class="line"><a name="l08584"></a><span class="lineno"> 8584</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08585"></a><span class="lineno"> 8585</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08586"></a><span class="lineno"> 8586</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08587"></a><span class="lineno"> 8587</span>&#160;        }</div>
<div class="line"><a name="l08588"></a><span class="lineno"> 8588</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;kelvin&quot;</span>)</div>
<div class="line"><a name="l08589"></a><span class="lineno"> 8589</span>&#160;        {</div>
<div class="line"><a name="l08590"></a><span class="lineno"> 8590</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08591"></a><span class="lineno"> 8591</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_kelvin&quot;</span>);</div>
<div class="line"><a name="l08592"></a><span class="lineno"> 8592</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_kelvin&quot;</span>);</div>
<div class="line"><a name="l08593"></a><span class="lineno"> 8593</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08594"></a><span class="lineno"> 8594</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_KELVIN);</div>
<div class="line"><a name="l08595"></a><span class="lineno"> 8595</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08596"></a><span class="lineno"> 8596</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08597"></a><span class="lineno"> 8597</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08598"></a><span class="lineno"> 8598</span>&#160;        }</div>
<div class="line"><a name="l08599"></a><span class="lineno"> 8599</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;siemens&quot;</span>)</div>
<div class="line"><a name="l08600"></a><span class="lineno"> 8600</span>&#160;        {</div>
<div class="line"><a name="l08601"></a><span class="lineno"> 8601</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08602"></a><span class="lineno"> 8602</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_siemens&quot;</span>);</div>
<div class="line"><a name="l08603"></a><span class="lineno"> 8603</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_siemens&quot;</span>);</div>
<div class="line"><a name="l08604"></a><span class="lineno"> 8604</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08605"></a><span class="lineno"> 8605</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_SIEMENS);</div>
<div class="line"><a name="l08606"></a><span class="lineno"> 8606</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08607"></a><span class="lineno"> 8607</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08608"></a><span class="lineno"> 8608</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08609"></a><span class="lineno"> 8609</span>&#160;        }</div>
<div class="line"><a name="l08610"></a><span class="lineno"> 8610</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;weber&quot;</span>)</div>
<div class="line"><a name="l08611"></a><span class="lineno"> 8611</span>&#160;        {</div>
<div class="line"><a name="l08612"></a><span class="lineno"> 8612</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08613"></a><span class="lineno"> 8613</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_weber&quot;</span>);</div>
<div class="line"><a name="l08614"></a><span class="lineno"> 8614</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_weber&quot;</span>);</div>
<div class="line"><a name="l08615"></a><span class="lineno"> 8615</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08616"></a><span class="lineno"> 8616</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_WEBER);</div>
<div class="line"><a name="l08617"></a><span class="lineno"> 8617</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08618"></a><span class="lineno"> 8618</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08619"></a><span class="lineno"> 8619</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08620"></a><span class="lineno"> 8620</span>&#160;        }</div>
<div class="line"><a name="l08621"></a><span class="lineno"> 8621</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;Celsius&quot;</span>)</div>
<div class="line"><a name="l08622"></a><span class="lineno"> 8622</span>&#160;        {</div>
<div class="line"><a name="l08623"></a><span class="lineno"> 8623</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08624"></a><span class="lineno"> 8624</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_celsius&quot;</span>);</div>
<div class="line"><a name="l08625"></a><span class="lineno"> 8625</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_celsius&quot;</span>);</div>
<div class="line"><a name="l08626"></a><span class="lineno"> 8626</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08627"></a><span class="lineno"> 8627</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_CELSIUS);</div>
<div class="line"><a name="l08628"></a><span class="lineno"> 8628</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08629"></a><span class="lineno"> 8629</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08630"></a><span class="lineno"> 8630</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08631"></a><span class="lineno"> 8631</span>&#160;        }</div>
<div class="line"><a name="l08632"></a><span class="lineno"> 8632</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;henry&quot;</span>)</div>
<div class="line"><a name="l08633"></a><span class="lineno"> 8633</span>&#160;        {</div>
<div class="line"><a name="l08634"></a><span class="lineno"> 8634</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08635"></a><span class="lineno"> 8635</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_henry&quot;</span>);</div>
<div class="line"><a name="l08636"></a><span class="lineno"> 8636</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_henry&quot;</span>);</div>
<div class="line"><a name="l08637"></a><span class="lineno"> 8637</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08638"></a><span class="lineno"> 8638</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_HENRY);</div>
<div class="line"><a name="l08639"></a><span class="lineno"> 8639</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08640"></a><span class="lineno"> 8640</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08641"></a><span class="lineno"> 8641</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08642"></a><span class="lineno"> 8642</span>&#160;        }</div>
<div class="line"><a name="l08643"></a><span class="lineno"> 8643</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;kilogram&quot;</span>)</div>
<div class="line"><a name="l08644"></a><span class="lineno"> 8644</span>&#160;        {</div>
<div class="line"><a name="l08645"></a><span class="lineno"> 8645</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08646"></a><span class="lineno"> 8646</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_kilogram&quot;</span>);</div>
<div class="line"><a name="l08647"></a><span class="lineno"> 8647</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_kilogram&quot;</span>);</div>
<div class="line"><a name="l08648"></a><span class="lineno"> 8648</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08649"></a><span class="lineno"> 8649</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_KILOGRAM);</div>
<div class="line"><a name="l08650"></a><span class="lineno"> 8650</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08651"></a><span class="lineno"> 8651</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08652"></a><span class="lineno"> 8652</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08653"></a><span class="lineno"> 8653</span>&#160;        }</div>
<div class="line"><a name="l08654"></a><span class="lineno"> 8654</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;newton&quot;</span>)</div>
<div class="line"><a name="l08655"></a><span class="lineno"> 8655</span>&#160;        {</div>
<div class="line"><a name="l08656"></a><span class="lineno"> 8656</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08657"></a><span class="lineno"> 8657</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_newton&quot;</span>);</div>
<div class="line"><a name="l08658"></a><span class="lineno"> 8658</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_newton&quot;</span>);</div>
<div class="line"><a name="l08659"></a><span class="lineno"> 8659</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08660"></a><span class="lineno"> 8660</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_NEWTON);</div>
<div class="line"><a name="l08661"></a><span class="lineno"> 8661</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08662"></a><span class="lineno"> 8662</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08663"></a><span class="lineno"> 8663</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08664"></a><span class="lineno"> 8664</span>&#160;        }</div>
<div class="line"><a name="l08665"></a><span class="lineno"> 8665</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;sievert&quot;</span>)</div>
<div class="line"><a name="l08666"></a><span class="lineno"> 8666</span>&#160;        {</div>
<div class="line"><a name="l08667"></a><span class="lineno"> 8667</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08668"></a><span class="lineno"> 8668</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_sievert&quot;</span>);</div>
<div class="line"><a name="l08669"></a><span class="lineno"> 8669</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_sievert&quot;</span>);</div>
<div class="line"><a name="l08670"></a><span class="lineno"> 8670</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08671"></a><span class="lineno"> 8671</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_SIEVERT);</div>
<div class="line"><a name="l08672"></a><span class="lineno"> 8672</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08673"></a><span class="lineno"> 8673</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08674"></a><span class="lineno"> 8674</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08675"></a><span class="lineno"> 8675</span>&#160;        }</div>
<div class="line"><a name="l08676"></a><span class="lineno"> 8676</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;coulomb&quot;</span>)</div>
<div class="line"><a name="l08677"></a><span class="lineno"> 8677</span>&#160;        {</div>
<div class="line"><a name="l08678"></a><span class="lineno"> 8678</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08679"></a><span class="lineno"> 8679</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_coulomb&quot;</span>);</div>
<div class="line"><a name="l08680"></a><span class="lineno"> 8680</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_coulomb&quot;</span>);</div>
<div class="line"><a name="l08681"></a><span class="lineno"> 8681</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08682"></a><span class="lineno"> 8682</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_COULOMB);</div>
<div class="line"><a name="l08683"></a><span class="lineno"> 8683</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08684"></a><span class="lineno"> 8684</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160;        }</div>
<div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;hertz&quot;</span>)</div>
<div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;        {</div>
<div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_hertz&quot;</span>);</div>
<div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_hertz&quot;</span>);</div>
<div class="line"><a name="l08692"></a><span class="lineno"> 8692</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08693"></a><span class="lineno"> 8693</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_HERTZ);</div>
<div class="line"><a name="l08694"></a><span class="lineno"> 8694</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08695"></a><span class="lineno"> 8695</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08696"></a><span class="lineno"> 8696</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08697"></a><span class="lineno"> 8697</span>&#160;        }</div>
<div class="line"><a name="l08698"></a><span class="lineno"> 8698</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;ohm&quot;</span>)</div>
<div class="line"><a name="l08699"></a><span class="lineno"> 8699</span>&#160;        {</div>
<div class="line"><a name="l08700"></a><span class="lineno"> 8700</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08701"></a><span class="lineno"> 8701</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_ohm&quot;</span>);</div>
<div class="line"><a name="l08702"></a><span class="lineno"> 8702</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_ohm&quot;</span>);</div>
<div class="line"><a name="l08703"></a><span class="lineno"> 8703</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08704"></a><span class="lineno"> 8704</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_OHM);</div>
<div class="line"><a name="l08705"></a><span class="lineno"> 8705</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08706"></a><span class="lineno"> 8706</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08707"></a><span class="lineno"> 8707</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08708"></a><span class="lineno"> 8708</span>&#160;        }</div>
<div class="line"><a name="l08709"></a><span class="lineno"> 8709</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;steradian&quot;</span>)</div>
<div class="line"><a name="l08710"></a><span class="lineno"> 8710</span>&#160;        {</div>
<div class="line"><a name="l08711"></a><span class="lineno"> 8711</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08712"></a><span class="lineno"> 8712</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_steradian&quot;</span>);</div>
<div class="line"><a name="l08713"></a><span class="lineno"> 8713</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_steradian&quot;</span>);</div>
<div class="line"><a name="l08714"></a><span class="lineno"> 8714</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08715"></a><span class="lineno"> 8715</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_STERADIAN);</div>
<div class="line"><a name="l08716"></a><span class="lineno"> 8716</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08717"></a><span class="lineno"> 8717</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08718"></a><span class="lineno"> 8718</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08719"></a><span class="lineno"> 8719</span>&#160;        }</div>
<div class="line"><a name="l08720"></a><span class="lineno"> 8720</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;dimensionless&quot;</span>)</div>
<div class="line"><a name="l08721"></a><span class="lineno"> 8721</span>&#160;        {</div>
<div class="line"><a name="l08722"></a><span class="lineno"> 8722</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08723"></a><span class="lineno"> 8723</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_dimensionless&quot;</span>);</div>
<div class="line"><a name="l08724"></a><span class="lineno"> 8724</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_dimensionless&quot;</span>);</div>
<div class="line"><a name="l08725"></a><span class="lineno"> 8725</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08726"></a><span class="lineno"> 8726</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_DIMENSIONLESS);</div>
<div class="line"><a name="l08727"></a><span class="lineno"> 8727</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08728"></a><span class="lineno"> 8728</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08729"></a><span class="lineno"> 8729</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08730"></a><span class="lineno"> 8730</span>&#160;        }</div>
<div class="line"><a name="l08731"></a><span class="lineno"> 8731</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;item&quot;</span>)</div>
<div class="line"><a name="l08732"></a><span class="lineno"> 8732</span>&#160;        {</div>
<div class="line"><a name="l08733"></a><span class="lineno"> 8733</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08734"></a><span class="lineno"> 8734</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_item&quot;</span>);</div>
<div class="line"><a name="l08735"></a><span class="lineno"> 8735</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_item&quot;</span>);</div>
<div class="line"><a name="l08736"></a><span class="lineno"> 8736</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08737"></a><span class="lineno"> 8737</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_ITEM);</div>
<div class="line"><a name="l08738"></a><span class="lineno"> 8738</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08739"></a><span class="lineno"> 8739</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08740"></a><span class="lineno"> 8740</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08741"></a><span class="lineno"> 8741</span>&#160;        }</div>
<div class="line"><a name="l08742"></a><span class="lineno"> 8742</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;lumen&quot;</span>)</div>
<div class="line"><a name="l08743"></a><span class="lineno"> 8743</span>&#160;        {</div>
<div class="line"><a name="l08744"></a><span class="lineno"> 8744</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08745"></a><span class="lineno"> 8745</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_lumen&quot;</span>);</div>
<div class="line"><a name="l08746"></a><span class="lineno"> 8746</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_lumen&quot;</span>);</div>
<div class="line"><a name="l08747"></a><span class="lineno"> 8747</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08748"></a><span class="lineno"> 8748</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_LUMEN);</div>
<div class="line"><a name="l08749"></a><span class="lineno"> 8749</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08750"></a><span class="lineno"> 8750</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08751"></a><span class="lineno"> 8751</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08752"></a><span class="lineno"> 8752</span>&#160;        }</div>
<div class="line"><a name="l08753"></a><span class="lineno"> 8753</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;pascal&quot;</span>)</div>
<div class="line"><a name="l08754"></a><span class="lineno"> 8754</span>&#160;        {</div>
<div class="line"><a name="l08755"></a><span class="lineno"> 8755</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08756"></a><span class="lineno"> 8756</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_pascal&quot;</span>);</div>
<div class="line"><a name="l08757"></a><span class="lineno"> 8757</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_pascal&quot;</span>);</div>
<div class="line"><a name="l08758"></a><span class="lineno"> 8758</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08759"></a><span class="lineno"> 8759</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_PASCAL);</div>
<div class="line"><a name="l08760"></a><span class="lineno"> 8760</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08761"></a><span class="lineno"> 8761</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08762"></a><span class="lineno"> 8762</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08763"></a><span class="lineno"> 8763</span>&#160;        }</div>
<div class="line"><a name="l08764"></a><span class="lineno"> 8764</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;tesla&quot;</span>)</div>
<div class="line"><a name="l08765"></a><span class="lineno"> 8765</span>&#160;        {</div>
<div class="line"><a name="l08766"></a><span class="lineno"> 8766</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08767"></a><span class="lineno"> 8767</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_tesla&quot;</span>);</div>
<div class="line"><a name="l08768"></a><span class="lineno"> 8768</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_tesla&quot;</span>);</div>
<div class="line"><a name="l08769"></a><span class="lineno"> 8769</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08770"></a><span class="lineno"> 8770</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_TESLA);</div>
<div class="line"><a name="l08771"></a><span class="lineno"> 8771</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08772"></a><span class="lineno"> 8772</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08773"></a><span class="lineno"> 8773</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08774"></a><span class="lineno"> 8774</span>&#160;        }</div>
<div class="line"><a name="l08775"></a><span class="lineno"> 8775</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (unitId == <span class="stringliteral">&quot;avogadro&quot;</span>)</div>
<div class="line"><a name="l08776"></a><span class="lineno"> 8776</span>&#160;        {</div>
<div class="line"><a name="l08777"></a><span class="lineno"> 8777</span>&#160;          pUnitDefinition = <span class="keyword">new</span> UnitDefinition(pSBMLModel-&gt;getLevel(), pSBMLModel-&gt;getVersion());</div>
<div class="line"><a name="l08778"></a><span class="lineno"> 8778</span>&#160;          pUnitDefinition-&gt;setId(<span class="stringliteral">&quot;dummy_avogadro&quot;</span>);</div>
<div class="line"><a name="l08779"></a><span class="lineno"> 8779</span>&#160;          pUnitDefinition-&gt;setName(<span class="stringliteral">&quot;dummy_avogadro&quot;</span>);</div>
<div class="line"><a name="l08780"></a><span class="lineno"> 8780</span>&#160;          Unit* pUnit = pUnitDefinition-&gt;createUnit();</div>
<div class="line"><a name="l08781"></a><span class="lineno"> 8781</span>&#160;          pUnit-&gt;setKind(UNIT_KIND_AVOGADRO);</div>
<div class="line"><a name="l08782"></a><span class="lineno"> 8782</span>&#160;          pUnit-&gt;setExponent(1);</div>
<div class="line"><a name="l08783"></a><span class="lineno"> 8783</span>&#160;          pUnit-&gt;setMultiplier(1.0);</div>
<div class="line"><a name="l08784"></a><span class="lineno"> 8784</span>&#160;          pUnit-&gt;setScale(0);</div>
<div class="line"><a name="l08785"></a><span class="lineno"> 8785</span>&#160;        }</div>
<div class="line"><a name="l08786"></a><span class="lineno"> 8786</span>&#160;    }</div>
<div class="line"><a name="l08787"></a><span class="lineno"> 8787</span>&#160;</div>
<div class="line"><a name="l08788"></a><span class="lineno"> 8788</span>&#160;  <span class="keywordflow">return</span> pUnitDefinition;</div>
<div class="line"><a name="l08789"></a><span class="lineno"> 8789</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a47c92998532c601a66df4fae4e5a8b2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960">CModel::AreaUnit</a>, bool &gt; SBMLImporter::handleAreaUnit </td>
          <td>(</td>
          <td class="paramtype">const UnitDefinition *&#160;</td>
          <td class="paramname"><em>uDef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the copasi AreaUnit corresponding to the given SBML area UnitDefinition. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l04073">4073</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual()</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ac375a5bac216c06d6f5dd48fe2106905">CModel::cm2</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ae6554a259f0340a38ecdc4c10eea4283">CModel::dimensionlessArea</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a6d5d587c86eda1fbe6166a87f05bd99b">CModel::dm2</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a5f82ce859c6981d19477bd380e3d6c13">CModel::fm2</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960aea8f5bb69557d9eba4ba9551b4a1bb53">CModel::m2</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ad6d26988331fe762ef06fbfa309e69e6">CModel::microm2</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a5b8ac1bc1d714b05e972d864c1eb7d08">CModel::mm2</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ab1f55042cfaf9031296abefdf0b56cb1">CModel::nm2</a>, <a class="el" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a2d322e583574249556bb303799fa2ad4">CModel::pm2</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">checkElementUnits()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;{</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;  <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960">CModel::AreaUnit</a> aUnit = <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960aea8f5bb69557d9eba4ba9551b4a1bb53">CModel::m2</a>;</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;  <span class="keywordflow">if</span> (uDef == NULL)</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;    {</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;      <span class="comment">//DebugFile &lt;&lt; &quot;Argument to handleLengthUnit is NULL pointer.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;    }</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;  <span class="keywordflow">if</span> (uDef-&gt;getNumUnits() == 1)</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;    {</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;      <span class="keyword">const</span> Unit* u = uDef-&gt;getUnit(0);</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;      <span class="keywordflow">if</span> (u == NULL)</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;        {</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;          <span class="comment">//DebugFile &lt;&lt; &quot;Expected Unit, got NULL pointer.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 54, <span class="stringliteral">&quot;area&quot;</span>, uDef-&gt;getId().c_str());</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;        }</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;      <span class="keywordflow">if</span> ((u-&gt;getKind() == UNIT_KIND_METRE || u-&gt;getKind() == UNIT_KIND_METER) &amp;&amp; u-&gt;getExponent() == 2)</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;        {</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;            {</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;                {</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;                  scale += (int) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;                }</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;            }</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;              ((scale % 3) == 0 || scale == -1 || scale == -2) &amp;&amp;</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;              (scale &lt; 1) &amp;&amp;</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;              (scale &gt; -16))</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;            {</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;              <span class="keywordflow">switch</span> (scale)</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;                {</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;                  <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;                    aUnit = <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960aea8f5bb69557d9eba4ba9551b4a1bb53">CModel::m2</a>;</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;                  <span class="keywordflow">case</span> - 1:</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;                    aUnit = <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a6d5d587c86eda1fbe6166a87f05bd99b">CModel::dm2</a>;</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;                  <span class="keywordflow">case</span> - 2:</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;                    aUnit = <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ac375a5bac216c06d6f5dd48fe2106905">CModel::cm2</a>;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;                  <span class="keywordflow">case</span> - 3:</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;                    aUnit = <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a5b8ac1bc1d714b05e972d864c1eb7d08">CModel::mm2</a>;</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;                  <span class="keywordflow">case</span> - 6:</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;                    aUnit = <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ad6d26988331fe762ef06fbfa309e69e6">CModel::microm2</a>;</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;                  <span class="keywordflow">case</span> - 9:</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;                    aUnit = <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ab1f55042cfaf9031296abefdf0b56cb1">CModel::nm2</a>;</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;                  <span class="keywordflow">case</span> - 12:</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;                    aUnit = <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a2d322e583574249556bb303799fa2ad4">CModel::pm2</a>;</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;                  <span class="keywordflow">case</span> - 15:</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;                    aUnit = <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a5f82ce859c6981d19477bd380e3d6c13">CModel::fm2</a>;</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;                  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;                    <span class="comment">//DebugFile &lt;&lt; &quot;Error. This value should never have been reached for the scale of the liter unit.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;                    result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;                }</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;            }</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;            {</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;            }</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;        }</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((u-&gt;getKind() == UNIT_KIND_DIMENSIONLESS))</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;        {</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;            {</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;                {</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;                  scale += (int)<a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;                }</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;            }</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;          <span class="keywordflow">if</span> ((u-&gt;getExponent() == 1) &amp;&amp;</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;              scale == 0)</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;            {</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;              result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;              aUnit = <a class="code" href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ae6554a259f0340a38ecdc4c10eea4283">CModel::dimensionlessArea</a>;</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;            }</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;            {</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;            }</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;        }</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;        {</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;          result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;        }</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;    }</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;    {</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;      result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;    }</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;  <span class="keywordflow">return</span> std::make_pair(aUnit, result);</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a85c92e54900e9c0df1a1b890d52e9449"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">SBMLImporter::round</a></div><div class="ttdeci">static C_FLOAT64 round(const C_FLOAT64 &amp;x)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00170">SBMLImporter.cpp:170</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960a5f82ce859c6981d19477bd380e3d6c13"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a5f82ce859c6981d19477bd380e3d6c13">CModel::fm2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960">CModel::AreaUnit</a></div><div class="ttdeci">AreaUnit</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960a5b8ac1bc1d714b05e972d864c1eb7d08"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a5b8ac1bc1d714b05e972d864c1eb7d08">CModel::mm2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960aea8f5bb69557d9eba4ba9551b4a1bb53"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960aea8f5bb69557d9eba4ba9551b4a1bb53">CModel::m2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960ae6554a259f0340a38ecdc4c10eea4283"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ae6554a259f0340a38ecdc4c10eea4283">CModel::dimensionlessArea</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960ad6d26988331fe762ef06fbfa309e69e6"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ad6d26988331fe762ef06fbfa309e69e6">CModel::microm2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960ab1f55042cfaf9031296abefdf0b56cb1"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ab1f55042cfaf9031296abefdf0b56cb1">CModel::nm2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a34f24c83698b4184ec7c8ab795efdee4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">SBMLImporter::areApproximatelyEqual</a></div><div class="ttdeci">static bool areApproximatelyEqual(const double &amp;x, const double &amp;y, const double &amp;t=1e-9)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00177">SBMLImporter.cpp:177</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960a2d322e583574249556bb303799fa2ad4"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a2d322e583574249556bb303799fa2ad4">CModel::pm2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960a6d5d587c86eda1fbe6166a87f05bd99b"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960a6d5d587c86eda1fbe6166a87f05bd99b">CModel::dm2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
<div class="ttc" id="classCModel_html_addd8642dd9ff44bfc700e4d854206960ac375a5bac216c06d6f5dd48fe2106905"><div class="ttname"><a href="../../d4/d04/classCModel.html#addd8642dd9ff44bfc700e4d854206960ac375a5bac216c06d6f5dd48fe2106905">CModel::cm2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00066">CModel.h:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac63af5c9fb48fdfac1fc3317954dca1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22c">CModel::LengthUnit</a>, bool &gt; SBMLImporter::handleLengthUnit </td>
          <td>(</td>
          <td class="paramtype">const UnitDefinition *&#160;</td>
          <td class="paramname"><em>uDef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This functions replaces all species nodes for species that are in the substanceOnlySpeciesVector. With the node multiplied by the volume of the species compartment. void replaceSubstanceOnlySpeciesNodes(ConverterASTNode* node, const std::map&lt;Species*, Compartment*&gt;&amp; substanceOnlySpecies); Returns the copasi LengthUnit corresponding to the given SBML length UnitDefinition.</p>
<p>Returns the copasi LengthUnit corresponding to the given SBML length UnitDefinition. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l03926">3926</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual()</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca10f5a86ce5ab09b9271ed58fada9a39e">CModel::cm</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca70b8ea66d8daf842df307ade4b829a4a">CModel::dimensionlessLength</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca0a709ed13081b1ced10e5c0ba2d7498d">CModel::dm</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca56d01266744ab991bb08454bac760459">CModel::fm</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4a35e788ac8194d4f2d1569516ea925d">CModel::m</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca5346ded51c1ef43bdc73a91cb3eea3a8">CModel::microm</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca70ff41c7addc0c115b28d2da5fa8d483">CModel::mm</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4dba8de9df14c56def3876c2271b4e1e">CModel::nm</a>, <a class="el" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22caf7debf327739246370f137fd5f456d63">CModel::pm</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">checkElementUnits()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;{</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;  <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22c">CModel::LengthUnit</a> lUnit = <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4a35e788ac8194d4f2d1569516ea925d">CModel::m</a>;</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;  <span class="keywordflow">if</span> (uDef == NULL)</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;    {</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;      <span class="comment">//DebugFile &lt;&lt; &quot;Argument to handleLengthUnit is NULL pointer.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;    }</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;  <span class="keywordflow">if</span> (uDef-&gt;getNumUnits() == 1)</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;    {</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;      <span class="keyword">const</span> Unit* u = uDef-&gt;getUnit(0);</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;      <span class="keywordflow">if</span> (u == NULL)</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;        {</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;          <span class="comment">//DebugFile &lt;&lt; &quot;Expected Unit, got NULL pointer.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 54, <span class="stringliteral">&quot;length&quot;</span>, uDef-&gt;getId().c_str());</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;        }</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;      <span class="keywordflow">if</span> ((u-&gt;getKind() == UNIT_KIND_METRE || u-&gt;getKind() == UNIT_KIND_METER) &amp;&amp; u-&gt;getExponent() == 1)</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;        {</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;            {</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;                {</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;                  scale += (int) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;                }</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;            }</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;              ((scale % 3) == 0 || scale == -1 || scale == -2) &amp;&amp;</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;              (scale &lt; 1) &amp;&amp;</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;              (scale &gt; -16))</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;            {</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;              <span class="keywordflow">switch</span> (scale)</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;                {</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;                  <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;                    lUnit = <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4a35e788ac8194d4f2d1569516ea925d">CModel::m</a>;</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;                  <span class="keywordflow">case</span> - 1:</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;                    lUnit = <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca0a709ed13081b1ced10e5c0ba2d7498d">CModel::dm</a>;</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;                  <span class="keywordflow">case</span> - 2:</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;                    lUnit = <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca10f5a86ce5ab09b9271ed58fada9a39e">CModel::cm</a>;</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;                  <span class="keywordflow">case</span> - 3:</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;                    lUnit = <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca70ff41c7addc0c115b28d2da5fa8d483">CModel::mm</a>;</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;                  <span class="keywordflow">case</span> - 6:</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;                    lUnit = <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca5346ded51c1ef43bdc73a91cb3eea3a8">CModel::microm</a>;</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;                  <span class="keywordflow">case</span> - 9:</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;                    lUnit = <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4dba8de9df14c56def3876c2271b4e1e">CModel::nm</a>;</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;                  <span class="keywordflow">case</span> - 12:</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;                    lUnit = <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22caf7debf327739246370f137fd5f456d63">CModel::pm</a>;</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;                  <span class="keywordflow">case</span> - 15:</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;                    lUnit = <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca56d01266744ab991bb08454bac760459">CModel::fm</a>;</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;                  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;                    <span class="comment">//DebugFile &lt;&lt; &quot;Error. This value should never have been reached for the scale of the liter unit.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;                    result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;                }</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;            }</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;            {</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;            }</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;        }</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((u-&gt;getKind() == UNIT_KIND_DIMENSIONLESS))</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;        {</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;            {</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;                {</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;                  scale += (int)<a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;                }</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;            }</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;          <span class="keywordflow">if</span> ((u-&gt;getExponent() == 1) &amp;&amp;</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;              scale == 0)</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;            {</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;              result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;              lUnit = <a class="code" href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca70b8ea66d8daf842df307ade4b829a4a">CModel::dimensionlessLength</a>;</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;            }</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;            {</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;            }</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;        }</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;        {</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;          result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;        }</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;    }</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;    {</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;      result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;    }</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;  <span class="keywordflow">return</span> std::make_pair(lUnit, result);</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;}</div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22ca70b8ea66d8daf842df307ade4b829a4a"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca70b8ea66d8daf842df307ade4b829a4a">CModel::dimensionlessLength</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a85c92e54900e9c0df1a1b890d52e9449"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">SBMLImporter::round</a></div><div class="ttdeci">static C_FLOAT64 round(const C_FLOAT64 &amp;x)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00170">SBMLImporter.cpp:170</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22ca5346ded51c1ef43bdc73a91cb3eea3a8"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca5346ded51c1ef43bdc73a91cb3eea3a8">CModel::microm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22ca0a709ed13081b1ced10e5c0ba2d7498d"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca0a709ed13081b1ced10e5c0ba2d7498d">CModel::dm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22caf7debf327739246370f137fd5f456d63"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22caf7debf327739246370f137fd5f456d63">CModel::pm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22c"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22c">CModel::LengthUnit</a></div><div class="ttdeci">LengthUnit</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22ca10f5a86ce5ab09b9271ed58fada9a39e"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca10f5a86ce5ab09b9271ed58fada9a39e">CModel::cm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22ca4dba8de9df14c56def3876c2271b4e1e"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4dba8de9df14c56def3876c2271b4e1e">CModel::nm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22ca4a35e788ac8194d4f2d1569516ea925d"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca4a35e788ac8194d4f2d1569516ea925d">CModel::m</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22ca56d01266744ab991bb08454bac760459"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca56d01266744ab991bb08454bac760459">CModel::fm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a34f24c83698b4184ec7c8ab795efdee4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">SBMLImporter::areApproximatelyEqual</a></div><div class="ttdeci">static bool areApproximatelyEqual(const double &amp;x, const double &amp;y, const double &amp;t=1e-9)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00177">SBMLImporter.cpp:177</a></div></div>
<div class="ttc" id="classCModel_html_a135194aaa96d335b89fbd59a81bff22ca70ff41c7addc0c115b28d2da5fa8d483"><div class="ttname"><a href="../../d4/d04/classCModel.html#a135194aaa96d335b89fbd59a81bff22ca70ff41c7addc0c115b28d2da5fa8d483">CModel::mm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00076">CModel.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aab3ad9f948cb55e9cb589d2b0bb3c934"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25b">CModel::QuantityUnit</a>, bool &gt; SBMLImporter::handleSubstanceUnit </td>
          <td>(</td>
          <td class="paramtype">const UnitDefinition *&#160;</td>
          <td class="paramname"><em>uDef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the COPASI QuantityUnit corresponding to the given SBML Substance UnitDefinition.</p>
<p>Returns the copasi QuantityUnit corresponding to the given SBML Substance UnitDefinition. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l03552">3552</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual()</a>, <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa6902a3bb3ca84a3fc8690e8ec853d0b">CModel::dimensionlessQuantity</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25ba1a7d6ed2ed839724ff0865f283f2f336">CModel::fMol</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25bab63b354244fb3f55843d5d6a9156a2d3">CModel::microMol</a>, <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25badc02522f08484b549aac0684d384c568">CModel::mMol</a>, <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa03a13afa5e7de5f940f6841fe779d17">CModel::Mol</a>, <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25bad1e36a617dafb03d1348a3dd7c166eb8">CModel::nMol</a>, <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25ba4742ca026f7a9968138284bee1b7e7ee">CModel::number</a>, <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25babb9244284f066859820fcab51b863efa">CModel::pMol</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">checkElementUnits()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;{</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;  <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25b">CModel::QuantityUnit</a> qUnit = <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa03a13afa5e7de5f940f6841fe779d17">CModel::Mol</a>;</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;  <span class="keywordflow">if</span> (uDef == NULL)</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;    {</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;      <span class="comment">//DebugFile &lt;&lt; &quot;Argument to handleSubstanceUnit is NULL pointer.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    }</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;  <span class="keywordflow">if</span> (uDef-&gt;getNumUnits() == 1)</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    {</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;      <span class="keyword">const</span> Unit* u = uDef-&gt;getUnit(0);</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;      <span class="keywordflow">if</span> (u == NULL)</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;        {</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;          <span class="comment">//DebugFile &lt;&lt; &quot;Expected Unit, got NULL pointer.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;        }</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;      <span class="keywordflow">if</span> ((u-&gt;getKind() == UNIT_KIND_MOLE)</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;          || u-&gt;getKind() == UNIT_KIND_AVOGADRO</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;         )</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;        {</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;            {</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;                {</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;                  scale += (int) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;                }</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;            }</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;          <span class="keywordflow">if</span> ((u-&gt;getExponent() == 1) &amp;&amp;</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;              ((scale % 3) == 0) &amp;&amp;</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;              (scale &lt; 1) &amp;&amp;</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;              (scale &gt; -16))</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;            {</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;              <span class="keywordflow">switch</span> (scale)</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;                {</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;                  <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;                    qUnit = <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa03a13afa5e7de5f940f6841fe779d17">CModel::Mol</a>;</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;                  <span class="keywordflow">case</span> - 3:</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;                    qUnit = <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25badc02522f08484b549aac0684d384c568">CModel::mMol</a>;</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;                  <span class="keywordflow">case</span> - 6:</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;                    qUnit = <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25bab63b354244fb3f55843d5d6a9156a2d3">CModel::microMol</a>;</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;                  <span class="keywordflow">case</span> - 9:</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;                    qUnit = <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25bad1e36a617dafb03d1348a3dd7c166eb8">CModel::nMol</a>;</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;                  <span class="keywordflow">case</span> - 12:</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;                    qUnit = <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25babb9244284f066859820fcab51b863efa">CModel::pMol</a>;</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;                  <span class="keywordflow">case</span> - 15:</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;                    qUnit = <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25ba1a7d6ed2ed839724ff0865f283f2f336">CModel::fMol</a>;</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;                  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;                    <span class="comment">//DebugFile &lt;&lt; &quot;Error. This value should never have been reached for the scale of the liter unit.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;                    result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;                }</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;            }</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;            {</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;            }</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;        }</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((u-&gt;getKind() == UNIT_KIND_ITEM))</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;        {</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;            {</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;                {</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;                  scale += (int)<a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;                }</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;            }</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;          <span class="keywordflow">if</span> ((u-&gt;getExponent() == 1) &amp;&amp;</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;              (scale == 0 || scale == 1))</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;            {</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;              <span class="keywordflow">if</span> (u-&gt;getScale() == 1)</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;                {</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 30);</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;                }</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;                {</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;                  result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;                  qUnit = <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25ba4742ca026f7a9968138284bee1b7e7ee">CModel::number</a>;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;                }</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;            }</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;            {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;            }</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;        }</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((u-&gt;getKind() == UNIT_KIND_DIMENSIONLESS))</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;        {</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;            {</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;                {</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;                  scale += (int)<a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;                }</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;            }</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;          <span class="keywordflow">if</span> ((u-&gt;getExponent() == 1) &amp;&amp;</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;              scale == 0)</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;            {</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;              result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;              qUnit = <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa6902a3bb3ca84a3fc8690e8ec853d0b">CModel::dimensionlessQuantity</a>;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;            }</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;            {</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;            }</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;        }</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        {</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;          result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;        }</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    }</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;    {</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;      result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;    }</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;  <span class="keywordflow">return</span> std::make_pair(qUnit, result);</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;}</div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25bab63b354244fb3f55843d5d6a9156a2d3"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25bab63b354244fb3f55843d5d6a9156a2d3">CModel::microMol</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a85c92e54900e9c0df1a1b890d52e9449"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">SBMLImporter::round</a></div><div class="ttdeci">static C_FLOAT64 round(const C_FLOAT64 &amp;x)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00170">SBMLImporter.cpp:170</a></div></div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25ba4742ca026f7a9968138284bee1b7e7ee"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25ba4742ca026f7a9968138284bee1b7e7ee">CModel::number</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25baa6902a3bb3ca84a3fc8690e8ec853d0b"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa6902a3bb3ca84a3fc8690e8ec853d0b">CModel::dimensionlessQuantity</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25ba1a7d6ed2ed839724ff0865f283f2f336"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25ba1a7d6ed2ed839724ff0865f283f2f336">CModel::fMol</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_ad39689ede4b80c944660201e94c52705"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a></div><div class="ttdeci">struct MESSAGES Message</div></div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25baa03a13afa5e7de5f940f6841fe779d17"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25baa03a13afa5e7de5f940f6841fe779d17">CModel::Mol</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00092">CCopasiMessage.h:92</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a34f24c83698b4184ec7c8ab795efdee4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">SBMLImporter::areApproximatelyEqual</a></div><div class="ttdeci">static bool areApproximatelyEqual(const double &amp;x, const double &amp;y, const double &amp;t=1e-9)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00177">SBMLImporter.cpp:177</a></div></div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25babb9244284f066859820fcab51b863efa"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25babb9244284f066859820fcab51b863efa">CModel::pMol</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25badc02522f08484b549aac0684d384c568"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25badc02522f08484b549aac0684d384c568">CModel::mMol</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25bad1e36a617dafb03d1348a3dd7c166eb8"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25bad1e36a617dafb03d1348a3dd7c166eb8">CModel::nMol</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25b"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25b">CModel::QuantityUnit</a></div><div class="ttdeci">QuantityUnit</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaf9850d5d4c3e287eb624ea7821682b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bda">CModel::TimeUnit</a>, bool &gt; SBMLImporter::handleTimeUnit </td>
          <td>(</td>
          <td class="paramtype">const UnitDefinition *&#160;</td>
          <td class="paramname"><em>uDef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the COPASI TimeUnit corresponding to the given SBML Time UnitDefinition.</p>
<p>Returns the copasi TimeUnit corresponding to the given SBML Time UnitDefinition. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l03730">3730</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual()</a>, <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa5afbaa25bbe26acfe4ff8462a4b25c3f">CModel::d</a>, <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaad4389c8461420ff91783cdf5cfa4f86f">CModel::dimensionlessTime</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaae313d915e5db581afe544000b0ab044b">CModel::fs</a>, <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa382812da7f925d46ccf941eece86894c">CModel::h</a>, <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaaee3b8619d14d4f26903b46ac551c35cb">CModel::micros</a>, <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaac949e50996d23d3be6e4f2c0d4c330ad">CModel::min</a>, <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaad8969222f4a830aefdf762e1cb626eb5">CModel::ms</a>, <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa44310b42d8e7b3272127e666d44ed32c">CModel::ns</a>, <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaab5b0bfa352a1aee7e12b5a669202e6c8">CModel::ps</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round()</a>, and <a class="el" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa6f37966986aa0f221198fa2f236cd089">CModel::s</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">checkElementUnits()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;{</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;  <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bda">CModel::TimeUnit</a> tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa6f37966986aa0f221198fa2f236cd089">CModel::s</a>;</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  <span class="keywordflow">if</span> (uDef == NULL)</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    {</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;      <span class="comment">//DebugFile &lt;&lt; &quot;Argument to handleTimeUnit is NULL pointer.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;    }</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;  <span class="keywordflow">if</span> (uDef-&gt;getNumUnits() == 1)</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;    {</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;      <span class="keyword">const</span> Unit* u = uDef-&gt;getUnit(0);</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;      <span class="keywordflow">if</span> (u == NULL)</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;        {</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;          <span class="comment">//DebugFile &lt;&lt; &quot;Expected Unit, got NULL pointer.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;        }</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;      <span class="keywordflow">if</span> ((u-&gt;getKind() == UNIT_KIND_SECOND))</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;        {</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;          <span class="comment">// this is more difficult, we have to check several possible</span></div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;          <span class="comment">// combinations of scales and multipliers.</span></div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;          <span class="comment">// Valid multipliers are 60, 3600 and 86400 which correspond to a</span></div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;          <span class="comment">// minute an hour and a day each of those has to have a scale of 0</span></div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;          <span class="keywordflow">if</span> (scale == 0)</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;            {</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;              <span class="comment">// check if the multiplier is 1, 60, 3600 or 86400</span></div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;              <span class="comment">// if not, try to make the multiplier 1</span></div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;                  !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 60.0) &amp;&amp;</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;                  !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 3600.0) &amp;&amp;</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;                  !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 86400.0))</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;                {</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;                  <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;                    {</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;                      result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;                    }</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;                    {</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;                      multiplier = 1;</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;                      scale += (int)<a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;                    }</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;                }</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;            }</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;            {</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;              <span class="comment">// the multiplier must be 1</span></div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0))</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;                {</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;                  <span class="comment">// make the multiplier 1 and check if the scale is an integer,</span></div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;                  <span class="comment">// if not, try to make the 0 and check if the multiplier becomes one</span></div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;                  <span class="comment">// of the valid multipliers 1,60, 3600 or 86400</span></div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;                  <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;                    {</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;                      <span class="comment">// try to make the scale 0</span></div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;                      multiplier *= pow(10.0, (<span class="keywordtype">double</span>)scale);</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;                      scale = 0;</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;                    }</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;                    {</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;                      <span class="comment">// make the multiplier 1</span></div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;                      multiplier = 1;</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;                      scale += (int) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;                    }</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;                }</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;            }</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;          <span class="keywordflow">if</span> ((u-&gt;getExponent() == 1) &amp;&amp; ((scale % 3) == 0) &amp;&amp; (scale &lt; 1) &amp;&amp; (scale &gt; -16))</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;            {</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0))</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;                {</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;                  <span class="keywordflow">switch</span> (scale)</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;                    {</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;                      <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;                        tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa6f37966986aa0f221198fa2f236cd089">CModel::s</a>;</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;                      <span class="keywordflow">case</span> - 3:</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;                        tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaad8969222f4a830aefdf762e1cb626eb5">CModel::ms</a>;</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;                      <span class="keywordflow">case</span> - 6:</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;                        tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaaee3b8619d14d4f26903b46ac551c35cb">CModel::micros</a>;</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;                      <span class="keywordflow">case</span> - 9:</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;                        tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa44310b42d8e7b3272127e666d44ed32c">CModel::ns</a>;</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;                      <span class="keywordflow">case</span> - 12:</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;                        tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaab5b0bfa352a1aee7e12b5a669202e6c8">CModel::ps</a>;</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;                      <span class="keywordflow">case</span> - 15:</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;                        tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaae313d915e5db581afe544000b0ab044b">CModel::fs</a>;</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;                      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;                        <span class="comment">//DebugFile &lt;&lt; &quot;Error. This value should never have been reached for the scale of the time unit.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;                        result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;                    }</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;                }</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((scale == 0) &amp;&amp;</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;                       <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 60.0))</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;                {</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;                  tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaac949e50996d23d3be6e4f2c0d4c330ad">CModel::min</a>;</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;                  result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;                }</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((scale == 0) &amp;&amp;</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;                       <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 3600.0))</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;                {</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;                  tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa382812da7f925d46ccf941eece86894c">CModel::h</a>;</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;                  result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;                }</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((scale == 0) &amp;&amp;</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;                       <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 86400.0))</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;                {</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;                  tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa5afbaa25bbe26acfe4ff8462a4b25c3f">CModel::d</a>;</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;                  result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;                }</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;                {</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;                  result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;                }</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;            }</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;            {</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;            }</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;        }</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((u-&gt;getKind() == UNIT_KIND_DIMENSIONLESS))</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;        {</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;            {</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;                {</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;                  scale += (int)<a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;                }</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;            }</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;          <span class="keywordflow">if</span> ((u-&gt;getExponent() == 1) &amp;&amp;</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;              scale == 0)</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;            {</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;              result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;              tUnit = <a class="code" href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaad4389c8461420ff91783cdf5cfa4f86f">CModel::dimensionlessTime</a>;</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;            }</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;            {</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;            }</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;        }</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;        {</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;          result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;        }</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;    }</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;    {</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;      result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    }</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;  <span class="keywordflow">return</span> std::make_pair(tUnit, result);</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;}</div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaa5afbaa25bbe26acfe4ff8462a4b25c3f"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa5afbaa25bbe26acfe4ff8462a4b25c3f">CModel::d</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a85c92e54900e9c0df1a1b890d52e9449"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">SBMLImporter::round</a></div><div class="ttdeci">static C_FLOAT64 round(const C_FLOAT64 &amp;x)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00170">SBMLImporter.cpp:170</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaa6f37966986aa0f221198fa2f236cd089"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa6f37966986aa0f221198fa2f236cd089">CModel::s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaa382812da7f925d46ccf941eece86894c"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa382812da7f925d46ccf941eece86894c">CModel::h</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaae313d915e5db581afe544000b0ab044b"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaae313d915e5db581afe544000b0ab044b">CModel::fs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaaee3b8619d14d4f26903b46ac551c35cb"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaaee3b8619d14d4f26903b46ac551c35cb">CModel::micros</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaad8969222f4a830aefdf762e1cb626eb5"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaad8969222f4a830aefdf762e1cb626eb5">CModel::ms</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bda"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bda">CModel::TimeUnit</a></div><div class="ttdeci">TimeUnit</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a34f24c83698b4184ec7c8ab795efdee4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">SBMLImporter::areApproximatelyEqual</a></div><div class="ttdeci">static bool areApproximatelyEqual(const double &amp;x, const double &amp;y, const double &amp;t=1e-9)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00177">SBMLImporter.cpp:177</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaa44310b42d8e7b3272127e666d44ed32c"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaa44310b42d8e7b3272127e666d44ed32c">CModel::ns</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaab5b0bfa352a1aee7e12b5a669202e6c8"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaab5b0bfa352a1aee7e12b5a669202e6c8">CModel::ps</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaad4389c8461420ff91783cdf5cfa4f86f"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaad4389c8461420ff91783cdf5cfa4f86f">CModel::dimensionlessTime</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
<div class="ttc" id="classCModel_html_a6301a7ea126c95b1bcabb917d17f0bdaac949e50996d23d3be6e4f2c0d4c330ad"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6301a7ea126c95b1bcabb917d17f0bdaac949e50996d23d3be6e4f2c0d4c330ad">CModel::min</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00086">CModel.h:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa1aca4da87cb2a912a7f27e0a21e6359"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8d">CModel::VolumeUnit</a>, bool &gt; SBMLImporter::handleVolumeUnit </td>
          <td>(</td>
          <td class="paramtype">const UnitDefinition *&#160;</td>
          <td class="paramname"><em>uDef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the copasi VolumeUnit corresponding to the given SBML Volume UnitDefinition. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l04220">4220</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a477bec05f03598fe9c52c95ccb441f88">convertSBMLCubicmetresToLitres()</a>, <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dac2cc47ee18f413bdc5075467b65188c4">CModel::dimensionlessVolume</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da3ba69239cfbf0ab3a25d06947f42ca51">CModel::fl</a>, <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc">CModel::l</a>, <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da59e245c56dd97ee4d692f0b1e005bff3">CModel::m3</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dacd6796229ce2b87681f2229c485dcdb0">CModel::microl</a>, <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8daba185fad0dcba451bb810f1108a72743">CModel::ml</a>, <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da3358c69fe012a06b1bda1a4e31ff001c">CModel::nl</a>, <a class="el" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dac0c305dcc4cbbcd48a1e84746e9faf8f">CModel::pl</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a11c5ec0d43dba7741be5043bcd484e0d">checkElementUnits()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;{</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;  <span class="comment">// simplify the Unitdefiniton first if this normalizes</span></div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;  <span class="comment">// the scale and the multiplier</span></div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;  <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8d">CModel::VolumeUnit</a> vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc">CModel::l</a>;</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;  <span class="keywordflow">if</span> (uDef == NULL)</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;    {</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;      <span class="comment">//DebugFile &lt;&lt; &quot;Argument to handleVolumeUnit is NULL pointer.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;    }</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;  <span class="keywordflow">if</span> (uDef-&gt;getNumUnits() == 1)</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;    {</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;      <span class="keyword">const</span> Unit* u = uDef-&gt;getUnit(0);</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;      <span class="keywordflow">if</span> (u == NULL)</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;        {</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;          <span class="comment">//DebugFile &lt;&lt; &quot;Expected Unit, got NULL pointer.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 54, <span class="stringliteral">&quot;volume&quot;</span>, uDef-&gt;getId().c_str());</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;        }</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;      <span class="keywordflow">if</span> (((u-&gt;getKind() == UNIT_KIND_LITER) || (u-&gt;getKind() == UNIT_KIND_LITRE)) &amp;&amp; u-&gt;getExponent() == 1)</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;        {</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;            {</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;                {</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;                  scale += (int)<a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;                }</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;            }</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;              ((scale % 3) == 0) &amp;&amp;</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;              (scale &lt; 1) &amp;&amp;</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;              (scale &gt; -16))</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;            {</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;              <span class="keywordflow">switch</span> (scale)</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;                {</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;                  <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;                    vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc">CModel::l</a>;</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;                  <span class="keywordflow">case</span> - 3:</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;                    vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8daba185fad0dcba451bb810f1108a72743">CModel::ml</a>;</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;                  <span class="keywordflow">case</span> - 6:</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;                    vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dacd6796229ce2b87681f2229c485dcdb0">CModel::microl</a>;</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;                  <span class="keywordflow">case</span> - 9:</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;                    vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da3358c69fe012a06b1bda1a4e31ff001c">CModel::nl</a>;</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;                  <span class="keywordflow">case</span> - 12:</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;                    vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dac0c305dcc4cbbcd48a1e84746e9faf8f">CModel::pl</a>;</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;                  <span class="keywordflow">case</span> - 15:</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;                    vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da3ba69239cfbf0ab3a25d06947f42ca51">CModel::fl</a>;</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;                    result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;                  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;                    <span class="comment">//DebugFile &lt;&lt; &quot;Error. This value should never have been reached for the scale of the liter unit.&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;                    result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;                }</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;            }</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;            {</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;            }</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;        }</div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((u-&gt;getKind() == UNIT_KIND_METER) || (u-&gt;getKind() == UNIT_KIND_METRE)) &amp;&amp; u-&gt;getExponent() == 3)</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;        {</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;            {</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;                {</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;                  scale += (int)<a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;                }</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;            }</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;              (scale == 0))</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;            {</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;              vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da59e245c56dd97ee4d692f0b1e005bff3">CModel::m3</a>;</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;              result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;            }</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;            {</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;              <span class="comment">// try to convert to liter</span></div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;              Unit* pLitreUnit = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a477bec05f03598fe9c52c95ccb441f88">convertSBMLCubicmetresToLitres</a>(u);</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;              <span class="keywordflow">if</span> (pLitreUnit != NULL &amp;&amp;</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;                  pLitreUnit-&gt;getExponent() == 1 &amp;&amp;</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;                  (pLitreUnit-&gt;getScale() % 3 == 0) &amp;&amp;</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;                  (pLitreUnit-&gt;getScale() &lt; 1) &amp;&amp;</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;                  (pLitreUnit-&gt;getScale() &gt; -16) &amp;&amp;</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;                  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(pLitreUnit-&gt;getMultiplier(), 1.0))</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;                {</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;                  <span class="keywordflow">switch</span> (pLitreUnit-&gt;getScale())</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;                    {</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;                      <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;                        vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc">CModel::l</a>;</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;                      <span class="keywordflow">case</span> - 3:</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;                        vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8daba185fad0dcba451bb810f1108a72743">CModel::ml</a>;</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;                      <span class="keywordflow">case</span> - 6:</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;                        vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dacd6796229ce2b87681f2229c485dcdb0">CModel::microl</a>;</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;                      <span class="keywordflow">case</span> - 9:</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;                        vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da3358c69fe012a06b1bda1a4e31ff001c">CModel::nl</a>;</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;                      <span class="keywordflow">case</span> - 12:</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;                        vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dac0c305dcc4cbbcd48a1e84746e9faf8f">CModel::pl</a>;</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;                      <span class="keywordflow">case</span> - 15:</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;                        vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da3ba69239cfbf0ab3a25d06947f42ca51">CModel::fl</a>;</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;                        result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;                      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;                        result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;                    }</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;                }</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;                {</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;                  result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;                }</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;              <span class="keyword">delete</span> pLitreUnit;</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;            }</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;        }</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((u-&gt;getKind() == UNIT_KIND_DIMENSIONLESS))</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;        {</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;          <span class="keywordtype">double</span> multiplier = u-&gt;getMultiplier();</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;          <span class="keywordtype">int</span> scale = u-&gt;getScale();</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;          <span class="keywordflow">if</span> (multiplier != 1)</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;            {</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;              <span class="comment">// check if the multiplier is a multiple of 10</span></div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;              <span class="comment">// so that we might be able to convert it to a scale that makes</span></div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;              <span class="comment">// sense</span></div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;              <span class="keywordtype">double</span> tmp = log10(multiplier);</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(tmp, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp)))</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;                {</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;                  scale += (int)<a class="code" href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">round</a>(tmp);</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;                  multiplier = 1;</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;                }</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;            }</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;          <span class="keywordflow">if</span> ((u-&gt;getExponent() == 1) &amp;&amp;</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(multiplier, 1.0) &amp;&amp;</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;              scale == 0)</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;            {</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;              result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;              vUnit = <a class="code" href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dac2cc47ee18f413bdc5075467b65188c4">CModel::dimensionlessVolume</a>;</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;            }</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;            {</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;            }</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;        }</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;        {</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;          result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;        }</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;    }</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;    {</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;      result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;    }</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;  <span class="keywordflow">return</span> std::make_pair(vUnit, result);</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a85c92e54900e9c0df1a1b890d52e9449"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a85c92e54900e9c0df1a1b890d52e9449">SBMLImporter::round</a></div><div class="ttdeci">static C_FLOAT64 round(const C_FLOAT64 &amp;x)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00170">SBMLImporter.cpp:170</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da9f609837d3126bd90ad7039b048500fc">CModel::l</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8da59e245c56dd97ee4d692f0b1e005bff3"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da59e245c56dd97ee4d692f0b1e005bff3">CModel::m3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a477bec05f03598fe9c52c95ccb441f88"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a477bec05f03598fe9c52c95ccb441f88">SBMLImporter::convertSBMLCubicmetresToLitres</a></div><div class="ttdeci">static Unit * convertSBMLCubicmetresToLitres(const Unit *pU)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l08361">SBMLImporter.cpp:8361</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8dac2cc47ee18f413bdc5075467b65188c4"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dac2cc47ee18f413bdc5075467b65188c4">CModel::dimensionlessVolume</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8dac0c305dcc4cbbcd48a1e84746e9faf8f"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dac0c305dcc4cbbcd48a1e84746e9faf8f">CModel::pl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8dacd6796229ce2b87681f2229c485dcdb0"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8dacd6796229ce2b87681f2229c485dcdb0">CModel::microl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8d"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8d">CModel::VolumeUnit</a></div><div class="ttdeci">VolumeUnit</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8da3ba69239cfbf0ab3a25d06947f42ca51"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da3ba69239cfbf0ab3a25d06947f42ca51">CModel::fl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8daba185fad0dcba451bb810f1108a72743"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8daba185fad0dcba451bb810f1108a72743">CModel::ml</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classCModel_html_aec54a4715a593a6c742193fabf74cb8da3358c69fe012a06b1bda1a4e31ff001c"><div class="ttname"><a href="../../d4/d04/classCModel.html#aec54a4715a593a6c742193fabf74cb8da3358c69fe012a06b1bda1a4e31ff001c">CModel::nl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00056">CModel.h:56</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a34f24c83698b4184ec7c8ab795efdee4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">SBMLImporter::areApproximatelyEqual</a></div><div class="ttdeci">static bool areApproximatelyEqual(const double &amp;x, const double &amp;y, const double &amp;t=1e-9)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00177">SBMLImporter.cpp:177</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa251ce6bf2a3d52d2971c1ad7b0d90ec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::importEvent </td>
          <td>(</td>
          <td class="paramtype">const Event *&#160;</td>
          <td class="paramname"><em>pEvent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>pCopasiModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Imports the given event. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09578">9578</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d08/classCCopasiVectorN.html#a7fd3c5416b90f901a4e214e55473956e">CCopasiVectorN&lt; CType &gt;::add()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a467ef0af15585a1719afe85eaffbc4ab">CEvaluationTree::create()</a>, <a class="el" href="../../d4/d04/classCModel.html#a42a971783f3083dfc26ff21c8fd36088">CModel::createEvent()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a72ccaf784cfdbf62a852dd1a3d8ad6c7">divideByObject()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4">CEvaluationTree::Expression</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">findIdInASTTree()</a>, <a class="el" href="../../da/d3f/classCEvent.html#a07d073e597757d5baae882ddfceba58d">CEvent::getAssignments()</a>, <a class="el" href="../../dc/d44/classCMetab.html#a9774853fea3fd6c9b15ecd26df7ab349">CMetab::getCompartment()</a>, <a class="el" href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">CCompartment::getDimensionality()</a>, <a class="el" href="../../d4/d04/classCModel.html#ad55cc48064428d703cee3e69b71e4703">CModel::getEvents()</a>, <a class="el" href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">CCopasiVectorN&lt; CType &gt;::getIndex()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">CCopasiObject::getKey()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">CCopasiObject::getObjectType()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">CCopasiMessage::getText()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a9ebbeda13eca4f795ca4463a444548fa">CModelEntity::getValueReference()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">importMIRIAM()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">importNotes()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>, <a class="el" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames()</a>, <a class="el" href="../../da/d3f/classCEvent.html#a4d4019ff9b5fae60a929cc1939bf8c20">CEvent::setDelayAssignment()</a>, <a class="el" href="../../da/d3f/classCEvent.html#a383bca6ef8ea5e2ada043d32f9dff6f0">CEvent::setDelayExpressionPtr()</a>, <a class="el" href="../../dd/d3a/classCEventAssignment.html#ac7691b961a60d94508f49cd0bb591d3e">CEventAssignment::setExpressionPtr()</a>, <a class="el" href="../../dc/dbd/classCExpression.html#a356110deab20d08e3bb1c6403162c554">CExpression::setIsBoolean()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot()</a>, <a class="el" href="../../da/d3f/classCEvent.html#a3534433bccd9c4c8ad63f586ddfa85b5">CEvent::setSBMLId()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">CEvaluationTree::setTree()</a>, <a class="el" href="../../da/d3f/classCEvent.html#acd80f5523908913c8e02a3c1363b3584">CEvent::setTriggerExpressionPtr()</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac0d4d75e9f6785597142a2bce5131499">importEvents()</a>.</p>
<div class="fragment"><div class="line"><a name="l09579"></a><span class="lineno"> 9579</span>&#160;{</div>
<div class="line"><a name="l09580"></a><span class="lineno"> 9580</span>&#160;  <span class="keywordflow">if</span> (pEvent == NULL) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09581"></a><span class="lineno"> 9581</span>&#160;</div>
<div class="line"><a name="l09582"></a><span class="lineno"> 9582</span>&#160;  <span class="comment">// no point including an event without trigger element</span></div>
<div class="line"><a name="l09583"></a><span class="lineno"> 9583</span>&#160;  <span class="keywordflow">if</span> (!pEvent-&gt;isSetTrigger())</div>
<div class="line"><a name="l09584"></a><span class="lineno"> 9584</span>&#160;    {</div>
<div class="line"><a name="l09585"></a><span class="lineno"> 9585</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <span class="stringliteral">&quot;Encountered event without trigger element, this event cannot be imported and is skipped.&quot;</span>);</div>
<div class="line"><a name="l09586"></a><span class="lineno"> 9586</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09587"></a><span class="lineno"> 9587</span>&#160;    }</div>
<div class="line"><a name="l09588"></a><span class="lineno"> 9588</span>&#160;</div>
<div class="line"><a name="l09589"></a><span class="lineno"> 9589</span>&#160;  <span class="comment">// no point including an event without trigger math</span></div>
<div class="line"><a name="l09590"></a><span class="lineno"> 9590</span>&#160;  <span class="keywordflow">if</span> (!pEvent-&gt;getTrigger()-&gt;isSetMath())</div>
<div class="line"><a name="l09591"></a><span class="lineno"> 9591</span>&#160;    {</div>
<div class="line"><a name="l09592"></a><span class="lineno"> 9592</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <span class="stringliteral">&quot;Encountered event without trigger expression, this event cannot be imported and is skipped.&quot;</span>);</div>
<div class="line"><a name="l09593"></a><span class="lineno"> 9593</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09594"></a><span class="lineno"> 9594</span>&#160;    }</div>
<div class="line"><a name="l09595"></a><span class="lineno"> 9595</span>&#160;</div>
<div class="line"><a name="l09596"></a><span class="lineno"> 9596</span>&#160;  <span class="comment">// create a warning if the priority is set</span></div>
<div class="line"><a name="l09597"></a><span class="lineno"> 9597</span>&#160;  <span class="keywordflow">if</span> (pEvent-&gt;isSetPriority())</div>
<div class="line"><a name="l09598"></a><span class="lineno"> 9598</span>&#160;    {</div>
<div class="line"><a name="l09599"></a><span class="lineno"> 9599</span>&#160;      this-&gt;mEventPrioritiesIgnored = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09600"></a><span class="lineno"> 9600</span>&#160;    }</div>
<div class="line"><a name="l09601"></a><span class="lineno"> 9601</span>&#160;</div>
<div class="line"><a name="l09602"></a><span class="lineno"> 9602</span>&#160;  <span class="comment">/* Check if the name of the reaction is unique. */</span></div>
<div class="line"><a name="l09603"></a><span class="lineno"> 9603</span>&#160;  std::string eventName = <span class="stringliteral">&quot;Event&quot;</span>;</div>
<div class="line"><a name="l09604"></a><span class="lineno"> 9604</span>&#160;</div>
<div class="line"><a name="l09605"></a><span class="lineno"> 9605</span>&#160;  <span class="keywordflow">if</span> (pEvent-&gt;isSetName())</div>
<div class="line"><a name="l09606"></a><span class="lineno"> 9606</span>&#160;    {</div>
<div class="line"><a name="l09607"></a><span class="lineno"> 9607</span>&#160;      eventName = pEvent-&gt;getName();</div>
<div class="line"><a name="l09608"></a><span class="lineno"> 9608</span>&#160;    }</div>
<div class="line"><a name="l09609"></a><span class="lineno"> 9609</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pEvent-&gt;isSetId())</div>
<div class="line"><a name="l09610"></a><span class="lineno"> 9610</span>&#160;    {</div>
<div class="line"><a name="l09611"></a><span class="lineno"> 9611</span>&#160;      eventName = pEvent-&gt;getId();</div>
<div class="line"><a name="l09612"></a><span class="lineno"> 9612</span>&#160;    }</div>
<div class="line"><a name="l09613"></a><span class="lineno"> 9613</span>&#160;</div>
<div class="line"><a name="l09614"></a><span class="lineno"> 9614</span>&#160;  std::string appendix = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l09615"></a><span class="lineno"> 9615</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> counter = 2;</div>
<div class="line"><a name="l09616"></a><span class="lineno"> 9616</span>&#160;  std::ostringstream numberStream;</div>
<div class="line"><a name="l09617"></a><span class="lineno"> 9617</span>&#160;</div>
<div class="line"><a name="l09618"></a><span class="lineno"> 9618</span>&#160;  <span class="keywordflow">while</span> (pCopasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad55cc48064428d703cee3e69b71e4703">getEvents</a>().<a class="code" href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">getIndex</a>(eventName + appendix) != <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>)</div>
<div class="line"><a name="l09619"></a><span class="lineno"> 9619</span>&#160;    {</div>
<div class="line"><a name="l09620"></a><span class="lineno"> 9620</span>&#160;      numberStream.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l09621"></a><span class="lineno"> 9621</span>&#160;      numberStream &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; counter;</div>
<div class="line"><a name="l09622"></a><span class="lineno"> 9622</span>&#160;      counter++;</div>
<div class="line"><a name="l09623"></a><span class="lineno"> 9623</span>&#160;      appendix = numberStream.str();</div>
<div class="line"><a name="l09624"></a><span class="lineno"> 9624</span>&#160;    }</div>
<div class="line"><a name="l09625"></a><span class="lineno"> 9625</span>&#160;</div>
<div class="line"><a name="l09626"></a><span class="lineno"> 9626</span>&#160;  <a class="code" href="../../da/d3f/classCEvent.html">CEvent</a>* pCOPASIEvent = pCopasiModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#a42a971783f3083dfc26ff21c8fd36088">createEvent</a>(eventName + appendix);</div>
<div class="line"><a name="l09627"></a><span class="lineno"> 9627</span>&#160;  assert(pCOPASIEvent != NULL);</div>
<div class="line"><a name="l09628"></a><span class="lineno"> 9628</span>&#160;</div>
<div class="line"><a name="l09629"></a><span class="lineno"> 9629</span>&#160;  <span class="keywordflow">if</span> (pEvent-&gt;isSetId())</div>
<div class="line"><a name="l09630"></a><span class="lineno"> 9630</span>&#160;    {</div>
<div class="line"><a name="l09631"></a><span class="lineno"> 9631</span>&#160;      pCOPASIEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#a3534433bccd9c4c8ad63f586ddfa85b5">setSBMLId</a>(pEvent-&gt;getId());</div>
<div class="line"><a name="l09632"></a><span class="lineno"> 9632</span>&#160;    }</div>
<div class="line"><a name="l09633"></a><span class="lineno"> 9633</span>&#160;</div>
<div class="line"><a name="l09634"></a><span class="lineno"> 9634</span>&#160;  <span class="comment">// import the trigger</span></div>
<div class="line"><a name="l09635"></a><span class="lineno"> 9635</span>&#160;  <span class="keyword">const</span> Trigger* pTrigger = pEvent-&gt;getTrigger();</div>
<div class="line"><a name="l09636"></a><span class="lineno"> 9636</span>&#160;</div>
<div class="line"><a name="l09637"></a><span class="lineno"> 9637</span>&#160;  <span class="comment">// create a warning if the initialValue is set</span></div>
<div class="line"><a name="l09638"></a><span class="lineno"> 9638</span>&#160;  <span class="comment">// We only need to consider the case where the initial value is false</span></div>
<div class="line"><a name="l09639"></a><span class="lineno"> 9639</span>&#160;  <span class="comment">// because that would enable the trigger to fire at t=0 which we can&#39;t handle yet.</span></div>
<div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;  <span class="keywordflow">if</span> (pTrigger-&gt;isSetInitialValue() &amp;&amp; pTrigger-&gt;getInitialValue() == <span class="keyword">false</span>)</div>
<div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160;    {</div>
<div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160;      this-&gt;mInitialTriggerValues = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09643"></a><span class="lineno"> 9643</span>&#160;    }</div>
<div class="line"><a name="l09644"></a><span class="lineno"> 9644</span>&#160;</div>
<div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;  <span class="comment">// create a warning if the persistent flag is set to false</span></div>
<div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160;  <span class="comment">// We only need to consider the case where the flag is set to false</span></div>
<div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160;  <span class="comment">// because that would mean that we have to recheck the trigger after it fired</span></div>
<div class="line"><a name="l09648"></a><span class="lineno"> 9648</span>&#160;  <span class="keywordflow">if</span> (pTrigger-&gt;isSetPersistent() &amp;&amp; pTrigger-&gt;getPersistent() == <span class="keyword">false</span>)</div>
<div class="line"><a name="l09649"></a><span class="lineno"> 9649</span>&#160;    {</div>
<div class="line"><a name="l09650"></a><span class="lineno"> 9650</span>&#160;      this-&gt;mNonPersistentTriggerFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09651"></a><span class="lineno"> 9651</span>&#160;    }</div>
<div class="line"><a name="l09652"></a><span class="lineno"> 9652</span>&#160;</div>
<div class="line"><a name="l09653"></a><span class="lineno"> 9653</span>&#160;  <span class="keywordflow">if</span> (!pTrigger-&gt;isSetMath())</div>
<div class="line"><a name="l09654"></a><span class="lineno"> 9654</span>&#160;    {</div>
<div class="line"><a name="l09655"></a><span class="lineno"> 9655</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l09656"></a><span class="lineno"> 9656</span>&#160;    }</div>
<div class="line"><a name="l09657"></a><span class="lineno"> 9657</span>&#160;</div>
<div class="line"><a name="l09658"></a><span class="lineno"> 9658</span>&#160;  <span class="keyword">const</span> ASTNode* pMath = pTrigger-&gt;getMath();</div>
<div class="line"><a name="l09659"></a><span class="lineno"> 9659</span>&#160;</div>
<div class="line"><a name="l09660"></a><span class="lineno"> 9660</span>&#160;  assert(pMath != NULL);</div>
<div class="line"><a name="l09661"></a><span class="lineno"> 9661</span>&#160;</div>
<div class="line"><a name="l09662"></a><span class="lineno"> 9662</span>&#160;  <span class="comment">// check for references to species references in the expression because we don&#39;t support them yet</span></div>
<div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a>(pMath, this-&gt;mSBMLSpeciesReferenceIds).empty())</div>
<div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160;    {</div>
<div class="line"><a name="l09665"></a><span class="lineno"> 9665</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 95);</div>
<div class="line"><a name="l09666"></a><span class="lineno"> 9666</span>&#160;    }</div>
<div class="line"><a name="l09667"></a><span class="lineno"> 9667</span>&#160;</div>
<div class="line"><a name="l09668"></a><span class="lineno"> 9668</span>&#160;  <span class="comment">// convert and set math expression</span></div>
<div class="line"><a name="l09669"></a><span class="lineno"> 9669</span>&#160;  <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>* pTmpNode = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>(*pMath);</div>
<div class="line"><a name="l09670"></a><span class="lineno"> 9670</span>&#160;</div>
<div class="line"><a name="l09671"></a><span class="lineno"> 9671</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode</a>(pTmpNode, pSBMLModel, copasi2sbmlmap);</div>
<div class="line"><a name="l09672"></a><span class="lineno"> 9672</span>&#160;</div>
<div class="line"><a name="l09673"></a><span class="lineno"> 9673</span>&#160;  <span class="comment">// replace the object names</span></div>
<div class="line"><a name="l09674"></a><span class="lineno"> 9674</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames</a>(pTmpNode, copasi2sbmlmap);</div>
<div class="line"><a name="l09675"></a><span class="lineno"> 9675</span>&#160;</div>
<div class="line"><a name="l09676"></a><span class="lineno"> 9676</span>&#160;  <span class="comment">// now we convert the node to a CEvaluationNode</span></div>
<div class="line"><a name="l09677"></a><span class="lineno"> 9677</span>&#160;  <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>* pExpression = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d1/d50/classCEvaluationTree.html#a467ef0af15585a1719afe85eaffbc4ab">CEvaluationTree::create</a>(<a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4">CEvaluationTree::Expression</a>));</div>
<div class="line"><a name="l09678"></a><span class="lineno"> 9678</span>&#160;</div>
<div class="line"><a name="l09679"></a><span class="lineno"> 9679</span>&#160;  pExpression-&gt;<a class="code" href="../../dc/dbd/classCExpression.html#a356110deab20d08e3bb1c6403162c554">setIsBoolean</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l09680"></a><span class="lineno"> 9680</span>&#160;</div>
<div class="line"><a name="l09681"></a><span class="lineno"> 9681</span>&#160;  pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">setTree</a>(*pTmpNode);</div>
<div class="line"><a name="l09682"></a><span class="lineno"> 9682</span>&#160;</div>
<div class="line"><a name="l09683"></a><span class="lineno"> 9683</span>&#160;  <span class="keyword">delete</span> pTmpNode;</div>
<div class="line"><a name="l09684"></a><span class="lineno"> 9684</span>&#160;</div>
<div class="line"><a name="l09685"></a><span class="lineno"> 9685</span>&#160;  pCOPASIEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#acd80f5523908913c8e02a3c1363b3584">setTriggerExpressionPtr</a>(pExpression);</div>
<div class="line"><a name="l09686"></a><span class="lineno"> 9686</span>&#160;</div>
<div class="line"><a name="l09687"></a><span class="lineno"> 9687</span>&#160;  <span class="comment">// import the delay</span></div>
<div class="line"><a name="l09688"></a><span class="lineno"> 9688</span>&#160;  <span class="keywordflow">if</span> (pEvent-&gt;isSetDelay())</div>
<div class="line"><a name="l09689"></a><span class="lineno"> 9689</span>&#160;    {</div>
<div class="line"><a name="l09690"></a><span class="lineno"> 9690</span>&#160;      <span class="keyword">const</span> Delay* pDelay = pEvent-&gt;getDelay();</div>
<div class="line"><a name="l09691"></a><span class="lineno"> 9691</span>&#160;</div>
<div class="line"><a name="l09692"></a><span class="lineno"> 9692</span>&#160;      <span class="keywordflow">if</span> (!pDelay-&gt;isSetMath())</div>
<div class="line"><a name="l09693"></a><span class="lineno"> 9693</span>&#160;        {</div>
<div class="line"><a name="l09694"></a><span class="lineno"> 9694</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l09695"></a><span class="lineno"> 9695</span>&#160;        }</div>
<div class="line"><a name="l09696"></a><span class="lineno"> 9696</span>&#160;</div>
<div class="line"><a name="l09697"></a><span class="lineno"> 9697</span>&#160;      pMath = pDelay-&gt;getMath();</div>
<div class="line"><a name="l09698"></a><span class="lineno"> 9698</span>&#160;      assert(pMath != NULL);</div>
<div class="line"><a name="l09699"></a><span class="lineno"> 9699</span>&#160;</div>
<div class="line"><a name="l09700"></a><span class="lineno"> 9700</span>&#160;      <span class="comment">// check for references to species references in the expression because we don&#39;t support them yet</span></div>
<div class="line"><a name="l09701"></a><span class="lineno"> 9701</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a>(pMath, this-&gt;mSBMLSpeciesReferenceIds).empty())</div>
<div class="line"><a name="l09702"></a><span class="lineno"> 9702</span>&#160;        {</div>
<div class="line"><a name="l09703"></a><span class="lineno"> 9703</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 95);</div>
<div class="line"><a name="l09704"></a><span class="lineno"> 9704</span>&#160;        }</div>
<div class="line"><a name="l09705"></a><span class="lineno"> 9705</span>&#160;</div>
<div class="line"><a name="l09706"></a><span class="lineno"> 9706</span>&#160;      <span class="comment">// convert and set math expression</span></div>
<div class="line"><a name="l09707"></a><span class="lineno"> 9707</span>&#160;      pTmpNode = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>(*pMath);</div>
<div class="line"><a name="l09708"></a><span class="lineno"> 9708</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode</a>(pTmpNode, pSBMLModel, copasi2sbmlmap);</div>
<div class="line"><a name="l09709"></a><span class="lineno"> 9709</span>&#160;      <span class="comment">// replace the object names</span></div>
<div class="line"><a name="l09710"></a><span class="lineno"> 9710</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames</a>(pTmpNode, copasi2sbmlmap);</div>
<div class="line"><a name="l09711"></a><span class="lineno"> 9711</span>&#160;      <span class="comment">// now we convert the node to a CEvaluationNode</span></div>
<div class="line"><a name="l09712"></a><span class="lineno"> 9712</span>&#160;      <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>* pExpression = <span class="keyword">new</span> <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>;</div>
<div class="line"><a name="l09713"></a><span class="lineno"> 9713</span>&#160;      pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">setTree</a>(*pTmpNode);</div>
<div class="line"><a name="l09714"></a><span class="lineno"> 9714</span>&#160;      <span class="keyword">delete</span> pTmpNode;</div>
<div class="line"><a name="l09715"></a><span class="lineno"> 9715</span>&#160;      pCOPASIEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#a383bca6ef8ea5e2ada043d32f9dff6f0">setDelayExpressionPtr</a>(pExpression);</div>
<div class="line"><a name="l09716"></a><span class="lineno"> 9716</span>&#160;</div>
<div class="line"><a name="l09717"></a><span class="lineno"> 9717</span>&#160;      <span class="comment">// check for useValuesFromTriggerTime</span></div>
<div class="line"><a name="l09718"></a><span class="lineno"> 9718</span>&#160;      <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 2 &amp;&amp; this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a> &gt;= 4) || this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l09719"></a><span class="lineno"> 9719</span>&#160;        {</div>
<div class="line"><a name="l09720"></a><span class="lineno"> 9720</span>&#160;          <span class="comment">// it has exactly the same meaning as the delayAssignment flag in</span></div>
<div class="line"><a name="l09721"></a><span class="lineno"> 9721</span>&#160;          <span class="comment">// COPASI, just a different name</span></div>
<div class="line"><a name="l09722"></a><span class="lineno"> 9722</span>&#160;          <span class="keywordflow">if</span> (pEvent-&gt;getUseValuesFromTriggerTime() == <span class="keyword">true</span>)</div>
<div class="line"><a name="l09723"></a><span class="lineno"> 9723</span>&#160;            {</div>
<div class="line"><a name="l09724"></a><span class="lineno"> 9724</span>&#160;              pCOPASIEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#a4d4019ff9b5fae60a929cc1939bf8c20">setDelayAssignment</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l09725"></a><span class="lineno"> 9725</span>&#160;            }</div>
<div class="line"><a name="l09726"></a><span class="lineno"> 9726</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l09727"></a><span class="lineno"> 9727</span>&#160;            {</div>
<div class="line"><a name="l09728"></a><span class="lineno"> 9728</span>&#160;              pCOPASIEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#a4d4019ff9b5fae60a929cc1939bf8c20">setDelayAssignment</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l09729"></a><span class="lineno"> 9729</span>&#160;            }</div>
<div class="line"><a name="l09730"></a><span class="lineno"> 9730</span>&#160;        }</div>
<div class="line"><a name="l09731"></a><span class="lineno"> 9731</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l09732"></a><span class="lineno"> 9732</span>&#160;        {</div>
<div class="line"><a name="l09733"></a><span class="lineno"> 9733</span>&#160;          <span class="comment">// SBML version prior to L2V4 didn&#39;t have the flag and the default</span></div>
<div class="line"><a name="l09734"></a><span class="lineno"> 9734</span>&#160;          <span class="comment">// behavior was the same as if the flag was set to true</span></div>
<div class="line"><a name="l09735"></a><span class="lineno"> 9735</span>&#160;          pCOPASIEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#a4d4019ff9b5fae60a929cc1939bf8c20">setDelayAssignment</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l09736"></a><span class="lineno"> 9736</span>&#160;        }</div>
<div class="line"><a name="l09737"></a><span class="lineno"> 9737</span>&#160;    }</div>
<div class="line"><a name="l09738"></a><span class="lineno"> 9738</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l09739"></a><span class="lineno"> 9739</span>&#160;    {</div>
<div class="line"><a name="l09740"></a><span class="lineno"> 9740</span>&#160;      <span class="comment">// actually the flag does not have any meaning without a delay, but we set</span></div>
<div class="line"><a name="l09741"></a><span class="lineno"> 9741</span>&#160;      <span class="comment">// it anyway to the default value</span></div>
<div class="line"><a name="l09742"></a><span class="lineno"> 9742</span>&#160;      pCOPASIEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#a4d4019ff9b5fae60a929cc1939bf8c20">setDelayAssignment</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l09743"></a><span class="lineno"> 9743</span>&#160;    }</div>
<div class="line"><a name="l09744"></a><span class="lineno"> 9744</span>&#160;</div>
<div class="line"><a name="l09745"></a><span class="lineno"> 9745</span>&#160;  <span class="comment">// the check if the time units are correct has already been made elsewhere</span></div>
<div class="line"><a name="l09746"></a><span class="lineno"> 9746</span>&#160;</div>
<div class="line"><a name="l09747"></a><span class="lineno"> 9747</span>&#160;  <span class="comment">// import all assignments</span></div>
<div class="line"><a name="l09748"></a><span class="lineno"> 9748</span>&#160;  std::map&lt;std::string, CCopasiObject*&gt; id2copasiMap;</div>
<div class="line"><a name="l09749"></a><span class="lineno"> 9749</span>&#160;  std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator it = copasi2sbmlmap.begin(), endit = copasi2sbmlmap.end();</div>
<div class="line"><a name="l09750"></a><span class="lineno"> 9750</span>&#160;</div>
<div class="line"><a name="l09751"></a><span class="lineno"> 9751</span>&#160;  <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l09752"></a><span class="lineno"> 9752</span>&#160;    {</div>
<div class="line"><a name="l09753"></a><span class="lineno"> 9753</span>&#160;      id2copasiMap[it-&gt;second-&gt;getId()] = it-&gt;first;</div>
<div class="line"><a name="l09754"></a><span class="lineno"> 9754</span>&#160;      ++it;</div>
<div class="line"><a name="l09755"></a><span class="lineno"> 9755</span>&#160;    }</div>
<div class="line"><a name="l09756"></a><span class="lineno"> 9756</span>&#160;</div>
<div class="line"><a name="l09757"></a><span class="lineno"> 9757</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pEvent-&gt;getNumEventAssignments();</div>
<div class="line"><a name="l09758"></a><span class="lineno"> 9758</span>&#160;</div>
<div class="line"><a name="l09759"></a><span class="lineno"> 9759</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l09760"></a><span class="lineno"> 9760</span>&#160;    {</div>
<div class="line"><a name="l09761"></a><span class="lineno"> 9761</span>&#160;      <span class="keyword">const</span> EventAssignment* pEventAssignment = pEvent-&gt;getEventAssignment(i);</div>
<div class="line"><a name="l09762"></a><span class="lineno"> 9762</span>&#160;</div>
<div class="line"><a name="l09763"></a><span class="lineno"> 9763</span>&#160;      <span class="keywordflow">if</span> (!pEventAssignment-&gt;isSetVariable())</div>
<div class="line"><a name="l09764"></a><span class="lineno"> 9764</span>&#160;        {</div>
<div class="line"><a name="l09765"></a><span class="lineno"> 9765</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l09766"></a><span class="lineno"> 9766</span>&#160;        }</div>
<div class="line"><a name="l09767"></a><span class="lineno"> 9767</span>&#160;</div>
<div class="line"><a name="l09768"></a><span class="lineno"> 9768</span>&#160;      <span class="comment">// the COPASI object that corresponds to the variable</span></div>
<div class="line"><a name="l09769"></a><span class="lineno"> 9769</span>&#160;      <span class="keyword">const</span> std::string&amp; variable = pEventAssignment-&gt;getVariable();</div>
<div class="line"><a name="l09770"></a><span class="lineno"> 9770</span>&#160;</div>
<div class="line"><a name="l09771"></a><span class="lineno"> 9771</span>&#160;      <span class="comment">// if the id occurs in mSBMLSpeciesReferenceIds, we have an assignment to a species reference which is not supported</span></div>
<div class="line"><a name="l09772"></a><span class="lineno"> 9772</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2 &amp;&amp; this-&gt;mSBMLSpeciesReferenceIds.find(variable) != this-&gt;mSBMLSpeciesReferenceIds.end())</div>
<div class="line"><a name="l09773"></a><span class="lineno"> 9773</span>&#160;        {</div>
<div class="line"><a name="l09774"></a><span class="lineno"> 9774</span>&#160;          this-&gt;mEventAssignmentForSpeciesReferenceIgnored = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09775"></a><span class="lineno"> 9775</span>&#160;          <span class="comment">// next iteration</span></div>
<div class="line"><a name="l09776"></a><span class="lineno"> 9776</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09777"></a><span class="lineno"> 9777</span>&#160;        }</div>
<div class="line"><a name="l09778"></a><span class="lineno"> 9778</span>&#160;</div>
<div class="line"><a name="l09779"></a><span class="lineno"> 9779</span>&#160;      std::map&lt;std::string, CCopasiObject*&gt;::iterator pos = id2copasiMap.find(variable);</div>
<div class="line"><a name="l09780"></a><span class="lineno"> 9780</span>&#160;</div>
<div class="line"><a name="l09781"></a><span class="lineno"> 9781</span>&#160;      <span class="keywordflow">if</span> (pos == id2copasiMap.end())</div>
<div class="line"><a name="l09782"></a><span class="lineno"> 9782</span>&#160;        {</div>
<div class="line"><a name="l09783"></a><span class="lineno"> 9783</span>&#160;          <span class="comment">//  issue an error message and ignore the assignment</span></div>
<div class="line"><a name="l09784"></a><span class="lineno"> 9784</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 57, <span class="stringliteral">&quot;Eventassignment&quot;</span>, variable.c_str());</div>
<div class="line"><a name="l09785"></a><span class="lineno"> 9785</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09786"></a><span class="lineno"> 9786</span>&#160;        }</div>
<div class="line"><a name="l09787"></a><span class="lineno"> 9787</span>&#160;</div>
<div class="line"><a name="l09788"></a><span class="lineno"> 9788</span>&#160;      <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pObject = pos-&gt;second;</div>
<div class="line"><a name="l09789"></a><span class="lineno"> 9789</span>&#160;</div>
<div class="line"><a name="l09790"></a><span class="lineno"> 9790</span>&#160;      <span class="keywordflow">if</span> (pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">getObjectType</a>() != <span class="stringliteral">&quot;Compartment&quot;</span> &amp;&amp; pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">getObjectType</a>() != <span class="stringliteral">&quot;Metabolite&quot;</span> &amp;&amp; pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">getObjectType</a>() != <span class="stringliteral">&quot;ModelValue&quot;</span>)</div>
<div class="line"><a name="l09791"></a><span class="lineno"> 9791</span>&#160;        {</div>
<div class="line"><a name="l09792"></a><span class="lineno"> 9792</span>&#160;          <span class="comment">// issue an error and ignore the assignment</span></div>
<div class="line"><a name="l09793"></a><span class="lineno"> 9793</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 72, <span class="stringliteral">&quot;Eventassignment&quot;</span>, variable.c_str());</div>
<div class="line"><a name="l09794"></a><span class="lineno"> 9794</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09795"></a><span class="lineno"> 9795</span>&#160;        }</div>
<div class="line"><a name="l09796"></a><span class="lineno"> 9796</span>&#160;</div>
<div class="line"><a name="l09797"></a><span class="lineno"> 9797</span>&#160;      <span class="comment">// import the assignment math expression</span></div>
<div class="line"><a name="l09798"></a><span class="lineno"> 9798</span>&#160;      <span class="keywordflow">if</span> (!pEventAssignment-&gt;isSetMath())</div>
<div class="line"><a name="l09799"></a><span class="lineno"> 9799</span>&#160;        {</div>
<div class="line"><a name="l09800"></a><span class="lineno"> 9800</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 58, <span class="stringliteral">&quot;Eventassignment&quot;</span>, variable.c_str());</div>
<div class="line"><a name="l09801"></a><span class="lineno"> 9801</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09802"></a><span class="lineno"> 9802</span>&#160;        }</div>
<div class="line"><a name="l09803"></a><span class="lineno"> 9803</span>&#160;</div>
<div class="line"><a name="l09804"></a><span class="lineno"> 9804</span>&#160;      <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>* pExpression = NULL;</div>
<div class="line"><a name="l09805"></a><span class="lineno"> 9805</span>&#160;      <a class="code" href="../../dd/d3a/classCEventAssignment.html">CEventAssignment</a>* pAssignment = NULL;</div>
<div class="line"><a name="l09806"></a><span class="lineno"> 9806</span>&#160;      pMath = pEventAssignment-&gt;getMath();</div>
<div class="line"><a name="l09807"></a><span class="lineno"> 9807</span>&#160;      assert(pMath != NULL);</div>
<div class="line"><a name="l09808"></a><span class="lineno"> 9808</span>&#160;</div>
<div class="line"><a name="l09809"></a><span class="lineno"> 9809</span>&#160;      <span class="comment">// check for references to species references in the expression because we don&#39;t support them yet</span></div>
<div class="line"><a name="l09810"></a><span class="lineno"> 9810</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a>(pMath, this-&gt;mSBMLSpeciesReferenceIds).empty())</div>
<div class="line"><a name="l09811"></a><span class="lineno"> 9811</span>&#160;        {</div>
<div class="line"><a name="l09812"></a><span class="lineno"> 9812</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 95);</div>
<div class="line"><a name="l09813"></a><span class="lineno"> 9813</span>&#160;        }</div>
<div class="line"><a name="l09814"></a><span class="lineno"> 9814</span>&#160;</div>
<div class="line"><a name="l09815"></a><span class="lineno"> 9815</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l09816"></a><span class="lineno"> 9816</span>&#160;        {</div>
<div class="line"><a name="l09817"></a><span class="lineno"> 9817</span>&#160;          <span class="comment">// convert and set math expression</span></div>
<div class="line"><a name="l09818"></a><span class="lineno"> 9818</span>&#160;          pTmpNode = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>(*pMath);</div>
<div class="line"><a name="l09819"></a><span class="lineno"> 9819</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode</a>(pTmpNode, pSBMLModel, copasi2sbmlmap);</div>
<div class="line"><a name="l09820"></a><span class="lineno"> 9820</span>&#160;          <span class="comment">// replace the object names</span></div>
<div class="line"><a name="l09821"></a><span class="lineno"> 9821</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames</a>(pTmpNode, copasi2sbmlmap);</div>
<div class="line"><a name="l09822"></a><span class="lineno"> 9822</span>&#160;          <span class="comment">// check if the model entity is a species and if it has the</span></div>
<div class="line"><a name="l09823"></a><span class="lineno"> 9823</span>&#160;          <span class="comment">// hasOnlySubstanceUnits flag set</span></div>
<div class="line"><a name="l09824"></a><span class="lineno"> 9824</span>&#160;          <span class="comment">// if so, we have to divide the expression by the volume of the species</span></div>
<div class="line"><a name="l09825"></a><span class="lineno"> 9825</span>&#160;          <span class="comment">// compartment</span></div>
<div class="line"><a name="l09826"></a><span class="lineno"> 9826</span>&#160;          <span class="comment">// now we convert the node to a CEvaluationNode</span></div>
<div class="line"><a name="l09827"></a><span class="lineno"> 9827</span>&#160;          std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator pos2 = copasi2sbmlmap.find(pObject);</div>
<div class="line"><a name="l09828"></a><span class="lineno"> 9828</span>&#160;</div>
<div class="line"><a name="l09829"></a><span class="lineno"> 9829</span>&#160;          <span class="comment">// we should always end up with an object, otherwise there is something</span></div>
<div class="line"><a name="l09830"></a><span class="lineno"> 9830</span>&#160;          <span class="comment">// wrong</span></div>
<div class="line"><a name="l09831"></a><span class="lineno"> 9831</span>&#160;          <span class="keywordflow">if</span> (pos2 == copasi2sbmlmap.end()) <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l09832"></a><span class="lineno"> 9832</span>&#160;</div>
<div class="line"><a name="l09833"></a><span class="lineno"> 9833</span>&#160;          pExpression = <span class="keyword">new</span> <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>;</div>
<div class="line"><a name="l09834"></a><span class="lineno"> 9834</span>&#160;          pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">setTree</a>(*pTmpNode);</div>
<div class="line"><a name="l09835"></a><span class="lineno"> 9835</span>&#160;          <span class="keyword">delete</span> pTmpNode;</div>
<div class="line"><a name="l09836"></a><span class="lineno"> 9836</span>&#160;</div>
<div class="line"><a name="l09837"></a><span class="lineno"> 9837</span>&#160;          <span class="keywordflow">if</span> (pos2-&gt;second-&gt;getTypeCode() == SBML_SPECIES &amp;&amp; <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>Species*<span class="keyword">&gt;</span>(pos2-&gt;second)-&gt;getHasOnlySubstanceUnits() == <span class="keyword">true</span>)</div>
<div class="line"><a name="l09838"></a><span class="lineno"> 9838</span>&#160;            {</div>
<div class="line"><a name="l09839"></a><span class="lineno"> 9839</span>&#160;              <span class="comment">// divide the expression by the volume</span></div>
<div class="line"><a name="l09840"></a><span class="lineno"> 9840</span>&#160;              <span class="comment">// check if the top level node is a multiplication and one</span></div>
<div class="line"><a name="l09841"></a><span class="lineno"> 9841</span>&#160;              <span class="comment">// of the children is the volume of the compartment the species</span></div>
<div class="line"><a name="l09842"></a><span class="lineno"> 9842</span>&#160;              <span class="comment">// is in. If this is the case, just drop the multiplication</span></div>
<div class="line"><a name="l09843"></a><span class="lineno"> 9843</span>&#160;              <span class="comment">// instead of dividing</span></div>
<div class="line"><a name="l09844"></a><span class="lineno"> 9844</span>&#160;              <span class="keyword">const</span> <a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>* pMetab = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>*<span class="keyword">&gt;</span>(pObject);</div>
<div class="line"><a name="l09845"></a><span class="lineno"> 9845</span>&#160;              assert(pMetab != NULL);</div>
<div class="line"><a name="l09846"></a><span class="lineno"> 9846</span>&#160;              <span class="keyword">const</span> <a class="code" href="../../d4/dd4/classCCompartment.html">CCompartment</a>* pCompartment = pMetab-&gt;<a class="code" href="../../dc/d44/classCMetab.html#a9774853fea3fd6c9b15ecd26df7ab349">getCompartment</a>();</div>
<div class="line"><a name="l09847"></a><span class="lineno"> 9847</span>&#160;</div>
<div class="line"><a name="l09848"></a><span class="lineno"> 9848</span>&#160;              <span class="keywordflow">if</span> (pCompartment-&gt;<a class="code" href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">getDimensionality</a>() != 0)</div>
<div class="line"><a name="l09849"></a><span class="lineno"> 9849</span>&#160;                {</div>
<div class="line"><a name="l09850"></a><span class="lineno"> 9850</span>&#160;                  <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pOrigNode = pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>();</div>
<div class="line"><a name="l09851"></a><span class="lineno"> 9851</span>&#160;                  assert(pOrigNode != NULL);</div>
<div class="line"><a name="l09852"></a><span class="lineno"> 9852</span>&#160;                  <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pNode = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a72ccaf784cfdbf62a852dd1a3d8ad6c7">SBMLImporter::divideByObject</a>(pOrigNode, pCompartment-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a9ebbeda13eca4f795ca4463a444548fa">getValueReference</a>());</div>
<div class="line"><a name="l09853"></a><span class="lineno"> 9853</span>&#160;                  assert(pNode != NULL);</div>
<div class="line"><a name="l09854"></a><span class="lineno"> 9854</span>&#160;</div>
<div class="line"><a name="l09855"></a><span class="lineno"> 9855</span>&#160;                  <span class="keywordflow">if</span> (pNode != NULL)</div>
<div class="line"><a name="l09856"></a><span class="lineno"> 9856</span>&#160;                    {</div>
<div class="line"><a name="l09857"></a><span class="lineno"> 9857</span>&#160;                      pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">setRoot</a>(pNode);</div>
<div class="line"><a name="l09858"></a><span class="lineno"> 9858</span>&#160;                    }</div>
<div class="line"><a name="l09859"></a><span class="lineno"> 9859</span>&#160;                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l09860"></a><span class="lineno"> 9860</span>&#160;                    {</div>
<div class="line"><a name="l09861"></a><span class="lineno"> 9861</span>&#160;                      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l09862"></a><span class="lineno"> 9862</span>&#160;                    }</div>
<div class="line"><a name="l09863"></a><span class="lineno"> 9863</span>&#160;                }</div>
<div class="line"><a name="l09864"></a><span class="lineno"> 9864</span>&#160;            }</div>
<div class="line"><a name="l09865"></a><span class="lineno"> 9865</span>&#160;</div>
<div class="line"><a name="l09866"></a><span class="lineno"> 9866</span>&#160;          pAssignment = <span class="keyword">new</span> <a class="code" href="../../dd/d3a/classCEventAssignment.html">CEventAssignment</a>(pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">getKey</a>(), pCOPASIEvent);</div>
<div class="line"><a name="l09867"></a><span class="lineno"> 9867</span>&#160;          pAssignment-&gt;<a class="code" href="../../dd/d3a/classCEventAssignment.html#ac7691b961a60d94508f49cd0bb591d3e">setExpressionPtr</a>(pExpression);</div>
<div class="line"><a name="l09868"></a><span class="lineno"> 9868</span>&#160;        }</div>
<div class="line"><a name="l09869"></a><span class="lineno"> 9869</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l09870"></a><span class="lineno"> 9870</span>&#160;        {</div>
<div class="line"><a name="l09871"></a><span class="lineno"> 9871</span>&#160;          <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(pAssignment);</div>
<div class="line"><a name="l09872"></a><span class="lineno"> 9872</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l09873"></a><span class="lineno"> 9873</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing event assignment for variable \&quot;&quot;</span>;</div>
<div class="line"><a name="l09874"></a><span class="lineno"> 9874</span>&#160;          os &lt;&lt; variable &lt;&lt; <span class="stringliteral">&quot;\&quot;.&quot;</span>;</div>
<div class="line"><a name="l09875"></a><span class="lineno"> 9875</span>&#160;</div>
<div class="line"><a name="l09876"></a><span class="lineno"> 9876</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l09877"></a><span class="lineno"> 9877</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l09878"></a><span class="lineno"> 9878</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l09879"></a><span class="lineno"> 9879</span>&#160;            {</div>
<div class="line"><a name="l09880"></a><span class="lineno"> 9880</span>&#160;              <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l09881"></a><span class="lineno"> 9881</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l09882"></a><span class="lineno"> 9882</span>&#160;              os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>) + 1);</div>
<div class="line"><a name="l09883"></a><span class="lineno"> 9883</span>&#160;            }</div>
<div class="line"><a name="l09884"></a><span class="lineno"> 9884</span>&#160;</div>
<div class="line"><a name="l09885"></a><span class="lineno"> 9885</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l09886"></a><span class="lineno"> 9886</span>&#160;        }</div>
<div class="line"><a name="l09887"></a><span class="lineno"> 9887</span>&#160;</div>
<div class="line"><a name="l09888"></a><span class="lineno"> 9888</span>&#160;      assert(pAssignment != NULL);</div>
<div class="line"><a name="l09889"></a><span class="lineno"> 9889</span>&#160;      pCOPASIEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#a07d073e597757d5baae882ddfceba58d">getAssignments</a>().<a class="code" href="../../d7/d08/classCCopasiVectorN.html#a7fd3c5416b90f901a4e214e55473956e">add</a>(pAssignment, <span class="keyword">true</span>);</div>
<div class="line"><a name="l09890"></a><span class="lineno"> 9890</span>&#160;    }</div>
<div class="line"><a name="l09891"></a><span class="lineno"> 9891</span>&#160;</div>
<div class="line"><a name="l09892"></a><span class="lineno"> 9892</span>&#160;  copasi2sbmlmap[pCOPASIEvent] = <span class="keyword">const_cast&lt;</span>Event*<span class="keyword">&gt;</span>(pEvent);</div>
<div class="line"><a name="l09893"></a><span class="lineno"> 9893</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a>(pEvent, pCOPASIEvent);</div>
<div class="line"><a name="l09894"></a><span class="lineno"> 9894</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a>(pCOPASIEvent, pEvent);</div>
<div class="line"><a name="l09895"></a><span class="lineno"> 9895</span>&#160;}</div>
<div class="ttc" id="classCEvent_html"><div class="ttname"><a href="../../da/d3f/classCEvent.html">CEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3f/CEvent_8h_source.html#l00152">CEvent.h:152</a></div></div>
<div class="ttc" id="classCEventAssignment_html"><div class="ttname"><a href="../../dd/d3a/classCEventAssignment.html">CEventAssignment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3f/CEvent_8h_source.html#l00032">CEvent.h:32</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a4329daab8b5b8e1e161530817c2ce4ee"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a></div><div class="ttdeci">static const CCopasiMessage &amp; peekLastMessage()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00060">CCopasiMessage.cpp:60</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a02df7d07b1a27c8515d3580203c9f104"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot</a></div><div class="ttdeci">virtual bool setRoot(CEvaluationNode *pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00422">CEvaluationTree.cpp:422</a></div></div>
<div class="ttc" id="classCEvent_html_a07d073e597757d5baae882ddfceba58d"><div class="ttname"><a href="../../da/d3f/classCEvent.html#a07d073e597757d5baae882ddfceba58d">CEvent::getAssignments</a></div><div class="ttdeci">const CCopasiVectorN&lt; CEventAssignment &gt; &amp; getAssignments() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/CEvent_8cpp_source.html#l00678">CEvent.cpp:678</a></div></div>
<div class="ttc" id="classConverterASTNode_html"><div class="ttname"><a href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/ConverterASTNode_8h_source.html#l00023">ConverterASTNode.h:23</a></div></div>
<div class="ttc" id="copasi_8h_html_ac9efe23516fb43b7adc59fbad1c221b8"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a></div><div class="ttdeci">#define pdelete(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00215">copasi.h:215</a></div></div>
<div class="ttc" id="classCExpression_html"><div class="ttname"><a href="../../dc/dbd/classCExpression.html">CExpression</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dcc/CExpression_8h_source.html#l00028">CExpression.h:28</a></div></div>
<div class="ttc" id="classCModel_html_a42a971783f3083dfc26ff21c8fd36088"><div class="ttname"><a href="../../d4/d04/classCModel.html#a42a971783f3083dfc26ff21c8fd36088">CModel::createEvent</a></div><div class="ttdeci">CEvent * createEvent(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02928">CModel.cpp:2928</a></div></div>
<div class="ttc" id="classCModel_html_ad55cc48064428d703cee3e69b71e4703"><div class="ttname"><a href="../../d4/d04/classCModel.html#ad55cc48064428d703cee3e69b71e4703">CModel::getEvents</a></div><div class="ttdeci">CCopasiVectorN&lt; CEvent &gt; &amp; getEvents()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01110">CModel.cpp:1110</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classCCompartment_html_a977268782cb7d6cd7a01cab642b45c09"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">CCompartment::getDimensionality</a></div><div class="ttdeci">unsigned C_INT32 getDimensionality() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/CCompartment_8cpp_source.html#l00204">CCompartment.cpp:204</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a20af886991b8be68c8328a4ae1bc0c6e"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">CCopasiMessage::getText</a></div><div class="ttdeci">const std::string &amp; getText() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00360">CCopasiMessage.cpp:360</a></div></div>
<div class="ttc" id="classCEvent_html_a383bca6ef8ea5e2ada043d32f9dff6f0"><div class="ttname"><a href="../../da/d3f/classCEvent.html#a383bca6ef8ea5e2ada043d32f9dff6f0">CEvent::setDelayExpressionPtr</a></div><div class="ttdeci">bool setDelayExpressionPtr(CExpression *pExpression)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/CEvent_8cpp_source.html#l00558">CEvent.cpp:558</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="classCCopasiObject_html"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9f/CCopasiObject_8h_source.html#l00216">CCopasiObject.h:216</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a56790cb06e1980712599250f3e695c6a"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a56790cb06e1980712599250f3e695c6a">CCopasiObject::getObjectType</a></div><div class="ttdeci">const std::string &amp; getObjectType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00260">CCopasiObject.cpp:260</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ada6a4711ac017aa676ab4be88291a15b"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">SBMLImporter::replaceObjectNames</a></div><div class="ttdeci">void replaceObjectNames(ASTNode *pNode, const std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, bool initialExpression=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06943">SBMLImporter.cpp:6943</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7d741ae7e3799fdc819e689a3dafad86"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">SBMLImporter::mVersion</a></div><div class="ttdeci">unsigned int mVersion</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00065">SBMLImporter.h:65</a></div></div>
<div class="ttc" id="classCCopasiVectorN_html_a3588b566dfda5b5a4fc570936abf7c0a"><div class="ttname"><a href="../../d7/d08/classCCopasiVectorN.html#a3588b566dfda5b5a4fc570936abf7c0a">CCopasiVectorN::getIndex</a></div><div class="ttdeci">virtual size_t getIndex(const std::string &amp;name) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00774">CCopasiVector.h:774</a></div></div>
<div class="ttc" id="classCExpression_html_a356110deab20d08e3bb1c6403162c554"><div class="ttname"><a href="../../dc/dbd/classCExpression.html#a356110deab20d08e3bb1c6403162c554">CExpression::setIsBoolean</a></div><div class="ttdeci">void setIsBoolean(const bool &amp;booleanRequired)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d08/CExpression_8cpp_source.html#l00058">CExpression.cpp:58</a></div></div>
<div class="ttc" id="classCMetab_html"><div class="ttname"><a href="../../dc/d44/classCMetab.html">CMetab</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df5/CMetab_8h_source.html#l00178">CMetab.h:178</a></div></div>
<div class="ttc" id="classCCopasiObject_html_aeeec4db3332a6886c76ace4c3fe62b7d"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">CCopasiObject::getKey</a></div><div class="ttdeci">virtual const std::string &amp; getKey() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00608">CCopasiObject.cpp:608</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a72ccaf784cfdbf62a852dd1a3d8ad6c7"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a72ccaf784cfdbf62a852dd1a3d8ad6c7">SBMLImporter::divideByObject</a></div><div class="ttdeci">static CEvaluationNode * divideByObject(const CEvaluationNode *pOrigNode, const CCopasiObject *pObject)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10533">SBMLImporter.cpp:10533</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCCopasiVectorN_html_a7fd3c5416b90f901a4e214e55473956e"><div class="ttname"><a href="../../d7/d08/classCCopasiVectorN.html#a7fd3c5416b90f901a4e214e55473956e">CCopasiVectorN::add</a></div><div class="ttdeci">virtual bool add(const CType &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00621">CCopasiVector.h:621</a></div></div>
<div class="ttc" id="classCEventAssignment_html_ac7691b961a60d94508f49cd0bb591d3e"><div class="ttname"><a href="../../dd/d3a/classCEventAssignment.html#ac7691b961a60d94508f49cd0bb591d3e">CEventAssignment::setExpressionPtr</a></div><div class="ttdeci">bool setExpressionPtr(CExpression *pExpression)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/CEvent_8cpp_source.html#l00181">CEvent.cpp:181</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4">CEvaluationTree::Expression</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00041">CEvaluationTree.h:41</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0bdaab30af2fb7e2bc5e637a2b40134a"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">SBMLImporter::preprocessNode</a></div><div class="ttdeci">void preprocessNode(ConverterASTNode *pNode, Model *pSBMLModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Reaction *pSBMLReaction=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04681">SBMLImporter.cpp:4681</a></div></div>
<div class="ttc" id="classCEvent_html_a4d4019ff9b5fae60a929cc1939bf8c20"><div class="ttname"><a href="../../da/d3f/classCEvent.html#a4d4019ff9b5fae60a929cc1939bf8c20">CEvent::setDelayAssignment</a></div><div class="ttdeci">void setDelayAssignment(const bool &amp;delayCalculation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/CEvent_8cpp_source.html#l00408">CEvent.cpp:408</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_ad92be98a54367c4f46224b7aee13cd88"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">CEvaluationTree::setTree</a></div><div class="ttdeci">bool setTree(const ASTNode &amp;pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00467">CEvaluationTree.cpp:467</a></div></div>
<div class="ttc" id="classCCompartment_html"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html">CCompartment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d59/CCompartment_8h_source.html#l00037">CCompartment.h:37</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2d5ef4903a7ed12d178107ef819b3b66"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a></div><div class="ttdeci">std::string findIdInASTTree(const ASTNode *pMath, const std::set&lt; std::string &gt; &amp;reactionIds)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06900">SBMLImporter.cpp:6900</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aab2342964defac3d15b32eed20211e13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">SBMLImporter::importMIRIAM</a></div><div class="ttdeci">bool importMIRIAM(const SBase *pSBMLObject, CCopasiObject *pCOPASIObject)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09225">SBMLImporter.cpp:9225</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2b5d21dd508be56977f4d2c642d89fa5"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2b5d21dd508be56977f4d2c642d89fa5">SBMLImporter::importNotes</a></div><div class="ttdeci">static bool importNotes(CAnnotation *pAnno, const SBase *pSBase)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10586">SBMLImporter.cpp:10586</a></div></div>
<div class="ttc" id="classCMetab_html_a9774853fea3fd6c9b15ecd26df7ab349"><div class="ttname"><a href="../../dc/d44/classCMetab.html#a9774853fea3fd6c9b15ecd26df7ab349">CMetab::getCompartment</a></div><div class="ttdeci">const CCompartment * getCompartment() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d70/CMetab_8cpp_source.html#l00222">CMetab.cpp:222</a></div></div>
<div class="ttc" id="classCEvent_html_a3534433bccd9c4c8ad63f586ddfa85b5"><div class="ttname"><a href="../../da/d3f/classCEvent.html#a3534433bccd9c4c8ad63f586ddfa85b5">CEvent::setSBMLId</a></div><div class="ttdeci">void setSBMLId(const std::string &amp;id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/CEvent_8cpp_source.html#l00398">CEvent.cpp:398</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
<div class="ttc" id="classCEvent_html_acd80f5523908913c8e02a3c1363b3584"><div class="ttname"><a href="../../da/d3f/classCEvent.html#acd80f5523908913c8e02a3c1363b3584">CEvent::setTriggerExpressionPtr</a></div><div class="ttdeci">bool setTriggerExpressionPtr(CExpression *pExpression)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/CEvent_8cpp_source.html#l00491">CEvent.cpp:491</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a467ef0af15585a1719afe85eaffbc4ab"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a467ef0af15585a1719afe85eaffbc4ab">CEvaluationTree::create</a></div><div class="ttdeci">static CEvaluationTree * create(CEvaluationTree::Type type)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00062">CEvaluationTree.cpp:62</a></div></div>
<div class="ttc" id="classCModelEntity_html_a9ebbeda13eca4f795ca4463a444548fa"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a9ebbeda13eca4f795ca4463a444548fa">CModelEntity::getValueReference</a></div><div class="ttdeci">CCopasiObject * getValueReference() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00370">CModelValue.cpp:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac0d4d75e9f6785597142a2bce5131499"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::importEvents </td>
          <td>(</td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>pCopasiModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Imports all events </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09533">9533</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">CProcessReport::addItem()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>, <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">CProcessReport::finishItem()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">CCopasiMessage::getText()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#adac3c53a708d777a7136bb53259eb88a">CCopasiMessage::getType()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage()</a>, and <a class="el" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">CProcessReport::progressItem()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l09534"></a><span class="lineno"> 9534</span>&#160;{</div>
<div class="line"><a name="l09535"></a><span class="lineno"> 9535</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pSBMLModel-&gt;getNumEvents();</div>
<div class="line"><a name="l09536"></a><span class="lineno"> 9536</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a> step = 0, totalSteps = 0;</div>
<div class="line"><a name="l09537"></a><span class="lineno"> 9537</span>&#160;  <span class="keywordtype">size_t</span> hStep = <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>;</div>
<div class="line"><a name="l09538"></a><span class="lineno"> 9538</span>&#160;</div>
<div class="line"><a name="l09539"></a><span class="lineno"> 9539</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> != 0)</div>
<div class="line"><a name="l09540"></a><span class="lineno"> 9540</span>&#160;    {</div>
<div class="line"><a name="l09541"></a><span class="lineno"> 9541</span>&#160;      step = 0;</div>
<div class="line"><a name="l09542"></a><span class="lineno"> 9542</span>&#160;      totalSteps = iMax;</div>
<div class="line"><a name="l09543"></a><span class="lineno"> 9543</span>&#160;      hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Importing initial assignments...&quot;</span>,</div>
<div class="line"><a name="l09544"></a><span class="lineno"> 9544</span>&#160;                                       step,</div>
<div class="line"><a name="l09545"></a><span class="lineno"> 9545</span>&#160;                                       &amp;totalSteps);</div>
<div class="line"><a name="l09546"></a><span class="lineno"> 9546</span>&#160;    }</div>
<div class="line"><a name="l09547"></a><span class="lineno"> 9547</span>&#160;</div>
<div class="line"><a name="l09548"></a><span class="lineno"> 9548</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l09549"></a><span class="lineno"> 9549</span>&#160;    {</div>
<div class="line"><a name="l09550"></a><span class="lineno"> 9550</span>&#160;      <span class="keywordflow">try</span></div>
<div class="line"><a name="l09551"></a><span class="lineno"> 9551</span>&#160;        {</div>
<div class="line"><a name="l09552"></a><span class="lineno"> 9552</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent</a>(pSBMLModel-&gt;getEvent(i), pSBMLModel, pCopasiModel, copasi2sbmlmap);</div>
<div class="line"><a name="l09553"></a><span class="lineno"> 9553</span>&#160;        }</div>
<div class="line"><a name="l09554"></a><span class="lineno"> 9554</span>&#160;      <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l09555"></a><span class="lineno"> 9555</span>&#160;        {</div>
<div class="line"><a name="l09556"></a><span class="lineno"> 9556</span>&#160;          std::ostringstream os;</div>
<div class="line"><a name="l09557"></a><span class="lineno"> 9557</span>&#160;          os &lt;&lt; <span class="stringliteral">&quot;Error while importing event &quot;</span>;</div>
<div class="line"><a name="l09558"></a><span class="lineno"> 9558</span>&#160;          os &lt;&lt; i + 1 &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l09559"></a><span class="lineno"> 9559</span>&#160;</div>
<div class="line"><a name="l09560"></a><span class="lineno"> 9560</span>&#160;          <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l09561"></a><span class="lineno"> 9561</span>&#160;          <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l09562"></a><span class="lineno"> 9562</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#adac3c53a708d777a7136bb53259eb88a">getType</a>() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l09563"></a><span class="lineno"> 9563</span>&#160;            {</div>
<div class="line"><a name="l09564"></a><span class="lineno"> 9564</span>&#160;              <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l09565"></a><span class="lineno"> 9565</span>&#160;              std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l09566"></a><span class="lineno"> 9566</span>&#160;              os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>) + 1);</div>
<div class="line"><a name="l09567"></a><span class="lineno"> 9567</span>&#160;            }</div>
<div class="line"><a name="l09568"></a><span class="lineno"> 9568</span>&#160;</div>
<div class="line"><a name="l09569"></a><span class="lineno"> 9569</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l09570"></a><span class="lineno"> 9570</span>&#160;</div>
<div class="line"><a name="l09571"></a><span class="lineno"> 9571</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l09572"></a><span class="lineno"> 9572</span>&#160;        }</div>
<div class="line"><a name="l09573"></a><span class="lineno"> 9573</span>&#160;</div>
<div class="line"><a name="l09574"></a><span class="lineno"> 9574</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(hStep)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09575"></a><span class="lineno"> 9575</span>&#160;    }</div>
<div class="line"><a name="l09576"></a><span class="lineno"> 9576</span>&#160;}</div>
<div class="ttc" id="classCCopasiMessage_html_a4329daab8b5b8e1e161530817c2ce4ee"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a></div><div class="ttdeci">static const CCopasiMessage &amp; peekLastMessage()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00060">CCopasiMessage.cpp:60</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a20af886991b8be68c8328a4ae1bc0c6e"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">CCopasiMessage::getText</a></div><div class="ttdeci">const std::string &amp; getText() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00360">CCopasiMessage.cpp:360</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a32b10e0dc03fc5bbf7b4842b0d314ff6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">SBMLImporter::mpImportHandler</a></div><div class="ttdeci">CProcessReport * mpImportHandler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00072">SBMLImporter.h:72</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa251ce6bf2a3d52d2971c1ad7b0d90ec"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">SBMLImporter::importEvent</a></div><div class="ttdeci">void importEvent(const Event *pEvent, Model *pSBMLModel, CModel *pCopasiModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09578">SBMLImporter.cpp:9578</a></div></div>
<div class="ttc" id="copasi_8h_html_a9e77742fb2ec39ea4ec3f3fbe6758c2d"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a></div><div class="ttdeci">#define C_INT32</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00090">copasi.h:90</a></div></div>
<div class="ttc" id="classCProcessReport_html_a26e24b2229161d39dba3a2ae3461ce7b"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">CProcessReport::progressItem</a></div><div class="ttdeci">virtual bool progressItem(const size_t &amp;handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00160">CProcessReport.cpp:160</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_adac3c53a708d777a7136bb53259eb88a"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#adac3c53a708d777a7136bb53259eb88a">CCopasiMessage::getType</a></div><div class="ttdeci">const CCopasiMessage::Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00361">CCopasiMessage.cpp:361</a></div></div>
<div class="ttc" id="classCProcessReport_html_a4d231c54881f298ee86d1ae44bd6e034"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">CProcessReport::addItem</a></div><div class="ttdeci">size_t addItem(const std::string &amp;name, const std::string &amp;value, const std::string *pEndValue=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00092">CProcessReport.cpp:92</a></div></div>
<div class="ttc" id="classCProcessReport_html_aefaaae08a9072b715c2f1a1a589efab0"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">CProcessReport::finishItem</a></div><div class="ttdeci">virtual bool finishItem(const size_t &amp;handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00199">CProcessReport.cpp:199</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad01e17c0afbe5350a9c4474dadc0d168"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> * SBMLImporter::importFunctionDefinitions </td>
          <td>(</td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Starting with SBML Level 2 Version 4, function definitions no longer need to be ordered, i.e. a function definition may refer to another function definition that is defined somewhere further down in the file. So we have to import the function definitions in the correct order. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09903">9903</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d1/d50/classCEvaluationTree.html#a8ae34344b5b7b6d6fbdd5c3c53ce6972">CEvaluationTree::compile()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a544798333f64b9a371d9add67076172d">createCFunctionFromFunctionDefinition()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a57920640816814412246e023fd98da7d">findDirectDependencies()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">CCopasiMessage::getText()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8dbcde81bbd9c319d5e2500756c15ce4">mFunctionNameMapping</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">mKnownCustomUserDefinedFunctions</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage()</a>, and <a class="el" href="../../d9/d86/classCFunction.html#a5f1318b74657c972d39bdee7fa2753a2">CFunction::setInfix()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l09904"></a><span class="lineno"> 9904</span>&#160;{</div>
<div class="line"><a name="l09905"></a><span class="lineno"> 9905</span>&#160;  std::map&lt;const FunctionDefinition*, std::set&lt;std::string&gt; &gt; directFunctionDependencies;</div>
<div class="line"><a name="l09906"></a><span class="lineno"> 9906</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0, iMax = pSBMLModel-&gt;getNumFunctionDefinitions();</div>
<div class="line"><a name="l09907"></a><span class="lineno"> 9907</span>&#160;</div>
<div class="line"><a name="l09908"></a><span class="lineno"> 9908</span>&#160;  <span class="comment">// first we find all direct function dependencies for a function definition</span></div>
<div class="line"><a name="l09909"></a><span class="lineno"> 9909</span>&#160;  <span class="keywordflow">for</span> (; i &lt; iMax; ++i)</div>
<div class="line"><a name="l09910"></a><span class="lineno"> 9910</span>&#160;    {</div>
<div class="line"><a name="l09911"></a><span class="lineno"> 9911</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a57920640816814412246e023fd98da7d">SBMLImporter::findDirectDependencies</a>(pSBMLModel-&gt;getFunctionDefinition(i), directFunctionDependencies);</div>
<div class="line"><a name="l09912"></a><span class="lineno"> 9912</span>&#160;    }</div>
<div class="line"><a name="l09913"></a><span class="lineno"> 9913</span>&#160;</div>
<div class="line"><a name="l09914"></a><span class="lineno"> 9914</span>&#160;  <a class="code" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a>* pTmpFunctionDB = <span class="keyword">new</span> <a class="code" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a>(<span class="stringliteral">&quot;FunctionDB&quot;</span>, NULL);</div>
<div class="line"><a name="l09915"></a><span class="lineno"> 9915</span>&#160;  std::map&lt;const FunctionDefinition*, std::set&lt;std::string&gt; &gt;::iterator it = directFunctionDependencies.begin(), endit = directFunctionDependencies.end();</div>
<div class="line"><a name="l09916"></a><span class="lineno"> 9916</span>&#160;</div>
<div class="line"><a name="l09917"></a><span class="lineno"> 9917</span>&#160;  <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l09918"></a><span class="lineno"> 9918</span>&#160;    {</div>
<div class="line"><a name="l09919"></a><span class="lineno"> 9919</span>&#160;      <span class="comment">// now we import all function definitions that do not have any dependencies</span></div>
<div class="line"><a name="l09920"></a><span class="lineno"> 9920</span>&#160;      <span class="keywordflow">if</span> (it-&gt;second.empty())</div>
<div class="line"><a name="l09921"></a><span class="lineno"> 9921</span>&#160;        {</div>
<div class="line"><a name="l09922"></a><span class="lineno"> 9922</span>&#160;          <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pFun = NULL;</div>
<div class="line"><a name="l09923"></a><span class="lineno"> 9923</span>&#160;</div>
<div class="line"><a name="l09924"></a><span class="lineno"> 9924</span>&#160;          <span class="keywordflow">try</span></div>
<div class="line"><a name="l09925"></a><span class="lineno"> 9925</span>&#160;            {</div>
<div class="line"><a name="l09926"></a><span class="lineno"> 9926</span>&#160;              pFun = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a544798333f64b9a371d9add67076172d">createCFunctionFromFunctionDefinition</a>(it-&gt;first, pTmpFunctionDB, pSBMLModel, copasi2sbmlmap);</div>
<div class="line"><a name="l09927"></a><span class="lineno"> 9927</span>&#160;            }</div>
<div class="line"><a name="l09928"></a><span class="lineno"> 9928</span>&#160;          <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l09929"></a><span class="lineno"> 9929</span>&#160;            {</div>
<div class="line"><a name="l09930"></a><span class="lineno"> 9930</span>&#160;              std::ostringstream os;</div>
<div class="line"><a name="l09931"></a><span class="lineno"> 9931</span>&#160;              os &lt;&lt; <span class="stringliteral">&quot;Error while importing function definition \&quot;&quot;</span>;</div>
<div class="line"><a name="l09932"></a><span class="lineno"> 9932</span>&#160;              os &lt;&lt; it-&gt;first-&gt;getId() &lt;&lt; <span class="stringliteral">&quot;\&quot;.&quot;</span>;</div>
<div class="line"><a name="l09933"></a><span class="lineno"> 9933</span>&#160;</div>
<div class="line"><a name="l09934"></a><span class="lineno"> 9934</span>&#160;              <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l09935"></a><span class="lineno"> 9935</span>&#160;              <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l09936"></a><span class="lineno"> 9936</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().getType() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l09937"></a><span class="lineno"> 9937</span>&#160;                {</div>
<div class="line"><a name="l09938"></a><span class="lineno"> 9938</span>&#160;                  <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l09939"></a><span class="lineno"> 9939</span>&#160;                  std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l09940"></a><span class="lineno"> 9940</span>&#160;                  os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>) + 1);</div>
<div class="line"><a name="l09941"></a><span class="lineno"> 9941</span>&#160;                }</div>
<div class="line"><a name="l09942"></a><span class="lineno"> 9942</span>&#160;</div>
<div class="line"><a name="l09943"></a><span class="lineno"> 9943</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l09944"></a><span class="lineno"> 9944</span>&#160;            }</div>
<div class="line"><a name="l09945"></a><span class="lineno"> 9945</span>&#160;</div>
<div class="line"><a name="l09946"></a><span class="lineno"> 9946</span>&#160;          assert(pFun != NULL);</div>
<div class="line"><a name="l09947"></a><span class="lineno"> 9947</span>&#160;</div>
<div class="line"><a name="l09948"></a><span class="lineno"> 9948</span>&#160;          std::map&lt;std::string, std::string&gt;::const_iterator pos = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">mKnownCustomUserDefinedFunctions</a>.find(it-&gt;first-&gt;getId());</div>
<div class="line"><a name="l09949"></a><span class="lineno"> 9949</span>&#160;</div>
<div class="line"><a name="l09950"></a><span class="lineno"> 9950</span>&#160;          <span class="keywordflow">if</span> (pos != <a class="code" href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">mKnownCustomUserDefinedFunctions</a>.end())</div>
<div class="line"><a name="l09951"></a><span class="lineno"> 9951</span>&#160;            {</div>
<div class="line"><a name="l09952"></a><span class="lineno"> 9952</span>&#160;              <span class="keywordflow">if</span> (pos-&gt;second == <span class="stringliteral">&quot;RUNIFORM&quot;</span>)</div>
<div class="line"><a name="l09953"></a><span class="lineno"> 9953</span>&#160;                {</div>
<div class="line"><a name="l09954"></a><span class="lineno"> 9954</span>&#160;                  <span class="comment">// replace call to function with call to uniform</span></div>
<div class="line"><a name="l09955"></a><span class="lineno"> 9955</span>&#160;                  pFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a5f1318b74657c972d39bdee7fa2753a2">setInfix</a>(<span class="stringliteral">&quot;UNIFORM(a, b)&quot;</span>);</div>
<div class="line"><a name="l09956"></a><span class="lineno"> 9956</span>&#160;                  pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a8ae34344b5b7b6d6fbdd5c3c53ce6972">compile</a>();</div>
<div class="line"><a name="l09957"></a><span class="lineno"> 9957</span>&#160;                }</div>
<div class="line"><a name="l09958"></a><span class="lineno"> 9958</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pos-&gt;second == <span class="stringliteral">&quot;RNORMAL&quot;</span>)</div>
<div class="line"><a name="l09959"></a><span class="lineno"> 9959</span>&#160;                {</div>
<div class="line"><a name="l09960"></a><span class="lineno"> 9960</span>&#160;                  <span class="comment">// replace call to function with call to normal</span></div>
<div class="line"><a name="l09961"></a><span class="lineno"> 9961</span>&#160;                  pFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a5f1318b74657c972d39bdee7fa2753a2">setInfix</a>(<span class="stringliteral">&quot;NORMAL(a, b)&quot;</span>);</div>
<div class="line"><a name="l09962"></a><span class="lineno"> 9962</span>&#160;                  pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a8ae34344b5b7b6d6fbdd5c3c53ce6972">compile</a>();</div>
<div class="line"><a name="l09963"></a><span class="lineno"> 9963</span>&#160;                }</div>
<div class="line"><a name="l09964"></a><span class="lineno"> 9964</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pos-&gt;second == <span class="stringliteral">&quot;RPOISSON&quot;</span>)</div>
<div class="line"><a name="l09965"></a><span class="lineno"> 9965</span>&#160;                {</div>
<div class="line"><a name="l09966"></a><span class="lineno"> 9966</span>&#160;                  <span class="comment">// replace call to function with call to normal</span></div>
<div class="line"><a name="l09967"></a><span class="lineno"> 9967</span>&#160;                  pFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a5f1318b74657c972d39bdee7fa2753a2">setInfix</a>(<span class="stringliteral">&quot;POISSON(a)&quot;</span>);</div>
<div class="line"><a name="l09968"></a><span class="lineno"> 9968</span>&#160;                  pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a8ae34344b5b7b6d6fbdd5c3c53ce6972">compile</a>();</div>
<div class="line"><a name="l09969"></a><span class="lineno"> 9969</span>&#160;                }</div>
<div class="line"><a name="l09970"></a><span class="lineno"> 9970</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pos-&gt;second == <span class="stringliteral">&quot;RGAMMA&quot;</span>)</div>
<div class="line"><a name="l09971"></a><span class="lineno"> 9971</span>&#160;                {</div>
<div class="line"><a name="l09972"></a><span class="lineno"> 9972</span>&#160;                  <span class="comment">// replace call to function with call to normal</span></div>
<div class="line"><a name="l09973"></a><span class="lineno"> 9973</span>&#160;                  pFun-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a5f1318b74657c972d39bdee7fa2753a2">setInfix</a>(<span class="stringliteral">&quot;GAMMA(a, b)&quot;</span>);</div>
<div class="line"><a name="l09974"></a><span class="lineno"> 9974</span>&#160;                  pFun-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a8ae34344b5b7b6d6fbdd5c3c53ce6972">compile</a>();</div>
<div class="line"><a name="l09975"></a><span class="lineno"> 9975</span>&#160;                }</div>
<div class="line"><a name="l09976"></a><span class="lineno"> 9976</span>&#160;            }</div>
<div class="line"><a name="l09977"></a><span class="lineno"> 9977</span>&#160;</div>
<div class="line"><a name="l09978"></a><span class="lineno"> 9978</span>&#160;          copasi2sbmlmap[pFun] = <span class="keyword">const_cast&lt;</span>FunctionDefinition*<span class="keyword">&gt;</span>(it-&gt;first);</div>
<div class="line"><a name="l09979"></a><span class="lineno"> 9979</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8dbcde81bbd9c319d5e2500756c15ce4">mFunctionNameMapping</a>[it-&gt;first-&gt;getId()] = pFun-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>();</div>
<div class="line"><a name="l09980"></a><span class="lineno"> 9980</span>&#160;          <span class="comment">// next we delete the imported function definitions from the dependencies of</span></div>
<div class="line"><a name="l09981"></a><span class="lineno"> 9981</span>&#160;          <span class="comment">// the other function definitions</span></div>
<div class="line"><a name="l09982"></a><span class="lineno"> 9982</span>&#160;          std::string <span class="keywordtype">id</span> = it-&gt;first-&gt;getId();</div>
<div class="line"><a name="l09983"></a><span class="lineno"> 9983</span>&#160;          directFunctionDependencies.erase(it);</div>
<div class="line"><a name="l09984"></a><span class="lineno"> 9984</span>&#160;          <span class="comment">// here we change the iterators !!!!</span></div>
<div class="line"><a name="l09985"></a><span class="lineno"> 9985</span>&#160;          it = directFunctionDependencies.begin(), endit = directFunctionDependencies.end();</div>
<div class="line"><a name="l09986"></a><span class="lineno"> 9986</span>&#160;</div>
<div class="line"><a name="l09987"></a><span class="lineno"> 9987</span>&#160;          <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l09988"></a><span class="lineno"> 9988</span>&#160;            {</div>
<div class="line"><a name="l09989"></a><span class="lineno"> 9989</span>&#160;              it-&gt;second.erase(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l09990"></a><span class="lineno"> 9990</span>&#160;              ++it;</div>
<div class="line"><a name="l09991"></a><span class="lineno"> 9991</span>&#160;            }</div>
<div class="line"><a name="l09992"></a><span class="lineno"> 9992</span>&#160;</div>
<div class="line"><a name="l09993"></a><span class="lineno"> 9993</span>&#160;          <span class="comment">// start from the beginning</span></div>
<div class="line"><a name="l09994"></a><span class="lineno"> 9994</span>&#160;          it = directFunctionDependencies.begin();</div>
<div class="line"><a name="l09995"></a><span class="lineno"> 9995</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09996"></a><span class="lineno"> 9996</span>&#160;        }</div>
<div class="line"><a name="l09997"></a><span class="lineno"> 9997</span>&#160;</div>
<div class="line"><a name="l09998"></a><span class="lineno"> 9998</span>&#160;      ++it;</div>
<div class="line"><a name="l09999"></a><span class="lineno"> 9999</span>&#160;    }</div>
<div class="line"><a name="l10000"></a><span class="lineno">10000</span>&#160;</div>
<div class="line"><a name="l10001"></a><span class="lineno">10001</span>&#160;  <span class="comment">// if the dependency list is not empty by now we have a problem</span></div>
<div class="line"><a name="l10002"></a><span class="lineno">10002</span>&#160;  <span class="keywordflow">if</span> (!directFunctionDependencies.empty())</div>
<div class="line"><a name="l10003"></a><span class="lineno">10003</span>&#160;    {</div>
<div class="line"><a name="l10004"></a><span class="lineno">10004</span>&#160;      std::string nameList;</div>
<div class="line"><a name="l10005"></a><span class="lineno">10005</span>&#160;      it = directFunctionDependencies.begin(), endit = directFunctionDependencies.end();</div>
<div class="line"><a name="l10006"></a><span class="lineno">10006</span>&#160;</div>
<div class="line"><a name="l10007"></a><span class="lineno">10007</span>&#160;      <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l10008"></a><span class="lineno">10008</span>&#160;        {</div>
<div class="line"><a name="l10009"></a><span class="lineno">10009</span>&#160;          nameList += <span class="stringliteral">&quot;\&quot;&quot;</span> + it-&gt;first-&gt;getId() + <span class="stringliteral">&quot;\&quot;,\n&quot;</span>;</div>
<div class="line"><a name="l10010"></a><span class="lineno">10010</span>&#160;          ++it;</div>
<div class="line"><a name="l10011"></a><span class="lineno">10011</span>&#160;        }</div>
<div class="line"><a name="l10012"></a><span class="lineno">10012</span>&#160;</div>
<div class="line"><a name="l10013"></a><span class="lineno">10013</span>&#160;      nameList = nameList.substr(0, nameList.size() - 2);</div>
<div class="line"><a name="l10014"></a><span class="lineno">10014</span>&#160;      <span class="comment">// clean up the temporary function database</span></div>
<div class="line"><a name="l10015"></a><span class="lineno">10015</span>&#160;      <span class="keyword">delete</span> pTmpFunctionDB;</div>
<div class="line"><a name="l10016"></a><span class="lineno">10016</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 76, nameList.c_str());</div>
<div class="line"><a name="l10017"></a><span class="lineno">10017</span>&#160;    }</div>
<div class="line"><a name="l10018"></a><span class="lineno">10018</span>&#160;</div>
<div class="line"><a name="l10019"></a><span class="lineno">10019</span>&#160;  <span class="keywordflow">return</span> pTmpFunctionDB;</div>
<div class="line"><a name="l10020"></a><span class="lineno">10020</span>&#160;}</div>
<div class="ttc" id="classCCopasiMessage_html_a4329daab8b5b8e1e161530817c2ce4ee"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a></div><div class="ttdeci">static const CCopasiMessage &amp; peekLastMessage()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00060">CCopasiMessage.cpp:60</a></div></div>
<div class="ttc" id="classCFunctionDB_html"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/CFunctionDB_8h_source.html#l00035">CFunctionDB.h:35</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a879d6756b51f6b58d307940e1343bd10"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName</a></div><div class="ttdeci">const std::string &amp; getObjectName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00258">CCopasiObject.cpp:258</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a20af886991b8be68c8328a4ae1bc0c6e"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">CCopasiMessage::getText</a></div><div class="ttdeci">const std::string &amp; getText() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00360">CCopasiMessage.cpp:360</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8dbcde81bbd9c319d5e2500756c15ce4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8dbcde81bbd9c319d5e2500756c15ce4">SBMLImporter::mFunctionNameMapping</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mFunctionNameMapping</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00070">SBMLImporter.h:70</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a544798333f64b9a371d9add67076172d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a544798333f64b9a371d9add67076172d">SBMLImporter::createCFunctionFromFunctionDefinition</a></div><div class="ttdeci">CFunction * createCFunctionFromFunctionDefinition(const FunctionDefinition *sbmlFunction, CFunctionDB *pTmpFunctionDB, Model *pSBMLModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l01727">SBMLImporter.cpp:1727</a></div></div>
<div class="ttc" id="classCFunction_html_a5f1318b74657c972d39bdee7fa2753a2"><div class="ttname"><a href="../../d9/d86/classCFunction.html#a5f1318b74657c972d39bdee7fa2753a2">CFunction::setInfix</a></div><div class="ttdeci">virtual bool setInfix(const std::string &amp;infix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00073">CFunction.cpp:73</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a102e853b7eef2af536188246c8e2e724"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">SBMLImporter::mKnownCustomUserDefinedFunctions</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mKnownCustomUserDefinedFunctions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00092">SBMLImporter.h:92</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a8ae34344b5b7b6d6fbdd5c3c53ce6972"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a8ae34344b5b7b6d6fbdd5c3c53ce6972">CEvaluationTree::compile</a></div><div class="ttdeci">virtual bool compile()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00263">CEvaluationTree.cpp:263</a></div></div>
<div class="ttc" id="classCFunction_html"><div class="ttname"><a href="../../d9/d86/classCFunction.html">CFunction</a></div><div class="ttdoc">The class for handling a chemical kinetic function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df5/CFunction_8h_source.html#l00029">CFunction.h:29</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a57920640816814412246e023fd98da7d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a57920640816814412246e023fd98da7d">SBMLImporter::findDirectDependencies</a></div><div class="ttdeci">static void findDirectDependencies(const FunctionDefinition *pFunDef, std::map&lt; const FunctionDefinition *, std::set&lt; std::string &gt; &gt; &amp;dependencies)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10026">SBMLImporter.cpp:10026</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aee0459aaff9aa4dda4852bc5d61fad2c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::importInitialAssignments </td>
          <td>(</td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>pCOPASIModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Imports all initial assignments if there are any. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l08791">8791</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">CProcessReport::addItem()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>, <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a72ccaf784cfdbf62a852dd1a3d8ad6c7">divideByObject()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">findIdInASTTree()</a>, <a class="el" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">CProcessReport::finishItem()</a>, <a class="el" href="../../dc/d44/classCMetab.html#a9774853fea3fd6c9b15ecd26df7ab349">CMetab::getCompartment()</a>, <a class="el" href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">CCompartment::getDimensionality()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a81973823a591e58112161570d7abac10">CModelEntity::getInitialExpressionPtr()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a39df6ef8194ede615a3f12a94a04a31a">CModelEntity::getInitialValueReference()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">CCopasiMessage::getText()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#adac3c53a708d777a7136bb53259eb88a">CCopasiMessage::getType()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, <a class="el" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">CProcessReport::progressItem()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a9f528cf6d4ee5452d0b80565a90bb9dd">replace_time_with_initial_time()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#ac7b9b318c748337c97ca9979ab4d757a">CModelEntity::setInitialExpressionPtr()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">CEvaluationTree::setTree()</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l08792"></a><span class="lineno"> 8792</span>&#160;{</div>
<div class="line"><a name="l08793"></a><span class="lineno"> 8793</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pSBMLModel-&gt;getNumInitialAssignments();</div>
<div class="line"><a name="l08794"></a><span class="lineno"> 8794</span>&#160;  std::map&lt;std::string, CCopasiObject*&gt; id2copasiMap;</div>
<div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;  std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator it = copasi2sbmlMap.begin(), endit = copasi2sbmlMap.end();</div>
<div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160;</div>
<div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;  <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l08798"></a><span class="lineno"> 8798</span>&#160;    {</div>
<div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;      id2copasiMap[it-&gt;second-&gt;getId()] = it-&gt;first;</div>
<div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;      ++it;</div>
<div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160;    }</div>
<div class="line"><a name="l08802"></a><span class="lineno"> 8802</span>&#160;</div>
<div class="line"><a name="l08803"></a><span class="lineno"> 8803</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a> step = 0, totalSteps = 0;</div>
<div class="line"><a name="l08804"></a><span class="lineno"> 8804</span>&#160;  <span class="keywordtype">size_t</span> hStep = <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>;</div>
<div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160;</div>
<div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> != 0)</div>
<div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160;    {</div>
<div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;      step = 0;</div>
<div class="line"><a name="l08809"></a><span class="lineno"> 8809</span>&#160;      totalSteps = iMax;</div>
<div class="line"><a name="l08810"></a><span class="lineno"> 8810</span>&#160;      hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Importing initial assignments...&quot;</span>,</div>
<div class="line"><a name="l08811"></a><span class="lineno"> 8811</span>&#160;                                       step,</div>
<div class="line"><a name="l08812"></a><span class="lineno"> 8812</span>&#160;                                       &amp;totalSteps);</div>
<div class="line"><a name="l08813"></a><span class="lineno"> 8813</span>&#160;    }</div>
<div class="line"><a name="l08814"></a><span class="lineno"> 8814</span>&#160;</div>
<div class="line"><a name="l08815"></a><span class="lineno"> 8815</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l08816"></a><span class="lineno"> 8816</span>&#160;    {</div>
<div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160;      <span class="keyword">const</span> InitialAssignment* pInitialAssignment = pSBMLModel-&gt;getInitialAssignment(i);</div>
<div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160;</div>
<div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;      <span class="keywordflow">if</span> (pInitialAssignment != NULL)</div>
<div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160;        {</div>
<div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160;          std::string symbol = pInitialAssignment-&gt;getSymbol();</div>
<div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160;          std::map&lt;std::string, std::string&gt;::const_iterator knownit = <a class="code" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a>.find(symbol);</div>
<div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;</div>
<div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;          <span class="keywordflow">if</span> (knownit != <a class="code" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a>.end())</div>
<div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160;            {</div>
<div class="line"><a name="l08826"></a><span class="lineno"> 8826</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;            }</div>
<div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160;</div>
<div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160;          std::map&lt;std::string, CCopasiObject*&gt;::iterator pos = id2copasiMap.find(symbol);</div>
<div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;</div>
<div class="line"><a name="l08831"></a><span class="lineno"> 8831</span>&#160;          <span class="keywordflow">if</span> (pos != id2copasiMap.end())</div>
<div class="line"><a name="l08832"></a><span class="lineno"> 8832</span>&#160;            {</div>
<div class="line"><a name="l08833"></a><span class="lineno"> 8833</span>&#160;              <span class="keywordflow">if</span> (!pInitialAssignment-&gt;isSetMath())</div>
<div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;                {</div>
<div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 58, <span class="stringliteral">&quot;Initialassignment&quot;</span>, symbol.c_str());</div>
<div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160;                }</div>
<div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160;                {</div>
<div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160;                  <span class="keyword">const</span> ASTNode* pMath = pInitialAssignment-&gt;getMath();</div>
<div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;                  assert(pMath != NULL);</div>
<div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;</div>
<div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160;                  <span class="comment">// check for references to species references in the expression because we don&#39;t support them yet</span></div>
<div class="line"><a name="l08843"></a><span class="lineno"> 8843</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a>(pMath, this-&gt;mSBMLSpeciesReferenceIds).empty())</div>
<div class="line"><a name="l08844"></a><span class="lineno"> 8844</span>&#160;                    {</div>
<div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160;                      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;</div>
<div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160;                      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 95);</div>
<div class="line"><a name="l08848"></a><span class="lineno"> 8848</span>&#160;                    }</div>
<div class="line"><a name="l08849"></a><span class="lineno"> 8849</span>&#160;</div>
<div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160;                  <span class="keywordflow">try</span></div>
<div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;                    {</div>
<div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160;                      <span class="comment">// create a CEvaluationNode based tree from the math</span></div>
<div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;                      <span class="comment">// expression</span></div>
<div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;                      <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> tmpNode(*pMath);</div>
<div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160;                      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode</a>(&amp;tmpNode, pSBMLModel, copasi2sbmlMap);</div>
<div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160;                      <span class="comment">// replace the object names</span></div>
<div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160;                      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames</a>(&amp;tmpNode, copasi2sbmlMap, <span class="keyword">true</span>);</div>
<div class="line"><a name="l08858"></a><span class="lineno"> 8858</span>&#160;                      <span class="comment">// replace time with initial time</span></div>
<div class="line"><a name="l08859"></a><span class="lineno"> 8859</span>&#160;                      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9f528cf6d4ee5452d0b80565a90bb9dd">replace_time_with_initial_time</a>(&amp;tmpNode, pCopasiModel);</div>
<div class="line"><a name="l08860"></a><span class="lineno"> 8860</span>&#160;</div>
<div class="line"><a name="l08861"></a><span class="lineno"> 8861</span>&#160;                      <span class="comment">// starting with sbml level 3 this could actually be an initial assignment to</span></div>
<div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;                      <span class="comment">// a species reference which we can&#39;t store in COPASI</span></div>
<div class="line"><a name="l08863"></a><span class="lineno"> 8863</span>&#160;                      <span class="comment">// So we treat this the same way as the stoichiometryMath in SBML level 2</span></div>
<div class="line"><a name="l08864"></a><span class="lineno"> 8864</span>&#160;                      <a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* pChemEqElement = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>*<span class="keyword">&gt;</span>(pos-&gt;second);</div>
<div class="line"><a name="l08865"></a><span class="lineno"> 8865</span>&#160;</div>
<div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160;                      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2 &amp;&amp;  pChemEqElement != NULL)</div>
<div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;                        {</div>
<div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160;                          <span class="comment">// store the expression for the stoichiometry in the stoichiometric expression map</span></div>
<div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160;                          <span class="comment">// this has been tested and should work</span></div>
<div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160;                          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>.insert(std::make_pair(pMath, pChemEqElement));</div>
<div class="line"><a name="l08871"></a><span class="lineno"> 8871</span>&#160;</div>
<div class="line"><a name="l08872"></a><span class="lineno"> 8872</span>&#160;                          <span class="comment">// go to the next iteration</span></div>
<div class="line"><a name="l08873"></a><span class="lineno"> 8873</span>&#160;                          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(hStep)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l08874"></a><span class="lineno"> 8874</span>&#160;</div>
<div class="line"><a name="l08875"></a><span class="lineno"> 8875</span>&#160;                          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;                        }</div>
<div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160;</div>
<div class="line"><a name="l08878"></a><span class="lineno"> 8878</span>&#160;                      <span class="comment">// now we convert the node to a CEvaluationNode</span></div>
<div class="line"><a name="l08879"></a><span class="lineno"> 8879</span>&#160;                      <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>* pExpression = <span class="keyword">new</span> <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>();</div>
<div class="line"><a name="l08880"></a><span class="lineno"> 8880</span>&#160;                      pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">setTree</a>(tmpNode);</div>
<div class="line"><a name="l08881"></a><span class="lineno"> 8881</span>&#160;</div>
<div class="line"><a name="l08882"></a><span class="lineno"> 8882</span>&#160;                      <span class="keywordflow">if</span> (dynamic_cast&lt;CMetab*&gt;(pos-&gt;second) != NULL)</div>
<div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160;                        {</div>
<div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;                          <a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>* pMetab = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>*<span class="keyword">&gt;</span>(pos-&gt;second);</div>
<div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160;                          std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator pos2 = copasi2sbmlMap.find(pMetab);</div>
<div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;                          assert(pos2 != copasi2sbmlMap.end());</div>
<div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;                          Species* pSBMLSpecies = <span class="keyword">dynamic_cast&lt;</span>Species*<span class="keyword">&gt;</span>(pos2-&gt;second);</div>
<div class="line"><a name="l08888"></a><span class="lineno"> 8888</span>&#160;                          assert(pSBMLSpecies != NULL);</div>
<div class="line"><a name="l08889"></a><span class="lineno"> 8889</span>&#160;                          <span class="keyword">const</span> <a class="code" href="../../d4/dd4/classCCompartment.html">CCompartment</a>* pCompartment = pMetab-&gt;<a class="code" href="../../dc/d44/classCMetab.html#a9774853fea3fd6c9b15ecd26df7ab349">getCompartment</a>();</div>
<div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;                          assert(pCompartment != NULL);</div>
<div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;</div>
<div class="line"><a name="l08892"></a><span class="lineno"> 8892</span>&#160;                          <span class="keywordflow">if</span> (pSBMLSpecies-&gt;getHasOnlySubstanceUnits() == <span class="keyword">true</span> &amp;&amp; pCompartment-&gt;<a class="code" href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">getDimensionality</a>() != 0)</div>
<div class="line"><a name="l08893"></a><span class="lineno"> 8893</span>&#160;                            {</div>
<div class="line"><a name="l08894"></a><span class="lineno"> 8894</span>&#160;                              <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pOrigNode = pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>();</div>
<div class="line"><a name="l08895"></a><span class="lineno"> 8895</span>&#160;                              assert(pOrigNode != NULL);</div>
<div class="line"><a name="l08896"></a><span class="lineno"> 8896</span>&#160;                              <span class="comment">// divide the expression by the volume</span></div>
<div class="line"><a name="l08897"></a><span class="lineno"> 8897</span>&#160;                              <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pNode = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a72ccaf784cfdbf62a852dd1a3d8ad6c7">SBMLImporter::divideByObject</a>(pOrigNode, pCompartment-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a39df6ef8194ede615a3f12a94a04a31a">getInitialValueReference</a>());</div>
<div class="line"><a name="l08898"></a><span class="lineno"> 8898</span>&#160;                              assert(pNode != NULL);</div>
<div class="line"><a name="l08899"></a><span class="lineno"> 8899</span>&#160;</div>
<div class="line"><a name="l08900"></a><span class="lineno"> 8900</span>&#160;                              <span class="keywordflow">if</span> (pNode != NULL)</div>
<div class="line"><a name="l08901"></a><span class="lineno"> 8901</span>&#160;                                {</div>
<div class="line"><a name="l08902"></a><span class="lineno"> 8902</span>&#160;                                  pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">setRoot</a>(pNode);</div>
<div class="line"><a name="l08903"></a><span class="lineno"> 8903</span>&#160;                                }</div>
<div class="line"><a name="l08904"></a><span class="lineno"> 8904</span>&#160;                              <span class="keywordflow">else</span></div>
<div class="line"><a name="l08905"></a><span class="lineno"> 8905</span>&#160;                                {</div>
<div class="line"><a name="l08906"></a><span class="lineno"> 8906</span>&#160;                                  <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l08907"></a><span class="lineno"> 8907</span>&#160;                                }</div>
<div class="line"><a name="l08908"></a><span class="lineno"> 8908</span>&#160;                            }</div>
<div class="line"><a name="l08909"></a><span class="lineno"> 8909</span>&#160;</div>
<div class="line"><a name="l08910"></a><span class="lineno"> 8910</span>&#160;                          <span class="keywordtype">bool</span> r = pMetab-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#ac7b9b318c748337c97ca9979ab4d757a">setInitialExpressionPtr</a>(pExpression);</div>
<div class="line"><a name="l08911"></a><span class="lineno"> 8911</span>&#160;</div>
<div class="line"><a name="l08912"></a><span class="lineno"> 8912</span>&#160;                          <span class="keywordflow">if</span> (r == <span class="keyword">false</span>)</div>
<div class="line"><a name="l08913"></a><span class="lineno"> 8913</span>&#160;                            {</div>
<div class="line"><a name="l08914"></a><span class="lineno"> 8914</span>&#160;                              <span class="keywordflow">if</span> (pMetab-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a81973823a591e58112161570d7abac10">getInitialExpressionPtr</a>() != pExpression)</div>
<div class="line"><a name="l08915"></a><span class="lineno"> 8915</span>&#160;                                {</div>
<div class="line"><a name="l08916"></a><span class="lineno"> 8916</span>&#160;                                  <span class="keyword">delete</span> pExpression;</div>
<div class="line"><a name="l08917"></a><span class="lineno"> 8917</span>&#160;                                }</div>
<div class="line"><a name="l08918"></a><span class="lineno"> 8918</span>&#160;</div>
<div class="line"><a name="l08919"></a><span class="lineno"> 8919</span>&#160;                              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a>, <span class="stringliteral">&quot;Some error occurred while importing the initial expression for species with id \&quot;&quot;</span>, pInitialAssignment-&gt;getSymbol().c_str(), <span class="stringliteral">&quot;\&quot;.&quot;</span>);</div>
<div class="line"><a name="l08920"></a><span class="lineno"> 8920</span>&#160;                            }</div>
<div class="line"><a name="l08921"></a><span class="lineno"> 8921</span>&#160;                        }</div>
<div class="line"><a name="l08922"></a><span class="lineno"> 8922</span>&#160;                      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_cast&lt;CCompartment*&gt;(pos-&gt;second) != NULL || <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d7/dec/classCModelValue.html">CModelValue</a>*<span class="keyword">&gt;</span>(pos-&gt;second) != NULL)</div>
<div class="line"><a name="l08923"></a><span class="lineno"> 8923</span>&#160;                        {</div>
<div class="line"><a name="l08924"></a><span class="lineno"> 8924</span>&#160;                          <a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a>* pME = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a>*<span class="keyword">&gt;</span>(pos-&gt;second);</div>
<div class="line"><a name="l08925"></a><span class="lineno"> 8925</span>&#160;                          <span class="keywordtype">bool</span> r = pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#ac7b9b318c748337c97ca9979ab4d757a">setInitialExpressionPtr</a>(pExpression);</div>
<div class="line"><a name="l08926"></a><span class="lineno"> 8926</span>&#160;</div>
<div class="line"><a name="l08927"></a><span class="lineno"> 8927</span>&#160;                          <span class="keywordflow">if</span> (r == <span class="keyword">false</span>)</div>
<div class="line"><a name="l08928"></a><span class="lineno"> 8928</span>&#160;                            {</div>
<div class="line"><a name="l08929"></a><span class="lineno"> 8929</span>&#160;                              <span class="keywordflow">if</span> (pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a81973823a591e58112161570d7abac10">getInitialExpressionPtr</a>() != pExpression)</div>
<div class="line"><a name="l08930"></a><span class="lineno"> 8930</span>&#160;                                {</div>
<div class="line"><a name="l08931"></a><span class="lineno"> 8931</span>&#160;                                  <span class="keyword">delete</span> pExpression;</div>
<div class="line"><a name="l08932"></a><span class="lineno"> 8932</span>&#160;                                }</div>
<div class="line"><a name="l08933"></a><span class="lineno"> 8933</span>&#160;</div>
<div class="line"><a name="l08934"></a><span class="lineno"> 8934</span>&#160;                              <span class="keywordflow">if</span> (dynamic_cast&lt;CCompartment*&gt;(pos-&gt;second))</div>
<div class="line"><a name="l08935"></a><span class="lineno"> 8935</span>&#160;                                {</div>
<div class="line"><a name="l08936"></a><span class="lineno"> 8936</span>&#160;                                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a>, <span class="stringliteral">&quot;Some error occurred while importing the initial expression for compartment with id \&quot;&quot;</span>, pInitialAssignment-&gt;getSymbol().c_str(), <span class="stringliteral">&quot;\&quot;.&quot;</span>);</div>
<div class="line"><a name="l08937"></a><span class="lineno"> 8937</span>&#160;                                }</div>
<div class="line"><a name="l08938"></a><span class="lineno"> 8938</span>&#160;                              <span class="keywordflow">else</span></div>
<div class="line"><a name="l08939"></a><span class="lineno"> 8939</span>&#160;                                {</div>
<div class="line"><a name="l08940"></a><span class="lineno"> 8940</span>&#160;                                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a>, <span class="stringliteral">&quot;Some error occurred while importing the initial expression for parameter with id \&quot;&quot;</span>, pInitialAssignment-&gt;getSymbol().c_str(), <span class="stringliteral">&quot;\&quot;.&quot;</span>);</div>
<div class="line"><a name="l08941"></a><span class="lineno"> 8941</span>&#160;                                }</div>
<div class="line"><a name="l08942"></a><span class="lineno"> 8942</span>&#160;                            }</div>
<div class="line"><a name="l08943"></a><span class="lineno"> 8943</span>&#160;                        }</div>
<div class="line"><a name="l08944"></a><span class="lineno"> 8944</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l08945"></a><span class="lineno"> 8945</span>&#160;                        {</div>
<div class="line"><a name="l08946"></a><span class="lineno"> 8946</span>&#160;                          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 59, symbol.c_str());</div>
<div class="line"><a name="l08947"></a><span class="lineno"> 8947</span>&#160;                        }</div>
<div class="line"><a name="l08948"></a><span class="lineno"> 8948</span>&#160;                    }</div>
<div class="line"><a name="l08949"></a><span class="lineno"> 8949</span>&#160;                  <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l08950"></a><span class="lineno"> 8950</span>&#160;                    {</div>
<div class="line"><a name="l08951"></a><span class="lineno"> 8951</span>&#160;                      std::ostringstream os;</div>
<div class="line"><a name="l08952"></a><span class="lineno"> 8952</span>&#160;                      os &lt;&lt; <span class="stringliteral">&quot;Error while importing initial assignment for symbol \&quot;&quot;</span>;</div>
<div class="line"><a name="l08953"></a><span class="lineno"> 8953</span>&#160;                      os &lt;&lt; symbol &lt;&lt; <span class="stringliteral">&quot;\&quot;.&quot;</span>;</div>
<div class="line"><a name="l08954"></a><span class="lineno"> 8954</span>&#160;</div>
<div class="line"><a name="l08955"></a><span class="lineno"> 8955</span>&#160;                      <span class="comment">// check if the last message on the stack is an exception</span></div>
<div class="line"><a name="l08956"></a><span class="lineno"> 8956</span>&#160;                      <span class="comment">// and if so, add the message text to the current exception</span></div>
<div class="line"><a name="l08957"></a><span class="lineno"> 8957</span>&#160;                      <span class="keywordflow">if</span> (<a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#adac3c53a708d777a7136bb53259eb88a">getType</a>() == <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>)</div>
<div class="line"><a name="l08958"></a><span class="lineno"> 8958</span>&#160;                        {</div>
<div class="line"><a name="l08959"></a><span class="lineno"> 8959</span>&#160;                          <span class="comment">// we only want the message, not the timestamp line</span></div>
<div class="line"><a name="l08960"></a><span class="lineno"> 8960</span>&#160;                          std::string text = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a>().<a class="code" href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">getText</a>();</div>
<div class="line"><a name="l08961"></a><span class="lineno"> 8961</span>&#160;                          os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; text.substr(text.find(<span class="stringliteral">&quot;\n&quot;</span>) + 1);</div>
<div class="line"><a name="l08962"></a><span class="lineno"> 8962</span>&#160;                        }</div>
<div class="line"><a name="l08963"></a><span class="lineno"> 8963</span>&#160;</div>
<div class="line"><a name="l08964"></a><span class="lineno"> 8964</span>&#160;                      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l08965"></a><span class="lineno"> 8965</span>&#160;</div>
<div class="line"><a name="l08966"></a><span class="lineno"> 8966</span>&#160;                      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, os.str().c_str());</div>
<div class="line"><a name="l08967"></a><span class="lineno"> 8967</span>&#160;                    }</div>
<div class="line"><a name="l08968"></a><span class="lineno"> 8968</span>&#160;                }</div>
<div class="line"><a name="l08969"></a><span class="lineno"> 8969</span>&#160;            }</div>
<div class="line"><a name="l08970"></a><span class="lineno"> 8970</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l08971"></a><span class="lineno"> 8971</span>&#160;            {</div>
<div class="line"><a name="l08972"></a><span class="lineno"> 8972</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 57 , <span class="stringliteral">&quot;InitialAssignment&quot;</span>, symbol.c_str());</div>
<div class="line"><a name="l08973"></a><span class="lineno"> 8973</span>&#160;            }</div>
<div class="line"><a name="l08974"></a><span class="lineno"> 8974</span>&#160;        }</div>
<div class="line"><a name="l08975"></a><span class="lineno"> 8975</span>&#160;</div>
<div class="line"><a name="l08976"></a><span class="lineno"> 8976</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(hStep)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l08977"></a><span class="lineno"> 8977</span>&#160;    }</div>
<div class="line"><a name="l08978"></a><span class="lineno"> 8978</span>&#160;}</div>
<div class="ttc" id="classCCopasiMessage_html_a4329daab8b5b8e1e161530817c2ce4ee"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a4329daab8b5b8e1e161530817c2ce4ee">CCopasiMessage::peekLastMessage</a></div><div class="ttdeci">static const CCopasiMessage &amp; peekLastMessage()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00060">CCopasiMessage.cpp:60</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a02df7d07b1a27c8515d3580203c9f104"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot</a></div><div class="ttdeci">virtual bool setRoot(CEvaluationNode *pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00422">CEvaluationTree.cpp:422</a></div></div>
<div class="ttc" id="classCChemEqElement_html"><div class="ttname"><a href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8d/CChemEqElement_8h_source.html#l00041">CChemEqElement.h:41</a></div></div>
<div class="ttc" id="classConverterASTNode_html"><div class="ttname"><a href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/ConverterASTNode_8h_source.html#l00023">ConverterASTNode.h:23</a></div></div>
<div class="ttc" id="classCExpression_html"><div class="ttname"><a href="../../dc/dbd/classCExpression.html">CExpression</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dcc/CExpression_8h_source.html#l00028">CExpression.h:28</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00083">CCopasiMessage.h:83</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classCModelEntity_html"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html">CModelEntity</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00039">CModelValue.h:39</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ace9bd25198bfe11a1838f44fac3b1f3b"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">SBMLImporter::mKnownInitalValues</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mKnownInitalValues</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00093">SBMLImporter.h:93</a></div></div>
<div class="ttc" id="classCCompartment_html_a977268782cb7d6cd7a01cab642b45c09"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">CCompartment::getDimensionality</a></div><div class="ttdeci">unsigned C_INT32 getDimensionality() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/CCompartment_8cpp_source.html#l00204">CCompartment.cpp:204</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a20af886991b8be68c8328a4ae1bc0c6e"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a20af886991b8be68c8328a4ae1bc0c6e">CCopasiMessage::getText</a></div><div class="ttdeci">const std::string &amp; getText() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00360">CCopasiMessage.cpp:360</a></div></div>
<div class="ttc" id="classCModelValue_html"><div class="ttname"><a href="../../d7/dec/classCModelValue.html">CModelValue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00419">CModelValue.h:419</a></div></div>
<div class="ttc" id="classCModelEntity_html_a39df6ef8194ede615a3f12a94a04a31a"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a39df6ef8194ede615a3f12a94a04a31a">CModelEntity::getInitialValueReference</a></div><div class="ttdeci">CCopasiObject * getInitialValueReference() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00367">CModelValue.cpp:367</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a32b10e0dc03fc5bbf7b4842b0d314ff6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">SBMLImporter::mpImportHandler</a></div><div class="ttdeci">CProcessReport * mpImportHandler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00072">SBMLImporter.h:72</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ada6a4711ac017aa676ab4be88291a15b"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">SBMLImporter::replaceObjectNames</a></div><div class="ttdeci">void replaceObjectNames(ASTNode *pNode, const std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, bool initialExpression=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06943">SBMLImporter.cpp:6943</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9f528cf6d4ee5452d0b80565a90bb9dd"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9f528cf6d4ee5452d0b80565a90bb9dd">SBMLImporter::replace_time_with_initial_time</a></div><div class="ttdeci">void replace_time_with_initial_time(ASTNode *pNode, const CModel *pCOPASIModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09513">SBMLImporter.cpp:9513</a></div></div>
<div class="ttc" id="copasi_8h_html_a9e77742fb2ec39ea4ec3f3fbe6758c2d"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a></div><div class="ttdeci">#define C_INT32</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00090">copasi.h:90</a></div></div>
<div class="ttc" id="classCMetab_html"><div class="ttname"><a href="../../dc/d44/classCMetab.html">CMetab</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df5/CMetab_8h_source.html#l00178">CMetab.h:178</a></div></div>
<div class="ttc" id="classCProcessReport_html_a26e24b2229161d39dba3a2ae3461ce7b"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">CProcessReport::progressItem</a></div><div class="ttdeci">virtual bool progressItem(const size_t &amp;handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00160">CProcessReport.cpp:160</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a72ccaf784cfdbf62a852dd1a3d8ad6c7"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a72ccaf784cfdbf62a852dd1a3d8ad6c7">SBMLImporter::divideByObject</a></div><div class="ttdeci">static CEvaluationNode * divideByObject(const CEvaluationNode *pOrigNode, const CCopasiObject *pObject)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10533">SBMLImporter.cpp:10533</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_adac3c53a708d777a7136bb53259eb88a"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#adac3c53a708d777a7136bb53259eb88a">CCopasiMessage::getType</a></div><div class="ttdeci">const CCopasiMessage::Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d33/CCopasiMessage_8cpp_source.html#l00361">CCopasiMessage.cpp:361</a></div></div>
<div class="ttc" id="classCProcessReport_html_a4d231c54881f298ee86d1ae44bd6e034"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">CProcessReport::addItem</a></div><div class="ttdeci">size_t addItem(const std::string &amp;name, const std::string &amp;value, const std::string *pEndValue=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00092">CProcessReport.cpp:92</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0bdaab30af2fb7e2bc5e637a2b40134a"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">SBMLImporter::preprocessNode</a></div><div class="ttdeci">void preprocessNode(ConverterASTNode *pNode, Model *pSBMLModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Reaction *pSBMLReaction=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04681">SBMLImporter.cpp:4681</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8ff64c7fedb1863cac4572f246ca65f7"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">SBMLImporter::mStoichiometricExpressionMap</a></div><div class="ttdeci">std::map&lt; const ASTNode *, CChemEqElement * &gt; mStoichiometricExpressionMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00081">SBMLImporter.h:81</a></div></div>
<div class="ttc" id="classCProcessReport_html_aefaaae08a9072b715c2f1a1a589efab0"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">CProcessReport::finishItem</a></div><div class="ttdeci">virtual bool finishItem(const size_t &amp;handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00199">CProcessReport.cpp:199</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_ad92be98a54367c4f46224b7aee13cd88"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">CEvaluationTree::setTree</a></div><div class="ttdeci">bool setTree(const ASTNode &amp;pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00467">CEvaluationTree.cpp:467</a></div></div>
<div class="ttc" id="classCCompartment_html"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html">CCompartment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d59/CCompartment_8h_source.html#l00037">CCompartment.h:37</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2d5ef4903a7ed12d178107ef819b3b66"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a></div><div class="ttdeci">std::string findIdInASTTree(const ASTNode *pMath, const std::set&lt; std::string &gt; &amp;reactionIds)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06900">SBMLImporter.cpp:6900</a></div></div>
<div class="ttc" id="classCModelEntity_html_ac7b9b318c748337c97ca9979ab4d757a"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#ac7b9b318c748337c97ca9979ab4d757a">CModelEntity::setInitialExpressionPtr</a></div><div class="ttdeci">bool setInitialExpressionPtr(CExpression *pExpression)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00299">CModelValue.cpp:299</a></div></div>
<div class="ttc" id="classCMetab_html_a9774853fea3fd6c9b15ecd26df7ab349"><div class="ttname"><a href="../../dc/d44/classCMetab.html#a9774853fea3fd6c9b15ecd26df7ab349">CMetab::getCompartment</a></div><div class="ttdeci">const CCompartment * getCompartment() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d70/CMetab_8cpp_source.html#l00222">CMetab.cpp:222</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
<div class="ttc" id="classCModelEntity_html_a81973823a591e58112161570d7abac10"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a81973823a591e58112161570d7abac10">CModelEntity::getInitialExpressionPtr</a></div><div class="ttdeci">const CExpression * getInitialExpressionPtr() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00294">CModelValue.cpp:294</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aab2342964defac3d15b32eed20211e13"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::importMIRIAM </td>
          <td>(</td>
          <td class="paramtype">const SBase *&#160;</td>
          <td class="paramname"><em>pSBMLObject</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *&#160;</td>
          <td class="paramname"><em>pCOPASIObject</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Imports the MIRIAM annotation from the given SBML object and sets it on the given COPASI object. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09225">9225</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d9/d86/classCFunction.html#a72037844ade71b20b25fd22f5b4841f8">CFunction::getKey()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a6ab0231058041dd42d002d8b9fa34780">CModelEntity::getKey()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#af3b437b3494d56d24aaa7c377fc95b8e">CReaction::getKey()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">mImportCOPASIMIRIAM</a>, <a class="el" href="../../db/de4/classCRDFGraphConverter.html#ad59eb3ab2a47c6a2175bed80c9cc9ebc">CRDFGraphConverter::SBML2Copasi()</a>, and <a class="el" href="../../d8/dfc/classCAnnotation.html#a059e10f3aa72113fbace978b72a8a790">CAnnotation::setMiriamAnnotation()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a879076815531affcbd0768f405f76475">createCCompartmentFromCompartment()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a544798333f64b9a371d9add67076172d">createCFunctionFromFunctionDefinition()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6e5e86bfa4b63886caa4daf1800a7abd">createCMetabFromSpecies()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent()</a>.</p>
<div class="fragment"><div class="line"><a name="l09226"></a><span class="lineno"> 9226</span>&#160;{</div>
<div class="line"><a name="l09227"></a><span class="lineno"> 9227</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09228"></a><span class="lineno"> 9228</span>&#160;</div>
<div class="line"><a name="l09229"></a><span class="lineno"> 9229</span>&#160;  <span class="keywordflow">if</span> (pSBMLObject == NULL || pCOPASIObject == NULL) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09230"></a><span class="lineno"> 9230</span>&#160;</div>
<div class="line"><a name="l09231"></a><span class="lineno"> 9231</span>&#160;  <span class="comment">// search for the MIRIAM annotation</span></div>
<div class="line"><a name="l09232"></a><span class="lineno"> 9232</span>&#160;  <span class="keyword">const</span> XMLNode* pMIRIAMNode = NULL;</div>
<div class="line"><a name="l09233"></a><span class="lineno"> 9233</span>&#160;  <span class="keyword">const</span> XMLNode* pCOPASIMIRIAMNode = NULL;</div>
<div class="line"><a name="l09234"></a><span class="lineno"> 9234</span>&#160;  <span class="comment">// this const cast is needed because getAnnotation only works on non-const</span></div>
<div class="line"><a name="l09235"></a><span class="lineno"> 9235</span>&#160;  <span class="comment">// objects.</span></div>
<div class="line"><a name="l09236"></a><span class="lineno"> 9236</span>&#160;  <span class="keyword">const</span> XMLNode* pAnnotation = <span class="keyword">const_cast&lt;</span>SBase*<span class="keyword">&gt;</span>(pSBMLObject)-&gt;getAnnotation();</div>
<div class="line"><a name="l09237"></a><span class="lineno"> 9237</span>&#160;</div>
<div class="line"><a name="l09238"></a><span class="lineno"> 9238</span>&#160;  <span class="keywordflow">if</span> (pAnnotation != NULL)</div>
<div class="line"><a name="l09239"></a><span class="lineno"> 9239</span>&#160;    {</div>
<div class="line"><a name="l09240"></a><span class="lineno"> 9240</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pAnnotation-&gt;getNumChildren();</div>
<div class="line"><a name="l09241"></a><span class="lineno"> 9241</span>&#160;      <span class="comment">// the top level MIRIAM node must be a diret child to the annotation</span></div>
<div class="line"><a name="l09242"></a><span class="lineno"> 9242</span>&#160;      <span class="comment">// node and since there can be only one in a valid SBML file, we can</span></div>
<div class="line"><a name="l09243"></a><span class="lineno"> 9243</span>&#160;      <span class="comment">// stop after we found one</span></div>
<div class="line"><a name="l09244"></a><span class="lineno"> 9244</span>&#160;      std::string nameSpace;</div>
<div class="line"><a name="l09245"></a><span class="lineno"> 9245</span>&#160;</div>
<div class="line"><a name="l09246"></a><span class="lineno"> 9246</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l09247"></a><span class="lineno"> 9247</span>&#160;        {</div>
<div class="line"><a name="l09248"></a><span class="lineno"> 9248</span>&#160;          <span class="keywordflow">if</span> (pAnnotation-&gt;getChild(i).getURI() == <span class="stringliteral">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span>)</div>
<div class="line"><a name="l09249"></a><span class="lineno"> 9249</span>&#160;            {</div>
<div class="line"><a name="l09250"></a><span class="lineno"> 9250</span>&#160;              pMIRIAMNode = &amp;pAnnotation-&gt;getChild(i);</div>
<div class="line"><a name="l09251"></a><span class="lineno"> 9251</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09252"></a><span class="lineno"> 9252</span>&#160;            }</div>
<div class="line"><a name="l09253"></a><span class="lineno"> 9253</span>&#160;          <span class="comment">// maybe import the COPASI MIRIAM annotation</span></div>
<div class="line"><a name="l09254"></a><span class="lineno"> 9254</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pAnnotation-&gt;getChild(i).getURI() == <span class="stringliteral">&quot;http://www.copasi.org/static/sbml&quot;</span> &amp;&amp; this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">mImportCOPASIMIRIAM</a> == <span class="keyword">true</span>)</div>
<div class="line"><a name="l09255"></a><span class="lineno"> 9255</span>&#160;            {</div>
<div class="line"><a name="l09256"></a><span class="lineno"> 9256</span>&#160;              <span class="keyword">const</span> XMLNode* pCOPASINode = &amp;pAnnotation-&gt;getChild(i);</div>
<div class="line"><a name="l09257"></a><span class="lineno"> 9257</span>&#160;              <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j, jMax = pCOPASINode-&gt;getNumChildren();</div>
<div class="line"><a name="l09258"></a><span class="lineno"> 9258</span>&#160;</div>
<div class="line"><a name="l09259"></a><span class="lineno"> 9259</span>&#160;              <span class="keywordflow">for</span> (j = 0; j &lt; jMax; ++j)</div>
<div class="line"><a name="l09260"></a><span class="lineno"> 9260</span>&#160;                {</div>
<div class="line"><a name="l09261"></a><span class="lineno"> 9261</span>&#160;                  <span class="keywordflow">if</span> (pCOPASINode-&gt;getChild(j).getURI() == <span class="stringliteral">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span>)</div>
<div class="line"><a name="l09262"></a><span class="lineno"> 9262</span>&#160;                    {</div>
<div class="line"><a name="l09263"></a><span class="lineno"> 9263</span>&#160;                      pCOPASIMIRIAMNode = &amp;pCOPASINode-&gt;getChild(j);</div>
<div class="line"><a name="l09264"></a><span class="lineno"> 9264</span>&#160;                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09265"></a><span class="lineno"> 9265</span>&#160;                    }</div>
<div class="line"><a name="l09266"></a><span class="lineno"> 9266</span>&#160;                }</div>
<div class="line"><a name="l09267"></a><span class="lineno"> 9267</span>&#160;            }</div>
<div class="line"><a name="l09268"></a><span class="lineno"> 9268</span>&#160;        }</div>
<div class="line"><a name="l09269"></a><span class="lineno"> 9269</span>&#160;</div>
<div class="line"><a name="l09270"></a><span class="lineno"> 9270</span>&#160;      <span class="comment">// If the COPASI MIRIAM annotation was found, import it before the SBML</span></div>
<div class="line"><a name="l09271"></a><span class="lineno"> 9271</span>&#160;      <span class="comment">// MIRIAM annotation so that the SBML MIRIAM annotation can overwrite</span></div>
<div class="line"><a name="l09272"></a><span class="lineno"> 9272</span>&#160;      <span class="comment">// things from the COPASI MIRIAM annotation.</span></div>
<div class="line"><a name="l09273"></a><span class="lineno"> 9273</span>&#160;      <span class="keywordflow">if</span> (pCOPASIMIRIAMNode != NULL)</div>
<div class="line"><a name="l09274"></a><span class="lineno"> 9274</span>&#160;        {</div>
<div class="line"><a name="l09275"></a><span class="lineno"> 9275</span>&#160;          std::string metaid = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l09276"></a><span class="lineno"> 9276</span>&#160;</div>
<div class="line"><a name="l09277"></a><span class="lineno"> 9277</span>&#160;          <span class="keywordflow">if</span> (pSBMLObject-&gt;isSetMetaId())</div>
<div class="line"><a name="l09278"></a><span class="lineno"> 9278</span>&#160;            {</div>
<div class="line"><a name="l09279"></a><span class="lineno"> 9279</span>&#160;              metaid = pSBMLObject-&gt;getMetaId();</div>
<div class="line"><a name="l09280"></a><span class="lineno"> 9280</span>&#160;            }</div>
<div class="line"><a name="l09281"></a><span class="lineno"> 9281</span>&#160;</div>
<div class="line"><a name="l09282"></a><span class="lineno"> 9282</span>&#160;          std::string miriamString = XMLNode::convertXMLNodeToString(pCOPASIMIRIAMNode);</div>
<div class="line"><a name="l09283"></a><span class="lineno"> 9283</span>&#160;</div>
<div class="line"><a name="l09284"></a><span class="lineno"> 9284</span>&#160;          <span class="keywordflow">switch</span> (pSBMLObject-&gt;getTypeCode())</div>
<div class="line"><a name="l09285"></a><span class="lineno"> 9285</span>&#160;            {</div>
<div class="line"><a name="l09286"></a><span class="lineno"> 9286</span>&#160;              <span class="keywordflow">case</span> SBML_MODEL:</div>
<div class="line"><a name="l09287"></a><span class="lineno"> 9287</span>&#160;              <span class="keywordflow">case</span> SBML_COMPARTMENT:</div>
<div class="line"><a name="l09288"></a><span class="lineno"> 9288</span>&#160;              <span class="keywordflow">case</span> SBML_SPECIES:</div>
<div class="line"><a name="l09289"></a><span class="lineno"> 9289</span>&#160;              <span class="keywordflow">case</span> SBML_PARAMETER:</div>
<div class="line"><a name="l09290"></a><span class="lineno"> 9290</span>&#160;              {</div>
<div class="line"><a name="l09291"></a><span class="lineno"> 9291</span>&#160;                assert(dynamic_cast&lt; const Model * &gt;(pSBMLObject) != NULL ||</div>
<div class="line"><a name="l09292"></a><span class="lineno"> 9292</span>&#160;                       dynamic_cast&lt; const Compartment * &gt;(pSBMLObject) != NULL ||</div>
<div class="line"><a name="l09293"></a><span class="lineno"> 9293</span>&#160;                       dynamic_cast&lt; const Species * &gt;(pSBMLObject) != NULL ||</div>
<div class="line"><a name="l09294"></a><span class="lineno"> 9294</span>&#160;                       dynamic_cast&lt; const Parameter * &gt;(pSBMLObject) != NULL);</div>
<div class="line"><a name="l09295"></a><span class="lineno"> 9295</span>&#160;                assert(dynamic_cast&lt; CModelEntity * &gt;(pCOPASIObject) != NULL);</div>
<div class="line"><a name="l09296"></a><span class="lineno"> 9296</span>&#160;</div>
<div class="line"><a name="l09297"></a><span class="lineno"> 9297</span>&#160;                <a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a> * pEntity = <span class="keyword">static_cast&lt;</span> <a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a> * <span class="keyword">&gt;</span>(pCOPASIObject);</div>
<div class="line"><a name="l09298"></a><span class="lineno"> 9298</span>&#160;                pEntity-&gt;<a class="code" href="../../d8/dfc/classCAnnotation.html#a059e10f3aa72113fbace978b72a8a790">setMiriamAnnotation</a>(miriamString,</div>
<div class="line"><a name="l09299"></a><span class="lineno"> 9299</span>&#160;                                             pEntity-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a6ab0231058041dd42d002d8b9fa34780">getKey</a>(),</div>
<div class="line"><a name="l09300"></a><span class="lineno"> 9300</span>&#160;                                             metaid);</div>
<div class="line"><a name="l09301"></a><span class="lineno"> 9301</span>&#160;              }</div>
<div class="line"><a name="l09302"></a><span class="lineno"> 9302</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09303"></a><span class="lineno"> 9303</span>&#160;</div>
<div class="line"><a name="l09304"></a><span class="lineno"> 9304</span>&#160;              <span class="keywordflow">case</span> SBML_REACTION:</div>
<div class="line"><a name="l09305"></a><span class="lineno"> 9305</span>&#160;              {</div>
<div class="line"><a name="l09306"></a><span class="lineno"> 9306</span>&#160;                assert(dynamic_cast&lt;const Reaction*&gt;(pSBMLObject) != NULL);</div>
<div class="line"><a name="l09307"></a><span class="lineno"> 9307</span>&#160;                assert(dynamic_cast&lt;CReaction*&gt;(pCOPASIObject) != NULL);</div>
<div class="line"><a name="l09308"></a><span class="lineno"> 9308</span>&#160;</div>
<div class="line"><a name="l09309"></a><span class="lineno"> 9309</span>&#160;                <a class="code" href="../../d4/dcf/classCReaction.html">CReaction</a> * pReaction = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d4/dcf/classCReaction.html">CReaction</a>*<span class="keyword">&gt;</span>(pCOPASIObject);</div>
<div class="line"><a name="l09310"></a><span class="lineno"> 9310</span>&#160;                pReaction-&gt;<a class="code" href="../../d8/dfc/classCAnnotation.html#a059e10f3aa72113fbace978b72a8a790">setMiriamAnnotation</a>(miriamString, pReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#af3b437b3494d56d24aaa7c377fc95b8e">getKey</a>(), metaid);</div>
<div class="line"><a name="l09311"></a><span class="lineno"> 9311</span>&#160;              }</div>
<div class="line"><a name="l09312"></a><span class="lineno"> 9312</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09313"></a><span class="lineno"> 9313</span>&#160;</div>
<div class="line"><a name="l09314"></a><span class="lineno"> 9314</span>&#160;              <span class="keywordflow">case</span> SBML_FUNCTION_DEFINITION:</div>
<div class="line"><a name="l09315"></a><span class="lineno"> 9315</span>&#160;              {</div>
<div class="line"><a name="l09316"></a><span class="lineno"> 9316</span>&#160;                assert(dynamic_cast&lt;const FunctionDefinition*&gt;(pSBMLObject) != NULL);</div>
<div class="line"><a name="l09317"></a><span class="lineno"> 9317</span>&#160;                assert(dynamic_cast&lt;CFunction*&gt;(pCOPASIObject) != NULL);</div>
<div class="line"><a name="l09318"></a><span class="lineno"> 9318</span>&#160;</div>
<div class="line"><a name="l09319"></a><span class="lineno"> 9319</span>&#160;                <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a> * pFunction = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>*<span class="keyword">&gt;</span>(pCOPASIObject);</div>
<div class="line"><a name="l09320"></a><span class="lineno"> 9320</span>&#160;                pFunction-&gt;<a class="code" href="../../d8/dfc/classCAnnotation.html#a059e10f3aa72113fbace978b72a8a790">setMiriamAnnotation</a>(miriamString, pFunction-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a72037844ade71b20b25fd22f5b4841f8">getKey</a>(), metaid);</div>
<div class="line"><a name="l09321"></a><span class="lineno"> 9321</span>&#160;              }</div>
<div class="line"><a name="l09322"></a><span class="lineno"> 9322</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09323"></a><span class="lineno"> 9323</span>&#160;</div>
<div class="line"><a name="l09324"></a><span class="lineno"> 9324</span>&#160;              <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l09325"></a><span class="lineno"> 9325</span>&#160;                result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09326"></a><span class="lineno"> 9326</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09327"></a><span class="lineno"> 9327</span>&#160;            }</div>
<div class="line"><a name="l09328"></a><span class="lineno"> 9328</span>&#160;        }</div>
<div class="line"><a name="l09329"></a><span class="lineno"> 9329</span>&#160;</div>
<div class="line"><a name="l09330"></a><span class="lineno"> 9330</span>&#160;      <span class="keywordflow">if</span> (pMIRIAMNode != NULL)</div>
<div class="line"><a name="l09331"></a><span class="lineno"> 9331</span>&#160;        {</div>
<div class="line"><a name="l09332"></a><span class="lineno"> 9332</span>&#160;          std::string metaid = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l09333"></a><span class="lineno"> 9333</span>&#160;</div>
<div class="line"><a name="l09334"></a><span class="lineno"> 9334</span>&#160;          <span class="keywordflow">if</span> (pSBMLObject-&gt;isSetMetaId())</div>
<div class="line"><a name="l09335"></a><span class="lineno"> 9335</span>&#160;            metaid = pSBMLObject-&gt;getMetaId();</div>
<div class="line"><a name="l09336"></a><span class="lineno"> 9336</span>&#160;</div>
<div class="line"><a name="l09337"></a><span class="lineno"> 9337</span>&#160;          XMLNode* node = <span class="keyword">const_cast&lt;</span>XMLNode*<span class="keyword">&gt;</span>(pMIRIAMNode);</div>
<div class="line"><a name="l09338"></a><span class="lineno"> 9338</span>&#160;</div>
<div class="line"><a name="l09339"></a><span class="lineno"> 9339</span>&#160;          <span class="comment">// BUG 1919: add all namespaces from the document, in case they will be used</span></div>
<div class="line"><a name="l09340"></a><span class="lineno"> 9340</span>&#160;          <span class="comment">// in the miriam element. (It is valid XML to declare a namespace, but not to</span></div>
<div class="line"><a name="l09341"></a><span class="lineno"> 9341</span>&#160;          <span class="comment">// use it, while on the other hand it is invalid to *not* define a namespace</span></div>
<div class="line"><a name="l09342"></a><span class="lineno"> 9342</span>&#160;          <span class="comment">// for a prefix).</span></div>
<div class="line"><a name="l09343"></a><span class="lineno"> 9343</span>&#160;          <span class="keywordflow">if</span> (pSBMLObject-&gt;getSBMLDocument() != NULL &amp;&amp;</div>
<div class="line"><a name="l09344"></a><span class="lineno"> 9344</span>&#160;              pSBMLObject-&gt;getSBMLDocument()-&gt;getSBMLNamespaces() != NULL &amp;&amp;</div>
<div class="line"><a name="l09345"></a><span class="lineno"> 9345</span>&#160;              pSBMLObject-&gt;getSBMLDocument()-&gt;getSBMLNamespaces()-&gt;getNamespaces() != NULL)</div>
<div class="line"><a name="l09346"></a><span class="lineno"> 9346</span>&#160;            {</div>
<div class="line"><a name="l09347"></a><span class="lineno"> 9347</span>&#160;              XMLNamespaces* <a class="code" href="../../df/d06/structNamespace.html#a2e35f8b01b0d81d67dd3f1183f51a8a8">ns</a> = pSBMLObject-&gt;getSBMLDocument()-&gt;getSBMLNamespaces()-&gt;getNamespaces();</div>
<div class="line"><a name="l09348"></a><span class="lineno"> 9348</span>&#160;</div>
<div class="line"><a name="l09349"></a><span class="lineno"> 9349</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ns-&gt;getNumNamespaces(); ++i)</div>
<div class="line"><a name="l09350"></a><span class="lineno"> 9350</span>&#160;                {</div>
<div class="line"><a name="l09351"></a><span class="lineno"> 9351</span>&#160;                  <span class="keyword">const</span> std::string prefix = ns-&gt;getPrefix(i);</div>
<div class="line"><a name="l09352"></a><span class="lineno"> 9352</span>&#160;</div>
<div class="line"><a name="l09353"></a><span class="lineno"> 9353</span>&#160;                  <span class="comment">// don&#39;t add the default ns</span></div>
<div class="line"><a name="l09354"></a><span class="lineno"> 9354</span>&#160;                  <span class="keywordflow">if</span> (prefix.empty())</div>
<div class="line"><a name="l09355"></a><span class="lineno"> 9355</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09356"></a><span class="lineno"> 9356</span>&#160;</div>
<div class="line"><a name="l09357"></a><span class="lineno"> 9357</span>&#160;                  <span class="comment">// If the prefix is already defined we do not need to add it.</span></div>
<div class="line"><a name="l09358"></a><span class="lineno"> 9358</span>&#160;                  <span class="keywordflow">if</span> (node-&gt;getNamespaceIndexByPrefix(ns-&gt;getPrefix(i)) != -1)</div>
<div class="line"><a name="l09359"></a><span class="lineno"> 9359</span>&#160;                    {</div>
<div class="line"><a name="l09360"></a><span class="lineno"> 9360</span>&#160;                      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09361"></a><span class="lineno"> 9361</span>&#160;                    }</div>
<div class="line"><a name="l09362"></a><span class="lineno"> 9362</span>&#160;</div>
<div class="line"><a name="l09363"></a><span class="lineno"> 9363</span>&#160;                  node-&gt;addNamespace(ns-&gt;getURI(i), ns-&gt;getPrefix(i));</div>
<div class="line"><a name="l09364"></a><span class="lineno"> 9364</span>&#160;                }</div>
<div class="line"><a name="l09365"></a><span class="lineno"> 9365</span>&#160;            }</div>
<div class="line"><a name="l09366"></a><span class="lineno"> 9366</span>&#160;</div>
<div class="line"><a name="l09367"></a><span class="lineno"> 9367</span>&#160;          std::string miriamString = XMLNode::convertXMLNodeToString(pMIRIAMNode);</div>
<div class="line"><a name="l09368"></a><span class="lineno"> 9368</span>&#160;          <a class="code" href="../../db/de4/classCRDFGraphConverter.html#ad59eb3ab2a47c6a2175bed80c9cc9ebc">CRDFGraphConverter::SBML2Copasi</a>(miriamString);</div>
<div class="line"><a name="l09369"></a><span class="lineno"> 9369</span>&#160;</div>
<div class="line"><a name="l09370"></a><span class="lineno"> 9370</span>&#160;          <span class="keywordflow">switch</span> (pSBMLObject-&gt;getTypeCode())</div>
<div class="line"><a name="l09371"></a><span class="lineno"> 9371</span>&#160;            {</div>
<div class="line"><a name="l09372"></a><span class="lineno"> 9372</span>&#160;              <span class="keywordflow">case</span> SBML_MODEL:</div>
<div class="line"><a name="l09373"></a><span class="lineno"> 9373</span>&#160;              <span class="keywordflow">case</span> SBML_COMPARTMENT:</div>
<div class="line"><a name="l09374"></a><span class="lineno"> 9374</span>&#160;              <span class="keywordflow">case</span> SBML_SPECIES:</div>
<div class="line"><a name="l09375"></a><span class="lineno"> 9375</span>&#160;              <span class="keywordflow">case</span> SBML_PARAMETER:</div>
<div class="line"><a name="l09376"></a><span class="lineno"> 9376</span>&#160;              {</div>
<div class="line"><a name="l09377"></a><span class="lineno"> 9377</span>&#160;                assert(dynamic_cast&lt; const Model * &gt;(pSBMLObject) != NULL ||</div>
<div class="line"><a name="l09378"></a><span class="lineno"> 9378</span>&#160;                       dynamic_cast&lt; const Compartment * &gt;(pSBMLObject) != NULL ||</div>
<div class="line"><a name="l09379"></a><span class="lineno"> 9379</span>&#160;                       dynamic_cast&lt; const Species * &gt;(pSBMLObject) != NULL ||</div>
<div class="line"><a name="l09380"></a><span class="lineno"> 9380</span>&#160;                       dynamic_cast&lt; const Parameter * &gt;(pSBMLObject) != NULL);</div>
<div class="line"><a name="l09381"></a><span class="lineno"> 9381</span>&#160;                assert(dynamic_cast&lt; CModelEntity * &gt;(pCOPASIObject) != NULL);</div>
<div class="line"><a name="l09382"></a><span class="lineno"> 9382</span>&#160;</div>
<div class="line"><a name="l09383"></a><span class="lineno"> 9383</span>&#160;                <a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a> * pEntity = <span class="keyword">static_cast&lt;</span> <a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a> * <span class="keyword">&gt;</span>(pCOPASIObject);</div>
<div class="line"><a name="l09384"></a><span class="lineno"> 9384</span>&#160;                pEntity-&gt;<a class="code" href="../../d8/dfc/classCAnnotation.html#a059e10f3aa72113fbace978b72a8a790">setMiriamAnnotation</a>(miriamString,</div>
<div class="line"><a name="l09385"></a><span class="lineno"> 9385</span>&#160;                                             pEntity-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a6ab0231058041dd42d002d8b9fa34780">getKey</a>(),</div>
<div class="line"><a name="l09386"></a><span class="lineno"> 9386</span>&#160;                                             metaid);</div>
<div class="line"><a name="l09387"></a><span class="lineno"> 9387</span>&#160;              }</div>
<div class="line"><a name="l09388"></a><span class="lineno"> 9388</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09389"></a><span class="lineno"> 9389</span>&#160;</div>
<div class="line"><a name="l09390"></a><span class="lineno"> 9390</span>&#160;              <span class="keywordflow">case</span> SBML_REACTION:</div>
<div class="line"><a name="l09391"></a><span class="lineno"> 9391</span>&#160;              {</div>
<div class="line"><a name="l09392"></a><span class="lineno"> 9392</span>&#160;                assert(dynamic_cast&lt;const Reaction*&gt;(pSBMLObject) != NULL);</div>
<div class="line"><a name="l09393"></a><span class="lineno"> 9393</span>&#160;                assert(dynamic_cast&lt;CReaction*&gt;(pCOPASIObject) != NULL);</div>
<div class="line"><a name="l09394"></a><span class="lineno"> 9394</span>&#160;</div>
<div class="line"><a name="l09395"></a><span class="lineno"> 9395</span>&#160;                <a class="code" href="../../d4/dcf/classCReaction.html">CReaction</a> * pReaction = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d4/dcf/classCReaction.html">CReaction</a>*<span class="keyword">&gt;</span>(pCOPASIObject);</div>
<div class="line"><a name="l09396"></a><span class="lineno"> 9396</span>&#160;                pReaction-&gt;<a class="code" href="../../d8/dfc/classCAnnotation.html#a059e10f3aa72113fbace978b72a8a790">setMiriamAnnotation</a>(miriamString, pReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#af3b437b3494d56d24aaa7c377fc95b8e">getKey</a>(), metaid);</div>
<div class="line"><a name="l09397"></a><span class="lineno"> 9397</span>&#160;              }</div>
<div class="line"><a name="l09398"></a><span class="lineno"> 9398</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09399"></a><span class="lineno"> 9399</span>&#160;</div>
<div class="line"><a name="l09400"></a><span class="lineno"> 9400</span>&#160;              <span class="keywordflow">case</span> SBML_FUNCTION_DEFINITION:</div>
<div class="line"><a name="l09401"></a><span class="lineno"> 9401</span>&#160;              {</div>
<div class="line"><a name="l09402"></a><span class="lineno"> 9402</span>&#160;                assert(dynamic_cast&lt;const FunctionDefinition*&gt;(pSBMLObject) != NULL);</div>
<div class="line"><a name="l09403"></a><span class="lineno"> 9403</span>&#160;                assert(dynamic_cast&lt;CFunction*&gt;(pCOPASIObject) != NULL);</div>
<div class="line"><a name="l09404"></a><span class="lineno"> 9404</span>&#160;</div>
<div class="line"><a name="l09405"></a><span class="lineno"> 9405</span>&#160;                <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a> * pFunction = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>*<span class="keyword">&gt;</span>(pCOPASIObject);</div>
<div class="line"><a name="l09406"></a><span class="lineno"> 9406</span>&#160;                pFunction-&gt;<a class="code" href="../../d8/dfc/classCAnnotation.html#a059e10f3aa72113fbace978b72a8a790">setMiriamAnnotation</a>(miriamString, pFunction-&gt;<a class="code" href="../../d9/d86/classCFunction.html#a72037844ade71b20b25fd22f5b4841f8">getKey</a>(), metaid);</div>
<div class="line"><a name="l09407"></a><span class="lineno"> 9407</span>&#160;              }</div>
<div class="line"><a name="l09408"></a><span class="lineno"> 9408</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09409"></a><span class="lineno"> 9409</span>&#160;</div>
<div class="line"><a name="l09410"></a><span class="lineno"> 9410</span>&#160;              <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l09411"></a><span class="lineno"> 9411</span>&#160;                result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09412"></a><span class="lineno"> 9412</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09413"></a><span class="lineno"> 9413</span>&#160;            }</div>
<div class="line"><a name="l09414"></a><span class="lineno"> 9414</span>&#160;        }</div>
<div class="line"><a name="l09415"></a><span class="lineno"> 9415</span>&#160;    }</div>
<div class="line"><a name="l09416"></a><span class="lineno"> 9416</span>&#160;</div>
<div class="line"><a name="l09417"></a><span class="lineno"> 9417</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l09418"></a><span class="lineno"> 9418</span>&#160;}</div>
<div class="ttc" id="classCModelEntity_html"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html">CModelEntity</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00039">CModelValue.h:39</a></div></div>
<div class="ttc" id="classCReaction_html_af3b437b3494d56d24aaa7c377fc95b8e"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#af3b437b3494d56d24aaa7c377fc95b8e">CReaction::getKey</a></div><div class="ttdeci">virtual const std::string &amp; getKey() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00190">CReaction.cpp:190</a></div></div>
<div class="ttc" id="classCAnnotation_html_a059e10f3aa72113fbace978b72a8a790"><div class="ttname"><a href="../../d8/dfc/classCAnnotation.html#a059e10f3aa72113fbace978b72a8a790">CAnnotation::setMiriamAnnotation</a></div><div class="ttdeci">void setMiriamAnnotation(const std::string &amp;miriamAnnotation, const std::string &amp;newId, const std::string &amp;oldId)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/CAnnotation_8cpp_source.html#l00108">CAnnotation.cpp:108</a></div></div>
<div class="ttc" id="classCFunction_html_a72037844ade71b20b25fd22f5b4841f8"><div class="ttname"><a href="../../d9/d86/classCFunction.html#a72037844ade71b20b25fd22f5b4841f8">CFunction::getKey</a></div><div class="ttdeci">const std::string &amp; getKey() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00058">CFunction.cpp:58</a></div></div>
<div class="ttc" id="classCModelEntity_html_a6ab0231058041dd42d002d8b9fa34780"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a6ab0231058041dd42d002d8b9fa34780">CModelEntity::getKey</a></div><div class="ttdeci">virtual const std::string &amp; getKey() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00131">CModelValue.cpp:131</a></div></div>
<div class="ttc" id="structNamespace_html_a2e35f8b01b0d81d67dd3f1183f51a8a8"><div class="ttname"><a href="../../df/d06/structNamespace.html#a2e35f8b01b0d81d67dd3f1183f51a8a8">Namespace::ns</a></div><div class="ttdeci">const char * ns</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6c/stdsoap2_8h_source.html#l01263">stdsoap2.h:1263</a></div></div>
<div class="ttc" id="classCRDFGraphConverter_html_ad59eb3ab2a47c6a2175bed80c9cc9ebc"><div class="ttname"><a href="../../db/de4/classCRDFGraphConverter.html#ad59eb3ab2a47c6a2175bed80c9cc9ebc">CRDFGraphConverter::SBML2Copasi</a></div><div class="ttdeci">static bool SBML2Copasi(std::string &amp;XML)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd3/CRDFGraphConverter_8cpp_source.html#l00119">CRDFGraphConverter.cpp:119</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a4588fba30554cfe8dbe394a6ad6685eb"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">SBMLImporter::mImportCOPASIMIRIAM</a></div><div class="ttdeci">bool mImportCOPASIMIRIAM</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00085">SBMLImporter.h:85</a></div></div>
<div class="ttc" id="classCFunction_html"><div class="ttname"><a href="../../d9/d86/classCFunction.html">CFunction</a></div><div class="ttdoc">The class for handling a chemical kinetic function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df5/CFunction_8h_source.html#l00029">CFunction.h:29</a></div></div>
<div class="ttc" id="classCReaction_html"><div class="ttname"><a href="../../d4/dcf/classCReaction.html">CReaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc3/CReaction_8h_source.html#l00044">CReaction.h:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2b5d21dd508be56977f4d2c642d89fa5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::importNotes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/dfc/classCAnnotation.html">CAnnotation</a> *&#160;</td>
          <td class="paramname"><em>pAnno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SBase *&#160;</td>
          <td class="paramname"><em>pSBase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method reads the notes from an arbitrate SBase object and set them on the given <a class="el" href="../../d8/dfc/classCAnnotation.html">CAnnotation</a> instance. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l10586">10586</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d8/dfc/classCAnnotation.html#acd303144f64720ce92a3b76128fd1192">CAnnotation::addUnsupportedAnnotation()</a>, and <a class="el" href="../../d8/dfc/classCAnnotation.html#a2c62b97a06b5ad8c441a91dd611adbb4">CAnnotation::setNotes()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a879076815531affcbd0768f405f76475">createCCompartmentFromCompartment()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a544798333f64b9a371d9add67076172d">createCFunctionFromFunctionDefinition()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6e5e86bfa4b63886caa4daf1800a7abd">createCMetabFromSpecies()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent()</a>.</p>
<div class="fragment"><div class="line"><a name="l10587"></a><span class="lineno">10587</span>&#160;{</div>
<div class="line"><a name="l10588"></a><span class="lineno">10588</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10589"></a><span class="lineno">10589</span>&#160;</div>
<div class="line"><a name="l10590"></a><span class="lineno">10590</span>&#160;  <span class="keywordflow">if</span> (pAnno == NULL || pSBase == NULL)</div>
<div class="line"><a name="l10591"></a><span class="lineno">10591</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l10592"></a><span class="lineno">10592</span>&#160;</div>
<div class="line"><a name="l10593"></a><span class="lineno">10593</span>&#160;  <span class="keywordflow">if</span> (pSBase-&gt;isSetNotes())</div>
<div class="line"><a name="l10594"></a><span class="lineno">10594</span>&#160;    {</div>
<div class="line"><a name="l10595"></a><span class="lineno">10595</span>&#160;</div>
<div class="line"><a name="l10596"></a><span class="lineno">10596</span>&#160;      std::string s = <span class="keyword">const_cast&lt;</span>SBase*<span class="keyword">&gt;</span>(pSBase)-&gt;getNotesString();</div>
<div class="line"><a name="l10597"></a><span class="lineno">10597</span>&#160;      <span class="keywordtype">size_t</span> pos = s.find_first_not_of(<span class="stringliteral">&quot; \n\t\r&quot;</span>);</div>
<div class="line"><a name="l10598"></a><span class="lineno">10598</span>&#160;</div>
<div class="line"><a name="l10599"></a><span class="lineno">10599</span>&#160;      <span class="keywordflow">if</span> (pos != std::string::npos)</div>
<div class="line"><a name="l10600"></a><span class="lineno">10600</span>&#160;        {</div>
<div class="line"><a name="l10601"></a><span class="lineno">10601</span>&#160;          <span class="comment">// the getNotesString method from libsbml seems to add the</span></div>
<div class="line"><a name="l10602"></a><span class="lineno">10602</span>&#160;          <span class="comment">// &lt;notes&gt; tag to the string as well which is not OK, so we</span></div>
<div class="line"><a name="l10603"></a><span class="lineno">10603</span>&#160;          <span class="comment">// have to remove it again.</span></div>
<div class="line"><a name="l10604"></a><span class="lineno">10604</span>&#160;          <span class="keywordflow">if</span> (s.substr(pos, 6) == <span class="stringliteral">&quot;&lt;notes&quot;</span>)</div>
<div class="line"><a name="l10605"></a><span class="lineno">10605</span>&#160;            {</div>
<div class="line"><a name="l10606"></a><span class="lineno">10606</span>&#160;              <span class="comment">// find the closing bracket</span></div>
<div class="line"><a name="l10607"></a><span class="lineno">10607</span>&#160;              <span class="keywordtype">size_t</span> pos2 = s.find(<span class="stringliteral">&quot;&gt;&quot;</span>, pos);</div>
<div class="line"><a name="l10608"></a><span class="lineno">10608</span>&#160;              assert(pos2 != std::string::npos);</div>
<div class="line"><a name="l10609"></a><span class="lineno">10609</span>&#160;</div>
<div class="line"><a name="l10610"></a><span class="lineno">10610</span>&#160;              <span class="keywordflow">if</span> (pos2 != std::string::npos &amp;&amp; pos2 != (s.length() - 1))</div>
<div class="line"><a name="l10611"></a><span class="lineno">10611</span>&#160;                {</div>
<div class="line"><a name="l10612"></a><span class="lineno">10612</span>&#160;                  s = s.substr(pos2 + 1);</div>
<div class="line"><a name="l10613"></a><span class="lineno">10613</span>&#160;                }</div>
<div class="line"><a name="l10614"></a><span class="lineno">10614</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l10615"></a><span class="lineno">10615</span>&#160;                {</div>
<div class="line"><a name="l10616"></a><span class="lineno">10616</span>&#160;                  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10617"></a><span class="lineno">10617</span>&#160;                }</div>
<div class="line"><a name="l10618"></a><span class="lineno">10618</span>&#160;</div>
<div class="line"><a name="l10619"></a><span class="lineno">10619</span>&#160;              <span class="comment">// also remove the closing &lt;/notes&gt; tag</span></div>
<div class="line"><a name="l10620"></a><span class="lineno">10620</span>&#160;              pos = s.rfind(<span class="stringliteral">&quot;&lt;/notes&gt;&quot;</span>);</div>
<div class="line"><a name="l10621"></a><span class="lineno">10621</span>&#160;              assert(pos != std::string::npos);</div>
<div class="line"><a name="l10622"></a><span class="lineno">10622</span>&#160;</div>
<div class="line"><a name="l10623"></a><span class="lineno">10623</span>&#160;              <span class="keywordflow">if</span> (pos != std::string::npos)</div>
<div class="line"><a name="l10624"></a><span class="lineno">10624</span>&#160;                {</div>
<div class="line"><a name="l10625"></a><span class="lineno">10625</span>&#160;                  s = s.substr(0, pos);</div>
<div class="line"><a name="l10626"></a><span class="lineno">10626</span>&#160;                }</div>
<div class="line"><a name="l10627"></a><span class="lineno">10627</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l10628"></a><span class="lineno">10628</span>&#160;                {</div>
<div class="line"><a name="l10629"></a><span class="lineno">10629</span>&#160;                  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10630"></a><span class="lineno">10630</span>&#160;                }</div>
<div class="line"><a name="l10631"></a><span class="lineno">10631</span>&#160;            }</div>
<div class="line"><a name="l10632"></a><span class="lineno">10632</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s.substr(pos, 8) == <span class="stringliteral">&quot;&lt;notes/&gt;&quot;</span>)</div>
<div class="line"><a name="l10633"></a><span class="lineno">10633</span>&#160;            {</div>
<div class="line"><a name="l10634"></a><span class="lineno">10634</span>&#160;              <span class="comment">// the notes element is empty</span></div>
<div class="line"><a name="l10635"></a><span class="lineno">10635</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10636"></a><span class="lineno">10636</span>&#160;            }</div>
<div class="line"><a name="l10637"></a><span class="lineno">10637</span>&#160;        }</div>
<div class="line"><a name="l10638"></a><span class="lineno">10638</span>&#160;</div>
<div class="line"><a name="l10639"></a><span class="lineno">10639</span>&#160;      pAnno-&gt;<a class="code" href="../../d8/dfc/classCAnnotation.html#a2c62b97a06b5ad8c441a91dd611adbb4">setNotes</a>(s);</div>
<div class="line"><a name="l10640"></a><span class="lineno">10640</span>&#160;    }</div>
<div class="line"><a name="l10641"></a><span class="lineno">10641</span>&#160;</div>
<div class="line"><a name="l10642"></a><span class="lineno">10642</span>&#160;  <span class="keywordflow">if</span> (!pSBase-&gt;isSetAnnotation())</div>
<div class="line"><a name="l10643"></a><span class="lineno">10643</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l10644"></a><span class="lineno">10644</span>&#160;</div>
<div class="line"><a name="l10645"></a><span class="lineno">10645</span>&#160;  <span class="keyword">const</span> XMLNode* node = <span class="keyword">const_cast&lt;</span>SBase*<span class="keyword">&gt;</span>(pSBase)-&gt;getAnnotation();</div>
<div class="line"><a name="l10646"></a><span class="lineno">10646</span>&#160;</div>
<div class="line"><a name="l10647"></a><span class="lineno">10647</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; node-&gt;getNumChildren(); ++i)</div>
<div class="line"><a name="l10648"></a><span class="lineno">10648</span>&#160;    {</div>
<div class="line"><a name="l10649"></a><span class="lineno">10649</span>&#160;      <span class="keyword">const</span> XMLNode&amp; current = node-&gt;getChild(i);</div>
<div class="line"><a name="l10650"></a><span class="lineno">10650</span>&#160;</div>
<div class="line"><a name="l10651"></a><span class="lineno">10651</span>&#160;      <span class="comment">// skip over all miriam and RDF stuff as that is handled elsewhere</span></div>
<div class="line"><a name="l10652"></a><span class="lineno">10652</span>&#160;      <span class="keywordflow">if</span> (current.getName() == <span class="stringliteral">&quot;RDF&quot;</span> || current.getName() == <span class="stringliteral">&quot;COPASI&quot;</span>)</div>
<div class="line"><a name="l10653"></a><span class="lineno">10653</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10654"></a><span class="lineno">10654</span>&#160;</div>
<div class="line"><a name="l10655"></a><span class="lineno">10655</span>&#160;      <span class="keyword">const</span> std::string &amp; prefix = current.getPrefix();</div>
<div class="line"><a name="l10656"></a><span class="lineno">10656</span>&#160;      std::string nsUri = current.getNamespaceURI(prefix);</div>
<div class="line"><a name="l10657"></a><span class="lineno">10657</span>&#160;</div>
<div class="line"><a name="l10658"></a><span class="lineno">10658</span>&#160;      <span class="keywordflow">if</span> (nsUri.empty() &amp;&amp; !prefix.empty())</div>
<div class="line"><a name="l10659"></a><span class="lineno">10659</span>&#160;        {</div>
<div class="line"><a name="l10660"></a><span class="lineno">10660</span>&#160;          <span class="comment">// this is bad, libSBML really should let me know where the namespace is defined</span></div>
<div class="line"><a name="l10661"></a><span class="lineno">10661</span>&#160;          <span class="comment">// it could be defined anywhere upwards of this xml element</span></div>
<div class="line"><a name="l10662"></a><span class="lineno">10662</span>&#160;          nsUri = node-&gt;getNamespaceURI(prefix);</div>
<div class="line"><a name="l10663"></a><span class="lineno">10663</span>&#160;</div>
<div class="line"><a name="l10664"></a><span class="lineno">10664</span>&#160;          <span class="keywordflow">if</span> (nsUri.empty() &amp;&amp; pSBase-&gt;getSBMLDocument() != NULL)</div>
<div class="line"><a name="l10665"></a><span class="lineno">10665</span>&#160;            nsUri = pSBase-&gt;getSBMLDocument()-&gt;getSBMLNamespaces()-&gt;getNamespaces()-&gt;getURI(prefix);</div>
<div class="line"><a name="l10666"></a><span class="lineno">10666</span>&#160;</div>
<div class="line"><a name="l10667"></a><span class="lineno">10667</span>&#160;          <span class="keywordflow">if</span> (!nsUri.empty())</div>
<div class="line"><a name="l10668"></a><span class="lineno">10668</span>&#160;            {</div>
<div class="line"><a name="l10669"></a><span class="lineno">10669</span>&#160;              <span class="comment">// we need to store the prefix on the element, as the COPASI object structure</span></div>
<div class="line"><a name="l10670"></a><span class="lineno">10670</span>&#160;              <span class="comment">// does not support the annotation without prefix</span></div>
<div class="line"><a name="l10671"></a><span class="lineno">10671</span>&#160;              <span class="keyword">const_cast&lt;</span>XMLNode&amp;<span class="keyword">&gt;</span>(current).addNamespace(nsUri, prefix);</div>
<div class="line"><a name="l10672"></a><span class="lineno">10672</span>&#160;            }</div>
<div class="line"><a name="l10673"></a><span class="lineno">10673</span>&#160;        }</div>
<div class="line"><a name="l10674"></a><span class="lineno">10674</span>&#160;</div>
<div class="line"><a name="l10675"></a><span class="lineno">10675</span>&#160;      pAnno-&gt;<a class="code" href="../../d8/dfc/classCAnnotation.html#acd303144f64720ce92a3b76128fd1192">addUnsupportedAnnotation</a>(nsUri, current.toXMLString());</div>
<div class="line"><a name="l10676"></a><span class="lineno">10676</span>&#160;    }</div>
<div class="line"><a name="l10677"></a><span class="lineno">10677</span>&#160;</div>
<div class="line"><a name="l10678"></a><span class="lineno">10678</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l10679"></a><span class="lineno">10679</span>&#160;}</div>
<div class="ttc" id="classCAnnotation_html_a2c62b97a06b5ad8c441a91dd611adbb4"><div class="ttname"><a href="../../d8/dfc/classCAnnotation.html#a2c62b97a06b5ad8c441a91dd611adbb4">CAnnotation::setNotes</a></div><div class="ttdeci">void setNotes(const std::string &amp;notes)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/CAnnotation_8cpp_source.html#l00120">CAnnotation.cpp:120</a></div></div>
<div class="ttc" id="classCAnnotation_html_acd303144f64720ce92a3b76128fd1192"><div class="ttname"><a href="../../d8/dfc/classCAnnotation.html#acd303144f64720ce92a3b76128fd1192">CAnnotation::addUnsupportedAnnotation</a></div><div class="ttdeci">bool addUnsupportedAnnotation(const std::string &amp;name, const std::string &amp;xml)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9e/CAnnotation_8cpp_source.html#l00211">CAnnotation.cpp:211</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6a5f472d8d3c86bee75ca3ae677877c3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::importRule </td>
          <td>(</td>
          <td class="paramtype">const Rule *&#160;</td>
          <td class="paramname"><em>rule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78a">CModelEntity::Status</a>&#160;</td>
          <td class="paramname"><em>ruleType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Imports the given RateRule if COPASI supports this kind of RateRule, otherwise a warning is created. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06401">6401</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a54e987b86e2c598008f5013b16eacc35">importRuleForModelEntity()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">mOriginalLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#ada0c2024af8f12fbef9c77ad4587fd68">importSBMLRule()</a>.</p>
<div class="fragment"><div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;{</div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;  std::string sbmlId;</div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;  <span class="keyword">const</span> AssignmentRule* pARule = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>AssignmentRule*<span class="keyword">&gt;</span>(rule);</div>
<div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;</div>
<div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;  <span class="keywordflow">if</span> (pARule)</div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;    {</div>
<div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;      sbmlId = pARule-&gt;getVariable();</div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;    }</div>
<div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;    {</div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;      <span class="keyword">const</span> RateRule* pRRule = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>RateRule*<span class="keyword">&gt;</span>(rule);</div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;</div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;      <span class="keywordflow">if</span> (pRRule)</div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;        {</div>
<div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;          sbmlId = pRRule-&gt;getVariable();</div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;        }</div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;        {</div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;          <span class="comment">// should never happen</span></div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;        }</div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;    }</div>
<div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;</div>
<div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;  <span class="comment">// if the id occurs in mSBMLSpeciesReferenceIds, we have an assignment to a species reference which is not supported</span></div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2 &amp;&amp; this-&gt;mSBMLSpeciesReferenceIds.find(sbmlId) != this-&gt;mSBMLSpeciesReferenceIds.end())</div>
<div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;    {</div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;      <span class="comment">// we can&#39;t import rate rules on species references</span></div>
<div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;      <span class="keywordflow">if</span> (pARule == NULL)</div>
<div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;        {</div>
<div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;          this-&gt;mRateRuleForSpeciesReferenceIgnored = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;        }</div>
<div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;</div>
<div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;      <span class="comment">// starting with sbml level 3 this could actually be an initial assignment to</span></div>
<div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;      <span class="comment">// a species reference which we can&#39;t store in COPASI</span></div>
<div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;      <span class="comment">// So we treat this the same way as the stoichiometryMath in SBML level 2</span></div>
<div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;</div>
<div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;      <span class="comment">// find the chemical equation element</span></div>
<div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;      std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator it = copasi2sbmlmap.begin(), endit = copasi2sbmlmap.end();</div>
<div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;</div>
<div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;      <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;        {</div>
<div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;          <span class="keywordflow">if</span> (it-&gt;second-&gt;getId() == sbmlId)</div>
<div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;            {</div>
<div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;            }</div>
<div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;</div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;          ++it;</div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;        }</div>
<div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;</div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;      assert(it != endit);</div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;      <a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* pChemEqElement = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>*<span class="keyword">&gt;</span>(it-&gt;first);</div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;</div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;      assert(rule-&gt;getMath() != NULL);</div>
<div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;</div>
<div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2 &amp;&amp;  pChemEqElement != NULL &amp;&amp; rule-&gt;getMath() != NULL)</div>
<div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;        {</div>
<div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;          <span class="comment">// store the expression for the stoichiometry in the stoichiometric expression map</span></div>
<div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;          <span class="comment">// this has been tested and should work</span></div>
<div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">mStoichiometricExpressionMap</a>.insert(std::make_pair(rule-&gt;getMath(), pChemEqElement));</div>
<div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;          <span class="comment">// issue a warning that stoichiometries that change over time are not supported</span></div>
<div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 101, sbmlId.c_str());</div>
<div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;</div>
<div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;        }</div>
<div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;    }</div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;</div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;  <span class="comment">// find out to what kind of object the id belongs</span></div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;  SBMLTypeCode_t type = SBML_UNKNOWN;</div>
<div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;  <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;  Compartment* pC;</div>
<div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;  Species* pS;</div>
<div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;  Parameter* pP;</div>
<div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;  <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pObject = NULL;</div>
<div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;  std::map&lt;CCopasiObject*, SBase*&gt;::iterator it = copasi2sbmlmap.begin();</div>
<div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;  std::map&lt;CCopasiObject*, SBase*&gt;::iterator endit = copasi2sbmlmap.end();</div>
<div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;</div>
<div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;  <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;    {</div>
<div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;      <span class="keywordflow">switch</span> (it-&gt;second-&gt;getTypeCode())</div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;        {</div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;          <span class="keywordflow">case</span> SBML_COMPARTMENT:</div>
<div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;            pC = <span class="keyword">dynamic_cast&lt;</span>Compartment*<span class="keyword">&gt;</span>(it-&gt;second);</div>
<div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;</div>
<div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;            <span class="keywordflow">if</span> (pC-&gt;getId() == sbmlId)</div>
<div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;              {</div>
<div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;                <span class="comment">// On import we convert L1 files to L2V1 files to simplify things.</span></div>
<div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;                <span class="comment">// This means that suddenly all parameters are set to constant by libsbml</span></div>
<div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;                <span class="comment">// since the constant flag did not exist prior to L2</span></div>
<div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;                <span class="comment">// If we find a rule on a constant object, this is only an error</span></div>
<div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;                <span class="comment">// if the file is not a level 1 file</span></div>
<div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">mOriginalLevel</a> &gt; 1 &amp;&amp; pC-&gt;getConstant())</div>
<div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;                  {</div>
<div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;                    <span class="keywordflow">if</span> (ruleType == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>)</div>
<div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;                      {</div>
<div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 34 , <span class="stringliteral">&quot;AssignmentRule&quot;</span>, <span class="stringliteral">&quot;Compartment&quot;</span>, sbmlId.c_str());</div>
<div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;                      }</div>
<div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ruleType == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a>)</div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;                      {</div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 34 , <span class="stringliteral">&quot;RateRule&quot;</span>, <span class="stringliteral">&quot;Compartment&quot;</span>, sbmlId.c_str());</div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;                      }</div>
<div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;                      {</div>
<div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;                        <span class="comment">// should never happen</span></div>
<div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;                        <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;                      }</div>
<div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;                  }</div>
<div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;</div>
<div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;                type = SBML_COMPARTMENT;</div>
<div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;                pObject = it-&gt;first;</div>
<div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;                found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;              }</div>
<div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;</div>
<div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;</div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;          <span class="keywordflow">case</span> SBML_SPECIES:</div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;            pS = <span class="keyword">dynamic_cast&lt;</span>Species*<span class="keyword">&gt;</span>(it-&gt;second);</div>
<div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;</div>
<div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;            <span class="keywordflow">if</span> (pS-&gt;getId() == sbmlId)</div>
<div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;              {</div>
<div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;                <span class="comment">// make sure the species is not declared constant</span></div>
<div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;                <span class="comment">// On import we convert L1 files to L2V1 files to simplify things.</span></div>
<div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;                <span class="comment">// This means that suddenly all parameters are set to constant by libsbml</span></div>
<div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;                <span class="comment">// since the constant flag did not exist prior to L2</span></div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;                <span class="comment">// If we find a rule on a constant object, this is only an error</span></div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;                <span class="comment">// if the file is not a level 1 file</span></div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">mOriginalLevel</a> &gt; 1 &amp;&amp; pS-&gt;getConstant())</div>
<div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;                  {</div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;                    <span class="keywordflow">if</span> (ruleType == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>)</div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;                      {</div>
<div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 34 , <span class="stringliteral">&quot;AssignmentRule&quot;</span>, <span class="stringliteral">&quot;Species&quot;</span>, sbmlId.c_str());</div>
<div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;                      }</div>
<div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ruleType == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a>)</div>
<div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;                      {</div>
<div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 34 , <span class="stringliteral">&quot;RateRule&quot;</span>, <span class="stringliteral">&quot;Species&quot;</span>, sbmlId.c_str());</div>
<div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;                      }</div>
<div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;                      {</div>
<div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;                        <span class="comment">// should never happen</span></div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;                        <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;                      }</div>
<div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;                  }</div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;</div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;                type = SBML_SPECIES;</div>
<div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;                pObject = it-&gt;first;</div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;                found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;              }</div>
<div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;</div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;</div>
<div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;          <span class="keywordflow">case</span> SBML_PARAMETER:</div>
<div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;            pP = <span class="keyword">dynamic_cast&lt;</span>Parameter*<span class="keyword">&gt;</span>(it-&gt;second);</div>
<div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;</div>
<div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;            <span class="keywordflow">if</span> (pP-&gt;getId() == sbmlId)</div>
<div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;              {</div>
<div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;                <span class="comment">// make sure the parameter is not declared constant</span></div>
<div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;                <span class="comment">// On import we convert L1 files to L2V1 files to simplify things.</span></div>
<div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;                <span class="comment">// This means that suddenly all parameters are set to constant by libsbml</span></div>
<div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;                <span class="comment">// since the constant flag did not exist prior to L2</span></div>
<div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;                <span class="comment">// If we find a rule on a constant object, this is only an error</span></div>
<div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;                <span class="comment">// if the file is not a level 1 file</span></div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;                <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">mOriginalLevel</a> &gt; 1 &amp;&amp; pP-&gt;getConstant())</div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;</div>
<div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;                  {</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;                    <span class="keywordflow">if</span> (ruleType == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>)</div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;                      {</div>
<div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 34 , <span class="stringliteral">&quot;AssignmentRule&quot;</span>, <span class="stringliteral">&quot;Parameter&quot;</span>, sbmlId.c_str());</div>
<div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;                      }</div>
<div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ruleType == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a>)</div>
<div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;                      {</div>
<div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 34 , <span class="stringliteral">&quot;RateRule&quot;</span>, <span class="stringliteral">&quot;Parameter&quot;</span>, sbmlId.c_str());</div>
<div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;                      }</div>
<div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;                      {</div>
<div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;                        <span class="comment">// should never happen</span></div>
<div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;                        <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;                      }</div>
<div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;                  }</div>
<div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;</div>
<div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;                type = SBML_PARAMETER;</div>
<div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;                pObject = it-&gt;first;</div>
<div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;                found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;              }</div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;</div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;</div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;        }</div>
<div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;</div>
<div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;      <span class="keywordflow">if</span> (found) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;</div>
<div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;      ++it;</div>
<div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;    }</div>
<div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;</div>
<div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;  <span class="keywordflow">if</span> (found)</div>
<div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;    {</div>
<div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;      <a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a>* pME;</div>
<div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;</div>
<div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;      <span class="keywordflow">switch</span> (type)</div>
<div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;        {</div>
<div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;          <span class="keywordflow">case</span> SBML_PARAMETER:</div>
<div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;          <span class="keywordflow">case</span> SBML_SPECIES:</div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;          <span class="keywordflow">case</span> SBML_COMPARTMENT:</div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;            <span class="comment">// check if it really is a global parameter, a metabolite or a</span></div>
<div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;            <span class="comment">// compartment</span></div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;            pME = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d7/dec/classCModelValue.html">CModelValue</a>*<span class="keyword">&gt;</span>(pObject);</div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;</div>
<div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;            <span class="comment">// activate the next two lines if rules for compartments and</span></div>
<div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;            <span class="comment">// metabolites should be imported.</span></div>
<div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;            <span class="keywordflow">if</span> (!pME) pME = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d4/dd4/classCCompartment.html">CCompartment</a>*<span class="keyword">&gt;</span>(pObject);</div>
<div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;</div>
<div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;            <span class="keywordflow">if</span> (!pME) pME = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>*<span class="keyword">&gt;</span>(pObject);</div>
<div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;</div>
<div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;            <span class="keywordflow">if</span> (!pME)</div>
<div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;              {</div>
<div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;                <span class="keywordflow">if</span> (ruleType == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>)</div>
<div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;                  {</div>
<div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;                    <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 33, <span class="stringliteral">&quot;AssigmentRule&quot;</span>, sbmlId.c_str());</div>
<div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;                  }</div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ruleType == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a>)</div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;                  {</div>
<div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;                    <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 33, <span class="stringliteral">&quot;RateRule&quot;</span>, sbmlId.c_str());</div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;                  }</div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;                  {</div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;                    <span class="comment">// should never happen</span></div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;                    <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;                  }</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;              }</div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;</div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;            this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a54e987b86e2c598008f5013b16eacc35">importRuleForModelEntity</a>(rule, pME, ruleType, copasi2sbmlmap, pSBMLModel);</div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;</div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;            <span class="comment">// now that compartments, metabolites and global parameters are</span></div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;            <span class="comment">// supported, everything else should produce a fatal error.</span></div>
<div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;            <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;        }</div>
<div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;    }</div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;    {</div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;      <span class="comment">// issue a warning</span></div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;      <span class="keywordflow">if</span> (ruleType == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>)</div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;        {</div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 32, <span class="stringliteral">&quot;AssignmentRule&quot;</span> , sbmlId.c_str());</div>
<div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;        }</div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ruleType == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a>)</div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;        {</div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 32, <span class="stringliteral">&quot;RateRule&quot;</span> , sbmlId.c_str());</div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;        }</div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;        {</div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;          <span class="comment">// should never happen</span></div>
<div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;        }</div>
<div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;    }</div>
<div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;}</div>
<div class="ttc" id="classCChemEqElement_html"><div class="ttname"><a href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8d/CChemEqElement_8h_source.html#l00041">CChemEqElement.h:41</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classCModelEntity_html"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html">CModelEntity</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00039">CModelValue.h:39</a></div></div>
<div class="ttc" id="classCModelValue_html"><div class="ttname"><a href="../../d7/dec/classCModelValue.html">CModelValue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00419">CModelValue.h:419</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="classCCopasiObject_html"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9f/CCopasiObject_8h_source.html#l00216">CCopasiObject.h:216</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00056">CModelValue.h:56</a></div></div>
<div class="ttc" id="classCMetab_html"><div class="ttname"><a href="../../dc/d44/classCMetab.html">CMetab</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df5/CMetab_8h_source.html#l00178">CMetab.h:178</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8ff64c7fedb1863cac4572f246ca65f7"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8ff64c7fedb1863cac4572f246ca65f7">SBMLImporter::mStoichiometricExpressionMap</a></div><div class="ttdeci">std::map&lt; const ASTNode *, CChemEqElement * &gt; mStoichiometricExpressionMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00081">SBMLImporter.h:81</a></div></div>
<div class="ttc" id="classCCompartment_html"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html">CCompartment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d59/CCompartment_8h_source.html#l00037">CCompartment.h:37</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00060">CModelValue.h:60</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a54e987b86e2c598008f5013b16eacc35"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a54e987b86e2c598008f5013b16eacc35">SBMLImporter::importRuleForModelEntity</a></div><div class="ttdeci">void importRuleForModelEntity(const Rule *rule, CModelEntity *pMV, CModelEntity::Status ruleType, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Model *pSBMLModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06699">SBMLImporter.cpp:6699</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a65cdc7be5200fff34240bcb2200fe558"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">SBMLImporter::mOriginalLevel</a></div><div class="ttdeci">unsigned int mOriginalLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00064">SBMLImporter.h:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a54e987b86e2c598008f5013b16eacc35"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::importRuleForModelEntity </td>
          <td>(</td>
          <td class="paramtype">const Rule *&#160;</td>
          <td class="paramname"><em>rule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/da0/classCModelEntity.html">CModelEntity</a> *&#160;</td>
          <td class="paramname"><em>pMV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78a">CModelEntity::Status</a>&#160;</td>
          <td class="paramname"><em>ruleType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Imports the given AssignmentRule which is for a global parameter. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06699">6699</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6d9048bf3ddc66ce0304345a54f6fa2f">checkRuleMathConsistency()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a72ccaf784cfdbf62a852dd1a3d8ad6c7">divideByObject()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">findIdInASTTree()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a>, <a class="el" href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">CCompartment::getDimensionality()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a766cc9fa2fed8206e22e022932a60eee">CModelEntity::getExpressionPtr()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">CModelEntity::getStatus()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a9ebbeda13eca4f795ca4463a444548fa">CModelEntity::getValueReference()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a52c2950af346adf10ef36bcf38b38db5">CModelEntity::setExpressionPtr()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a93c76181d05118aa7a77d33687b1b775">CModelEntity::setStatus()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">CEvaluationTree::setTree()</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6a5f472d8d3c86bee75ca3ae677877c3">importRule()</a>.</p>
<div class="fragment"><div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;{</div>
<div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;</div>
<div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;  <span class="keywordflow">if</span> (!rule-&gt;isSetMath())</div>
<div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;    {</div>
<div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;      std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator pos = copasi2sbmlmap.find(pME);</div>
<div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;      assert(pos != copasi2sbmlmap.end());</div>
<div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;      std::string <span class="keywordtype">id</span> = <span class="stringliteral">&quot;@&quot;</span>;</div>
<div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;</div>
<div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;      <span class="keywordflow">if</span> (pos != copasi2sbmlmap.end())</div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;        {</div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;          <span class="keywordtype">id</span> = pos-&gt;second-&gt;getId();</div>
<div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;        }</div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;</div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 58 , <span class="stringliteral">&quot;rule&quot;</span>, <span class="keywordtype">id</span>.c_str());</div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;    }</div>
<div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;</div>
<div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;  <span class="comment">// check for references to species references in the expression because we don&#39;t support them yet</span></div>
<div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a>(rule-&gt;getMath(), this-&gt;mSBMLSpeciesReferenceIds).empty())</div>
<div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;    {</div>
<div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 95);</div>
<div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;    }</div>
<div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;</div>
<div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;  <span class="keywordflow">if</span> (rule-&gt;getTypeCode() == SBML_ASSIGNMENT_RULE)</div>
<div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;    {</div>
<div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a6d9048bf3ddc66ce0304345a54f6fa2f">checkRuleMathConsistency</a>(rule, copasi2sbmlmap);</div>
<div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;    }</div>
<div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;</div>
<div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;  <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> tmpNode(*rule-&gt;getMath());</div>
<div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;  <span class="comment">// replace all the nodes that represent species with the</span></div>
<div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;  <span class="comment">// hasOnlySubstanceUnits flag set with the node multiplied by the volume</span></div>
<div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;  <span class="comment">//replaceSubstanceOnlySpeciesNodes(&amp;tmpNode, mSubstanceOnlySpecies);</span></div>
<div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;</div>
<div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode</a>(&amp;tmpNode, pSBMLModel, copasi2sbmlmap);</div>
<div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;  <span class="comment">// replace the object names</span></div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames</a>(&amp;tmpNode, copasi2sbmlmap);</div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;  <span class="comment">// now we convert the node to a CEvaluationNode</span></div>
<div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;  <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>* pExpression = <span class="keyword">new</span> <a class="code" href="../../dc/dbd/classCExpression.html">CExpression</a>;</div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;  pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">setTree</a>(tmpNode);</div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;</div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;  <span class="keywordflow">if</span> (dynamic_cast&lt;CMetab*&gt;(pME) != NULL)</div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;    {</div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;      std::map&lt;CCopasiObject*, SBase*&gt;::iterator pos = copasi2sbmlmap.find(pME);</div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;      assert(pos != copasi2sbmlmap.end());</div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;      Species* pSBMLSpecies = <span class="keyword">dynamic_cast&lt;</span>Species*<span class="keyword">&gt;</span>(pos-&gt;second);</div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;      assert(pSBMLSpecies != NULL);</div>
<div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;      <span class="comment">// check if the compartment is fixed</span></div>
<div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d4/dd4/classCCompartment.html">CCompartment</a>* pCompartment = <span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>*<span class="keyword">&gt;</span>(pME)-&gt;getCompartment();</div>
<div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;      assert(pCompartment != NULL);</div>
<div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;</div>
<div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;      <span class="keywordflow">if</span> (pSBMLSpecies-&gt;getHasOnlySubstanceUnits() == <span class="keyword">true</span> &amp;&amp; pCompartment-&gt;<a class="code" href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">getDimensionality</a>() != 0)</div>
<div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;        {</div>
<div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;</div>
<div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;          <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pOrigNode = pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>();</div>
<div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;          assert(pOrigNode != NULL);</div>
<div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;          <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pNode = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a72ccaf784cfdbf62a852dd1a3d8ad6c7">SBMLImporter::divideByObject</a>(pOrigNode, pCompartment-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a9ebbeda13eca4f795ca4463a444548fa">getValueReference</a>());</div>
<div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;          assert(pNode != NULL);</div>
<div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;</div>
<div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;          <span class="keywordflow">if</span> (pNode != NULL)</div>
<div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;            {</div>
<div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;              pExpression-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">setRoot</a>(pNode);</div>
<div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;            }</div>
<div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;            {</div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;            }</div>
<div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;        }</div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;</div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;      <span class="keywordflow">if</span> (pCompartment-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">getStatus</a>() != <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelValue::FIXED</a> &amp;&amp; pME-&gt;getStatus() == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelValue::ODE</a>)</div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;        {</div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;          <span class="comment">// if it is an assignment rule we do nothing, if it is an ode rule,</span></div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;          <span class="comment">// we need to issue a warning or an error</span></div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 51 , pSBMLSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;        }</div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;    }</div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;</div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;  pME-&gt;setStatus(status);</div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;</div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;  <span class="keywordtype">bool</span> result = pME-&gt;setExpressionPtr(pExpression);</div>
<div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;</div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;  <span class="keywordflow">if</span> (result == <span class="keyword">false</span>)</div>
<div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;    {</div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;      <span class="keywordflow">if</span> (pME-&gt;getExpressionPtr() != pExpression)</div>
<div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;        {</div>
<div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;          <span class="keyword">delete</span> pExpression;</div>
<div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;        }</div>
<div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;</div>
<div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;      pME-&gt;setStatus(<a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelValue::FIXED</a>);</div>
<div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;      std::string m = <span class="stringliteral">&quot;Some error occurred while importing the rule for object with id \&quot;&quot;</span> + rule-&gt;getVariable() + <span class="stringliteral">&quot;\&quot;.&quot;</span>;</div>
<div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a>, m.c_str());</div>
<div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;    }</div>
<div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;}</div>
<div class="ttc" id="classCEvaluationTree_html_a02df7d07b1a27c8515d3580203c9f104"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a02df7d07b1a27c8515d3580203c9f104">CEvaluationTree::setRoot</a></div><div class="ttdeci">virtual bool setRoot(CEvaluationNode *pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00422">CEvaluationTree.cpp:422</a></div></div>
<div class="ttc" id="classConverterASTNode_html"><div class="ttname"><a href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/ConverterASTNode_8h_source.html#l00023">ConverterASTNode.h:23</a></div></div>
<div class="ttc" id="classCExpression_html"><div class="ttname"><a href="../../dc/dbd/classCExpression.html">CExpression</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dcc/CExpression_8h_source.html#l00028">CExpression.h:28</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a6d9048bf3ddc66ce0304345a54f6fa2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a6d9048bf3ddc66ce0304345a54f6fa2f">SBMLImporter::checkRuleMathConsistency</a></div><div class="ttdeci">void checkRuleMathConsistency(const Rule *pRule, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06793">SBMLImporter.cpp:6793</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00083">CCopasiMessage.h:83</a></div></div>
<div class="ttc" id="classCCompartment_html_a977268782cb7d6cd7a01cab642b45c09"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html#a977268782cb7d6cd7a01cab642b45c09">CCompartment::getDimensionality</a></div><div class="ttdeci">unsigned C_INT32 getDimensionality() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/CCompartment_8cpp_source.html#l00204">CCompartment.cpp:204</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ada6a4711ac017aa676ab4be88291a15b"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">SBMLImporter::replaceObjectNames</a></div><div class="ttdeci">void replaceObjectNames(ASTNode *pNode, const std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, bool initialExpression=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06943">SBMLImporter.cpp:6943</a></div></div>
<div class="ttc" id="classCMetab_html"><div class="ttname"><a href="../../dc/d44/classCMetab.html">CMetab</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df5/CMetab_8h_source.html#l00178">CMetab.h:178</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a72ccaf784cfdbf62a852dd1a3d8ad6c7"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a72ccaf784cfdbf62a852dd1a3d8ad6c7">SBMLImporter::divideByObject</a></div><div class="ttdeci">static CEvaluationNode * divideByObject(const CEvaluationNode *pOrigNode, const CCopasiObject *pObject)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10533">SBMLImporter.cpp:10533</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0bdaab30af2fb7e2bc5e637a2b40134a"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">SBMLImporter::preprocessNode</a></div><div class="ttdeci">void preprocessNode(ConverterASTNode *pNode, Model *pSBMLModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Reaction *pSBMLReaction=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04681">SBMLImporter.cpp:4681</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00055">CModelValue.h:55</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_ad92be98a54367c4f46224b7aee13cd88"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#ad92be98a54367c4f46224b7aee13cd88">CEvaluationTree::setTree</a></div><div class="ttdeci">bool setTree(const ASTNode &amp;pRootNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00467">CEvaluationTree.cpp:467</a></div></div>
<div class="ttc" id="classCCompartment_html"><div class="ttname"><a href="../../d4/dd4/classCCompartment.html">CCompartment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d59/CCompartment_8h_source.html#l00037">CCompartment.h:37</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00092">CCopasiMessage.h:92</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2d5ef4903a7ed12d178107ef819b3b66"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2d5ef4903a7ed12d178107ef819b3b66">SBMLImporter::findIdInASTTree</a></div><div class="ttdeci">std::string findIdInASTTree(const ASTNode *pMath, const std::set&lt; std::string &gt; &amp;reactionIds)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06900">SBMLImporter.cpp:6900</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00060">CModelValue.h:60</a></div></div>
<div class="ttc" id="classCModelEntity_html_ad6bdcaa2e8887271f61fc363262cc9ed"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">CModelEntity::getStatus</a></div><div class="ttdeci">const CModelEntity::Status &amp; getStatus() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00141">CModelValue.cpp:141</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
<div class="ttc" id="classCModelEntity_html_a9ebbeda13eca4f795ca4463a444548fa"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a9ebbeda13eca4f795ca4463a444548fa">CModelEntity::getValueReference</a></div><div class="ttdeci">CCopasiObject * getValueReference() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00370">CModelValue.cpp:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ada0c2024af8f12fbef9c77ad4587fd68"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::importSBMLRule </td>
          <td>(</td>
          <td class="paramtype">const Rule *&#160;</td>
          <td class="paramname"><em>sbmlRule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Imports the given Rule if COPASI supports this kind of Rule, otherwise a warning is created. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06364">6364</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6a5f472d8d3c86bee75ca3ae677877c3">importRule()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">mUnsupportedRuleFound</a>, and <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;{</div>
<div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;  <span class="comment">// so far we only support assignment rules and rate rules</span></div>
<div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;  <span class="keywordtype">int</span> type = sbmlRule-&gt;getTypeCode();</div>
<div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;</div>
<div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;  <span class="keywordflow">if</span> (type == SBML_ASSIGNMENT_RULE)</div>
<div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;    {</div>
<div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;      <span class="keyword">const</span> AssignmentRule* pAssignmentRule = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>AssignmentRule*<span class="keyword">&gt;</span>(sbmlRule);</div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;</div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;      <span class="keywordflow">if</span> (pAssignmentRule &amp;&amp; pAssignmentRule-&gt;isSetVariable())</div>
<div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;        {</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a6a5f472d8d3c86bee75ca3ae677877c3">importRule</a>(pAssignmentRule, <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>, copasi2sbmlmap, pSBMLModel);</div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;        }</div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;        {</div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;        }</div>
<div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;    }</div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == SBML_RATE_RULE)</div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;    {</div>
<div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;      <span class="keyword">const</span> RateRule* pRateRule = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>RateRule*<span class="keyword">&gt;</span>(sbmlRule);</div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;</div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;      <span class="keywordflow">if</span> (pRateRule &amp;&amp; pRateRule-&gt;isSetVariable())</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;        {</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a6a5f472d8d3c86bee75ca3ae677877c3">importRule</a>(pRateRule, <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a>, copasi2sbmlmap, pSBMLModel);</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;        }</div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;        {</div>
<div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;        }</div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;    }</div>
<div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;    {</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">mUnsupportedRuleFound</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;    }</div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a6a5f472d8d3c86bee75ca3ae677877c3"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a6a5f472d8d3c86bee75ca3ae677877c3">SBMLImporter::importRule</a></div><div class="ttdeci">void importRule(const Rule *rule, CModelEntity::Status ruleType, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Model *pSBMLModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06401">SBMLImporter.cpp:6401</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a0d1d70d874673527b508b3e8dcfed729"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a0d1d70d874673527b508b3e8dcfed729">SBMLImporter::mUnsupportedRuleFound</a></div><div class="ttdeci">bool mUnsupportedRuleFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00058">SBMLImporter.h:58</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00056">CModelValue.h:56</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00060">CModelValue.h:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adaced01dad763bc9aabccdd95f818ae8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> * SBMLImporter::isConstantFlux </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td>
          <td class="paramname"><em>pRoot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>pModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *&#160;</td>
          <td class="paramname"><em>pFunctionDB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks if the given node is an object node that represents a parameter or a model value or a function which has a single parameter and a single node which also represents a parameter. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09420">9420</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a9850f90ad614378da22df5bab569a3b6">CEvaluationNode::CALL</a>, <a class="el" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode&lt; _Data &gt;::getData()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a212874e63568c3f984a7d8fee2ffe264">CCopasiObject::getObjectDataModel()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">CCopasiObject::getObjectParent()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">CCopasiObject::isReference()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">CCopasiDataModel::ObjectFromName()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type()</a>, and <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a18692d2f0caadaf112e7ccdc3543da3e">CEvaluationNode::VARIABLE</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l09421"></a><span class="lineno"> 9421</span>&#160;{</div>
<div class="line"><a name="l09422"></a><span class="lineno"> 9422</span>&#160;  <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pObject = NULL;</div>
<div class="line"><a name="l09423"></a><span class="lineno"> 9423</span>&#160;  <a class="code" href="../../dd/d09/classCRegisteredObjectName.html">CRegisteredObjectName</a> name;</div>
<div class="line"><a name="l09424"></a><span class="lineno"> 9424</span>&#160;  <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491">CEvaluationNode::Type</a> type = pRoot-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>();</div>
<div class="line"><a name="l09425"></a><span class="lineno"> 9425</span>&#160;</div>
<div class="line"><a name="l09426"></a><span class="lineno"> 9426</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>(type))</div>
<div class="line"><a name="l09427"></a><span class="lineno"> 9427</span>&#160;    {</div>
<div class="line"><a name="l09428"></a><span class="lineno"> 9428</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a9850f90ad614378da22df5bab569a3b6">CEvaluationNode::CALL</a>:</div>
<div class="line"><a name="l09429"></a><span class="lineno"> 9429</span>&#160;      {</div>
<div class="line"><a name="l09430"></a><span class="lineno"> 9430</span>&#160;        <span class="comment">// the function call may only have one child</span></div>
<div class="line"><a name="l09431"></a><span class="lineno"> 9431</span>&#160;        <span class="comment">// which must be o object node</span></div>
<div class="line"><a name="l09432"></a><span class="lineno"> 9432</span>&#160;        <span class="keywordflow">if</span> (pRoot-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>() != NULL &amp;&amp;</div>
<div class="line"><a name="l09433"></a><span class="lineno"> 9433</span>&#160;            pRoot-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>()-&gt;getSibling() == NULL &amp;&amp;</div>
<div class="line"><a name="l09434"></a><span class="lineno"> 9434</span>&#160;            <a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>(dynamic_cast&lt;const CEvaluationNode*&gt;(pRoot-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>())-&gt;getType()) == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>)</div>
<div class="line"><a name="l09435"></a><span class="lineno"> 9435</span>&#160;          {</div>
<div class="line"><a name="l09436"></a><span class="lineno"> 9436</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = pFunctionDB-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(pRoot-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>());</div>
<div class="line"><a name="l09437"></a><span class="lineno"> 9437</span>&#160;</div>
<div class="line"><a name="l09438"></a><span class="lineno"> 9438</span>&#160;            <span class="comment">// some functions will not be in the local list of function definitions</span></div>
<div class="line"><a name="l09439"></a><span class="lineno"> 9439</span>&#160;            <span class="comment">// but rather in the global list due to the way the import works.</span></div>
<div class="line"><a name="l09440"></a><span class="lineno"> 9440</span>&#160;            <span class="keywordflow">if</span> (pTree == NULL)</div>
<div class="line"><a name="l09441"></a><span class="lineno"> 9441</span>&#160;              pTree = <a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(pRoot-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>());</div>
<div class="line"><a name="l09442"></a><span class="lineno"> 9442</span>&#160;</div>
<div class="line"><a name="l09443"></a><span class="lineno"> 9443</span>&#160;            <span class="comment">// the function may only have one node which must be the</span></div>
<div class="line"><a name="l09444"></a><span class="lineno"> 9444</span>&#160;            <span class="comment">// variable</span></div>
<div class="line"><a name="l09445"></a><span class="lineno"> 9445</span>&#160;            <span class="keywordflow">if</span> (pTree != NULL &amp;&amp;</div>
<div class="line"><a name="l09446"></a><span class="lineno"> 9446</span>&#160;                pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>() != NULL &amp;&amp;</div>
<div class="line"><a name="l09447"></a><span class="lineno"> 9447</span>&#160;                pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>()-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>() == NULL &amp;&amp;</div>
<div class="line"><a name="l09448"></a><span class="lineno"> 9448</span>&#160;                <a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>()-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>()) == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a18692d2f0caadaf112e7ccdc3543da3e">CEvaluationNode::VARIABLE</a>)</div>
<div class="line"><a name="l09449"></a><span class="lineno"> 9449</span>&#160;              {</div>
<div class="line"><a name="l09450"></a><span class="lineno"> 9450</span>&#160;                name = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>*<span class="keyword">&gt;</span>(pRoot-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>())-&gt;getObjectCN();</div>
<div class="line"><a name="l09451"></a><span class="lineno"> 9451</span>&#160;                assert(!name.empty());</div>
<div class="line"><a name="l09452"></a><span class="lineno"> 9452</span>&#160;                <span class="comment">// TODO remove this function from the usedFunctions list</span></div>
<div class="line"><a name="l09453"></a><span class="lineno"> 9453</span>&#160;                <span class="comment">// if it is still in there</span></div>
<div class="line"><a name="l09454"></a><span class="lineno"> 9454</span>&#160;              }</div>
<div class="line"><a name="l09455"></a><span class="lineno"> 9455</span>&#160;          }</div>
<div class="line"><a name="l09456"></a><span class="lineno"> 9456</span>&#160;      }</div>
<div class="line"><a name="l09457"></a><span class="lineno"> 9457</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09458"></a><span class="lineno"> 9458</span>&#160;</div>
<div class="line"><a name="l09459"></a><span class="lineno"> 9459</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>:</div>
<div class="line"><a name="l09460"></a><span class="lineno"> 9460</span>&#160;        name = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>*<span class="keyword">&gt;</span>(pRoot)-&gt;getObjectCN();</div>
<div class="line"><a name="l09461"></a><span class="lineno"> 9461</span>&#160;        assert(!name.empty());</div>
<div class="line"><a name="l09462"></a><span class="lineno"> 9462</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09463"></a><span class="lineno"> 9463</span>&#160;</div>
<div class="line"><a name="l09464"></a><span class="lineno"> 9464</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l09465"></a><span class="lineno"> 9465</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09466"></a><span class="lineno"> 9466</span>&#160;    }</div>
<div class="line"><a name="l09467"></a><span class="lineno"> 9467</span>&#160;</div>
<div class="line"><a name="l09468"></a><span class="lineno"> 9468</span>&#160;  <span class="keywordflow">if</span> (name.empty())</div>
<div class="line"><a name="l09469"></a><span class="lineno"> 9469</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l09470"></a><span class="lineno"> 9470</span>&#160;</div>
<div class="line"><a name="l09471"></a><span class="lineno"> 9471</span>&#160;  <span class="comment">// check if the object is a local or global parameter</span></div>
<div class="line"><a name="l09472"></a><span class="lineno"> 9472</span>&#160;  std::vector&lt;CCopasiContainer*&gt; listOfContainers;</div>
<div class="line"><a name="l09473"></a><span class="lineno"> 9473</span>&#160;  listOfContainers.push_back(pModel);</div>
<div class="line"><a name="l09474"></a><span class="lineno"> 9474</span>&#160;  pObject = pModel-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a212874e63568c3f984a7d8fee2ffe264">getObjectDataModel</a>()-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">ObjectFromName</a>(listOfContainers, name);</div>
<div class="line"><a name="l09475"></a><span class="lineno"> 9475</span>&#160;  assert(pObject != NULL);</div>
<div class="line"><a name="l09476"></a><span class="lineno"> 9476</span>&#160;</div>
<div class="line"><a name="l09477"></a><span class="lineno"> 9477</span>&#160;  <span class="keywordflow">if</span> (pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">isReference</a>())</div>
<div class="line"><a name="l09478"></a><span class="lineno"> 9478</span>&#160;    {</div>
<div class="line"><a name="l09479"></a><span class="lineno"> 9479</span>&#160;      pObject = pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>();</div>
<div class="line"><a name="l09480"></a><span class="lineno"> 9480</span>&#160;    }</div>
<div class="line"><a name="l09481"></a><span class="lineno"> 9481</span>&#160;</div>
<div class="line"><a name="l09482"></a><span class="lineno"> 9482</span>&#160;  <span class="keywordflow">if</span> (!(dynamic_cast&lt;CModelValue*&gt;(pObject) || dynamic_cast&lt;CCopasiParameter*&gt;(pObject)))</div>
<div class="line"><a name="l09483"></a><span class="lineno"> 9483</span>&#160;    {</div>
<div class="line"><a name="l09484"></a><span class="lineno"> 9484</span>&#160;      pObject = NULL;</div>
<div class="line"><a name="l09485"></a><span class="lineno"> 9485</span>&#160;    }</div>
<div class="line"><a name="l09486"></a><span class="lineno"> 9486</span>&#160;</div>
<div class="line"><a name="l09487"></a><span class="lineno"> 9487</span>&#160;  <span class="keywordflow">return</span> pObject;</div>
<div class="line"><a name="l09488"></a><span class="lineno"> 9488</span>&#160;}</div>
<div class="ttc" id="classCCopasiObject_html_a212874e63568c3f984a7d8fee2ffe264"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a212874e63568c3f984a7d8fee2ffe264">CCopasiObject::getObjectDataModel</a></div><div class="ttdeci">CCopasiDataModel * getObjectDataModel()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00666">CCopasiObject.cpp:666</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a18692d2f0caadaf112e7ccdc3543da3e"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a18692d2f0caadaf112e7ccdc3543da3e">CEvaluationNode::VARIABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00050">CEvaluationNode.h:50</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_ae24b55d848d78cec0a359fd199c76562"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType</a></div><div class="ttdeci">const Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00357">CEvaluationNode.cpp:357</a></div></div>
<div class="ttc" id="classCCopasiObject_html"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9f/CCopasiObject_8h_source.html#l00216">CCopasiObject.h:216</a></div></div>
<div class="ttc" id="classCEvaluationTree_html"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00028">CEvaluationTree.h:28</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00045">CEvaluationNode.h:45</a></div></div>
<div class="ttc" id="classCRegisteredObjectName_html"><div class="ttname"><a href="../../dd/d09/classCRegisteredObjectName.html">CRegisteredObjectName</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/CCopasiObjectName_8h_source.html#l00066">CCopasiObjectName.h:66</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a9e5fcf60f22d2701417f90756847d37b"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a></div><div class="ttdeci">static Type type(const Type &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00123">CEvaluationNode.cpp:123</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af3884484e51df06669ba5bc4fc77c07c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">SBMLImporter::functionDB</a></div><div class="ttdeci">CFunctionDB * functionDB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00056">SBMLImporter.h:56</a></div></div>
<div class="ttc" id="classCCopasiObject_html_aab9462de68df423ab9eaebaafabcf783"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">CCopasiObject::isReference</a></div><div class="ttdeci">bool isReference() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00572">CCopasiObject.cpp:572</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491">CEvaluationNode::Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00039">CEvaluationNode.h:39</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a9850f90ad614378da22df5bab569a3b6"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a9850f90ad614378da22df5bab569a3b6">CEvaluationNode::CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00047">CEvaluationNode.h:47</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a761f04c57a75e99a63ee0700c76fdafe"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode::getData</a></div><div class="ttdeci">virtual const Data &amp; getData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00118">CCopasiNode.h:118</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00034">CEvaluationNodeObject.h:34</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
<div class="ttc" id="classCFunctionDB_html_aa25aabb5ce2677103813278c014e06fb"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction</a></div><div class="ttdeci">CFunction * findFunction(const std::string &amp;functionName)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00325">CFunctionDB.cpp:325</a></div></div>
<div class="ttc" id="classCCopasiDataModel_html_a9d54888c14c755abec4c757289ee26f7"><div class="ttname"><a href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">CCopasiDataModel::ObjectFromName</a></div><div class="ttdeci">CCopasiObject * ObjectFromName(const std::vector&lt; CCopasiContainer * &gt; &amp;listOfContainer, const CCopasiObjectName &amp;CN) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d38/CCopasiDataModel_8cpp_source.html#l01940">CCopasiDataModel.cpp:1940</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a33bb5035eec7ebc5e3ecac4771316405"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">CCopasiObject::getObjectParent</a></div><div class="ttdeci">CCopasiContainer * getObjectParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00276">CCopasiObject.cpp:276</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8e416728d56ad3e80750885794bb60e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::isDelayFunctionUsed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *&#160;</td>
          <td class="paramname"><em>pNode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>COPASI can not handle the delay function yet, so if it is used in some expression, we have to abort reading the file. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l04958">4958</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8635efa2b753c28b33f29f8f44b12161">createCFunctionFromFunctionTree()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;{</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ConverterASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;    {</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;        {</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;        }</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_FUNCTION_DELAY)</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;        {</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;          result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;        }</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;    }</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;}</div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5eccfb6bf7001137ae5b14ecbfd0c971"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a> * &gt; * SBMLImporter::isMassAction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a> *&#160;</td>
          <td class="paramname"><em>pTree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dc0/classCChemEq.html">CChemEq</a> &amp;&#160;</td>
          <td class="paramname"><em>chemicalEquation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a> *&#160;</td>
          <td class="paramname"><em>pCallNode</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05177">5177</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4">CEvaluationTree::Expression</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a605089836e7e5cfe986f8b0a4c6ff4d6">CEvaluationTree::Function</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode&lt; _Data &gt;::getData()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode&lt; _Data &gt;::getSibling()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">CEvaluationTree::getType()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8d114872c119310ca821f8f054b1b6e6">isMassActionFunction()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a2233cb59b1b463ca21100a9ce8a76efa">CEvaluationTree::PreDefined</a>, and <a class="el" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;{</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;  <span class="comment">// TODO CRITICAL We need to use a node iterator</span></div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;  <a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70">CEvaluationTree::Type</a> type = pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">getType</a>();</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;  std::vector&lt; std::vector&lt; std::string &gt; &gt; functionArgumentCNs;</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pChildNode = NULL;</div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;  std::string str;</div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;  std::vector&lt;CEvaluationNodeObject*&gt;* result = NULL;</div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;  <span class="keywordflow">switch</span> (type)</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;    {</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a605089836e7e5cfe986f8b0a4c6ff4d6">CEvaluationTree::Function</a>:</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a>:</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a2233cb59b1b463ca21100a9ce8a76efa">CEvaluationTree::PreDefined</a>:</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;        pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pCallNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;</div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;        <span class="keywordflow">while</span> (pChildNode)</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;          {</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;            <span class="keywordflow">if</span> (pChildNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>() == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>)</div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;              {</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;                str = pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>().substr(1, pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>().length() - 2);</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;                functionArgumentCNs.push_back(std::vector&lt;std::string&gt;());</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;                functionArgumentCNs[functionArgumentCNs.size() - 1].push_back(str);</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;                pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;              }</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;              {</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;                <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;              }</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;          }</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;        result = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8d114872c119310ca821f8f054b1b6e6">isMassActionFunction</a>(dynamic_cast&lt;const CFunction*&gt;(pTree), chemicalEquation, functionArgumentCNs);</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4">CEvaluationTree::Expression</a>:</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;        result = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), chemicalEquation);</div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;        <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;    }</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;}</div>
<div class="ttc" id="classCEvaluationTree_html_a438862de69016cbade534b1ed597fc70"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70">CEvaluationTree::Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00035">CEvaluationTree.h:35</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a0730aecebb9ca0f8401b7d0223e266e8"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode::getSibling</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getSibling()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00353">CCopasiNode.h:353</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8d114872c119310ca821f8f054b1b6e6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8d114872c119310ca821f8f054b1b6e6">SBMLImporter::isMassActionFunction</a></div><div class="ttdeci">std::vector&lt; CEvaluationNodeObject * &gt; * isMassActionFunction(const CFunction *pFun, const CChemEq &amp;chemicalEquation, const std::vector&lt; std::vector&lt; std::string &gt; &gt; &amp;functionArgumentCNs)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05500">SBMLImporter.cpp:5500</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_ae24b55d848d78cec0a359fd199c76562"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType</a></div><div class="ttdeci">const Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00357">CEvaluationNode.cpp:357</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a09abd66dddd22b300853b0e2de8f392f"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">CEvaluationTree::getType</a></div><div class="ttdeci">const CEvaluationTree::Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00167">CEvaluationTree.cpp:167</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00045">CEvaluationNode.h:45</a></div></div>
<div class="ttc" id="classSBMLImporter_html_afa092dea2bdae901c5cbf41e7c4c7dd1"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">SBMLImporter::isMassActionExpression</a></div><div class="ttdeci">std::vector&lt; CEvaluationNodeObject * &gt; * isMassActionExpression(const CEvaluationNode *pRootNode, const CChemEq &amp;chemicalEquation)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05223">SBMLImporter.cpp:5223</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00040">CEvaluationTree.h:40</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a35afbec1c7f8fad2415e60a8475a57a4">CEvaluationTree::Expression</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00041">CEvaluationTree.h:41</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a438862de69016cbade534b1ed597fc70a605089836e7e5cfe986f8b0a4c6ff4d6"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a605089836e7e5cfe986f8b0a4c6ff4d6">CEvaluationTree::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00037">CEvaluationTree.h:37</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a761f04c57a75e99a63ee0700c76fdafe"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode::getData</a></div><div class="ttdeci">virtual const Data &amp; getData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00118">CCopasiNode.h:118</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a438862de69016cbade534b1ed597fc70a2233cb59b1b463ca21100a9ce8a76efa"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a2233cb59b1b463ca21100a9ce8a76efa">CEvaluationTree::PreDefined</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00039">CEvaluationTree.h:39</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afa092dea2bdae901c5cbf41e7c4c7dd1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a> * &gt; * SBMLImporter::isMassActionExpression </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td>
          <td class="paramname"><em>pRootNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dc0/classCChemEq.html">CChemEq</a> &amp;&#160;</td>
          <td class="paramname"><em>chemicalEquation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05223">5223</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d1/dc0/classCChemEq.html#ab0207e434c51d92b8ea7a2e022aa778b">CChemEq::addMetabolite()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">CEvaluationNode::copyBranch()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a9ae5f278d92322b21c5b101cd901d6fb">CEvaluationNode::FUNCTION</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode&lt; _Data &gt;::getData()</a>, <a class="el" href="../../d6/d8d/classCChemEqElement.html#ac5717e22b92036afc7dcedcce102f1a5">CChemEqElement::getMetaboliteKey()</a>, <a class="el" href="../../d6/d8d/classCChemEqElement.html#a464fe74231e8ab6769463226ef9e4c5f">CChemEqElement::getMultiplicity()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">CCopasiObject::getObjectParent()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">CChemEq::getProducts()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#ab2429ddb26864468a33218f6b8fcfdd6">CChemEq::getReversibility()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode&lt; _Data &gt;::getSibling()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a8eb296b9e9526f0733225fa7aebc21b9">CEvaluationNode::getValue()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">CCopasiObject::isReference()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98ac08f19645f20aa1db61f3907975816e7">CEvaluationNodeOperator::MINUS</a>, <a class="el" href="../../d8/dcb/classCEvaluationNodeFunction.html#a7d9eee722d7e2b7c7888b23838d7d604abdac8cb70f0bd888612679ac5a519f9e">CEvaluationNodeFunction::MINUS</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a5cd708e5bd1913c01508638dcf6fae3e">CEvaluationNode::NUMBER</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">CCopasiDataModel::ObjectFromName()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a745531dbd3babe952bfaa4176744dbac">CEvaluationNode::OPERATOR</a>, <a class="el" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>, <a class="el" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98a5d32e83a5fb1029cbd80991bc2291e14">CEvaluationNodeOperator::POWER</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ab92634da43399704fc2ac9e201e4707a">separateProductArguments()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector&lt; T &gt;::size()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType()</a>, and <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5eccfb6bf7001137ae5b14ecbfd0c971">isMassAction()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8d114872c119310ca821f8f054b1b6e6">isMassActionFunction()</a>.</p>
<div class="fragment"><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;{</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;  std::vector&lt;CEvaluationNodeObject*&gt;* v = NULL;</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;  <span class="keywordflow">if</span> (chemicalEquation.<a class="code" href="../../d1/dc0/classCChemEq.html#ab2429ddb26864468a33218f6b8fcfdd6">getReversibility</a>())</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;    {</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;<span class="preprocessor">#ifdef COPASI_DEBUG</span></div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;<span class="preprocessor"></span>      <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pTmpNode = pRootNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">copyBranch</a>();</div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;<span class="comment">//      CEvaluationNode* pTmpNode = CEvaluationNodeNormalizer::normalize(pRootNode);</span></div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;<span class="preprocessor"></span>      <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pTmpNode = pRootNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">copyBranch</a>();</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* COPASI_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;<span class="preprocessor"></span>      assert(pTmpNode != NULL);</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;      <span class="comment">// the root node must be a minus operator</span></div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;      <span class="comment">// the two children must be irreversible mass action terms</span></div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;      result = (<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>(pTmpNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>()) == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a745531dbd3babe952bfaa4176744dbac">CEvaluationNode::OPERATOR</a> &amp;&amp; (<a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98">CEvaluationNodeOperator::SubType</a>)(<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a>(pTmpNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>())) == <a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98ac08f19645f20aa1db61f3907975816e7">CEvaluationNodeOperator::MINUS</a>);</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;</div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;      <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;        {</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pTmpNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;          result = (pChildNode != NULL);</div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;          <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;            {</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;              <a class="code" href="../../d1/dc0/classCChemEq.html">CChemEq</a> tmpEq;</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;              <span class="keyword">const</span> <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt;CChemEqElement&gt;</a>* metabolites = &amp;chemicalEquation.<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>();</div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;              <span class="keywordtype">size_t</span> i, iMax = metabolites-&gt;<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;              result = (iMax &gt; 0);</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;              <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;                {</div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;                  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;                    {</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;                      <span class="keyword">const</span> <a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* element = (*metabolites)[i];</div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;                      tmpEq.<a class="code" href="../../d1/dc0/classCChemEq.html#ab0207e434c51d92b8ea7a2e022aa778b">addMetabolite</a>(element-&gt;<a class="code" href="../../d6/d8d/classCChemEqElement.html#ac5717e22b92036afc7dcedcce102f1a5">getMetaboliteKey</a>(), element-&gt;<a class="code" href="../../d6/d8d/classCChemEqElement.html#a464fe74231e8ab6769463226ef9e4c5f">getMultiplicity</a>(), <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a>);</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;                    }</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;                  v = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression</a>(pChildNode, tmpEq);</div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;                  <span class="keywordflow">if</span> (!v)</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;                    {</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;                      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;                    }</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;                  result = !v-&gt;empty();</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;</div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;                  <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;                    {</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;                      pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;                      result = (pChildNode != NULL);</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;                      <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;                        {</div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;                          <a class="code" href="../../d1/dc0/classCChemEq.html">CChemEq</a> tmpEq2;</div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;                          metabolites = &amp;chemicalEquation.<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>();</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;                          iMax = metabolites-&gt;<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;                          result = (iMax &gt; 0);</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;                          <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;                            {</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;                              <span class="keyword">const</span> <a class="code" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* element = (*metabolites)[i];</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;                              tmpEq2.<a class="code" href="../../d1/dc0/classCChemEq.html#ab0207e434c51d92b8ea7a2e022aa778b">addMetabolite</a>(element-&gt;<a class="code" href="../../d6/d8d/classCChemEqElement.html#ac5717e22b92036afc7dcedcce102f1a5">getMetaboliteKey</a>(), element-&gt;<a class="code" href="../../d6/d8d/classCChemEqElement.html#a464fe74231e8ab6769463226ef9e4c5f">getMultiplicity</a>(), <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a>);</div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;                            }</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;                          std::vector&lt;CEvaluationNodeObject*&gt;* v2 = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression</a>(pChildNode, tmpEq2);</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;                          <span class="keywordflow">if</span> (!v2)</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;                            {</div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;                              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;                            }</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;                          result = !v2-&gt;empty();</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;                          <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;                            {</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;                              v-&gt;push_back((*v2)[0]);</div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;                            }</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;                          <span class="keywordflow">else</span></div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;                            {</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;                              v-&gt;clear();</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;                            }</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;</div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;                          <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(v2);</div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;                        }</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;                    }</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;                }</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;                {</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;                  v = <span class="keyword">new</span> std::vector&lt;CEvaluationNodeObject*&gt;;</div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;                }</div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;            }</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;        }</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;        {</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;          v = <span class="keyword">new</span> std::vector&lt;CEvaluationNodeObject*&gt;;</div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;        }</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;      <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(pTmpNode);</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;    }</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;    {</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;      <span class="comment">// the expression must contain exactly one global or local parameter</span></div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;      <span class="comment">// the expression must contain each substrate in the CChemicalReaction</span></div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;      std::vector&lt;const CEvaluationNode*&gt; arguments;</div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;      std::map&lt;const CMetab*, C_FLOAT64&gt; multiplicityMap;</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ab92634da43399704fc2ac9e201e4707a">separateProductArguments</a>(pRootNode, arguments);</div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;      <span class="keywordtype">size_t</span> numParameters = 0, i, iMax = arguments.size();</div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;      v = <span class="keyword">new</span> std::vector&lt;CEvaluationNodeObject*&gt;;</div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;      <span class="keywordflow">if</span> (iMax != 0)</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;        {</div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;          std::vector&lt;CCopasiContainer*&gt; listOfContainers;</div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;          listOfContainers.push_back(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>);</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;</div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;          <span class="keywordflow">for</span> (i = 0; (i &lt; iMax) &amp;&amp; (numParameters &lt; 2); ++i)</div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;            {</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;              <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pNode = arguments[i];</div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;              <span class="comment">// the node can either be an object node</span></div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;              <span class="comment">// or it can be a power function node</span></div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;              <span class="keywordflow">if</span> (pNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>() == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>)</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;                {</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;                  <span class="comment">// it can be a global or a local parameter or an metabolite</span></div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;                  std::string objectCN = pNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>().substr(1, pNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>().length() - 2);</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;                  <span class="keyword">const</span> <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pObject = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">ObjectFromName</a>(listOfContainers, objectCN);</div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;                  <span class="keywordflow">if</span> (!pObject)</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;                    {</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;                      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 39, objectCN.c_str());</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;                    }</div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;</div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;                  <span class="keywordflow">if</span> (pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">isReference</a>())</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;                    {</div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;                      pObject = pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>();</div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;</div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;                      <span class="keywordflow">if</span> (dynamic_cast&lt;const CMetab*&gt;(pObject))</div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;                        {</div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;                          <span class="keyword">const</span> <a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>* pMetab = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>*<span class="keyword">&gt;</span>(pObject);</div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;                          <span class="keywordflow">if</span> (multiplicityMap.find(pMetab) != multiplicityMap.end())</div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;                            {</div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;                              multiplicityMap[pMetab] = multiplicityMap[pMetab] + 1.0;</div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;                            }</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;                          <span class="keywordflow">else</span></div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;                            {</div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;                              multiplicityMap[pMetab] = 1.0;</div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;                            }</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;                        }</div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;                      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_cast&lt;const CModelValue*&gt;(pObject))</div>
<div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;                        {</div>
<div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;                          ++numParameters;</div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;                          v-&gt;push_back(<span class="keyword">new</span> <a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>((<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#ac395d4a167d9c1848c3872ee94074d86">CEvaluationNodeObject::SubType</a>)(<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a>(pNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>())), pNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>()));</div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;                        }</div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;                        {</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;                          result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;                          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;                        }</div>
<div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;                    }</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_cast&lt;const CCopasiParameter*&gt;(pObject))</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;                    {</div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;                      ++numParameters;</div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;                      v-&gt;push_back(<span class="keyword">new</span> <a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>((<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#ac395d4a167d9c1848c3872ee94074d86">CEvaluationNodeObject::SubType</a>)(<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a>(pNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>())), pNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>()));</div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;                    }</div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;                    {</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;                      result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;                    }</div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;                }</div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>() == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a745531dbd3babe952bfaa4176744dbac">CEvaluationNode::OPERATOR</a> &amp;&amp; (<a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98">CEvaluationNodeOperator::SubType</a>)(<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a>(pNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>())) == <a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98a5d32e83a5fb1029cbd80991bc2291e14">CEvaluationNodeOperator::POWER</a>)</div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;                {</div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;                  <span class="comment">// the two children must be a metabolite node and a number node in this order</span></div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;                  <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;</div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;                  <span class="keywordflow">if</span> (pChildNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>() == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a>)</div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;                    {</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;                      std::string objectCN = pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>().substr(1, pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>().length() - 2);</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;                      <span class="keyword">const</span> <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pObject = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">ObjectFromName</a>(listOfContainers, objectCN);</div>
<div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;                      assert(pObject);</div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;                      <span class="keywordflow">if</span> (pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">isReference</a>())</div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;                        {</div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;                          pObject = pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>();</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;                          <span class="keywordflow">if</span> (dynamic_cast&lt;const CMetab*&gt;(pObject))</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;                            {</div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;                              pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;                              assert(pChildNode);</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;</div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;                              <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491">CEvaluationNode::Type</a> type = <a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>(pChildNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>());</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;                              <span class="keywordflow">if</span> (type == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a5cd708e5bd1913c01508638dcf6fae3e">CEvaluationNode::NUMBER</a>)</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;                                {</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>* pMetab = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>*<span class="keyword">&gt;</span>(pObject);</div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;                                  <span class="keywordflow">if</span> (multiplicityMap.find(pMetab) != multiplicityMap.end())</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;                                    {</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;                                      multiplicityMap[pMetab] = multiplicityMap[pMetab] + pChildNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a8eb296b9e9526f0733225fa7aebc21b9">getValue</a>();</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;                                    }</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;                                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;                                    {</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;                                      multiplicityMap[pMetab] = pChildNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a8eb296b9e9526f0733225fa7aebc21b9">getValue</a>();</div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;                                    }</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;                                }</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;                              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a9ae5f278d92322b21c5b101cd901d6fb">CEvaluationNode::FUNCTION</a> &amp;&amp;</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;                                       (<a class="code" href="../../d8/dcb/classCEvaluationNodeFunction.html#a7d9eee722d7e2b7c7888b23838d7d604">CEvaluationNodeFunction::SubType</a>)<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a>(pChildNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>()) == <a class="code" href="../../d8/dcb/classCEvaluationNodeFunction.html#a7d9eee722d7e2b7c7888b23838d7d604abdac8cb70f0bd888612679ac5a519f9e">CEvaluationNodeFunction::MINUS</a> &amp;&amp;</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;                                       <a class="code" href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a>(((<a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*)pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>())-&gt;getType()) == <a class="code" href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a5cd708e5bd1913c01508638dcf6fae3e">CEvaluationNode::NUMBER</a>)</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;                                {</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>* pMetab = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../dc/d44/classCMetab.html">CMetab</a>*<span class="keyword">&gt;</span>(pObject);</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;                                  multiplicityMap[pMetab] = -1 * ((<a class="code" href="../../d3/d2a/classCEvaluationNodeNumber.html">CEvaluationNodeNumber</a>*)(pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>()))-&gt;getValue();</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;                                }</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;                              <span class="keywordflow">else</span></div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;                                {</div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;                                  <span class="comment">// not a math action</span></div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;                                }</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;                            }</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;                        }</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;                        {</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;                          result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;                          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;                        }</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;                    }</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;                    {</div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;                      result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;                    }</div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;                }</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;                {</div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;                  result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;                }</div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;            }</div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;        }</div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;      <span class="keywordflow">if</span> (numParameters != 1)</div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;        {</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;          result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;        }</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;</div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;      <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;        {</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt;CChemEqElement&gt;</a>&amp; metabolites = chemicalEquation.<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>();</div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;          <span class="keywordtype">size_t</span> i, iMax = metabolites.<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;</div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;          <span class="comment">// all metabolites must occur in the muliplicityMap so they have to have the same size</span></div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;          <span class="comment">// and a mass action must have at least one metabolite</span></div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;          <span class="keywordflow">if</span> (iMax == 0 || iMax != multiplicityMap.size()) result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;          <span class="keywordflow">for</span> (i = 0; i &lt; iMax &amp;&amp; result; ++i)</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;            {</div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;              <span class="comment">// the metabolite has to be present in the multiplicityMap, otherwise it is not a mass action</span></div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;              <span class="comment">// the stoichiometry also has to fit</span></div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;              std::map&lt;const CMetab*, C_FLOAT64&gt;::iterator pos = multiplicityMap.find(metabolites[i]-&gt;getMetabolite());</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;</div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;              <span class="keywordflow">if</span> (pos == multiplicityMap.end() ||</div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;                  !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(pos-&gt;second, metabolites[i]-&gt;getMultiplicity(), 0.01))</div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;                {</div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;                  result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;                }</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;            }</div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;        }</div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;</div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;      <span class="keywordflow">if</span> (!result)</div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;        {</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;          v-&gt;clear();</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;        }</div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;    }</div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;</div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;  <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;}</div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a5cd708e5bd1913c01508638dcf6fae3e"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a5cd708e5bd1913c01508638dcf6fae3e">CEvaluationNode::NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00042">CEvaluationNode.h:42</a></div></div>
<div class="ttc" id="classCChemEqElement_html"><div class="ttname"><a href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8d/CChemEqElement_8h_source.html#l00041">CChemEqElement.h:41</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a76178fce53d44b1f5c6c7e95dae460d5"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a76178fce53d44b1f5c6c7e95dae460d5">CEvaluationNode::copyBranch</a></div><div class="ttdeci">CEvaluationNode * copyBranch() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00404">CEvaluationNode.cpp:404</a></div></div>
<div class="ttc" id="classCEvaluationNodeFunction_html_a7d9eee722d7e2b7c7888b23838d7d604"><div class="ttname"><a href="../../d8/dcb/classCEvaluationNodeFunction.html#a7d9eee722d7e2b7c7888b23838d7d604">CEvaluationNodeFunction::SubType</a></div><div class="ttdeci">SubType</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d4d/CEvaluationNodeFunction_8h_source.html#l00049">CEvaluationNodeFunction.h:49</a></div></div>
<div class="ttc" id="copasi_8h_html_ac9efe23516fb43b7adc59fbad1c221b8"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a></div><div class="ttdeci">#define pdelete(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00215">copasi.h:215</a></div></div>
<div class="ttc" id="classCEvaluationNodeOperator_html_a39e738b7acfcf431f7c72e76b68ffa98a5d32e83a5fb1029cbd80991bc2291e14"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98a5d32e83a5fb1029cbd80991bc2291e14">CEvaluationNodeOperator::POWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00041">CEvaluationNodeOperator.h:41</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a0730aecebb9ca0f8401b7d0223e266e8"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode::getSibling</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getSibling()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00353">CCopasiNode.h:353</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classCCopasiVector_html_ab7e0e37022783eddfe85abf9339b05c0"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector::size</a></div><div class="ttdeci">virtual size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00386">CCopasiVector.h:386</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a8eb296b9e9526f0733225fa7aebc21b9"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a8eb296b9e9526f0733225fa7aebc21b9">CEvaluationNode::getValue</a></div><div class="ttdeci">const C_FLOAT64 &amp; getValue() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00144">CEvaluationNode.h:144</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_ae24b55d848d78cec0a359fd199c76562"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType</a></div><div class="ttdeci">const Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00357">CEvaluationNode.cpp:357</a></div></div>
<div class="ttc" id="classCChemEq_html"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html">CChemEq</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00033">CChemEq.h:33</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html_ac395d4a167d9c1848c3872ee94074d86"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html#ac395d4a167d9c1848c3872ee94074d86">CEvaluationNodeObject::SubType</a></div><div class="ttdeci">SubType</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00041">CEvaluationNodeObject.h:41</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a9ae5f278d92322b21c5b101cd901d6fb"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a9ae5f278d92322b21c5b101cd901d6fb">CEvaluationNode::FUNCTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00046">CEvaluationNode.h:46</a></div></div>
<div class="ttc" id="classCCopasiObject_html"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9f/CCopasiObject_8h_source.html#l00216">CCopasiObject.h:216</a></div></div>
<div class="ttc" id="classCMetab_html"><div class="ttname"><a href="../../dc/d44/classCMetab.html">CMetab</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df5/CMetab_8h_source.html#l00178">CMetab.h:178</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a373ef5eff2832cc83a380a1a6d5f17e7">CEvaluationNode::OBJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00045">CEvaluationNode.h:45</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ab92634da43399704fc2ac9e201e4707a"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ab92634da43399704fc2ac9e201e4707a">SBMLImporter::separateProductArguments</a></div><div class="ttdeci">void separateProductArguments(const CEvaluationNode *pRootNode, std::vector&lt; const CEvaluationNode * &gt; &amp;arguments)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05543">SBMLImporter.cpp:5543</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classCChemEq_html_ac7001192479e074d3696734187ec50d8"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">CChemEq::getProducts</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getProducts() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00063">CChemEq.cpp:63</a></div></div>
<div class="ttc" id="classCEvaluationNodeOperator_html_a39e738b7acfcf431f7c72e76b68ffa98"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98">CEvaluationNodeOperator::SubType</a></div><div class="ttdeci">SubType</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00038">CEvaluationNodeOperator.h:38</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a9e5fcf60f22d2701417f90756847d37b"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a9e5fcf60f22d2701417f90756847d37b">CEvaluationNode::type</a></div><div class="ttdeci">static Type type(const Type &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00123">CEvaluationNode.cpp:123</a></div></div>
<div class="ttc" id="classCEvaluationNodeNumber_html"><div class="ttname"><a href="../../d3/d2a/classCEvaluationNodeNumber.html">CEvaluationNodeNumber</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/CEvaluationNodeNumber_8h_source.html#l00023">CEvaluationNodeNumber.h:23</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2aa8c57db3550fc84175ad38f1f3661e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">SBMLImporter::mpDataModel</a></div><div class="ttdeci">CCopasiDataModel * mpDataModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00068">SBMLImporter.h:68</a></div></div>
<div class="ttc" id="classSBMLImporter_html_afa092dea2bdae901c5cbf41e7c4c7dd1"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">SBMLImporter::isMassActionExpression</a></div><div class="ttdeci">std::vector&lt; CEvaluationNodeObject * &gt; * isMassActionExpression(const CEvaluationNode *pRootNode, const CChemEq &amp;chemicalEquation)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05223">SBMLImporter.cpp:5223</a></div></div>
<div class="ttc" id="classCEvaluationNodeOperator_html_a39e738b7acfcf431f7c72e76b68ffa98ac08f19645f20aa1db61f3907975816e7"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98ac08f19645f20aa1db61f3907975816e7">CEvaluationNodeOperator::MINUS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00046">CEvaluationNodeOperator.h:46</a></div></div>
<div class="ttc" id="classCCopasiObject_html_aab9462de68df423ab9eaebaafabcf783"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#aab9462de68df423ab9eaebaafabcf783">CCopasiObject::isReference</a></div><div class="ttdeci">bool isReference() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00572">CCopasiObject.cpp:572</a></div></div>
<div class="ttc" id="classCChemEq_html_ab2429ddb26864468a33218f6b8fcfdd6"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ab2429ddb26864468a33218f6b8fcfdd6">CChemEq::getReversibility</a></div><div class="ttdeci">const bool &amp; getReversibility() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00077">CChemEq.cpp:77</a></div></div>
<div class="ttc" id="classCChemEqElement_html_a464fe74231e8ab6769463226ef9e4c5f"><div class="ttname"><a href="../../d6/d8d/classCChemEqElement.html#a464fe74231e8ab6769463226ef9e4c5f">CChemEqElement::getMultiplicity</a></div><div class="ttdeci">const C_FLOAT64 &amp; getMultiplicity() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da7/CChemEqElement_8cpp_source.html#l00095">CChemEqElement.cpp:95</a></div></div>
<div class="ttc" id="classCChemEqElement_html_ac5717e22b92036afc7dcedcce102f1a5"><div class="ttname"><a href="../../d6/d8d/classCChemEqElement.html#ac5717e22b92036afc7dcedcce102f1a5">CChemEqElement::getMetaboliteKey</a></div><div class="ttdeci">const std::string &amp; getMetaboliteKey() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da7/CChemEqElement_8cpp_source.html#l00083">CChemEqElement.cpp:83</a></div></div>
<div class="ttc" id="classCEvaluationNodeFunction_html_a7d9eee722d7e2b7c7888b23838d7d604abdac8cb70f0bd888612679ac5a519f9e"><div class="ttname"><a href="../../d8/dcb/classCEvaluationNodeFunction.html#a7d9eee722d7e2b7c7888b23838d7d604abdac8cb70f0bd888612679ac5a519f9e">CEvaluationNodeFunction::MINUS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d4d/CEvaluationNodeFunction_8h_source.html#l00087">CEvaluationNodeFunction.h:87</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491">CEvaluationNode::Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00039">CEvaluationNode.h:39</a></div></div>
<div class="ttc" id="classCChemEq_html_abbcd10e89a632f5a7c225fee6975c6d9"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getSubstrates() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00060">CChemEq.cpp:60</a></div></div>
<div class="ttc" id="classCChemEq_html_ab0207e434c51d92b8ea7a2e022aa778b"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ab0207e434c51d92b8ea7a2e022aa778b">CChemEq::addMetabolite</a></div><div class="ttdeci">bool addMetabolite(const std::string &amp;key, const C_FLOAT64 multiplicity, const MetaboliteRole &amp;role)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00080">CChemEq.cpp:80</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a2cb02df3d57dad7ad1f9654941135c31"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a></div><div class="ttdeci">static Type subType(const Type &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00120">CEvaluationNode.cpp:120</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a34f24c83698b4184ec7c8ab795efdee4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">SBMLImporter::areApproximatelyEqual</a></div><div class="ttdeci">static bool areApproximatelyEqual(const double &amp;x, const double &amp;y, const double &amp;t=1e-9)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00177">SBMLImporter.cpp:177</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_aeef59b7ae37d1323a4900e5d19140491a745531dbd3babe952bfaa4176744dbac"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#aeef59b7ae37d1323a4900e5d19140491a745531dbd3babe952bfaa4176744dbac">CEvaluationNode::OPERATOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00044">CEvaluationNode.h:44</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a761f04c57a75e99a63ee0700c76fdafe"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode::getData</a></div><div class="ttdeci">virtual const Data &amp; getData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00118">CCopasiNode.h:118</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00034">CEvaluationNodeObject.h:34</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
<div class="ttc" id="classCCopasiDataModel_html_a9d54888c14c755abec4c757289ee26f7"><div class="ttname"><a href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">CCopasiDataModel::ObjectFromName</a></div><div class="ttdeci">CCopasiObject * ObjectFromName(const std::vector&lt; CCopasiContainer * &gt; &amp;listOfContainer, const CCopasiObjectName &amp;CN) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d38/CCopasiDataModel_8cpp_source.html#l01940">CCopasiDataModel.cpp:1940</a></div></div>
<div class="ttc" id="classCChemEq_html_a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00039">CChemEq.h:39</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a33bb5035eec7ebc5e3ecac4771316405"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">CCopasiObject::getObjectParent</a></div><div class="ttdeci">CCopasiContainer * getObjectParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00276">CCopasiObject.cpp:276</a></div></div>
<div class="ttc" id="classCCopasiVector_html"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt; CChemEqElement &gt;</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8d114872c119310ca821f8f054b1b6e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a> * &gt; * SBMLImporter::isMassActionFunction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d86/classCFunction.html">CFunction</a> *&#160;</td>
          <td class="paramname"><em>pFun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dc0/classCChemEq.html">CChemEq</a> &amp;&#160;</td>
          <td class="paramname"><em>chemicalEquation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; std::string &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>functionArgumentCNs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05500">5500</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d44bd16667ac649b9186979da296734">createExpressionFromFunction()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5eccfb6bf7001137ae5b14ecbfd0c971">isMassAction()</a>.</p>
<div class="fragment"><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;{</div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;  <span class="comment">// create an expression from the function and call isMassActionExpression</span></div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;  <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pExpressionTree = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d44bd16667ac649b9186979da296734">createExpressionFromFunction</a>(pFun, functionArgumentCNs);</div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;  <span class="keywordflow">if</span> (!pExpressionTree)</div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;    {</div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;      <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;    }</div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;</div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;  std::vector&lt;CEvaluationNodeObject*&gt;* v = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression</a>(pExpressionTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), chemicalEquation);</div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;</div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;  <span class="keyword">delete</span> pExpressionTree;</div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;  <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;}</div>
<div class="ttc" id="classCEvaluationTree_html"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00028">CEvaluationTree.h:28</a></div></div>
<div class="ttc" id="classSBMLImporter_html_afa092dea2bdae901c5cbf41e7c4c7dd1"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">SBMLImporter::isMassActionExpression</a></div><div class="ttdeci">std::vector&lt; CEvaluationNodeObject * &gt; * isMassActionExpression(const CEvaluationNode *pRootNode, const CChemEq &amp;chemicalEquation)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05223">SBMLImporter.cpp:5223</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7d44bd16667ac649b9186979da296734"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7d44bd16667ac649b9186979da296734">SBMLImporter::createExpressionFromFunction</a></div><div class="ttdeci">CEvaluationTree * createExpressionFromFunction(const CFunction *pFun, const std::vector&lt; std::vector&lt; std::string &gt; &gt; &amp;functionArgumentCNs)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05516">SBMLImporter.cpp:5516</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a632c364034d1112fdc3ed7e05dfd157c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> * SBMLImporter::isMultipliedByVolume </td>
          <td>(</td>
          <td class="paramtype">const ASTNode *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>compartmentSBMLId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks if a given tree is multiplied by a compartment identifier. If so, a copy of the tree is returned in which the multiplication has been removed. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05927">5927</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;{</div>
<div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;  <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>* result = NULL;</div>
<div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;</div>
<div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;  <span class="keywordflow">if</span> (node-&gt;getType() == AST_TIMES || node-&gt;getType() == AST_DIVIDE)</div>
<div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;    {</div>
<div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;      <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>* pTmpResultNode = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>(node-&gt;getType());</div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = node-&gt;getNumChildren();</div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;      <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;</div>
<div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;        {</div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;          <span class="keyword">const</span> ASTNode* child = node-&gt;getChild(i);</div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;</div>
<div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;          <span class="keywordflow">if</span> (node-&gt;getType() == AST_TIMES &amp;&amp; child-&gt;getType() == AST_NAME &amp;&amp; child-&gt;getName() == compartmentSBMLId)</div>
<div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;            {</div>
<div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;              found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;            }</div>
<div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!found) &amp;&amp; (child-&gt;getType() == AST_TIMES || child-&gt;getType() == AST_DIVIDE))</div>
<div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;            {</div>
<div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;              ASTNode* pSubResult = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a632c364034d1112fdc3ed7e05dfd157c">isMultipliedByVolume</a>(child, compartmentSBMLId);</div>
<div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;</div>
<div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;              <span class="keywordflow">if</span> (pSubResult)</div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;                {</div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;                  found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;</div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;                  <span class="keywordflow">if</span> (pSubResult-&gt;getNumChildren() &gt; 1)</div>
<div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;                    {</div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;                      pTmpResultNode-&gt;addChild(pSubResult);</div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;                    }</div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pSubResult-&gt;getNumChildren() == 1)</div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;                    {</div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;                      pTmpResultNode-&gt;addChild(static_cast&lt;ASTNode*&gt;(static_cast&lt;ConverterASTNode*&gt;(pSubResult)-&gt;removeChild(0)));</div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;                      <span class="keyword">delete</span> pSubResult;</div>
<div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;                    }</div>
<div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;                  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;                    {</div>
<div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;                      <span class="keyword">delete</span> pSubResult;</div>
<div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;                    }</div>
<div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;                }</div>
<div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;                {</div>
<div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;                  pTmpResultNode-&gt;addChild(<span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>(*child));</div>
<div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;                }</div>
<div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;            }</div>
<div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;            {</div>
<div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;              <span class="comment">// bail in case of hOSU</span></div>
<div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;              <span class="keywordflow">if</span> (child-&gt;getType() == AST_NAME &amp;&amp;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.size() &gt; 0)</div>
<div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;                {</div>
<div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;                  std::map&lt;Species*, Compartment*&gt;::iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.begin();</div>
<div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;                  std::map&lt;Species*, Compartment*&gt;::iterator endIt = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.end();</div>
<div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;</div>
<div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;                  <span class="keywordflow">while</span> (it != endIt)</div>
<div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;                    {</div>
<div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;                      <span class="keywordflow">if</span> (it-&gt;first-&gt;getId() == child-&gt;getName()) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;</div>
<div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;                      it++;</div>
<div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;                    }</div>
<div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;                }</div>
<div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;</div>
<div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;              pTmpResultNode-&gt;addChild(<span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>(*child));</div>
<div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;            }</div>
<div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;        }</div>
<div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;</div>
<div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;      <span class="keywordflow">if</span> (found)</div>
<div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;        {</div>
<div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;          result = pTmpResultNode;</div>
<div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;        }</div>
<div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;        {</div>
<div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;          <span class="keyword">delete</span> pTmpResultNode;</div>
<div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;        }</div>
<div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;    }</div>
<div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;</div>
<div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;}</div>
<div class="ttc" id="classConverterASTNode_html"><div class="ttname"><a href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/ConverterASTNode_8h_source.html#l00023">ConverterASTNode.h:23</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a5d0a2880f878659d6a0fc2fe0cc15610"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">SBMLImporter::mSubstanceOnlySpecies</a></div><div class="ttdeci">std::map&lt; Species *, Compartment * &gt; mSubstanceOnlySpecies</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00076">SBMLImporter.h:76</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a632c364034d1112fdc3ed7e05dfd157c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a632c364034d1112fdc3ed7e05dfd157c">SBMLImporter::isMultipliedByVolume</a></div><div class="ttdeci">ConverterASTNode * isMultipliedByVolume(const ASTNode *node, const std::string &amp;compartmentSBMLId)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05927">SBMLImporter.cpp:5927</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="add8d8e41a0b4c3853049ee8f5d121d99"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::isSimpleFunctionCall </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td>
          <td class="paramname"><em>pRootNode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05892">5892</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, and <a class="el" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode&lt; _Data &gt;::getSibling()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;{</div>
<div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;  <span class="comment">// it is a simple function call if it is a CEvaluationNodeCall object and all</span></div>
<div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;  <span class="comment">// its arguments are object nodes.</span></div>
<div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;  <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;</div>
<div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;  <span class="keywordflow">if</span> (dynamic_cast&lt;const CEvaluationNodeCall*&gt;(pRootNode))</div>
<div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;    {</div>
<div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pRootNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;</div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;      <span class="comment">// I guess it must have at least one child to qualify.</span></div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;      <span class="keywordflow">if</span> (!pChildNode)</div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;        {</div>
<div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;          result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;        }</div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;</div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;      <span class="keywordflow">while</span> (pChildNode)</div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;        {</div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;          <span class="keywordflow">if</span> (!dynamic_cast&lt;const CEvaluationNodeObject*&gt;(pChildNode))</div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;            {</div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;              result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;            }</div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;</div>
<div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;          pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;        }</div>
<div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;    }</div>
<div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;    {</div>
<div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;      result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;    }</div>
<div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;</div>
<div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;  <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;}</div>
<div class="ttc" id="classCCopasiNode_html_a0730aecebb9ca0f8401b7d0223e266e8"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode::getSibling</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getSibling()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00353">CCopasiNode.h:353</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac9b629c3ac0f557a6f94da2880781ed2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::isStochasticModel </td>
          <td>(</td>
          <td class="paramtype">const Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Heuristically checks whether a model was meant to be simulated stochastically. If the substance units are set to items and all reaction are irreversible this function will return true; </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06344">6344</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;{</div>
<div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;  <span class="keywordtype">bool</span> stochastic = <span class="keyword">false</span>;</div>
<div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;  <span class="keyword">const</span> UnitDefinition* pUD = pSBMLModel-&gt;getUnitDefinition(<span class="stringliteral">&quot;substance&quot;</span>);</div>
<div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;</div>
<div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;  <span class="keywordflow">if</span> (pUD)</div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;    {</div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;      stochastic = (pUD-&gt;getNumUnits() == 1 &amp;&amp;</div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;                    pUD-&gt;getUnit(0)-&gt;getKind() == UNIT_KIND_ITEM);</div>
<div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;</div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;      <span class="keywordflow">for</span> (i = 0; (stochastic == <span class="keyword">true</span>) &amp;&amp; (i &lt; pSBMLModel-&gt;getNumReactions()); ++i)</div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;        {</div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;          stochastic = !pSBMLModel-&gt;getReaction(i)-&gt;getReversible();</div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;        }</div>
<div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;    }</div>
<div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;</div>
<div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;  <span class="keywordflow">return</span> stochastic;</div>
<div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8a3910a5ef44cb9a35f36fc963002ed4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::multiplySubstanceOnlySpeciesByVolume </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *&#160;</td>
          <td class="paramname"><em>pNode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Multiplies all species nodes that belong to species with the hasSubstanceOnlyUnits flag set with the volume of the compartment that the species belongs to. This is only done for kineticLaw, all other mathematical expressions import those references as particle number nodes divided by the quantity2unit factor. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09140">9140</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d2/d16/classCNodeIteratorMode.html#aea14a3591128f088de5c392e51f680c9adbe53b89bb7136a7e399860cd6811a2c">CNodeIteratorMode::Before</a>, <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>, <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>, <a class="el" href="../../d5/dcc/classConverterASTNode.html#a4b31c6595d47c1cb4e520775c0a8f926">ConverterASTNode::removeChild()</a>, <a class="el" href="../../de/d8c/classCNodeContextIterator.html#aafec776bbac4df962d3f8f5d2727744d">CNodeContextIterator&lt; Node, int &gt;::setProcessingModes()</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#aa35b9921ec708e8676846c33ee20e6a1">CNodeContextIterator&lt; Node, int &gt;::skipChildren()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l09141"></a><span class="lineno"> 9141</span>&#160;{</div>
<div class="line"><a name="l09142"></a><span class="lineno"> 9142</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ConverterASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l09143"></a><span class="lineno"> 9143</span>&#160;  itNode.setProcessingModes(<a class="code" href="../../d2/d16/classCNodeIteratorMode.html#aea14a3591128f088de5c392e51f680c9adbe53b89bb7136a7e399860cd6811a2c">CNodeIteratorMode::Before</a>);</div>
<div class="line"><a name="l09144"></a><span class="lineno"> 9144</span>&#160;</div>
<div class="line"><a name="l09145"></a><span class="lineno"> 9145</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l09146"></a><span class="lineno"> 9146</span>&#160;    {</div>
<div class="line"><a name="l09147"></a><span class="lineno"> 9147</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l09148"></a><span class="lineno"> 9148</span>&#160;        {</div>
<div class="line"><a name="l09149"></a><span class="lineno"> 9149</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09150"></a><span class="lineno"> 9150</span>&#160;        }</div>
<div class="line"><a name="l09151"></a><span class="lineno"> 9151</span>&#160;</div>
<div class="line"><a name="l09152"></a><span class="lineno"> 9152</span>&#160;      std::map&lt;Species*, Compartment*&gt;::iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.begin(), endit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.end();</div>
<div class="line"><a name="l09153"></a><span class="lineno"> 9153</span>&#160;</div>
<div class="line"><a name="l09154"></a><span class="lineno"> 9154</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_DIVIDE)</div>
<div class="line"><a name="l09155"></a><span class="lineno"> 9155</span>&#160;        {</div>
<div class="line"><a name="l09156"></a><span class="lineno"> 9156</span>&#160;          <span class="comment">// check if the first child is a has only substance species and the second</span></div>
<div class="line"><a name="l09157"></a><span class="lineno"> 9157</span>&#160;          <span class="comment">// is the compartment the species belongs to</span></div>
<div class="line"><a name="l09158"></a><span class="lineno"> 9158</span>&#160;          <span class="comment">// in that case, we just change the node to being the species node</span></div>
<div class="line"><a name="l09159"></a><span class="lineno"> 9159</span>&#160;          assert(itNode-&gt;getNumChildren() == 2);</div>
<div class="line"><a name="l09160"></a><span class="lineno"> 9160</span>&#160;</div>
<div class="line"><a name="l09161"></a><span class="lineno"> 9161</span>&#160;          <span class="keywordflow">if</span> (itNode-&gt;getNumChildren() == 2)</div>
<div class="line"><a name="l09162"></a><span class="lineno"> 9162</span>&#160;            {</div>
<div class="line"><a name="l09163"></a><span class="lineno"> 9163</span>&#160;              <span class="keyword">const</span> ASTNode* pChild1 = itNode-&gt;getChild(0);</div>
<div class="line"><a name="l09164"></a><span class="lineno"> 9164</span>&#160;              <span class="keyword">const</span> ASTNode* pChild2 = itNode-&gt;getChild(1);</div>
<div class="line"><a name="l09165"></a><span class="lineno"> 9165</span>&#160;</div>
<div class="line"><a name="l09166"></a><span class="lineno"> 9166</span>&#160;              <span class="keywordflow">if</span> (pChild1-&gt;getType() == AST_NAME &amp;&amp; pChild2-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l09167"></a><span class="lineno"> 9167</span>&#160;                {</div>
<div class="line"><a name="l09168"></a><span class="lineno"> 9168</span>&#160;                  std::string <span class="keywordtype">id</span> = pChild1-&gt;getName();</div>
<div class="line"><a name="l09169"></a><span class="lineno"> 9169</span>&#160;</div>
<div class="line"><a name="l09170"></a><span class="lineno"> 9170</span>&#160;                  <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l09171"></a><span class="lineno"> 9171</span>&#160;                    {</div>
<div class="line"><a name="l09172"></a><span class="lineno"> 9172</span>&#160;                      <span class="keywordflow">if</span> (it-&gt;first-&gt;getId() == <a class="code" href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">id</a>)</div>
<div class="line"><a name="l09173"></a><span class="lineno"> 9173</span>&#160;                        {</div>
<div class="line"><a name="l09174"></a><span class="lineno"> 9174</span>&#160;                          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09175"></a><span class="lineno"> 9175</span>&#160;                        }</div>
<div class="line"><a name="l09176"></a><span class="lineno"> 9176</span>&#160;</div>
<div class="line"><a name="l09177"></a><span class="lineno"> 9177</span>&#160;                      ++it;</div>
<div class="line"><a name="l09178"></a><span class="lineno"> 9178</span>&#160;                    }</div>
<div class="line"><a name="l09179"></a><span class="lineno"> 9179</span>&#160;</div>
<div class="line"><a name="l09180"></a><span class="lineno"> 9180</span>&#160;                  <span class="keywordflow">if</span> (it != endit &amp;&amp; it-&gt;second-&gt;getSpatialDimensions() != 0 &amp;&amp; pChild2-&gt;getName() == it-&gt;second-&gt;getId())</div>
<div class="line"><a name="l09181"></a><span class="lineno"> 9181</span>&#160;                    {</div>
<div class="line"><a name="l09182"></a><span class="lineno"> 9182</span>&#160;                      <span class="comment">// delete the children</span></div>
<div class="line"><a name="l09183"></a><span class="lineno"> 9183</span>&#160;                      itNode-&gt;removeChild(1);</div>
<div class="line"><a name="l09184"></a><span class="lineno"> 9184</span>&#160;                      itNode-&gt;removeChild(0);</div>
<div class="line"><a name="l09185"></a><span class="lineno"> 9185</span>&#160;                      <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(pChild1);</div>
<div class="line"><a name="l09186"></a><span class="lineno"> 9186</span>&#160;                      <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(pChild2);</div>
<div class="line"><a name="l09187"></a><span class="lineno"> 9187</span>&#160;                      <span class="comment">// change the current node to represent the species</span></div>
<div class="line"><a name="l09188"></a><span class="lineno"> 9188</span>&#160;                      itNode-&gt;setType(AST_NAME);</div>
<div class="line"><a name="l09189"></a><span class="lineno"> 9189</span>&#160;                      itNode-&gt;setName(<span class="keywordtype">id</span>.c_str());</div>
<div class="line"><a name="l09190"></a><span class="lineno"> 9190</span>&#160;                      itNode.skipChildren();</div>
<div class="line"><a name="l09191"></a><span class="lineno"> 9191</span>&#160;                    }</div>
<div class="line"><a name="l09192"></a><span class="lineno"> 9192</span>&#160;                }</div>
<div class="line"><a name="l09193"></a><span class="lineno"> 9193</span>&#160;            }</div>
<div class="line"><a name="l09194"></a><span class="lineno"> 9194</span>&#160;        }</div>
<div class="line"><a name="l09195"></a><span class="lineno"> 9195</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l09196"></a><span class="lineno"> 9196</span>&#160;        {</div>
<div class="line"><a name="l09197"></a><span class="lineno"> 9197</span>&#160;          std::string <span class="keywordtype">id</span> = itNode-&gt;getName();</div>
<div class="line"><a name="l09198"></a><span class="lineno"> 9198</span>&#160;</div>
<div class="line"><a name="l09199"></a><span class="lineno"> 9199</span>&#160;          <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l09200"></a><span class="lineno"> 9200</span>&#160;            {</div>
<div class="line"><a name="l09201"></a><span class="lineno"> 9201</span>&#160;              <span class="keywordflow">if</span> (it-&gt;first-&gt;getId() == <a class="code" href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">id</a>)</div>
<div class="line"><a name="l09202"></a><span class="lineno"> 9202</span>&#160;                {</div>
<div class="line"><a name="l09203"></a><span class="lineno"> 9203</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09204"></a><span class="lineno"> 9204</span>&#160;                }</div>
<div class="line"><a name="l09205"></a><span class="lineno"> 9205</span>&#160;</div>
<div class="line"><a name="l09206"></a><span class="lineno"> 9206</span>&#160;              ++it;</div>
<div class="line"><a name="l09207"></a><span class="lineno"> 9207</span>&#160;            }</div>
<div class="line"><a name="l09208"></a><span class="lineno"> 9208</span>&#160;</div>
<div class="line"><a name="l09209"></a><span class="lineno"> 9209</span>&#160;          <span class="keywordflow">if</span> (it != endit &amp;&amp; it-&gt;second-&gt;getSpatialDimensions() != 0)</div>
<div class="line"><a name="l09210"></a><span class="lineno"> 9210</span>&#160;            {</div>
<div class="line"><a name="l09211"></a><span class="lineno"> 9211</span>&#160;              <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>* pChild1 = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>();</div>
<div class="line"><a name="l09212"></a><span class="lineno"> 9212</span>&#160;              pChild1-&gt;setType(AST_NAME);</div>
<div class="line"><a name="l09213"></a><span class="lineno"> 9213</span>&#160;              pChild1-&gt;setName(itNode-&gt;getName());</div>
<div class="line"><a name="l09214"></a><span class="lineno"> 9214</span>&#160;              <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>* pChild2 = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>();</div>
<div class="line"><a name="l09215"></a><span class="lineno"> 9215</span>&#160;              pChild2-&gt;setType(AST_NAME);</div>
<div class="line"><a name="l09216"></a><span class="lineno"> 9216</span>&#160;              pChild2-&gt;setName(it-&gt;second-&gt;getId().c_str());</div>
<div class="line"><a name="l09217"></a><span class="lineno"> 9217</span>&#160;              itNode-&gt;setType(AST_TIMES);</div>
<div class="line"><a name="l09218"></a><span class="lineno"> 9218</span>&#160;              itNode-&gt;addChild(pChild1);</div>
<div class="line"><a name="l09219"></a><span class="lineno"> 9219</span>&#160;              itNode-&gt;addChild(pChild2);</div>
<div class="line"><a name="l09220"></a><span class="lineno"> 9220</span>&#160;            }</div>
<div class="line"><a name="l09221"></a><span class="lineno"> 9221</span>&#160;        }</div>
<div class="line"><a name="l09222"></a><span class="lineno"> 9222</span>&#160;    }</div>
<div class="line"><a name="l09223"></a><span class="lineno"> 9223</span>&#160;}</div>
<div class="ttc" id="classConverterASTNode_html"><div class="ttname"><a href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/ConverterASTNode_8h_source.html#l00023">ConverterASTNode.h:23</a></div></div>
<div class="ttc" id="copasi_8h_html_ac9efe23516fb43b7adc59fbad1c221b8"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a></div><div class="ttdeci">#define pdelete(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00215">copasi.h:215</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a5d0a2880f878659d6a0fc2fe0cc15610"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">SBMLImporter::mSubstanceOnlySpecies</a></div><div class="ttdeci">std::map&lt; Species *, Compartment * &gt; mSubstanceOnlySpecies</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00076">SBMLImporter.h:76</a></div></div>
<div class="ttc" id="classCNodeIteratorMode_html_aea14a3591128f088de5c392e51f680c9adbe53b89bb7136a7e399860cd6811a2c"><div class="ttname"><a href="../../d2/d16/classCNodeIteratorMode.html#aea14a3591128f088de5c392e51f680c9adbe53b89bb7136a7e399860cd6811a2c">CNodeIteratorMode::Before</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00031">CNodeIterator.h:31</a></div></div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="structNamespace_html_a715d108cd7f9d5a482c1f485368e883d"><div class="ttname"><a href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">Namespace::id</a></div><div class="ttdeci">const char * id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6c/stdsoap2_8h_source.html#l01262">stdsoap2.h:1262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae7bb5cbf2f09b5b7ec57510695ed1ec2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::normalizeSBMLUnit </td>
          <td>(</td>
          <td class="paramtype">Unit *&#160;</td>
          <td class="paramname"><em>pU</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function normalizes the multiplier to be within the range 1.0 &lt;= multiplier &lt; 10.0. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l08386">8386</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a477bec05f03598fe9c52c95ccb441f88">convertSBMLCubicmetresToLitres()</a>.</p>
<div class="fragment"><div class="line"><a name="l08387"></a><span class="lineno"> 8387</span>&#160;{</div>
<div class="line"><a name="l08388"></a><span class="lineno"> 8388</span>&#160;  <span class="keywordflow">if</span> (pU != NULL)</div>
<div class="line"><a name="l08389"></a><span class="lineno"> 8389</span>&#160;    {</div>
<div class="line"><a name="l08390"></a><span class="lineno"> 8390</span>&#160;      <span class="keywordtype">double</span> log10Multiplier = log10(pU-&gt;getMultiplier());</div>
<div class="line"><a name="l08391"></a><span class="lineno"> 8391</span>&#160;      pU-&gt;setScale(pU-&gt;getScale() + (<a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>) floor(log10Multiplier));</div>
<div class="line"><a name="l08392"></a><span class="lineno"> 8392</span>&#160;      pU-&gt;setMultiplier(pow(10.0, log10Multiplier - floor(log10Multiplier)));</div>
<div class="line"><a name="l08393"></a><span class="lineno"> 8393</span>&#160;    }</div>
<div class="line"><a name="l08394"></a><span class="lineno"> 8394</span>&#160;}</div>
<div class="ttc" id="copasi_8h_html_a9e77742fb2ec39ea4ec3f3fbe6758c2d"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a></div><div class="ttdeci">#define C_INT32</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00090">copasi.h:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adf9578513e1cce2a924a46a0e93c5dda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> * SBMLImporter::parseSBML </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>sbmlDocumentText</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *&#160;</td>
          <td class="paramname"><em>funDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SBMLDocument *&amp;&#160;</td>
          <td class="paramname"><em>pSBMLDocument</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d08/classCListOfLayouts.html">CListOfLayouts</a> *&amp;&#160;</td>
          <td class="paramname"><em>prLol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classCCopasiDataModel.html">CCopasiDataModel</a> *&#160;</td>
          <td class="paramname"><em>pDataModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function parses an SBML document with libsbml and converts it to a COPASI <a class="el" href="../../d4/d04/classCModel.html">CModel</a> object which is returned. Deletion of the returned pointer is up to the caller. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l03221">3221</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">CProcessReport::addItem()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>, <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ad00c23b9b2d31e8ba3e6b31e87d6d599">CCopasiMessage::ERROR_FILTERED</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">CProcessReport::finishItem()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>, <a class="el" href="../../d3/db1/classCCopasiRootContainer.html#adfdf0d8573760e639ce9c71d59831ba2">CCopasiRootContainer::getConfiguration()</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#af30f0e884cf907d5dc7e49679052e26a">CCopasiDataModel::getReferenceDirectory()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac4bdf302a8047d3398d6e6c796f3508d">mAvogadroSet</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a97b0a9a93a5cef4f70279f4f4cb70b36">MCXML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">mOriginalLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a76924558eafc00f4f3e01d19bd73577b">mTotalSteps</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a19097f961c78f8d0383999d957b1b32f">mUsedSBMLIdsPopulated</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a>, <a class="el" href="../../da/db4/classSBMLDocumentLoader.html#a471e7b0ade49b7e1e55b68db9b93b231">SBMLDocumentLoader::readListOfLayouts()</a>, <a class="el" href="../../d8/da5/classCProcessReport.html#a04296f0c1c65eab4a33e2e8de8a318f8">CProcessReport::setName()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a29fef7a2d6f046f115e033c2c516c1c8">CCopasiMessage::WARNING_FILTERED</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d91/classSEDMLImporter.html#a7d255bec8ba02e1f15f89f47071e96a0">SEDMLImporter::importFirstSBMLModel()</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a197b897c98be7e00c13e143b70434c31">CCopasiDataModel::importSBMLFromString()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a24f760a128c40fe04cfc873c2cc262e7">readSBML()</a>.</p>
<div class="fragment"><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;{</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a19097f961c78f8d0383999d957b1b32f">mUsedSBMLIdsPopulated</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ac4bdf302a8047d3398d6e6c796f3508d">mAvogadroSet</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a> = pDataModel;</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;  assert(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a> != NULL);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a> = NULL;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;  <span class="keywordflow">if</span> (funDB != NULL)</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    {</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a> = funDB;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;      SBMLReader* reader = <span class="keyword">new</span> SBMLReader();</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;      <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a> = 0;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;        {</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;          <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a04296f0c1c65eab4a33e2e8de8a318f8">setName</a>(<span class="stringliteral">&quot;Importing SBML file...&quot;</span>);</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;          <a class="code" href="../../d7/d6d/classSBMLImporter.html#a76924558eafc00f4f3e01d19bd73577b">mTotalSteps</a> = 11;</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;          <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a> = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Step&quot;</span>,</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;                                                  <a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">mImportStep</a>,</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;                                                  &amp;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a76924558eafc00f4f3e01d19bd73577b">mTotalSteps</a>);</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;        }</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a> step = 0, totalSteps = 0;</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;      <span class="keywordtype">size_t</span> hStep = <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>;</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> != 0)</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;        {</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;          step = 0;</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;          totalSteps = 1;</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;          hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Reading SBML file...&quot;</span>,</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;                                           step,</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;                                           &amp;totalSteps);</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;        }</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      SBMLDocument* sbmlDoc = reader-&gt;readSBMLFromString(sbmlDocumentText);</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> != 0)</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;        {</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;          step = 0;</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;          totalSteps = 1;</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;          hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Checking consistency...&quot;</span>,</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;                                           step,</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;                                           &amp;totalSteps);</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;        }</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/db1/classCCopasiRootContainer.html#adfdf0d8573760e639ce9c71d59831ba2">CCopasiRootContainer::getConfiguration</a>()-&gt;validateUnits())</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;        sbmlDoc-&gt;setApplicableValidators(AllChecksON);</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;        sbmlDoc-&gt;setApplicableValidators(AllChecksON &amp; UnitsCheckOFF);</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;<span class="preprocessor">#if LIBSBML_VERSION &gt; 50800</span></div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;<span class="preprocessor"></span>      <span class="comment">// libSBML is validating comp models after 5.8.0 this would throw an</span></div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;      <span class="comment">// error in case external references can&#39;t be resolved.</span></div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      sbmlDoc-&gt;setLocationURI(pDataModel-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#af30f0e884cf907d5dc7e49679052e26a">getReferenceDirectory</a>());</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;      <span class="keywordtype">bool</span> checkResult = sbmlDoc-&gt;checkConsistency();</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;<span class="preprocessor">#if LIBSBML_VERSION &gt; 50800</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      sbmlDoc-&gt;setLocationURI(pDataModel-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#af30f0e884cf907d5dc7e49679052e26a">getReferenceDirectory</a>());</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;      <span class="comment">// the new libsbml includes complete layout validation, and flags many</span></div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;      <span class="comment">// things as errors, that would cause COPASI to reject the model (even</span></div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;      <span class="comment">// though the layout code has been written to anticipate all these possible</span></div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;      <span class="comment">// error sources). Thus downgrade these error messages</span></div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      sbmlDoc-&gt;getErrorLog()-&gt;changeErrorSeverity(LIBSBML_SEV_ERROR, LIBSBML_SEV_WARNING, <span class="stringliteral">&quot;layout&quot;</span>);</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      <span class="keywordflow">if</span> (checkResult != 0)</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;        {</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;          <span class="keywordtype">int</span> fatal = -1;</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = sbmlDoc-&gt;getNumErrors();</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;          <span class="keywordflow">for</span> (i = 0; (i &lt; iMax) &amp;&amp; (fatal == -1); ++i)</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;            {</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;              <span class="keyword">const</span> XMLError* pSBMLError = sbmlDoc-&gt;getError(i);</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;              <span class="comment">// we check if the model contained a required package</span></div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;              <span class="keywordflow">if</span> (sbmlDoc-&gt;getLevel() &gt; 2 &amp;&amp; pSBMLError-&gt;getErrorId() == 99107)</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;                {</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 96);</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;                }</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4">CCopasiMessage::Type</a> messageType = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a>;</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;              <span class="keywordflow">switch</span> (pSBMLError-&gt;getSeverity())</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;                {</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;                  <span class="keywordflow">case</span> LIBSBML_SEV_INFO:</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.find(pSBMLError-&gt;getErrorId()) != <a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.end())</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;                      {</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;                        messageType = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a29fef7a2d6f046f115e033c2c516c1c8">CCopasiMessage::WARNING_FILTERED</a>;</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;                      }</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;                      {</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;                        messageType = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>;</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;                      }</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;                    <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(messageType, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 40, <span class="stringliteral">&quot;INFO&quot;</span>, pSBMLError-&gt;getErrorId(), pSBMLError-&gt;getLine(), pSBMLError-&gt;getColumn(), pSBMLError-&gt;getMessage().c_str());</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;                  <span class="keywordflow">case</span> LIBSBML_SEV_WARNING:</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;<span class="preprocessor">#if LIBSBML_VERSION &gt; 50800</span></div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;                    <span class="comment">// filter layout warnings always</span></div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;                    <span class="keywordflow">if</span> (pSBMLError-&gt;getPackage() == <span class="stringliteral">&quot;layout&quot;</span>)</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;                      messageType = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a29fef7a2d6f046f115e033c2c516c1c8">CCopasiMessage::WARNING_FILTERED</a>;</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;<span class="preprocessor"></span>                      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.find(pSBMLError-&gt;getErrorId()) != <a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.end())</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                        {</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                          messageType = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a29fef7a2d6f046f115e033c2c516c1c8">CCopasiMessage::WARNING_FILTERED</a>;</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                        }</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                        {</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                          messageType = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>;</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                        }</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;                    <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(messageType, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 40, <span class="stringliteral">&quot;WARNING&quot;</span>, pSBMLError-&gt;getErrorId(), pSBMLError-&gt;getLine(), pSBMLError-&gt;getColumn(), pSBMLError-&gt;getMessage().c_str());</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;                  <span class="keywordflow">case</span> LIBSBML_SEV_ERROR:</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.find(pSBMLError-&gt;getErrorId()) != <a class="code" href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">mIgnoredSBMLMessages</a>.end())</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;                      {</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;                        messageType = <a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ad00c23b9b2d31e8ba3e6b31e87d6d599">CCopasiMessage::ERROR_FILTERED</a>;</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;                      }</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;                    <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(messageType, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 40, <span class="stringliteral">&quot;ERROR&quot;</span>, pSBMLError-&gt;getErrorId(), pSBMLError-&gt;getLine(), pSBMLError-&gt;getColumn(), pSBMLError-&gt;getMessage().c_str());</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;                  <span class="keywordflow">case</span> LIBSBML_SEV_FATAL:</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;                    <span class="comment">// treat unknown as fatal</span></div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;                  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;                    <span class="comment">//CCopasiMessage(CCopasiMessage::TRACE, MCSBML + 40,&quot;FATAL&quot;,pSBMLError-&gt;getLine(),pSBMLError-&gt;getColumn(),pSBMLError-&gt;getMessage().c_str());</span></div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;                    <span class="keywordflow">if</span> (pSBMLError-&gt;getErrorId() == 10804)</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;                      {</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;                        <span class="comment">// this error indicates a problem with a notes element</span></div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;                        <span class="comment">// although libsbml flags this as fatal, we would still</span></div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                        <span class="comment">// like to read the model</span></div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;                        <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(messageType, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 40, <span class="stringliteral">&quot;ERROR&quot;</span>, pSBMLError-&gt;getErrorId(), pSBMLError-&gt;getLine(), pSBMLError-&gt;getColumn(), pSBMLError-&gt;getMessage().c_str());</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;                      }</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;                      {</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;                        fatal = i;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;                      }</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;                }</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;              <span class="comment">//std::cerr &lt;&lt; pSBMLError-&gt;getMessage() &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;            }</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;          <span class="keywordflow">if</span> (fatal != -1)</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;            {</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;              <span class="keyword">const</span> XMLError* pSBMLError = sbmlDoc-&gt;getError(fatal);</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a97b0a9a93a5cef4f70279f4f4cb70b36">MCXML</a> + 2,</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;                                     pSBMLError-&gt;getLine(),</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;                                     pSBMLError-&gt;getColumn(),</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;                                     pSBMLError-&gt;getMessage().c_str());</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>);</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;              <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;            }</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;        }</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;        {</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;          <span class="keywordflow">if</span> (sbmlDoc-&gt;getLevel() &gt; 2)</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;            {</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;              <span class="comment">// we check if the model contained a required package</span></div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;              <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = sbmlDoc-&gt;getNumErrors();</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;              <span class="keywordflow">for</span> (i = 0; i &lt; iMax ; ++i)</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;                {</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;                  <span class="keyword">const</span> XMLError* pSBMLError = sbmlDoc-&gt;getError(i);</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;                  <span class="keywordflow">if</span> (pSBMLError-&gt;getErrorId() == 99107)</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;                    {</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;                      <span class="keywordflow">if</span> (pSBMLError-&gt;getMessage().find(<span class="stringliteral">&quot;&#39;spatial&#39;&quot;</span>) != std::string::npos)</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;                        {</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;                          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>,</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;                                         <span class="stringliteral">&quot;The model you tried to open requires the SBML spatial package. &quot;</span></div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;                                         <span class="stringliteral">&quot;This version of COPASI does not support spatial models.&quot;</span>);</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;                        }</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;                      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;                        {</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;                          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 96);</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;                        }</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;                    }</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;                }</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;            }</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;        }</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;<span class="preprocessor">#if LIBSBML_VERSION &gt;= 50700</span></div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      <span class="keywordflow">if</span> (sbmlDoc-&gt;getPlugin(<span class="stringliteral">&quot;comp&quot;</span>) != NULL &amp;&amp; sbmlDoc-&gt;isSetPackageRequired(<span class="stringliteral">&quot;comp&quot;</span>))</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;        {</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;          <span class="keywordflow">if</span> (sbmlDoc-&gt;getNumErrors(LIBSBML_SEV_ERROR) &gt; 0)</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;            {</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;              std::string message =</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;                <span class="stringliteral">&quot;The SBML model you are trying to import uses the Hierarchical Modeling extension. &quot;</span></div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;                <span class="stringliteral">&quot;In order to import this model in COPASI, it has to be flattened, however flattening is &quot;</span></div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;                <span class="stringliteral">&quot;not possible because of the following errors:\n&quot;</span> + sbmlDoc-&gt;getErrorLog()-&gt;toString();</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;              <span class="comment">// escape potential percent signs that would lead to an error when passed to CCopasiMessage</span></div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;              CPrefixNameTransformer::replaceStringInPlace(message, <span class="stringliteral">&quot;%&quot;</span>, <span class="stringliteral">&quot;%%&quot;</span>);</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, message.c_str());</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;            }</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;<span class="preprocessor">#if LIBSBML_VERSION &gt;= 50903 &amp;&amp; LIBSBML_HAS_PACKAGE_COMP</span></div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;<span class="preprocessor"></span>          <span class="comment">// apply the name transformer</span></div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;          CompModelPlugin* mPlug = <span class="keyword">dynamic_cast&lt;</span>CompModelPlugin*<span class="keyword">&gt;</span>(sbmlDoc-&gt;getModel()-&gt;getPlugin(<span class="stringliteral">&quot;comp&quot;</span>));</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;          CPrefixNameTransformer trans;</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;          <span class="keywordflow">if</span> (mPlug != NULL)</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;            {</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;              mPlug-&gt;setTransformer(&amp;trans);</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;            }</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;<span class="preprocessor">#endif //LIBSBML_VERSION &gt;= 50903 &amp;&amp; LIBSBML_HAS_PACKAGE_COMP</span></div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;          <span class="comment">// the sbml comp package is used, and the required flag is set, so it stands to reason</span></div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;          <span class="comment">// that we need to flatten the document</span></div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;          sbmlDoc-&gt;getErrorLog()-&gt;clearLog();</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;          ConversionProperties props;</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;          props.addOption(<span class="stringliteral">&quot;flatten comp&quot;</span>);</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;          props.addOption(<span class="stringliteral">&quot;leavePorts&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;          props.addOption(<span class="stringliteral">&quot;basePath&quot;</span>, pDataModel-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#af30f0e884cf907d5dc7e49679052e26a">getReferenceDirectory</a>());</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;          <span class="keywordflow">if</span> (sbmlDoc-&gt;convert(props) != LIBSBML_OPERATION_SUCCESS)</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;            {</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;              std::string message =</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;                <span class="stringliteral">&quot;The SBML model you are trying to import uses the Hierarchical Modeling extension. &quot;</span></div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;                <span class="stringliteral">&quot;In order to import this model in COPASI, it has to be flattened, however flattening failed&quot;</span>;</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;              <span class="keywordflow">if</span> (sbmlDoc-&gt;getNumErrors() == 0)</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;                message += <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;                message += <span class="stringliteral">&quot; with the following errors:\n&quot;</span> + sbmlDoc-&gt;getErrorLog()-&gt;toString();</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, message.c_str());</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;            }</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;        }</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;      <span class="keywordflow">if</span> (sbmlDoc-&gt;getModel() == NULL)</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;        {</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;          <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 2);</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>);</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;          <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;        }</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      <span class="keyword">delete</span> reader;</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;      pSBMLDocument = sbmlDoc;</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> = pSBMLDocument-&gt;getLevel();</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;      <span class="comment">// remember the original level of the document because we convert Level 1 documents to Level 2</span></div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;      <span class="comment">// For the import of rules, we need to remember that is was actually a level 1 document</span></div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;      <span class="comment">// because otherwise we throw error messages on rules on parameters since the parameters</span></div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;      <span class="comment">//  have been set to constant by the conversation to Level 2</span></div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">mOriginalLevel</a> = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>;</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">mVersion</a> = pSBMLDocument-&gt;getVersion();</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;        {</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pSBMLDocument-&gt;getModel()-&gt;getNumCompartments();</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;          <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;            {</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;              Compartment* pCompartment = pSBMLDocument-&gt;getModel()-&gt;getCompartment(i);</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;              pCompartment-&gt;setSize(pCompartment-&gt;getVolume());</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;            }</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;          pSBMLDocument-&gt;setLevelAndVersion(2, 1);</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;          <a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> = pSBMLDocument-&gt;getLevel();</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;        }</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a> = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument</a>(sbmlDoc, copasi2sbmlmap);</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;      prLol = <span class="keyword">new</span> <a class="code" href="../../d0/d08/classCListOfLayouts.html">CListOfLayouts</a>(<span class="stringliteral">&quot;ListOfLayouts&quot;</span>, <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>);</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;      Model* sbmlmodel = pSBMLDocument-&gt;getModel();</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;      <span class="keywordflow">if</span> (sbmlmodel &amp;&amp; prLol)</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;        {</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;          LayoutModelPlugin *lmPlugin = (LayoutModelPlugin*)sbmlmodel-&gt;getPlugin(<span class="stringliteral">&quot;layout&quot;</span>);</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;          <span class="keywordflow">if</span> (lmPlugin != NULL)</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;            <a class="code" href="../../da/db4/classSBMLDocumentLoader.html#a471e7b0ade49b7e1e55b68db9b93b231">SBMLDocumentLoader::readListOfLayouts</a>(*prLol,</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;                                                  *lmPlugin-&gt;getListOfLayouts(),</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;                                                  copasi2sbmlmap);</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;        }</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    }</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    {</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>);</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;    }</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>) <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">mhImportStep</a>);</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <span class="keywordflow">return</span> this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>;</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_acf0033487d629c27d4f133ac8ded9c02"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#acf0033487d629c27d4f133ac8ded9c02">SBMLImporter::mIgnoredSBMLMessages</a></div><div class="ttdeci">std::set&lt; unsigned int &gt; mIgnoredSBMLMessages</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00054">SBMLImporter.h:54</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9a6daed5b9603fff0c6e698210512401"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9a6daed5b9603fff0c6e698210512401">SBMLImporter::mhImportStep</a></div><div class="ttdeci">size_t mhImportStep</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00074">SBMLImporter.h:74</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4aa2830ad243d8f7b958b891ffe3cf02db">CCopasiMessage::RAW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00083">CCopasiMessage.h:83</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classCProcessReport_html_a04296f0c1c65eab4a33e2e8de8a318f8"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#a04296f0c1c65eab4a33e2e8de8a318f8">CProcessReport::setName</a></div><div class="ttdeci">virtual bool setName(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00213">CProcessReport.cpp:213</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a97b0a9a93a5cef4f70279f4f4cb70b36"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a97b0a9a93a5cef4f70279f4f4cb70b36">MCXML</a></div><div class="ttdeci">#define MCXML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00042">CCopasiMessage.h:42</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a32b10e0dc03fc5bbf7b4842b0d314ff6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">SBMLImporter::mpImportHandler</a></div><div class="ttdeci">CProcessReport * mpImportHandler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00072">SBMLImporter.h:72</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aedc9fc3ca40ac54787698cd2370a06dc"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">SBMLImporter::createCModelFromSBMLDocument</a></div><div class="ttdeci">CModel * createCModelFromSBMLDocument(SBMLDocument *doc, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00243">SBMLImporter.cpp:243</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7d741ae7e3799fdc819e689a3dafad86"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7d741ae7e3799fdc819e689a3dafad86">SBMLImporter::mVersion</a></div><div class="ttdeci">unsigned int mVersion</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00065">SBMLImporter.h:65</a></div></div>
<div class="ttc" id="classCListOfLayouts_html"><div class="ttname"><a href="../../d0/d08/classCListOfLayouts.html">CListOfLayouts</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8a/CListOfLayouts_8h_source.html#l00029">CListOfLayouts.h:29</a></div></div>
<div class="ttc" id="copasi_8h_html_a9e77742fb2ec39ea4ec3f3fbe6758c2d"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a></div><div class="ttdeci">#define C_INT32</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00090">copasi.h:90</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4">CCopasiMessage::Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00081">CCopasiMessage.h:81</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ad00c23b9b2d31e8ba3e6b31e87d6d599"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ad00c23b9b2d31e8ba3e6b31e87d6d599">CCopasiMessage::ERROR_FILTERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00098">CCopasiMessage.h:98</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9e83963c608041887b5d5e292be033c9"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9e83963c608041887b5d5e292be033c9">SBMLImporter::mImportStep</a></div><div class="ttdeci">unsigned C_INT32 mImportStep</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00073">SBMLImporter.h:73</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classCCopasiRootContainer_html_adfdf0d8573760e639ce9c71d59831ba2"><div class="ttname"><a href="../../d3/db1/classCCopasiRootContainer.html#adfdf0d8573760e639ce9c71d59831ba2">CCopasiRootContainer::getConfiguration</a></div><div class="ttdeci">static CConfigurationFile * getConfiguration()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4b/CCopasiRootContainer_8cpp_source.html#l00131">CCopasiRootContainer.cpp:131</a></div></div>
<div class="ttc" id="classCCopasiDataModel_html_af30f0e884cf907d5dc7e49679052e26a"><div class="ttname"><a href="../../d4/d18/classCCopasiDataModel.html#af30f0e884cf907d5dc7e49679052e26a">CCopasiDataModel::getReferenceDirectory</a></div><div class="ttdeci">const std::string &amp; getReferenceDirectory() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d38/CCopasiDataModel_8cpp_source.html#l01952">CCopasiDataModel.cpp:1952</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2aa8c57db3550fc84175ad38f1f3661e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">SBMLImporter::mpDataModel</a></div><div class="ttdeci">CCopasiDataModel * mpDataModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00068">SBMLImporter.h:68</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ac4bdf302a8047d3398d6e6c796f3508d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ac4bdf302a8047d3398d6e6c796f3508d">SBMLImporter::mAvogadroSet</a></div><div class="ttdeci">bool mAvogadroSet</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00091">SBMLImporter.h:91</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af3884484e51df06669ba5bc4fc77c07c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">SBMLImporter::functionDB</a></div><div class="ttdeci">CFunctionDB * functionDB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00056">SBMLImporter.h:56</a></div></div>
<div class="ttc" id="classCProcessReport_html_a4d231c54881f298ee86d1ae44bd6e034"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">CProcessReport::addItem</a></div><div class="ttdeci">size_t addItem(const std::string &amp;name, const std::string &amp;value, const std::string *pEndValue=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00092">CProcessReport.cpp:92</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_ad39689ede4b80c944660201e94c52705"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a></div><div class="ttdeci">struct MESSAGES Message</div></div>
<div class="ttc" id="classCProcessReport_html_aefaaae08a9072b715c2f1a1a589efab0"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">CProcessReport::finishItem</a></div><div class="ttdeci">virtual bool finishItem(const size_t &amp;handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00199">CProcessReport.cpp:199</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a29fef7a2d6f046f115e033c2c516c1c8"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a29fef7a2d6f046f115e033c2c516c1c8">CCopasiMessage::WARNING_FILTERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00097">CCopasiMessage.h:97</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00092">CCopasiMessage.h:92</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a76924558eafc00f4f3e01d19bd73577b"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a76924558eafc00f4f3e01d19bd73577b">SBMLImporter::mTotalSteps</a></div><div class="ttdeci">unsigned C_INT32 mTotalSteps</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00075">SBMLImporter.h:75</a></div></div>
<div class="ttc" id="classSBMLDocumentLoader_html_a471e7b0ade49b7e1e55b68db9b93b231"><div class="ttname"><a href="../../da/db4/classSBMLDocumentLoader.html#a471e7b0ade49b7e1e55b68db9b93b231">SBMLDocumentLoader::readListOfLayouts</a></div><div class="ttdeci">static void readListOfLayouts(CListOfLayouts &amp;lol, const ListOf &amp;sbmlList, const std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasimodelmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5e/SBMLDocumentLoader_8cpp_source.html#l00047">SBMLDocumentLoader.cpp:47</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a65cdc7be5200fff34240bcb2200fe558"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a65cdc7be5200fff34240bcb2200fe558">SBMLImporter::mOriginalLevel</a></div><div class="ttdeci">unsigned int mOriginalLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00064">SBMLImporter.h:64</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a19097f961c78f8d0383999d957b1b32f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a19097f961c78f8d0383999d957b1b32f">SBMLImporter::mUsedSBMLIdsPopulated</a></div><div class="ttdeci">bool mUsedSBMLIdsPopulated</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00090">SBMLImporter.h:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0bdaab30af2fb7e2bc5e637a2b40134a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::preprocessNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *&#160;</td>
          <td class="paramname"><em>pNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Reaction *&#160;</td>
          <td class="paramname"><em>pSBMLReaction</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>In a preprocessing step each expression tree that is imported, e.g. for function definitions, rules, event or kinetic laws is preprocessed to replace some of the nodes data. See also replaceCallNodeNames and replaceTimeNodeNames. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l04681">4681</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../da/d9f/classSBMLUtils.html#a76ac586e8c7b5d3f8ed7ac6873e6e548">SBMLUtils::collectIds()</a>, <a class="el" href="../../d4/d04/classCModel.html#ab30b51797988903a4af4e7fed3d163fa">CModel::getQuantity2NumberFactor()</a>, <a class="el" href="../../d4/d04/classCModel.html#a8eb14b87c1bfaa2479fbb897e50832b8">CModel::getQuantityUnitEnum()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8e416728d56ad3e80750885794bb60e9">isDelayFunctionUsed()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">mDelayFound</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">mReactionsWithReplacedLocalParameters</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8a3910a5ef44cb9a35f36fc963002ed4">multiplySubstanceOnlySpeciesByVolume()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">mUnitOnNumberFound</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a19097f961c78f8d0383999d957b1b32f">mUsedSBMLIdsPopulated</a>, <a class="el" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25ba4742ca026f7a9968138284bee1b7e7ee">CModel::number</a>, <a class="el" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6f596cc4208b32f8280111dcd7bc4727">replace_name_nodes()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aaaae9a79b256a2015377b6fd36613deb">replaceAmountReferences()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a556118a81345202b24dcac66c291532b">replaceCallNodeNames()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af175213378137da1684580b794a7cd13">replaceTimeAndAvogadroNodeNames()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a30f60e2327471fd72cb0b6445e274b38">replaceTimeDependentFunctionCalls()</a>, and <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d00c07d4d501255fa18951e949461b2">applyStoichiometricExpressions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8635efa2b753c28b33f29f8f44b12161">createCFunctionFromFunctionTree()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a54e987b86e2c598008f5013b16eacc35">importRuleForModelEntity()</a>.</p>
<div class="fragment"><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;{</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;  <span class="comment">// this function goes through the tree several times.</span></div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;  <span class="comment">// this can probably be handled more intelligently</span></div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;  <span class="comment">// maybe we should use some kind of visitor schema</span></div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;  <span class="comment">// check if there are units on pure numbers</span></div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;  <span class="comment">// so that we can create a warning that they have been ignored</span></div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;  <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2 &amp;&amp; !this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">mUnitOnNumberFound</a>)</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;    {</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">mUnitOnNumberFound</a> = SBMLImporter::checkForUnitsOnNumbers(pNode);</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;    }</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;  <span class="comment">// first replace the calls to explicitly time dependent functions</span></div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a30f60e2327471fd72cb0b6445e274b38">replaceTimeDependentFunctionCalls</a>(pNode);</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;  <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">mDelayFound</a> || pSBMLReaction != NULL)</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;    {</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;      <span class="keywordtype">bool</span> result = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8e416728d56ad3e80750885794bb60e9">isDelayFunctionUsed</a>(pNode);</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;      <span class="keywordflow">if</span> (pSBMLReaction != NULL &amp;&amp; result)</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;        {</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;          <span class="comment">// if this is the first delay we find, we have to populate the id set</span></div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;          <span class="comment">// in order to be able to create new global parameters with unique ids</span></div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;          <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a19097f961c78f8d0383999d957b1b32f">mUsedSBMLIdsPopulated</a>)</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;            {</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;              std::map&lt;std::string, const SBase*&gt; idMap;</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;              std::map&lt;std::string, const SBase*&gt; metaIdMap;</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;              <span class="comment">// this is overkill, but better than writing yet another function to</span></div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;              <span class="comment">// collect ids</span></div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;              <a class="code" href="../../da/d9f/classSBMLUtils.html#a76ac586e8c7b5d3f8ed7ac6873e6e548">SBMLUtils::collectIds</a>(pSBMLModel, idMap, metaIdMap);</div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;              std::map&lt;std::string, const SBase*&gt;::iterator it = idMap.begin(), endit = idMap.end();</div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;              <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;                {</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>.insert(it-&gt;first);</div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;                  ++it;</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;                }</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a19097f961c78f8d0383999d957b1b32f">mUsedSBMLIdsPopulated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 86);</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;            }</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;          <span class="comment">// we need a map to store the replacements for local parameters</span></div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;          <span class="comment">// which occur within delay calls</span></div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;          std::map&lt;std::string, std::string&gt; replacementMap;</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes</a>(pNode, pSBMLModel, copasi2sbmlmap, pSBMLReaction, replacementMap);</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;          <span class="keywordflow">if</span> (!replacementMap.empty())</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;            {</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;              <span class="comment">// replace all local parameter nodes which have been converted to global parameters</span></div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;              <span class="comment">// and that were not in delay calls</span></div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a6f596cc4208b32f8280111dcd7bc4727">replace_name_nodes</a>(pNode, replacementMap);</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;              <span class="comment">// delete the local parameters that have been replaced from the</span></div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;              <span class="comment">// reaction</span></div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;              std::map&lt;std::string, std::string&gt;::const_iterator it = replacementMap.begin(), endit = replacementMap.end();</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;              <span class="comment">// starting with SBML Level 3, the parameters of a kinetic law are expressed in</span></div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;              <span class="comment">// terms of a new class called LocalParameter instead of Parameter</span></div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;              <span class="comment">// Unfortunatelly libsbml 4.1 uses separate data structures for</span></div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;              <span class="comment">// the Parameters and the LocalParameters which mandates a small</span></div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;              <span class="comment">// code change to be on the safe side</span></div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;              ListOfParameters* pList = NULL;</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;</div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;              <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;                {</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;                  pList = pSBMLReaction-&gt;getKineticLaw()-&gt;getListOfLocalParameters();</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;                }</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;                {</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;                  pList = pSBMLReaction-&gt;getKineticLaw()-&gt;getListOfParameters();</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;                }</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;              Parameter* pParam = NULL;</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;              <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;                {</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;                  pParam = pList-&gt;remove(it-&gt;first);</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;                  assert(pParam != NULL);</div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;                  <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(pParam);</div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;                  ++it;</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;                }</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;</div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">mReactionsWithReplacedLocalParameters</a>.insert(pSBMLReaction-&gt;getId());</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;            }</div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;        }</div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">mDelayFound</a> = result;</div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;    }</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a556118a81345202b24dcac66c291532b">replaceCallNodeNames</a>(pNode);</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af175213378137da1684580b794a7cd13">replaceTimeAndAvogadroNodeNames</a>(pNode);</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;  <span class="keywordflow">if</span> (pSBMLReaction != NULL &amp;&amp; !this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.empty())</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;    {</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8a3910a5ef44cb9a35f36fc963002ed4">multiplySubstanceOnlySpeciesByVolume</a>(pNode);</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;    }</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;  <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.empty() &amp;&amp; this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a8eb14b87c1bfaa2479fbb897e50832b8">getQuantityUnitEnum</a>() != <a class="code" href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25ba4742ca026f7a9968138284bee1b7e7ee">CModel::number</a> &amp;&amp; pSBMLReaction == NULL)</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;    {</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aaaae9a79b256a2015377b6fd36613deb">replaceAmountReferences</a>(pNode, pSBMLModel, this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ab30b51797988903a4af4e7fed3d163fa">getQuantity2NumberFactor</a>(), copasi2sbmlmap);</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;    }</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a8a3910a5ef44cb9a35f36fc963002ed4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8a3910a5ef44cb9a35f36fc963002ed4">SBMLImporter::multiplySubstanceOnlySpeciesByVolume</a></div><div class="ttdeci">void multiplySubstanceOnlySpeciesByVolume(ConverterASTNode *pNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09140">SBMLImporter.cpp:9140</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7ac29e15dc0e3a2795ec3b1a13e496fe"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">SBMLImporter::replace_delay_nodes</a></div><div class="ttdeci">void replace_delay_nodes(ConverterASTNode *pNode, Model *pModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Reaction *pSBMLReaction, std::map&lt; std::string, std::string &gt; &amp;localReplacementMap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10069">SBMLImporter.cpp:10069</a></div></div>
<div class="ttc" id="copasi_8h_html_ac9efe23516fb43b7adc59fbad1c221b8"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a></div><div class="ttdeci">#define pdelete(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00215">copasi.h:215</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8da36a9a8ae299a7ea5d4ac68382bb1e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8da36a9a8ae299a7ea5d4ac68382bb1e">SBMLImporter::mUnitOnNumberFound</a></div><div class="ttdeci">bool mUnitOnNumberFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00061">SBMLImporter.h:61</a></div></div>
<div class="ttc" id="classCModel_html_ac6c52b224ba5973b9cae3cb3d503e25ba4742ca026f7a9968138284bee1b7e7ee"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac6c52b224ba5973b9cae3cb3d503e25ba4742ca026f7a9968138284bee1b7e7ee">CModel::number</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/CModel_8h_source.html#l00096">CModel.h:96</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classCModel_html_a8eb14b87c1bfaa2479fbb897e50832b8"><div class="ttname"><a href="../../d4/d04/classCModel.html#a8eb14b87c1bfaa2479fbb897e50832b8">CModel::getQuantityUnitEnum</a></div><div class="ttdeci">CModel::QuantityUnit getQuantityUnitEnum() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02331">CModel.cpp:2331</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a30f60e2327471fd72cb0b6445e274b38"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a30f60e2327471fd72cb0b6445e274b38">SBMLImporter::replaceTimeDependentFunctionCalls</a></div><div class="ttdeci">void replaceTimeDependentFunctionCalls(ASTNode *root)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l07147">SBMLImporter.cpp:7147</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8728f6d9cdf831a37754c20bb9353a04"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8728f6d9cdf831a37754c20bb9353a04">SBMLImporter::mReactionsWithReplacedLocalParameters</a></div><div class="ttdeci">std::set&lt; std::string &gt; mReactionsWithReplacedLocalParameters</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00078">SBMLImporter.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a6f596cc4208b32f8280111dcd7bc4727"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a6f596cc4208b32f8280111dcd7bc4727">SBMLImporter::replace_name_nodes</a></div><div class="ttdeci">void replace_name_nodes(ASTNode *pNode, const std::map&lt; std::string, std::string &gt; &amp;replacementMap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10334">SBMLImporter.cpp:10334</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a5d0a2880f878659d6a0fc2fe0cc15610"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">SBMLImporter::mSubstanceOnlySpecies</a></div><div class="ttdeci">std::map&lt; Species *, Compartment * &gt; mSubstanceOnlySpecies</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00076">SBMLImporter.h:76</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8e416728d56ad3e80750885794bb60e9"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8e416728d56ad3e80750885794bb60e9">SBMLImporter::isDelayFunctionUsed</a></div><div class="ttdeci">bool isDelayFunctionUsed(ConverterASTNode *pNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04958">SBMLImporter.cpp:4958</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4ac789e90eead3612a24114b9eae58fdec">CCopasiMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00086">CCopasiMessage.h:86</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a7f40d8fba618f0e960f83849b93f357d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a7f40d8fba618f0e960f83849b93f357d">SBMLImporter::mDelayFound</a></div><div class="ttdeci">bool mDelayFound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00082">SBMLImporter.h:82</a></div></div>
<div class="ttc" id="classSBMLUtils_html_a76ac586e8c7b5d3f8ed7ac6873e6e548"><div class="ttname"><a href="../../da/d9f/classSBMLUtils.html#a76ac586e8c7b5d3f8ed7ac6873e6e548">SBMLUtils::collectIds</a></div><div class="ttdeci">static void collectIds(Model *pModel, std::map&lt; std::string, const SBase * &gt; &amp;ids, std::map&lt; std::string, const SBase * &gt; &amp;metaIds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de0/SBMLUtils_8cpp_source.html#l00096">SBMLUtils.cpp:96</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8f78f336ef119556c847afdb8e86674d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">SBMLImporter::mUsedSBMLIds</a></div><div class="ttdeci">std::set&lt; std::string &gt; mUsedSBMLIds</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00089">SBMLImporter.h:89</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCModel_html_ab30b51797988903a4af4e7fed3d163fa"><div class="ttname"><a href="../../d4/d04/classCModel.html#ab30b51797988903a4af4e7fed3d163fa">CModel::getQuantity2NumberFactor</a></div><div class="ttdeci">const C_FLOAT64 &amp; getQuantity2NumberFactor() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02354">CModel.cpp:2354</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a556118a81345202b24dcac66c291532b"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a556118a81345202b24dcac66c291532b">SBMLImporter::replaceCallNodeNames</a></div><div class="ttdeci">void replaceCallNodeNames(ASTNode *pNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05002">SBMLImporter.cpp:5002</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af175213378137da1684580b794a7cd13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af175213378137da1684580b794a7cd13">SBMLImporter::replaceTimeAndAvogadroNodeNames</a></div><div class="ttdeci">void replaceTimeAndAvogadroNodeNames(ASTNode *pNode)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04980">SBMLImporter.cpp:4980</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aaaae9a79b256a2015377b6fd36613deb"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aaaae9a79b256a2015377b6fd36613deb">SBMLImporter::replaceAmountReferences</a></div><div class="ttdeci">void replaceAmountReferences(ConverterASTNode *pNode, Model *pSBMLModel, double factor, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04790">SBMLImporter.cpp:4790</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a19097f961c78f8d0383999d957b1b32f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a19097f961c78f8d0383999d957b1b32f">SBMLImporter::mUsedSBMLIdsPopulated</a></div><div class="ttdeci">bool mUsedSBMLIdsPopulated</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00090">SBMLImporter.h:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a24f760a128c40fe04cfc873c2cc262e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> * SBMLImporter::readSBML </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *&#160;</td>
          <td class="paramname"><em>funDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SBMLDocument *&amp;&#160;</td>
          <td class="paramname"><em>pSBMLDocument</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d08/classCListOfLayouts.html">CListOfLayouts</a> *&amp;&#160;</td>
          <td class="paramname"><em>prLol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d18/classCCopasiDataModel.html">CCopasiDataModel</a> *&#160;</td>
          <td class="paramname"><em>pDataModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This functions replaces all species nodes for species that are in the substanceOnlySpeciesVector. With the node multiplied by the volume of the species compartment. void SBMLImporter::replaceSubstanceOnlySpeciesNodes(ConverterASTNode* node, const std::map&lt;Species*, Compartment*&gt;&amp; substanceOnlySpecies) { if (node != NULL) { if (node-&gt;getType() == AST_NAME) { std::map&lt;Species*, Compartment*&gt;::const_iterator it = substanceOnlySpecies.begin(); std::map&lt;Species*, Compartment*&gt;::const_iterator endIt = substanceOnlySpecies.end(); while (it != endIt) { if (it-&gt;first-&gt;getId() == node-&gt;getName()) { replace node List* l = new List(); ConverterASTNode* child1 = new <a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode(AST_NAME)</a>; child1-&gt;setName(node-&gt;getName()); ConverterASTNode* child2 = new <a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode(AST_NAME)</a>; child2-&gt;setName(it-&gt;second-&gt;getId().c_str()); l-&gt;add(child1); l-&gt;add(child2); node-&gt;setChildren(l); node-&gt;setType(AST_TIMES); break; } ++it; } } else { unsigned int counter; for (counter = 0;counter &lt; node-&gt;getNumChildren();counter++) { this-&gt;replaceSubstanceOnlySpeciesNodes((ConverterASTNode*)node-&gt;getChild(counter), substanceOnlySpecies); } } } } Function reads an SBML file with libsbml and converts it to a Copasi <a class="el" href="../../d4/d04/classCModel.html">CModel</a> </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l03186">3186</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d3/de9/classCLocaleString.html#ad8282b8631fbc6c232b1dadf190fa621">CLocaleString::fromUtf8()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>.</p>

<p>Referenced by <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a6cba7496dde125f853b2868590f309c2">CCopasiDataModel::importSBML()</a>.</p>
<div class="fragment"><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;{</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;  <span class="comment">// convert filename to the locale encoding</span></div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;  std::ifstream file(<a class="code" href="../../d3/de9/classCLocaleString.html#ad8282b8631fbc6c232b1dadf190fa621">CLocaleString::fromUtf8</a>(filename).c_str());</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  <span class="keywordflow">if</span> (!file)</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;    {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;      <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 50, filename.c_str());</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    }</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;  std::ostringstream stringStream;</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;  <span class="keywordtype">char</span> c;</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  <span class="keywordflow">while</span> (file.get(c))</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    {</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;      stringStream &lt;&lt; c;</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    }</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;  file.clear();</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;  file.close();</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;  <span class="keywordflow">return</span> this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML</a>(stringStream.str(), funDB,</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;                         pSBMLDocument, copasi2sbmlmap, prLol, pDataModel);</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;}</div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_adf9578513e1cce2a924a46a0e93c5dda"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">SBMLImporter::parseSBML</a></div><div class="ttdeci">CModel * parseSBML(const std::string &amp;sbmlDocumentText, CFunctionDB *funDB, SBMLDocument *&amp;pSBMLDocument, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, CListOfLayouts *&amp;prLol, CCopasiDataModel *pDataModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l03221">SBMLImporter.cpp:3221</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCLocaleString_html_ad8282b8631fbc6c232b1dadf190fa621"><div class="ttname"><a href="../../d3/de9/classCLocaleString.html#ad8282b8631fbc6c232b1dadf190fa621">CLocaleString::fromUtf8</a></div><div class="ttdeci">static CLocaleString fromUtf8(const std::string &amp;utf8)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/de6/CLocaleString_8cpp_source.html#l00050">CLocaleString.cpp:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3eab269f4577f39f76b021c4e3f75b37"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::removeUnusedFunctions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a> *&#160;</td>
          <td class="paramname"><em>pTmpFunctionDB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Finds all functions that are used and removes those that are not. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06089">6089</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">CProcessReport::addItem()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">CCopasiVector&lt; T &gt;::begin()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>, <a class="el" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">CCopasiVector&lt; T &gt;::end()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls()</a>, <a class="el" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">CProcessReport::finishItem()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a>, <a class="el" href="../../da/d3f/classCEvent.html#a07d073e597757d5baae882ddfceba58d">CEvent::getAssignments()</a>, <a class="el" href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">CModel::getCompartments()</a>, <a class="el" href="../../da/d3f/classCEvent.html#ac26a530ca2520550d5779f3c8cd39504">CEvent::getDelayExpressionPtr()</a>, <a class="el" href="../../d4/d04/classCModel.html#ad55cc48064428d703cee3e69b71e4703">CModel::getEvents()</a>, <a class="el" href="../../dd/d3a/classCEventAssignment.html#a8df1b2304569d3f856b357fa774764c1">CEventAssignment::getExpressionPtr()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a766cc9fa2fed8206e22e022932a60eee">CModelEntity::getExpressionPtr()</a>, <a class="el" href="../../d3/db1/classCCopasiRootContainer.html#afd5e8541f181260daf7515b28f0612c3">CCopasiRootContainer::getFunctionList()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a81973823a591e58112161570d7abac10">CModelEntity::getInitialExpressionPtr()</a>, <a class="el" href="../../d4/d04/classCModel.html#a73a8a52c2190b1aae2f1427e4e9eb0e1">CModel::getMetabolites()</a>, <a class="el" href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">CModel::getModelValues()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName()</a>, <a class="el" href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">CModel::getReactions()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">CModelEntity::getStatus()</a>, <a class="el" href="../../da/d3f/classCEvent.html#a5dfb8078bab18671d4c459ecd6ae9909">CEvent::getTriggerExpressionPtr()</a>, <a class="el" href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">CFunctionDB::loadedFunctions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>, <a class="el" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">CProcessReport::progressItem()</a>, <a class="el" href="../../d7/d08/classCCopasiVectorN.html#aa53eebbaf1fda5ded236c7ee6e82b3e3">CCopasiVectorN&lt; CType &gt;::remove()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector&lt; T &gt;::size()</a>, and <a class="el" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a358d04006ba010a4e9258117031fb00c">TriUnspecified</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;{</div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;  <span class="keywordflow">if</span> (pTmpFunctionDB)</div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;    {</div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a> step = 0, totalSteps = 0;</div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;      <span class="keywordtype">size_t</span> hStep = <a class="code" href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a>;</div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;      <span class="keywordtype">size_t</span> i, iMax = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">getReactions</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;</div>
<div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;        {</div>
<div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;          step = 0;</div>
<div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;          totalSteps =</div>
<div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;            (<span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>)(iMax + this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">getCompartments</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>() + this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a73a8a52c2190b1aae2f1427e4e9eb0e1">getMetabolites</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>() + this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">getModelValues</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>());</div>
<div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;          hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Searching used functions...&quot;</span>,</div>
<div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;                                           step,</div>
<div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;                                           &amp;totalSteps);</div>
<div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;        }</div>
<div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;</div>
<div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;      std::set&lt;std::string&gt; functionNameSet;</div>
<div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;</div>
<div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;        {</div>
<div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>* pTree = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">getReactions</a>()[i]-&gt;getFunction();</div>
<div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;</div>
<div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;          <span class="comment">// this is a hack, but if we changed stoichiometries in reactions, we can no longer be sure that the</span></div>
<div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;          <span class="comment">// kinetic function fits the reaction, so in this case it is probably better to set all functions used</span></div>
<div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;          <span class="comment">// in directions to general</span></div>
<div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;          <span class="comment">// If we don&#39;t do this, the user will not be able to use the function in the reaction in the GUI if he</span></div>
<div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;          <span class="comment">// changed it once.</span></div>
<div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;          <span class="comment">// TODO only set those functions to general that really contain modified stoichiometries</span></div>
<div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;          <span class="keywordflow">if</span> (this-&gt;mConversionFactorFound)</div>
<div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;            {</div>
<div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;              <span class="comment">// TODO another const_cast that should disappear</span></div>
<div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;              <span class="comment">// TODO because there is probably a better place to do this</span></div>
<div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;              <span class="comment">// TODO but this means rewriting the code that modifies the</span></div>
<div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;              <span class="comment">// TODO stoichiometries of reactions and put it all in one place.</span></div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;              <span class="keyword">const_cast&lt;</span><a class="code" href="../../d9/d86/classCFunction.html">CFunction</a>*<span class="keyword">&gt;</span>(pTree)-&gt;setReversible(<a class="code" href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a358d04006ba010a4e9258117031fb00c">TriUnspecified</a>);</div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;            }</div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;</div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;          <span class="keywordflow">if</span> (functionNameSet.find(pTree-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>()) == functionNameSet.end())</div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;            {</div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;              functionNameSet.insert(pTree-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>());</div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;            }</div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;</div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;          ++step;</div>
<div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;</div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(hStep)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;        }</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;</div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;      iMax = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">getCompartments</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;</div>
<div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;        {</div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;          <a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a>* pME = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">getCompartments</a>()[i];</div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;</div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;          <span class="keywordflow">if</span> (pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">getStatus</a>() != <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a>)</div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;            {</div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;              <span class="keyword">const</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a766cc9fa2fed8206e22e022932a60eee">getExpressionPtr</a>();</div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;              <span class="keywordflow">if</span> (pTree != NULL)</div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;                {</div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;                }</div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;            }</div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;</div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;          <span class="keywordflow">if</span> (pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">getStatus</a>() != <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>)</div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;            {</div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;              <span class="keyword">const</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a81973823a591e58112161570d7abac10">getInitialExpressionPtr</a>();</div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;</div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;              <span class="keywordflow">if</span> (pTree != NULL)</div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;                {</div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;                }</div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;            }</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;</div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;          ++step;</div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;        }</div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;</div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;      iMax = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a73a8a52c2190b1aae2f1427e4e9eb0e1">getMetabolites</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;</div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;        {</div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;          <a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a>* pME = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#a73a8a52c2190b1aae2f1427e4e9eb0e1">getMetabolites</a>()[i];</div>
<div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;</div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;          <span class="keywordflow">if</span> (pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">getStatus</a>() != <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a>)</div>
<div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;            {</div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;              <span class="keyword">const</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a766cc9fa2fed8206e22e022932a60eee">getExpressionPtr</a>();</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;              <span class="keywordflow">if</span> (pTree != NULL)</div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;                {</div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;                }</div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;            }</div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;</div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;          <span class="keywordflow">if</span> (pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">getStatus</a>() != <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>)</div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;            {</div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;              <span class="keyword">const</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a81973823a591e58112161570d7abac10">getInitialExpressionPtr</a>();</div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;</div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;              <span class="keywordflow">if</span> (pTree != NULL)</div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;                {</div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;                }</div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;            }</div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;</div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;          ++step;</div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;        }</div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;</div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;      iMax = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">getModelValues</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;</div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;        {</div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;          <a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a>* pME = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">getModelValues</a>()[i];</div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;</div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;          <span class="keywordflow">if</span> (pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">getStatus</a>() != <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a>)</div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;            {</div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;              <span class="keyword">const</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a766cc9fa2fed8206e22e022932a60eee">getExpressionPtr</a>();</div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;</div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;              <span class="keywordflow">if</span> (pTree != NULL)</div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;                {</div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;                }</div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;            }</div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;</div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;          <span class="keywordflow">if</span> (pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">getStatus</a>() != <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a>)</div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;            {</div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;              <span class="keyword">const</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = pME-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a81973823a591e58112161570d7abac10">getInitialExpressionPtr</a>();</div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;</div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;              <span class="keywordflow">if</span> (pTree != NULL)</div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;                {</div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;                }</div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;            }</div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;</div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;          ++step;</div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;        }</div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;</div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;      <span class="comment">// find the used function in events</span></div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;      iMax = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad55cc48064428d703cee3e69b71e4703">getEvents</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;</div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;        {</div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;          <a class="code" href="../../da/d3f/classCEvent.html">CEvent</a>* pEvent = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad55cc48064428d703cee3e69b71e4703">getEvents</a>()[i];</div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;          assert(pEvent != NULL);</div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = pEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#a5dfb8078bab18671d4c459ecd6ae9909">getTriggerExpressionPtr</a>();</div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;          <span class="comment">// an event has to have a trigger</span></div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;          assert(pTree != NULL);</div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;</div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;          <span class="keywordflow">if</span> (pTree != NULL)</div>
<div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;            {</div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;            }</div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;</div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;          <span class="comment">// handle the delay</span></div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;          pTree = pEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#ac26a530ca2520550d5779f3c8cd39504">getDelayExpressionPtr</a>();</div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;</div>
<div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;          <span class="keywordflow">if</span> (pTree != NULL)</div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;            {</div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;            }</div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;</div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;          <span class="comment">// handle all assignments</span></div>
<div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;          <span class="keywordtype">size_t</span> j, jMax = pEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#a07d073e597757d5baae882ddfceba58d">getAssignments</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;</div>
<div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;          <span class="keywordflow">for</span> (j = 0; j &lt; jMax; ++j)</div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;            {</div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;              <a class="code" href="../../dd/d3a/classCEventAssignment.html">CEventAssignment</a>* pEventAssignment = pEvent-&gt;<a class="code" href="../../da/d3f/classCEvent.html#a07d073e597757d5baae882ddfceba58d">getAssignments</a>()[j];</div>
<div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;              assert(pEventAssignment != NULL);</div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;</div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;              <span class="keywordflow">if</span> (pEventAssignment != NULL)</div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;                {</div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;                  pTree = pEventAssignment-&gt;<a class="code" href="../../dd/d3a/classCEventAssignment.html#a8df1b2304569d3f856b357fa774764c1">getExpressionPtr</a>();</div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;                  <span class="comment">// each event assignment has to have an expression</span></div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;                  assert(pTree != NULL);</div>
<div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;</div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;                  <span class="keywordflow">if</span> (pTree != NULL)</div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;                    {</div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;                      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">findFunctionCalls</a>(pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">getRoot</a>(), functionNameSet);</div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;                    }</div>
<div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;                }</div>
<div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;            }</div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;        }</div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;</div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;      <a class="code" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a>* pFunctionDB = <a class="code" href="../../d3/db1/classCCopasiRootContainer.html#afd5e8541f181260daf7515b28f0612c3">CCopasiRootContainer::getFunctionList</a>();</div>
<div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;</div>
<div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;        {</div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;          <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;          step = 0;</div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;          totalSteps = (<span class="keywordtype">unsigned</span> <a class="code" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a>) pTmpFunctionDB-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">loadedFunctions</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;          hStep = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">addItem</a>(<span class="stringliteral">&quot;Removing unused functions...&quot;</span>,</div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;                                           step,</div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;                                           &amp;totalSteps);</div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;        }</div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;</div>
<div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;      <span class="comment">// here we could have a dialog asking the user if unused functions should</span></div>
<div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;      <span class="comment">// be removed.</span></div>
<div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;</div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;      <a class="code" href="../../d7/d08/classCCopasiVectorN.html">CCopasiVectorN &lt; CFunction &gt;::const_iterator</a> it = pTmpFunctionDB-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">loadedFunctions</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>();</div>
<div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;      <a class="code" href="../../d7/d08/classCCopasiVectorN.html">CCopasiVectorN &lt; CFunction &gt;::const_iterator</a> end = pTmpFunctionDB-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">loadedFunctions</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;</div>
<div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;      <span class="keywordflow">for</span> (; it != end; ++it)</div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;        {</div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;          <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a> * pTree = *it;</div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;</div>
<div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;          <span class="keywordflow">if</span> (functionNameSet.find(pTree-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>()) == functionNameSet.end())</div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;            {</div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>.erase(pTree-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>());</div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;              pFunctionDB-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">loadedFunctions</a>().<a class="code" href="../../d7/d08/classCCopasiVectorN.html#aa53eebbaf1fda5ded236c7ee6e82b3e3">remove</a>(pTree-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">getObjectName</a>());</div>
<div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;              <span class="comment">// delete the entry from the copasi2sbmlmap.</span></div>
<div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;              std::map&lt;CCopasiObject*, SBase*&gt;::iterator pos = copasi2sbmlmap.find(pTree);</div>
<div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;              assert(pos != copasi2sbmlmap.end());</div>
<div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;              copasi2sbmlmap.erase(pos);</div>
<div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;            }</div>
<div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;</div>
<div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;          ++step;</div>
<div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;</div>
<div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> &amp;&amp; !<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">progressItem</a>(hStep)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;        }</div>
<div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;</div>
<div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>)</div>
<div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;        {</div>
<div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;          <a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>-&gt;<a class="code" href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">finishItem</a>(hStep);</div>
<div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;        }</div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;    }</div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;</div>
<div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;}</div>
<div class="ttc" id="classCModelEntity_html_a766cc9fa2fed8206e22e022932a60eee"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a766cc9fa2fed8206e22e022932a60eee">CModelEntity::getExpressionPtr</a></div><div class="ttdeci">const CExpression * getExpressionPtr() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00250">CModelValue.cpp:250</a></div></div>
<div class="ttc" id="classCEvent_html"><div class="ttname"><a href="../../da/d3f/classCEvent.html">CEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3f/CEvent_8h_source.html#l00152">CEvent.h:152</a></div></div>
<div class="ttc" id="classCCopasiVectorN_html"><div class="ttname"><a href="../../d7/d08/classCCopasiVectorN.html">CCopasiVectorN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/df7/CCopasiDataModel_8h_source.html#l00047">CCopasiDataModel.h:47</a></div></div>
<div class="ttc" id="classCEventAssignment_html"><div class="ttname"><a href="../../dd/d3a/classCEventAssignment.html">CEventAssignment</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3f/CEvent_8h_source.html#l00032">CEvent.h:32</a></div></div>
<div class="ttc" id="classCFunctionDB_html_ad350117a7f48a6a5fcccfdbecf8fb58b"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#ad350117a7f48a6a5fcccfdbecf8fb58b">CFunctionDB::loadedFunctions</a></div><div class="ttdeci">CCopasiVectorN&lt; CFunction &gt; &amp; loadedFunctions()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00346">CFunctionDB.cpp:346</a></div></div>
<div class="ttc" id="classCEvent_html_a07d073e597757d5baae882ddfceba58d"><div class="ttname"><a href="../../da/d3f/classCEvent.html#a07d073e597757d5baae882ddfceba58d">CEvent::getAssignments</a></div><div class="ttdeci">const CCopasiVectorN&lt; CEventAssignment &gt; &amp; getAssignments() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/CEvent_8cpp_source.html#l00678">CEvent.cpp:678</a></div></div>
<div class="ttc" id="classCModel_html_ad55cc48064428d703cee3e69b71e4703"><div class="ttname"><a href="../../d4/d04/classCModel.html#ad55cc48064428d703cee3e69b71e4703">CModel::getEvents</a></div><div class="ttdeci">CCopasiVectorN&lt; CEvent &gt; &amp; getEvents()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01110">CModel.cpp:1110</a></div></div>
<div class="ttc" id="classCModel_html_a73a8a52c2190b1aae2f1427e4e9eb0e1"><div class="ttname"><a href="../../d4/d04/classCModel.html#a73a8a52c2190b1aae2f1427e4e9eb0e1">CModel::getMetabolites</a></div><div class="ttdeci">const CCopasiVector&lt; CMetab &gt; &amp; getMetabolites() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01051">CModel.cpp:1051</a></div></div>
<div class="ttc" id="classCFunctionDB_html"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/df6/CFunctionDB_8h_source.html#l00035">CFunctionDB.h:35</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a879d6756b51f6b58d307940e1343bd10"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a879d6756b51f6b58d307940e1343bd10">CCopasiObject::getObjectName</a></div><div class="ttdeci">const std::string &amp; getObjectName() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00258">CCopasiObject.cpp:258</a></div></div>
<div class="ttc" id="classCModelEntity_html"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html">CModelEntity</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00039">CModelValue.h:39</a></div></div>
<div class="ttc" id="classCModel_html_ab3481ad574a3e1935a7617339970eab2"><div class="ttname"><a href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">CModel::getModelValues</a></div><div class="ttdeci">const CCopasiVectorN&lt; CModelValue &gt; &amp; getModelValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01060">CModel.cpp:1060</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classCCopasiVector_html_ab7e0e37022783eddfe85abf9339b05c0"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector::size</a></div><div class="ttdeci">virtual size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00386">CCopasiVector.h:386</a></div></div>
<div class="ttc" id="classCCopasiVector_html_acb26711fe72be0d2cb3a37c2fbcc031f"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">CCopasiVector::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00185">CCopasiVector.h:185</a></div></div>
<div class="ttc" id="classCEventAssignment_html_a8df1b2304569d3f856b357fa774764c1"><div class="ttname"><a href="../../dd/d3a/classCEventAssignment.html#a8df1b2304569d3f856b357fa774764c1">CEventAssignment::getExpressionPtr</a></div><div class="ttdeci">const CExpression * getExpressionPtr() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/CEvent_8cpp_source.html#l00226">CEvent.cpp:226</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a32b10e0dc03fc5bbf7b4842b0d314ff6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">SBMLImporter::mpImportHandler</a></div><div class="ttdeci">CProcessReport * mpImportHandler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00072">SBMLImporter.h:72</a></div></div>
<div class="ttc" id="copasi_8h_html_aa623c2be2264b57fb3953a22ac74a470"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#aa623c2be2264b57fb3953a22ac74a470">C_INVALID_INDEX</a></div><div class="ttdeci">#define C_INVALID_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00222">copasi.h:222</a></div></div>
<div class="ttc" id="classCEvaluationTree_html"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00028">CEvaluationTree.h:28</a></div></div>
<div class="ttc" id="copasi_8h_html_a9e77742fb2ec39ea4ec3f3fbe6758c2d"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a></div><div class="ttdeci">#define C_INT32</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00090">copasi.h:90</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3bfd50e7d8e4dd09716a51e0ca62dedb">CModelEntity::ASSIGNMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00056">CModelValue.h:56</a></div></div>
<div class="ttc" id="classCProcessReport_html_a26e24b2229161d39dba3a2ae3461ce7b"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#a26e24b2229161d39dba3a2ae3461ce7b">CProcessReport::progressItem</a></div><div class="ttdeci">virtual bool progressItem(const size_t &amp;handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00160">CProcessReport.cpp:160</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a64e5323f84c8730e7c120e8e9a965d13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">SBMLImporter::mUsedFunctions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mUsedFunctions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00067">SBMLImporter.h:67</a></div></div>
<div class="ttc" id="classCEvent_html_ac26a530ca2520550d5779f3c8cd39504"><div class="ttname"><a href="../../da/d3f/classCEvent.html#ac26a530ca2520550d5779f3c8cd39504">CEvent::getDelayExpressionPtr</a></div><div class="ttdeci">CExpression * getDelayExpressionPtr()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/CEvent_8cpp_source.html#l00606">CEvent.cpp:606</a></div></div>
<div class="ttc" id="classCCopasiVector_html_a44c97a5f614c885495c437f2a8d20954"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">CCopasiVector::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00191">CCopasiVector.h:191</a></div></div>
<div class="ttc" id="classCProcessReport_html_a4d231c54881f298ee86d1ae44bd6e034"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#a4d231c54881f298ee86d1ae44bd6e034">CProcessReport::addItem</a></div><div class="ttdeci">size_t addItem(const std::string &amp;name, const std::string &amp;value, const std::string *pEndValue=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00092">CProcessReport.cpp:92</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00055">CModelValue.h:55</a></div></div>
<div class="ttc" id="classCProcessReport_html_aefaaae08a9072b715c2f1a1a589efab0"><div class="ttname"><a href="../../d8/da5/classCProcessReport.html#aefaaae08a9072b715c2f1a1a589efab0">CProcessReport::finishItem</a></div><div class="ttdeci">virtual bool finishItem(const size_t &amp;handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d0e/CProcessReport_8cpp_source.html#l00199">CProcessReport.cpp:199</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a175d4d5e664bd89964dccf5ba89d25de"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a175d4d5e664bd89964dccf5ba89d25de">SBMLImporter::findFunctionCalls</a></div><div class="ttdeci">void findFunctionCalls(const CEvaluationNode *pNode, std::set&lt; std::string &gt; &amp;functionNameSet)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06318">SBMLImporter.cpp:6318</a></div></div>
<div class="ttc" id="copasi_8h_html_a4cd90bcaf1a35317678ec47713b5f629a358d04006ba010a4e9258117031fb00c"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#a4cd90bcaf1a35317678ec47713b5f629a358d04006ba010a4e9258117031fb00c">TriUnspecified</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00127">copasi.h:127</a></div></div>
<div class="ttc" id="classCCopasiRootContainer_html_afd5e8541f181260daf7515b28f0612c3"><div class="ttname"><a href="../../d3/db1/classCCopasiRootContainer.html#afd5e8541f181260daf7515b28f0612c3">CCopasiRootContainer::getFunctionList</a></div><div class="ttdeci">static CFunctionDB * getFunctionList()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4b/CCopasiRootContainer_8cpp_source.html#l00137">CCopasiRootContainer.cpp:137</a></div></div>
<div class="ttc" id="classCCopasiVectorN_html_aa53eebbaf1fda5ded236c7ee6e82b3e3"><div class="ttname"><a href="../../d7/d08/classCCopasiVectorN.html#aa53eebbaf1fda5ded236c7ee6e82b3e3">CCopasiVectorN::remove</a></div><div class="ttdeci">virtual void remove(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00674">CCopasiVector.h:674</a></div></div>
<div class="ttc" id="classCModel_html_a7d405db8dc8120b942aa0ec1e80db399"><div class="ttname"><a href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">CModel::getCompartments</a></div><div class="ttdeci">CCopasiVectorNS&lt; CCompartment &gt; &amp; getCompartments()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01145">CModel.cpp:1145</a></div></div>
<div class="ttc" id="classCEvent_html_a5dfb8078bab18671d4c459ecd6ae9909"><div class="ttname"><a href="../../da/d3f/classCEvent.html#a5dfb8078bab18671d4c459ecd6ae9909">CEvent::getTriggerExpressionPtr</a></div><div class="ttdeci">const CExpression * getTriggerExpressionPtr() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/CEvent_8cpp_source.html#l00534">CEvent.cpp:534</a></div></div>
<div class="ttc" id="classCFunction_html"><div class="ttname"><a href="../../d9/d86/classCFunction.html">CFunction</a></div><div class="ttdoc">The class for handling a chemical kinetic function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df5/CFunction_8h_source.html#l00029">CFunction.h:29</a></div></div>
<div class="ttc" id="classCModel_html_ad9a3dc1905f1f38f689f728b829f285d"><div class="ttname"><a href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">CModel::getReactions</a></div><div class="ttdeci">CCopasiVectorNS&lt; CReaction &gt; &amp; getReactions()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01039">CModel.cpp:1039</a></div></div>
<div class="ttc" id="classCModelEntity_html_ad6bdcaa2e8887271f61fc363262cc9ed"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#ad6bdcaa2e8887271f61fc363262cc9ed">CModelEntity::getStatus</a></div><div class="ttdeci">const CModelEntity::Status &amp; getStatus() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00141">CModelValue.cpp:141</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a542e592cb978819d30a6da627411ba91"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a542e592cb978819d30a6da627411ba91">CEvaluationTree::getRoot</a></div><div class="ttdeci">CEvaluationNode * getRoot()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00610">CEvaluationTree.cpp:610</a></div></div>
<div class="ttc" id="classCModelEntity_html_a81973823a591e58112161570d7abac10"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a81973823a591e58112161570d7abac10">CModelEntity::getInitialExpressionPtr</a></div><div class="ttdeci">const CExpression * getInitialExpressionPtr() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00294">CModelValue.cpp:294</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afa0fbf5c970cdfc26118c33a921caa5d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::renameMassActionParameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a> *&#160;</td>
          <td class="paramname"><em>pCallNode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06033">6033</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">CCopasiObject::getCN()</a>, <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">CEvaluationNodeObject::getData()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode&lt; _Data &gt;::getSibling()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">CCopasiDataModel::ObjectFromName()</a>, <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html#ae47f36318d6a7d562d44851fdbf316c3">CEvaluationNodeObject::setData()</a>, and <a class="el" href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">CCopasiObject::setObjectName()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;{</div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;  std::vector&lt;CCopasiContainer*&gt; v;</div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;  v.push_back(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>);</div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;  <a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>* pObjectNode = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>*<span class="keyword">&gt;</span>(pCallNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;  assert(pObjectNode);</div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;  <a class="code" href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a> objectName = <a class="code" href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a>(pObjectNode-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">getData</a>().substr(1, pObjectNode-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">getData</a>().length() - 2));</div>
<div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;  <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pObject = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">ObjectFromName</a>(v, objectName);</div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;  assert(pObject);</div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;</div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;  <span class="keywordflow">if</span> (dynamic_cast&lt;CCopasiParameter*&gt;(pObject))</div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;    {</div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;      pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">setObjectName</a>(<span class="stringliteral">&quot;k1&quot;</span>);</div>
<div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;      pObjectNode-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#ae47f36318d6a7d562d44851fdbf316c3">setData</a>(<span class="stringliteral">&quot;&lt;&quot;</span> + pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;&gt;&quot;</span>);</div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;    }</div>
<div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;</div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;  pObjectNode = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>*<span class="keyword">&gt;</span>(pObjectNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;</div>
<div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;  <span class="keywordflow">if</span> (pObjectNode)</div>
<div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;    {</div>
<div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;      objectName = <a class="code" href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a>(pObjectNode-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">getData</a>().substr(1, pObjectNode-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">getData</a>().length() - 2));</div>
<div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;      pObject = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">ObjectFromName</a>(v, objectName);</div>
<div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;      assert(pObject);</div>
<div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;</div>
<div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;      <span class="keywordflow">if</span> (dynamic_cast&lt;CCopasiParameter*&gt;(pObject))</div>
<div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;        {</div>
<div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;          pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">setObjectName</a>(<span class="stringliteral">&quot;k2&quot;</span>);</div>
<div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;          pObjectNode-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#ae47f36318d6a7d562d44851fdbf316c3">setData</a>(<span class="stringliteral">&quot;&lt;&quot;</span> + pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;&gt;&quot;</span>);</div>
<div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;        }</div>
<div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;    }</div>
<div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;}</div>
<div class="ttc" id="classCCopasiNode_html_a0730aecebb9ca0f8401b7d0223e266e8"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode::getSibling</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getSibling()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00353">CCopasiNode.h:353</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a1f5e2625716c1ac192561974bd17b3cb"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">CCopasiObject::getCN</a></div><div class="ttdeci">virtual CCopasiObjectName getCN() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00103">CCopasiObject.cpp:103</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classCCopasiObject_html"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9f/CCopasiObject_8h_source.html#l00216">CCopasiObject.h:216</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2aa8c57db3550fc84175ad38f1f3661e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">SBMLImporter::mpDataModel</a></div><div class="ttdeci">CCopasiDataModel * mpDataModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00068">SBMLImporter.h:68</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html_ae47f36318d6a7d562d44851fdbf316c3"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html#ae47f36318d6a7d562d44851fdbf316c3">CEvaluationNodeObject::setData</a></div><div class="ttdeci">virtual bool setData(const Data &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db2/CEvaluationNodeObject_8cpp_source.html#l00153">CEvaluationNodeObject.cpp:153</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00034">CEvaluationNodeObject.h:34</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html_a32f6a30d58655b215bd68a01b26b47a3"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">CEvaluationNodeObject::getData</a></div><div class="ttdeci">virtual const Data &amp; getData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db2/CEvaluationNodeObject_8cpp_source.html#l00135">CEvaluationNodeObject.cpp:135</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a6691431210bb58c9055c4d2847bd111c"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a6691431210bb58c9055c4d2847bd111c">CCopasiObject::setObjectName</a></div><div class="ttdeci">bool setObjectName(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00158">CCopasiObject.cpp:158</a></div></div>
<div class="ttc" id="classCCopasiDataModel_html_a9d54888c14c755abec4c757289ee26f7"><div class="ttname"><a href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">CCopasiDataModel::ObjectFromName</a></div><div class="ttdeci">CCopasiObject * ObjectFromName(const std::vector&lt; CCopasiContainer * &gt; &amp;listOfContainer, const CCopasiObjectName &amp;CN) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d38/CCopasiDataModel_8cpp_source.html#l01940">CCopasiDataModel.cpp:1940</a></div></div>
<div class="ttc" id="classCCopasiObjectName_html"><div class="ttname"><a href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/CCopasiObjectName_8h_source.html#l00032">CCopasiObjectName.h:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7ac29e15dc0e3a2795ec3b1a13e496fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replace_delay_nodes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *&#160;</td>
          <td class="paramname"><em>pASTNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Reaction *&#160;</td>
          <td class="paramname"><em>pSBMLReaction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::string, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>localReplacementMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function replaces calls to the delay function in an ASTNode tree by a node that references a new global parameter which the function creates. The global parameter gets an expression which corresponds to the delay call. This is necessary because all knetic laws in COPASI are function calls and function definitions should not contain a call to delay.</p>
<p>This function replaces calls to the delay function in an ASTNode tree by a node that references a new global parameter which the function creates. The global parameter gets an expression which corresponds to the delay call. This is necessary because all kinetic laws in COPASI are function calls and function definitions should not contain a call to delay. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l10069">10069</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter()</a>, <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aca53cdde28ce5bb980ece4371c055fc8">find_local_parameters_in_delay()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ada0c2024af8f12fbef9c77ad4587fd68">importSBMLRule()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a39b4cb542ae7593d545434fdcc03573e">mDelayNodeMap</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>, <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>, <a class="el" href="../../d5/dcc/classConverterASTNode.html#a4b31c6595d47c1cb4e520775c0a8f926">ConverterASTNode::removeChild()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6f596cc4208b32f8280111dcd7bc4727">replace_name_nodes()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l10070"></a><span class="lineno">10070</span>&#160;{</div>
<div class="line"><a name="l10071"></a><span class="lineno">10071</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ConverterASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l10072"></a><span class="lineno">10072</span>&#160;</div>
<div class="line"><a name="l10073"></a><span class="lineno">10073</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l10074"></a><span class="lineno">10074</span>&#160;    {</div>
<div class="line"><a name="l10075"></a><span class="lineno">10075</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l10076"></a><span class="lineno">10076</span>&#160;        {</div>
<div class="line"><a name="l10077"></a><span class="lineno">10077</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10078"></a><span class="lineno">10078</span>&#160;        }</div>
<div class="line"><a name="l10079"></a><span class="lineno">10079</span>&#160;</div>
<div class="line"><a name="l10080"></a><span class="lineno">10080</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_FUNCTION_DELAY)</div>
<div class="line"><a name="l10081"></a><span class="lineno">10081</span>&#160;        {</div>
<div class="line"><a name="l10082"></a><span class="lineno">10082</span>&#160;          std::string formula = SBML_formulaToString(*itNode);</div>
<div class="line"><a name="l10083"></a><span class="lineno">10083</span>&#160;          std::map&lt;std::string, std::string&gt;::const_iterator pos = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a39b4cb542ae7593d545434fdcc03573e">mDelayNodeMap</a>.find(formula);</div>
<div class="line"><a name="l10084"></a><span class="lineno">10084</span>&#160;          std::string replacementId;</div>
<div class="line"><a name="l10085"></a><span class="lineno">10085</span>&#160;</div>
<div class="line"><a name="l10086"></a><span class="lineno">10086</span>&#160;          <span class="keywordflow">if</span> (pos == this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a39b4cb542ae7593d545434fdcc03573e">mDelayNodeMap</a>.end())</div>
<div class="line"><a name="l10087"></a><span class="lineno">10087</span>&#160;            {</div>
<div class="line"><a name="l10088"></a><span class="lineno">10088</span>&#160;              <span class="comment">// create a new global parameter and a rule for it</span></div>
<div class="line"><a name="l10089"></a><span class="lineno">10089</span>&#160;              <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = 0;</div>
<div class="line"><a name="l10090"></a><span class="lineno">10090</span>&#160;              std::ostringstream os;</div>
<div class="line"><a name="l10091"></a><span class="lineno">10091</span>&#160;              os &lt;&lt; <span class="stringliteral">&quot;delay_replacement_parameter_&quot;</span>;</div>
<div class="line"><a name="l10092"></a><span class="lineno">10092</span>&#160;              os &lt;&lt; index;</div>
<div class="line"><a name="l10093"></a><span class="lineno">10093</span>&#160;</div>
<div class="line"><a name="l10094"></a><span class="lineno">10094</span>&#160;              <span class="keywordflow">while</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>.find(os.str()) != this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>.end())</div>
<div class="line"><a name="l10095"></a><span class="lineno">10095</span>&#160;                {</div>
<div class="line"><a name="l10096"></a><span class="lineno">10096</span>&#160;                  os.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l10097"></a><span class="lineno">10097</span>&#160;                  os &lt;&lt; <span class="stringliteral">&quot;delay_replacement_parameter_&quot;</span>;</div>
<div class="line"><a name="l10098"></a><span class="lineno">10098</span>&#160;                  ++index;</div>
<div class="line"><a name="l10099"></a><span class="lineno">10099</span>&#160;                  os &lt;&lt; index;</div>
<div class="line"><a name="l10100"></a><span class="lineno">10100</span>&#160;                }</div>
<div class="line"><a name="l10101"></a><span class="lineno">10101</span>&#160;</div>
<div class="line"><a name="l10102"></a><span class="lineno">10102</span>&#160;              <span class="comment">// create the global parameter</span></div>
<div class="line"><a name="l10103"></a><span class="lineno">10103</span>&#160;              <span class="keywordflow">if</span> (pModel == NULL)</div>
<div class="line"><a name="l10104"></a><span class="lineno">10104</span>&#160;                {</div>
<div class="line"><a name="l10105"></a><span class="lineno">10105</span>&#160;                  <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l10106"></a><span class="lineno">10106</span>&#160;                }</div>
<div class="line"><a name="l10107"></a><span class="lineno">10107</span>&#160;</div>
<div class="line"><a name="l10108"></a><span class="lineno">10108</span>&#160;              Parameter* pParameter = pModel-&gt;createParameter();</div>
<div class="line"><a name="l10109"></a><span class="lineno">10109</span>&#160;              assert(pParameter != NULL);</div>
<div class="line"><a name="l10110"></a><span class="lineno">10110</span>&#160;</div>
<div class="line"><a name="l10111"></a><span class="lineno">10111</span>&#160;              <span class="keywordflow">if</span> (pParameter == NULL)</div>
<div class="line"><a name="l10112"></a><span class="lineno">10112</span>&#160;                {</div>
<div class="line"><a name="l10113"></a><span class="lineno">10113</span>&#160;                  <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l10114"></a><span class="lineno">10114</span>&#160;                }</div>
<div class="line"><a name="l10115"></a><span class="lineno">10115</span>&#160;</div>
<div class="line"><a name="l10116"></a><span class="lineno">10116</span>&#160;              <span class="comment">// mark the id as used</span></div>
<div class="line"><a name="l10117"></a><span class="lineno">10117</span>&#160;              pParameter-&gt;setId(os.str());</div>
<div class="line"><a name="l10118"></a><span class="lineno">10118</span>&#160;              pParameter-&gt;setName(os.str());</div>
<div class="line"><a name="l10119"></a><span class="lineno">10119</span>&#160;              pParameter-&gt;setConstant(<span class="keyword">false</span>);</div>
<div class="line"><a name="l10120"></a><span class="lineno">10120</span>&#160;              replacementId = pParameter-&gt;getId();</div>
<div class="line"><a name="l10121"></a><span class="lineno">10121</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">mUsedSBMLIds</a>.insert(replacementId);</div>
<div class="line"><a name="l10122"></a><span class="lineno">10122</span>&#160;</div>
<div class="line"><a name="l10123"></a><span class="lineno">10123</span>&#160;              <span class="comment">// now we need to import that parameter</span></div>
<div class="line"><a name="l10124"></a><span class="lineno">10124</span>&#160;              <span class="keywordflow">try</span></div>
<div class="line"><a name="l10125"></a><span class="lineno">10125</span>&#160;                {</div>
<div class="line"><a name="l10126"></a><span class="lineno">10126</span>&#160;                  assert(<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>);</div>
<div class="line"><a name="l10127"></a><span class="lineno">10127</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter</a>(pParameter, <a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, copasi2sbmlmap);</div>
<div class="line"><a name="l10128"></a><span class="lineno">10128</span>&#160;                }</div>
<div class="line"><a name="l10129"></a><span class="lineno">10129</span>&#160;              <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l10130"></a><span class="lineno">10130</span>&#160;                {</div>
<div class="line"><a name="l10131"></a><span class="lineno">10131</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <span class="stringliteral">&quot;An unknown error has occurred while replacing a delay call in a kinetic law expression. Please report this to the authors of COPASI.&quot;</span>);</div>
<div class="line"><a name="l10132"></a><span class="lineno">10132</span>&#160;                }</div>
<div class="line"><a name="l10133"></a><span class="lineno">10133</span>&#160;</div>
<div class="line"><a name="l10134"></a><span class="lineno">10134</span>&#160;              <span class="comment">// now we create the rule</span></div>
<div class="line"><a name="l10135"></a><span class="lineno">10135</span>&#160;              AssignmentRule* pARule = pModel-&gt;createAssignmentRule();</div>
<div class="line"><a name="l10136"></a><span class="lineno">10136</span>&#160;              assert(pARule != NULL);</div>
<div class="line"><a name="l10137"></a><span class="lineno">10137</span>&#160;</div>
<div class="line"><a name="l10138"></a><span class="lineno">10138</span>&#160;              <span class="keywordflow">if</span> (pARule == NULL)</div>
<div class="line"><a name="l10139"></a><span class="lineno">10139</span>&#160;                {</div>
<div class="line"><a name="l10140"></a><span class="lineno">10140</span>&#160;                  <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l10141"></a><span class="lineno">10141</span>&#160;                }</div>
<div class="line"><a name="l10142"></a><span class="lineno">10142</span>&#160;</div>
<div class="line"><a name="l10143"></a><span class="lineno">10143</span>&#160;              pARule-&gt;setVariable(pParameter-&gt;getId());</div>
<div class="line"><a name="l10144"></a><span class="lineno">10144</span>&#160;</div>
<div class="line"><a name="l10145"></a><span class="lineno">10145</span>&#160;              <span class="comment">// we have to make sure that there is no local parameter referenced</span></div>
<div class="line"><a name="l10146"></a><span class="lineno">10146</span>&#160;              <span class="comment">// in the tree for the rule.</span></div>
<div class="line"><a name="l10147"></a><span class="lineno">10147</span>&#160;              <span class="comment">// If there is a local parameter, we have to convert it to a global</span></div>
<div class="line"><a name="l10148"></a><span class="lineno">10148</span>&#160;              <span class="comment">// parameter</span></div>
<div class="line"><a name="l10149"></a><span class="lineno">10149</span>&#160;              <span class="comment">// starting with SBML Level 3, the parameters of a kinetic law are expressed in</span></div>
<div class="line"><a name="l10150"></a><span class="lineno">10150</span>&#160;              <span class="comment">// terms of a new class called LocalParameter instead of Parameter</span></div>
<div class="line"><a name="l10151"></a><span class="lineno">10151</span>&#160;              ListOfParameters* pList = NULL;</div>
<div class="line"><a name="l10152"></a><span class="lineno">10152</span>&#160;</div>
<div class="line"><a name="l10153"></a><span class="lineno">10153</span>&#160;              <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> &gt; 2)</div>
<div class="line"><a name="l10154"></a><span class="lineno">10154</span>&#160;                {</div>
<div class="line"><a name="l10155"></a><span class="lineno">10155</span>&#160;                  pList = pSBMLReaction-&gt;getKineticLaw()-&gt;getListOfLocalParameters();</div>
<div class="line"><a name="l10156"></a><span class="lineno">10156</span>&#160;                }</div>
<div class="line"><a name="l10157"></a><span class="lineno">10157</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l10158"></a><span class="lineno">10158</span>&#160;                {</div>
<div class="line"><a name="l10159"></a><span class="lineno">10159</span>&#160;                  pList = pSBMLReaction-&gt;getKineticLaw()-&gt;getListOfParameters();</div>
<div class="line"><a name="l10160"></a><span class="lineno">10160</span>&#160;                }</div>
<div class="line"><a name="l10161"></a><span class="lineno">10161</span>&#160;</div>
<div class="line"><a name="l10162"></a><span class="lineno">10162</span>&#160;              <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pList-&gt;size();</div>
<div class="line"><a name="l10163"></a><span class="lineno">10163</span>&#160;</div>
<div class="line"><a name="l10164"></a><span class="lineno">10164</span>&#160;              <span class="keywordflow">if</span> (iMax &gt; 0)</div>
<div class="line"><a name="l10165"></a><span class="lineno">10165</span>&#160;                {</div>
<div class="line"><a name="l10166"></a><span class="lineno">10166</span>&#160;                  std::set&lt;std::string&gt; localIds;</div>
<div class="line"><a name="l10167"></a><span class="lineno">10167</span>&#160;                  <span class="comment">// first we fill the local id set</span></div>
<div class="line"><a name="l10168"></a><span class="lineno">10168</span>&#160;                  <span class="keyword">const</span> Parameter* pParam = NULL;</div>
<div class="line"><a name="l10169"></a><span class="lineno">10169</span>&#160;</div>
<div class="line"><a name="l10170"></a><span class="lineno">10170</span>&#160;                  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l10171"></a><span class="lineno">10171</span>&#160;                    {</div>
<div class="line"><a name="l10172"></a><span class="lineno">10172</span>&#160;                      pParam = pList-&gt;get(i);</div>
<div class="line"><a name="l10173"></a><span class="lineno">10173</span>&#160;                      assert(pParam != NULL);</div>
<div class="line"><a name="l10174"></a><span class="lineno">10174</span>&#160;                      localIds.insert(pParam-&gt;getId());</div>
<div class="line"><a name="l10175"></a><span class="lineno">10175</span>&#160;                    }</div>
<div class="line"><a name="l10176"></a><span class="lineno">10176</span>&#160;</div>
<div class="line"><a name="l10177"></a><span class="lineno">10177</span>&#160;                  <span class="comment">// this has to be a two step process because we first have to identify</span></div>
<div class="line"><a name="l10178"></a><span class="lineno">10178</span>&#160;                  <span class="comment">// all local parameters that are used in a delay</span></div>
<div class="line"><a name="l10179"></a><span class="lineno">10179</span>&#160;                  <span class="comment">// Next we have to go over the tree again and replace all occurrences of</span></div>
<div class="line"><a name="l10180"></a><span class="lineno">10180</span>&#160;                  <span class="comment">// those parameters with the global parameters, independent of whether</span></div>
<div class="line"><a name="l10181"></a><span class="lineno">10181</span>&#160;                  <span class="comment">// they are used in a delay expression or not</span></div>
<div class="line"><a name="l10182"></a><span class="lineno">10182</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aca53cdde28ce5bb980ece4371c055fc8">find_local_parameters_in_delay</a>(*itNode, pSBMLReaction, pModel, localReplacementMap, localIds, copasi2sbmlmap);</div>
<div class="line"><a name="l10183"></a><span class="lineno">10183</span>&#160;</div>
<div class="line"><a name="l10184"></a><span class="lineno">10184</span>&#160;                  <span class="comment">// now we have to at least replace the ones that appear in delays here already because otherwise</span></div>
<div class="line"><a name="l10185"></a><span class="lineno">10185</span>&#160;                  <span class="comment">// the import of the rule that was created for the delay replacement will fail because it can&#39;t resolve</span></div>
<div class="line"><a name="l10186"></a><span class="lineno">10186</span>&#160;                  <span class="comment">// the name of the local parameter in the rule</span></div>
<div class="line"><a name="l10187"></a><span class="lineno">10187</span>&#160;                  <span class="keywordflow">if</span> (!localReplacementMap.empty())</div>
<div class="line"><a name="l10188"></a><span class="lineno">10188</span>&#160;                    {</div>
<div class="line"><a name="l10189"></a><span class="lineno">10189</span>&#160;                      this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a6f596cc4208b32f8280111dcd7bc4727">replace_name_nodes</a>(*itNode, localReplacementMap);</div>
<div class="line"><a name="l10190"></a><span class="lineno">10190</span>&#160;                    }</div>
<div class="line"><a name="l10191"></a><span class="lineno">10191</span>&#160;                }</div>
<div class="line"><a name="l10192"></a><span class="lineno">10192</span>&#160;</div>
<div class="line"><a name="l10193"></a><span class="lineno">10193</span>&#160;              pARule-&gt;setMath(*itNode);</div>
<div class="line"><a name="l10194"></a><span class="lineno">10194</span>&#160;</div>
<div class="line"><a name="l10195"></a><span class="lineno">10195</span>&#160;              <span class="comment">// and we need to import this rule</span></div>
<div class="line"><a name="l10196"></a><span class="lineno">10196</span>&#160;              <span class="keywordflow">try</span></div>
<div class="line"><a name="l10197"></a><span class="lineno">10197</span>&#160;                {</div>
<div class="line"><a name="l10198"></a><span class="lineno">10198</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ada0c2024af8f12fbef9c77ad4587fd68">importSBMLRule</a>(pARule, copasi2sbmlmap, pModel);</div>
<div class="line"><a name="l10199"></a><span class="lineno">10199</span>&#160;                }</div>
<div class="line"><a name="l10200"></a><span class="lineno">10200</span>&#160;              <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l10201"></a><span class="lineno">10201</span>&#160;                {</div>
<div class="line"><a name="l10202"></a><span class="lineno">10202</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <span class="stringliteral">&quot;An unknown error has occurred while replacing a delay call in a kinetic law expression. Please report this to the authors of COPASI.&quot;</span>);</div>
<div class="line"><a name="l10203"></a><span class="lineno">10203</span>&#160;                }</div>
<div class="line"><a name="l10204"></a><span class="lineno">10204</span>&#160;</div>
<div class="line"><a name="l10205"></a><span class="lineno">10205</span>&#160;              <span class="comment">// and we add the formula id pair to the map so that we can reuse it if</span></div>
<div class="line"><a name="l10206"></a><span class="lineno">10206</span>&#160;              <span class="comment">// the same expression comes up again</span></div>
<div class="line"><a name="l10207"></a><span class="lineno">10207</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a39b4cb542ae7593d545434fdcc03573e">mDelayNodeMap</a>.insert(std::pair&lt;std::string, std::string&gt;(formula, pParameter-&gt;getId()));</div>
<div class="line"><a name="l10208"></a><span class="lineno">10208</span>&#160;            }</div>
<div class="line"><a name="l10209"></a><span class="lineno">10209</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l10210"></a><span class="lineno">10210</span>&#160;            {</div>
<div class="line"><a name="l10211"></a><span class="lineno">10211</span>&#160;              replacementId = pos-&gt;second;</div>
<div class="line"><a name="l10212"></a><span class="lineno">10212</span>&#160;            }</div>
<div class="line"><a name="l10213"></a><span class="lineno">10213</span>&#160;</div>
<div class="line"><a name="l10214"></a><span class="lineno">10214</span>&#160;          itNode-&gt;setType(AST_NAME);</div>
<div class="line"><a name="l10215"></a><span class="lineno">10215</span>&#160;          itNode-&gt;setName(replacementId.c_str());</div>
<div class="line"><a name="l10216"></a><span class="lineno">10216</span>&#160;</div>
<div class="line"><a name="l10217"></a><span class="lineno">10217</span>&#160;          <span class="keywordflow">while</span> (itNode-&gt;getNumChildren() &gt; 0)</div>
<div class="line"><a name="l10218"></a><span class="lineno">10218</span>&#160;            {</div>
<div class="line"><a name="l10219"></a><span class="lineno">10219</span>&#160;              itNode-&gt;removeChild(0);</div>
<div class="line"><a name="l10220"></a><span class="lineno">10220</span>&#160;            }</div>
<div class="line"><a name="l10221"></a><span class="lineno">10221</span>&#160;        }</div>
<div class="line"><a name="l10222"></a><span class="lineno">10222</span>&#160;    }</div>
<div class="line"><a name="l10223"></a><span class="lineno">10223</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_ada0c2024af8f12fbef9c77ad4587fd68"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ada0c2024af8f12fbef9c77ad4587fd68">SBMLImporter::importSBMLRule</a></div><div class="ttdeci">void importSBMLRule(const Rule *sbmlRule, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, Model *pSBMLModel)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06364">SBMLImporter.cpp:6364</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aca53cdde28ce5bb980ece4371c055fc8"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aca53cdde28ce5bb980ece4371c055fc8">SBMLImporter::find_local_parameters_in_delay</a></div><div class="ttdeci">void find_local_parameters_in_delay(ASTNode *pNode, Reaction *pSBMLReaction, Model *pModel, std::map&lt; std::string, std::string &gt; &amp;localReplacementMap, const std::set&lt; std::string &gt; &amp;localIds, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10234">SBMLImporter.cpp:10234</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a6f596cc4208b32f8280111dcd7bc4727"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a6f596cc4208b32f8280111dcd7bc4727">SBMLImporter::replace_name_nodes</a></div><div class="ttdeci">void replace_name_nodes(ASTNode *pNode, const std::map&lt; std::string, std::string &gt; &amp;replacementMap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l10334">SBMLImporter.cpp:10334</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8f78f336ef119556c847afdb8e86674d"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8f78f336ef119556c847afdb8e86674d">SBMLImporter::mUsedSBMLIds</a></div><div class="ttdeci">std::set&lt; std::string &gt; mUsedSBMLIds</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00089">SBMLImporter.h:89</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a39b4cb542ae7593d545434fdcc03573e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a39b4cb542ae7593d545434fdcc03573e">SBMLImporter::mDelayNodeMap</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mDelayNodeMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00088">SBMLImporter.h:88</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8595689dd63fec1e462ee49fd16ea333"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">SBMLImporter::createCModelValueFromParameter</a></div><div class="ttdeci">CModelValue * createCModelValueFromParameter(const Parameter *sbmlParameter, CModel *copasiModel, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04436">SBMLImporter.cpp:4436</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6f596cc4208b32f8280111dcd7bc4727"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replace_name_nodes </td>
          <td>(</td>
          <td class="paramtype">ASTNode *&#160;</td>
          <td class="paramname"><em>pASTNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>replacementMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method gets an ASTNode and a map between old node names and new node names. All AST_NAME nodes with an "old" name are replaced by a node with the "new" name. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l10334">10334</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l10335"></a><span class="lineno">10335</span>&#160;{</div>
<div class="line"><a name="l10336"></a><span class="lineno">10336</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l10337"></a><span class="lineno">10337</span>&#160;</div>
<div class="line"><a name="l10338"></a><span class="lineno">10338</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l10339"></a><span class="lineno">10339</span>&#160;    {</div>
<div class="line"><a name="l10340"></a><span class="lineno">10340</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l10341"></a><span class="lineno">10341</span>&#160;        {</div>
<div class="line"><a name="l10342"></a><span class="lineno">10342</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10343"></a><span class="lineno">10343</span>&#160;        }</div>
<div class="line"><a name="l10344"></a><span class="lineno">10344</span>&#160;</div>
<div class="line"><a name="l10345"></a><span class="lineno">10345</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l10346"></a><span class="lineno">10346</span>&#160;        {</div>
<div class="line"><a name="l10347"></a><span class="lineno">10347</span>&#160;          std::map&lt;std::string, std::string&gt;::const_iterator pos = replacementMap.find(itNode-&gt;getName());</div>
<div class="line"><a name="l10348"></a><span class="lineno">10348</span>&#160;</div>
<div class="line"><a name="l10349"></a><span class="lineno">10349</span>&#160;          <span class="keywordflow">if</span> (pos != replacementMap.end())</div>
<div class="line"><a name="l10350"></a><span class="lineno">10350</span>&#160;            {</div>
<div class="line"><a name="l10351"></a><span class="lineno">10351</span>&#160;              itNode-&gt;setName(pos-&gt;second.c_str());</div>
<div class="line"><a name="l10352"></a><span class="lineno">10352</span>&#160;            }</div>
<div class="line"><a name="l10353"></a><span class="lineno">10353</span>&#160;        }</div>
<div class="line"><a name="l10354"></a><span class="lineno">10354</span>&#160;    }</div>
<div class="line"><a name="l10355"></a><span class="lineno">10355</span>&#160;}</div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9f528cf6d4ee5452d0b80565a90bb9dd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replace_time_with_initial_time </td>
          <td>(</td>
          <td class="paramtype">ASTNode *&#160;</td>
          <td class="paramname"><em>pASTNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>pCopasiModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If an initial expression uses time, we have to import it as initial time instead. This method takes an AST node and converts all time nodes to object nodes that have the common name of the time as the name. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09513">9513</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">CCopasiObject::getCN()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a39df6ef8194ede615a3f12a94a04a31a">CModelEntity::getInitialValueReference()</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments()</a>.</p>
<div class="fragment"><div class="line"><a name="l09514"></a><span class="lineno"> 9514</span>&#160;{</div>
<div class="line"><a name="l09515"></a><span class="lineno"> 9515</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l09516"></a><span class="lineno"> 9516</span>&#160;</div>
<div class="line"><a name="l09517"></a><span class="lineno"> 9517</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l09518"></a><span class="lineno"> 9518</span>&#160;    {</div>
<div class="line"><a name="l09519"></a><span class="lineno"> 9519</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l09520"></a><span class="lineno"> 9520</span>&#160;        {</div>
<div class="line"><a name="l09521"></a><span class="lineno"> 9521</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09522"></a><span class="lineno"> 9522</span>&#160;        }</div>
<div class="line"><a name="l09523"></a><span class="lineno"> 9523</span>&#160;</div>
<div class="line"><a name="l09524"></a><span class="lineno"> 9524</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME_TIME)</div>
<div class="line"><a name="l09525"></a><span class="lineno"> 9525</span>&#160;        {</div>
<div class="line"><a name="l09526"></a><span class="lineno"> 9526</span>&#160;          itNode-&gt;setType(AST_NAME);</div>
<div class="line"><a name="l09527"></a><span class="lineno"> 9527</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pReference = pCopasiModel-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a39df6ef8194ede615a3f12a94a04a31a">getInitialValueReference</a>();</div>
<div class="line"><a name="l09528"></a><span class="lineno"> 9528</span>&#160;          assert(pReference);</div>
<div class="line"><a name="l09529"></a><span class="lineno"> 9529</span>&#160;          itNode-&gt;setName(pReference-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>().c_str());</div>
<div class="line"><a name="l09530"></a><span class="lineno"> 9530</span>&#160;        }</div>
<div class="line"><a name="l09531"></a><span class="lineno"> 9531</span>&#160;    }</div>
<div class="line"><a name="l09532"></a><span class="lineno"> 9532</span>&#160;}</div>
<div class="ttc" id="classCCopasiObject_html_a1f5e2625716c1ac192561974bd17b3cb"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">CCopasiObject::getCN</a></div><div class="ttdeci">virtual CCopasiObjectName getCN() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00103">CCopasiObject.cpp:103</a></div></div>
<div class="ttc" id="classCModelEntity_html_a39df6ef8194ede615a3f12a94a04a31a"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a39df6ef8194ede615a3f12a94a04a31a">CModelEntity::getInitialValueReference</a></div><div class="ttdeci">CCopasiObject * getInitialValueReference() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00367">CModelValue.cpp:367</a></div></div>
<div class="ttc" id="classCCopasiObject_html"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9f/CCopasiObject_8h_source.html#l00216">CCopasiObject.h:216</a></div></div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaaae9a79b256a2015377b6fd36613deb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replaceAmountReferences </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *&#160;</td>
          <td class="paramname"><em>pASTNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Model *&#160;</td>
          <td class="paramname"><em>pSBMLModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method replaces references to the id of species which have the hasOnlySubstanceUnits flag set with the reference divided by avogadros number. The method tries to determine if there already is a multiplication with avogadros number and removes this multiplication rather than adding a new division.</p>
<p>This method replaces references to the id of species which have the hasOnlySubstanceUnits flag set with the reference divided by avogadros number. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l04790">4790</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual()</a>, <a class="el" href="../../d2/d16/classCNodeIteratorMode.html#aea14a3591128f088de5c392e51f680c9adbe53b89bb7136a7e399860cd6811a2c">CNodeIteratorMode::Before</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a851212f9fbd299a9a2deaadf2d7a5eb1">createHasOnlySubstanceUnitFactor()</a>, <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>, <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>, <a class="el" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>, <a class="el" href="../../d5/dcc/classConverterASTNode.html#a4b31c6595d47c1cb4e520775c0a8f926">ConverterASTNode::removeChild()</a>, <a class="el" href="../../de/d8c/classCNodeContextIterator.html#aafec776bbac4df962d3f8f5d2727744d">CNodeContextIterator&lt; Node, int &gt;::setProcessingModes()</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#aa35b9921ec708e8676846c33ee20e6a1">CNodeContextIterator&lt; Node, int &gt;::skipChildren()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;{</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ConverterASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;  itNode.setProcessingModes(<a class="code" href="../../d2/d16/classCNodeIteratorMode.html#aea14a3591128f088de5c392e51f680c9adbe53b89bb7136a7e399860cd6811a2c">CNodeIteratorMode::Before</a>);</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;    {</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;        {</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;        }</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;      <span class="comment">// check if there is already a multiplication with the avogadro number</span></div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;      <span class="comment">// if so, we just replace that multiplication instead of adding an additional division</span></div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;      <span class="comment">// we only do this, if there are two children to the multiplication because otherwise we would have to do sophisticated checks</span></div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;      <span class="comment">// whether the multiplication is really only between a certain species and the avogadro number</span></div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_TIMES &amp;&amp; itNode-&gt;getNumChildren() == 2)</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;        {</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;          std::set&lt;const Parameter*&gt;::const_iterator avoIt = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>.begin();</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;          std::set&lt;const Parameter*&gt;::const_iterator avoEndit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>.end();</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;          <span class="comment">// check if one of the potantial avogrador numbers is a child to this multiplication</span></div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;          ASTNode* pChild1 = itNode-&gt;getChild(0);</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;          ASTNode* pChild2 = itNode-&gt;getChild(1);</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;          assert(pChild1 != NULL);</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;          assert(pChild2 != NULL);</div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;          <span class="keywordflow">if</span> (pChild1-&gt;getType() == AST_NAME &amp;&amp; pChild2-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;            {</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;              std::string id1 = pChild1-&gt;getName();</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;              std::string id2 = pChild2-&gt;getName();</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;              ASTNode *pAvogadro = NULL, *pSpecies = NULL;</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;              <span class="keywordflow">if</span> (pChild1 != NULL &amp;&amp; pChild2 != NULL)</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;                {</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;                  <span class="keywordflow">while</span> (avoIt != avoEndit)</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;                    {</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;                      <span class="keywordflow">if</span> (id1 == (*avoIt)-&gt;getId())</div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;                        {</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;                          pAvogadro = pChild1;</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;                          pSpecies = pChild2;</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;                          <span class="comment">// store the id of the species in id1 for use below</span></div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;                          id1 = id2;</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;                          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;                        }</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;                      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (id2 == (*avoIt)-&gt;getId())</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;                        {</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;                          pAvogadro = pChild2;</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;                          pSpecies = pChild1;</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;                          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;                        }</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;                      ++avoIt;</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;                    }</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;                  <span class="keywordflow">if</span> (pAvogadro != NULL)</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;                    {</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;                      <span class="comment">// check if the potential speices node is really a substance only species</span></div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;                      <span class="comment">//</span></div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;                      std::map&lt;Species*, Compartment*&gt;::const_iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.begin();</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;                      std::map&lt;Species*, Compartment*&gt;::const_iterator endit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.end();</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;                      <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;                        {</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;                          <span class="keywordflow">if</span> (it-&gt;first-&gt;getId() == id1)</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;                            {</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;                              <span class="comment">// delete the two children</span></div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;                              itNode-&gt;removeChild(1);</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;                              itNode-&gt;removeChild(0);</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;                              <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(pChild1);</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;                              <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(pChild2);</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;                              <span class="comment">// now we know that we can change the current node</span></div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;                              <span class="comment">// to represent the species</span></div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;                              itNode-&gt;setType(AST_NAME);</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;                              itNode-&gt;setName(id1.c_str());</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;                              itNode.skipChildren();</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;                            }</div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;                          ++it;</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;                        }</div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;                    }</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;                }</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;            }</div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((pChild1-&gt;getType() == AST_NAME &amp;&amp; (pChild2-&gt;getType() == AST_REAL || pChild2-&gt;getType() == AST_REAL_E)) ||</div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;                   (pChild2-&gt;getType() == AST_NAME &amp;&amp; (pChild1-&gt;getType() == AST_REAL || pChild1-&gt;getType() == AST_REAL_E)))</div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;            {</div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;              <span class="keywordtype">double</span> value = 0.0;</div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;              std::string <a class="code" href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">id</a>;</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;              <span class="keywordflow">if</span> (pChild1-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;                {</div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;                  value = pChild2-&gt;getMantissa() * pow(10.0, (<span class="keywordtype">double</span>)pChild2-&gt;getExponent());</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;                  <span class="keywordtype">id</span> = pChild1-&gt;getName();</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;                }</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;                {</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;                  value = pChild1-&gt;getMantissa() * pow(10.0, (<span class="keywordtype">double</span>)pChild1-&gt;getExponent());</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;                  <span class="keywordtype">id</span> = pChild2-&gt;getName();</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;                }</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">areApproximatelyEqual</a>(factor, value, 1e-3))</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;                {</div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;                  std::map&lt;Species*, Compartment*&gt;::const_iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.begin();</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;                  std::map&lt;Species*, Compartment*&gt;::const_iterator endit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.end();</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;                  <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;                    {</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;                      <span class="keywordflow">if</span> (it-&gt;first-&gt;getId() == <a class="code" href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">id</a>)</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;                        {</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;                          <span class="comment">// delete the two children</span></div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;                          itNode-&gt;removeChild(1);</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;                          itNode-&gt;removeChild(0);</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;                          <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(pChild1);</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;                          <a class="code" href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a>(pChild2);</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;                          <span class="comment">// now we know that we can change the current node</span></div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;                          <span class="comment">// to represent the species</span></div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;                          itNode-&gt;setType(AST_NAME);</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;                          itNode-&gt;setName(<span class="keywordtype">id</span>.c_str());</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;                          itNode.skipChildren();</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;                          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;                        }</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;                      ++it;</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;                    }</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;                }</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;            }</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;        }</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;        {</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;          <span class="comment">// check if pNode is a reference to a hasOnlySubstance species</span></div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;          std::string <span class="keywordtype">id</span> = itNode-&gt;getName();</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;          std::map&lt;Species*, Compartment*&gt;::const_iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.begin();</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;          std::map&lt;Species*, Compartment*&gt;::const_iterator endit = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.end();</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;          <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;            {</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;              <span class="keywordflow">if</span> (it-&gt;first-&gt;getId() == <a class="code" href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">id</a>)</div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;                {</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;                }</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;              ++it;</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;            }</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;          <span class="keywordflow">if</span> (it != endit)</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;            {</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;              <span class="comment">// replace pNode by a division by the quantity to number</span></div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;              <span class="comment">// factor</span></div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;              <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>.empty())</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;                {</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;                  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a851212f9fbd299a9a2deaadf2d7a5eb1">createHasOnlySubstanceUnitFactor</a>(pSBMLModel, factor, copasi2sbmlmap);</div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;                }</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;</div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;              itNode-&gt;setType(AST_DIVIDE);</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;              itNode-&gt;setCharacter(<span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;              <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>* pChild = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>(AST_NAME);</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;              pChild-&gt;setName(<span class="keywordtype">id</span>.c_str());</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;              itNode-&gt;addChild(pChild);</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;              <span class="keywordtype">id</span> = (*this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">mPotentialAvogadroNumbers</a>.begin())-&gt;getId();</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;              pChild = <span class="keyword">new</span> <a class="code" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a>(AST_NAME);</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;              pChild-&gt;setName(<span class="keywordtype">id</span>.c_str());</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;              itNode-&gt;addChild(pChild);</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;            }</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;        }</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;    }</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;}</div>
<div class="ttc" id="classConverterASTNode_html"><div class="ttname"><a href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/ConverterASTNode_8h_source.html#l00023">ConverterASTNode.h:23</a></div></div>
<div class="ttc" id="copasi_8h_html_ac9efe23516fb43b7adc59fbad1c221b8"><div class="ttname"><a href="../../dc/df8/copasi_8h.html#ac9efe23516fb43b7adc59fbad1c221b8">pdelete</a></div><div class="ttdeci">#define pdelete(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/copasi_8h_source.html#l00215">copasi.h:215</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a5d0a2880f878659d6a0fc2fe0cc15610"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">SBMLImporter::mSubstanceOnlySpecies</a></div><div class="ttdeci">std::map&lt; Species *, Compartment * &gt; mSubstanceOnlySpecies</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00076">SBMLImporter.h:76</a></div></div>
<div class="ttc" id="classCNodeIteratorMode_html_aea14a3591128f088de5c392e51f680c9adbe53b89bb7136a7e399860cd6811a2c"><div class="ttname"><a href="../../d2/d16/classCNodeIteratorMode.html#aea14a3591128f088de5c392e51f680c9adbe53b89bb7136a7e399860cd6811a2c">CNodeIteratorMode::Before</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00031">CNodeIterator.h:31</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a273943602d6059106e5d0ef3dd3e6e45"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a273943602d6059106e5d0ef3dd3e6e45">SBMLImporter::mPotentialAvogadroNumbers</a></div><div class="ttdeci">std::set&lt; const Parameter * &gt; mPotentialAvogadroNumbers</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00083">SBMLImporter.h:83</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a851212f9fbd299a9a2deaadf2d7a5eb1"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a851212f9fbd299a9a2deaadf2d7a5eb1">SBMLImporter::createHasOnlySubstanceUnitFactor</a></div><div class="ttdeci">void createHasOnlySubstanceUnitFactor(Model *pSBMLModel, double factor, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l09106">SBMLImporter.cpp:9106</a></div></div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a34f24c83698b4184ec7c8ab795efdee4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a34f24c83698b4184ec7c8ab795efdee4">SBMLImporter::areApproximatelyEqual</a></div><div class="ttdeci">static bool areApproximatelyEqual(const double &amp;x, const double &amp;y, const double &amp;t=1e-9)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l00177">SBMLImporter.cpp:177</a></div></div>
<div class="ttc" id="structNamespace_html_a715d108cd7f9d5a482c1f485368e883d"><div class="ttname"><a href="../../df/d06/structNamespace.html#a715d108cd7f9d5a482c1f485368e883d">Namespace::id</a></div><div class="ttdeci">const char * id</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6c/stdsoap2_8h_source.html#l01262">stdsoap2.h:1262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a556118a81345202b24dcac66c291532b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replaceCallNodeNames </td>
          <td>(</td>
          <td class="paramtype">ASTNode *&#160;</td>
          <td class="paramname"><em>pNode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Upon import a function object might change its name due to naming conflicts in the function database. So each ASTNode tree has its call node names replaced before it will be processed further. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05002">5002</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8dbcde81bbd9c319d5e2500756c15ce4">mFunctionNameMapping</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">mKnownCustomUserDefinedFunctions</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;{</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;    {</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;        {</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;        }</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_FUNCTION)</div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;        {</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;          std::map&lt;std::string, std::string&gt;::const_iterator pos = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8dbcde81bbd9c319d5e2500756c15ce4">mFunctionNameMapping</a>.find(itNode-&gt;getName());</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;          std::map&lt;std::string, std::string&gt;::const_iterator knownPos = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">mKnownCustomUserDefinedFunctions</a>.find(itNode-&gt;getName());</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;          <span class="keywordflow">if</span> (pos == this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a8dbcde81bbd9c319d5e2500756c15ce4">mFunctionNameMapping</a>.end())</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;            {</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 47, itNode-&gt;getName());</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;            }</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;          <span class="keywordflow">if</span> (knownPos != <a class="code" href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">mKnownCustomUserDefinedFunctions</a>.end() &amp;&amp;</div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;              (knownPos-&gt;second == <span class="stringliteral">&quot;RATE&quot;</span> &amp;&amp; itNode-&gt;getNumChildren() == 1))</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;            {</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;              <span class="comment">// replace the known function with the correct calls.</span></div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;              <span class="comment">// replace rateOf with the rate of whatever is inside</span></div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;              std::string symbol = itNode-&gt;getChild(0)-&gt;getName();</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;              itNode-&gt;removeChild(0);</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;              itNode-&gt;setType(AST_NAME);</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;              itNode-&gt;setName(symbol.c_str());</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;              itNode-&gt;setUserData(strdup(<span class="stringliteral">&quot;RATE&quot;</span>));</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;            }</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;            {</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;              std::string newName = pos-&gt;second;</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;              itNode-&gt;setName(newName.c_str());</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>.insert(newName);</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;            }</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;        }</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;    }</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a8dbcde81bbd9c319d5e2500756c15ce4"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8dbcde81bbd9c319d5e2500756c15ce4">SBMLImporter::mFunctionNameMapping</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mFunctionNameMapping</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00070">SBMLImporter.h:70</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a64e5323f84c8730e7c120e8e9a965d13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">SBMLImporter::mUsedFunctions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mUsedFunctions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00067">SBMLImporter.h:67</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a102e853b7eef2af536188246c8e2e724"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a102e853b7eef2af536188246c8e2e724">SBMLImporter::mKnownCustomUserDefinedFunctions</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mKnownCustomUserDefinedFunctions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00092">SBMLImporter.h:92</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6f2c4e20d24bb2a92ab1a2c2765fe2f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replaceLog </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *&#160;</td>
          <td class="paramname"><em>sourceNode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Replaces all occurrences of the log function with two arguments by a division of two separate calls to log. </p>

</div>
</div>
<a class="anchor" id="ada6a4711ac017aa676ab4be88291a15b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replaceObjectNames </td>
          <td>(</td>
          <td class="paramtype">ASTNode *&#160;</td>
          <td class="paramname"><em>pNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>initialExpression</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06943">6943</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">CCopasiObject::getCN()</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">CModelEntity::getSBMLId()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#aa75b9554a66b91f4e15edc0b0240db62">CReaction::getSBMLId()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d00c07d4d501255fa18951e949461b2">applyStoichiometricExpressions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a54e987b86e2c598008f5013b16eacc35">importRuleForModelEntity()</a>.</p>
<div class="fragment"><div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;{</div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ASTNode &gt;</a> itNode(pNode);</div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;</div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;    {</div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;      <span class="keywordflow">if</span> (*itNode != NULL)</div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;        {</div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;          <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;            {</div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;              std::string name = itNode-&gt;getName();</div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;              <span class="keywordtype">bool</span> haveData = itNode-&gt;getUserData() != NULL;</div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;              <span class="comment">// the id can either belong to a compartment, a species, a reaction or a</span></div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;              <span class="comment">// global parameter</span></div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;              std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator it = copasi2sbmlmap.begin();</div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;              std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator endit = copasi2sbmlmap.end();</div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;              <a class="code" href="../../d4/dcf/classCReaction.html">CReaction</a>* pReaction;</div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;              <a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a>* pModelEntity;</div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;</div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;              std::map&lt;std::string, std::string&gt;::const_iterator knownit = <a class="code" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a>.find(name);</div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;</div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;              <span class="keywordflow">if</span> (knownit != <a class="code" href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">mKnownInitalValues</a>.end())</div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;                {</div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;                  itNode-&gt;setName(knownit-&gt;second.c_str());</div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;                  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;                }</div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;</div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;              std::map&lt;std::string, double&gt;::const_iterator speciesReference = mSBMLSpeciesReferenceIds.find(name);</div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;</div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;              <span class="keywordflow">if</span> (speciesReference  != mSBMLSpeciesReferenceIds.end())</div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;                {</div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;                  <span class="comment">// replace the name with the value</span></div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;                  itNode-&gt;setType(AST_REAL);</div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;                  itNode-&gt;setValue(mSBMLSpeciesReferenceIds[name]);</div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;                  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;                }</div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;</div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;              <span class="keywordflow">while</span> (it != endit)</div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;                {</div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;                  <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* pObject = it-&gt;first;</div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;                  pReaction = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d4/dcf/classCReaction.html">CReaction</a>*<span class="keyword">&gt;</span>(pObject);</div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;                  pModelEntity = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d0/da0/classCModelEntity.html">CModelEntity</a>*<span class="keyword">&gt;</span>(pObject);</div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;                  Species* pSpecies = <span class="keyword">dynamic_cast&lt;</span>Species*<span class="keyword">&gt;</span>(it-&gt;second);</div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;                  std::string sbmlId;</div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;</div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;                  <span class="keywordflow">if</span> (pReaction)</div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;                    {</div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;                      sbmlId = pReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#aa75b9554a66b91f4e15edc0b0240db62">getSBMLId</a>();</div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;                    }</div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pModelEntity)</div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;                    {</div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;                      sbmlId = pModelEntity-&gt;<a class="code" href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">getSBMLId</a>();</div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;                    }</div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;</div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;                  <span class="keywordflow">if</span> (!sbmlId.empty() &amp;&amp; sbmlId == name)</div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;                    {</div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;                      <span class="comment">// make sure it is only one of the allowed types</span></div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;                      <span class="keywordflow">switch</span> (it-&gt;second-&gt;getTypeCode())</div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;                        {</div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;                          <span class="keywordflow">case</span> SBML_COMPARTMENT:</div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;</div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;                            <span class="keywordflow">if</span> (!initialExpression)</div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;                              {</div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;                                <span class="keywordflow">if</span> (haveData)</div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;                                  itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=Rate&quot;</span>).c_str());</div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;                                  itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=Volume&quot;</span>).c_str());</div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;                              }</div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;                              {</div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;                                itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=InitialVolume&quot;</span>).c_str());</div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;                              }</div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;</div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;</div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;                          <span class="keywordflow">case</span> SBML_SPECIES:</div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;                            <span class="comment">// !!!! Check if this is always correct. Maybe if</span></div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;                            <span class="comment">// hasOnlySubstanceUnits is set we have to use the amount</span></div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;                            <span class="comment">// instead. !!!!</span></div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;                            assert(pSpecies != NULL);</div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;</div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;                            <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.find(pSpecies) == this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">mSubstanceOnlySpecies</a>.end())</div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;                              {</div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;                                <span class="keywordflow">if</span> (!initialExpression)</div>
<div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;                                  {</div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;                                    <span class="keywordflow">if</span> (haveData)</div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;                                      itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=Rate&quot;</span>).c_str());</div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;                                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;                                      itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=Concentration&quot;</span>).c_str());</div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;                                  }</div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;                                  {</div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;                                    itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=InitialConcentration&quot;</span>).c_str());</div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;                                  }</div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;                              }</div>
<div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;                              {</div>
<div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;                                <span class="keywordflow">if</span> (!initialExpression)</div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;                                  {</div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;                                    <span class="keywordflow">if</span> (haveData)</div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;                                      itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=Rate&quot;</span>).c_str());</div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;                                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;                                      itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=ParticleNumber&quot;</span>).c_str());</div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;                                  }</div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;                                  {</div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;                                    itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=InitialParticleNumber&quot;</span>).c_str());</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;                                  }</div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;                              }</div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;</div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;</div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;                          <span class="keywordflow">case</span> SBML_REACTION:</div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;</div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;                            <span class="keywordflow">if</span> (((<span class="keyword">const</span> Reaction*)it-&gt;second)-&gt;getKineticLaw() == NULL)</div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;                              {</div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;                                <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 80, sbmlId.c_str());</div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;                              }</div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;</div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;                            itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=Flux&quot;</span>).c_str());</div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;</div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;                          <span class="keywordflow">case</span> SBML_PARAMETER:</div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;</div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;                            <span class="keywordflow">if</span> (!initialExpression)</div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;                              {</div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;                                <span class="keywordflow">if</span> (haveData)</div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;                                  itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=Rate&quot;</span>).c_str());</div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;                                  itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=Value&quot;</span>).c_str());</div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;                              }</div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;                              {</div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;                                itNode-&gt;setName((pObject-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">getCN</a>() + <span class="stringliteral">&quot;,Reference=InitialValue&quot;</span>).c_str());</div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;                              }</div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;</div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;</div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;                          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;                            <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;                        }</div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;</div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;                      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;                    }</div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;</div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;                  ++it;</div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;                }</div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;</div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;              <span class="comment">// not found</span></div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;              <span class="keywordflow">if</span> (it == endit)</div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;                {</div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;                  <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 74, name.c_str());</div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;                }</div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;            }</div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;        }</div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;    }</div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;}</div>
<div class="ttc" id="classCCopasiObject_html_a1f5e2625716c1ac192561974bd17b3cb"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a1f5e2625716c1ac192561974bd17b3cb">CCopasiObject::getCN</a></div><div class="ttdeci">virtual CCopasiObjectName getCN() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00103">CCopasiObject.cpp:103</a></div></div>
<div class="ttc" id="classCModelEntity_html_a5c8d403c6027f59d1cc3e1ccc2d9efac"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a5c8d403c6027f59d1cc3e1ccc2d9efac">CModelEntity::getSBMLId</a></div><div class="ttdeci">const std::string &amp; getSBMLId() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da3/CModelValue_8cpp_source.html#l00637">CModelValue.cpp:637</a></div></div>
<div class="ttc" id="classCModelEntity_html"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html">CModelEntity</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00039">CModelValue.h:39</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ace9bd25198bfe11a1838f44fac3b1f3b"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ace9bd25198bfe11a1838f44fac3b1f3b">SBMLImporter::mKnownInitalValues</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; mKnownInitalValues</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00093">SBMLImporter.h:93</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a5d0a2880f878659d6a0fc2fe0cc15610"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a5d0a2880f878659d6a0fc2fe0cc15610">SBMLImporter::mSubstanceOnlySpecies</a></div><div class="ttdeci">std::map&lt; Species *, Compartment * &gt; mSubstanceOnlySpecies</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00076">SBMLImporter.h:76</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCCopasiObject_html"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9f/CCopasiObject_8h_source.html#l00216">CCopasiObject.h:216</a></div></div>
<div class="ttc" id="classCReaction_html_aa75b9554a66b91f4e15edc0b0240db62"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#aa75b9554a66b91f4e15edc0b0240db62">CReaction::getSBMLId</a></div><div class="ttdeci">const std::string &amp; getSBMLId() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l01654">CReaction.cpp:1654</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a568f885d73f0ea36bedfe92f6e533071">CCopasiMessage::EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00093">CCopasiMessage.h:93</a></div></div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCReaction_html"><div class="ttname"><a href="../../d4/dcf/classCReaction.html">CReaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc3/CReaction_8h_source.html#l00044">CReaction.h:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acb25b2bd2e87cb5d0753b25991215681"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replacePowerFunctionNodes </td>
          <td>(</td>
          <td class="paramtype">ASTNode *&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Replaces the variables in a function definition with the actual function parameters that were used when the function was called. The function returns a pointer to the ConverterAST node with the replaced variables. This function replaces the AST_FUNCTION_POWER ASTNodes in a ASTNode tree with the AST_POWER node. </p>

</div>
</div>
<a class="anchor" id="a598cc8c19bb063cea35e5309c1c9fd26"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replaceRoot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dcc/classConverterASTNode.html">ConverterASTNode</a> *&#160;</td>
          <td class="paramname"><em>sourceNode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Replaces all occurrences of the root function with two arguments by a call to the power function with the inverse of the first argument. </p>

</div>
</div>
<a class="anchor" id="af175213378137da1684580b794a7cd13"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replaceTimeAndAvogadroNodeNames </td>
          <td>(</td>
          <td class="paramtype">ASTNode *&#160;</td>
          <td class="paramname"><em>pNode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The data for a <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a> needs to have the common name of the model it refers to as its data. Since this model is only known via a pointer in the <a class="el" href="../../d7/d6d/classSBMLImporter.html">SBMLImporter</a> at the time of import, all AST_NAME_TIME nodes that are imported need to have their name replaced by the common name of this model. Starting with SBML Level 3 this also applies to the avogadro number. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l04980">4980</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, <a class="el" href="../../df/dfa/classCObjectInterface.html#a05acf7754b8c69b8eb23e583d7bf5b92">CObjectInterface::getCN()</a>, <a class="el" href="../../d9/dfd/classCCopasiContainer.html#a56ad5bdfd87327bed598c10461db695c">CCopasiContainer::getObject()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;{</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;    {</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;        {</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;        }</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME_TIME)</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;        {</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;          itNode-&gt;setName(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d9/dfd/classCCopasiContainer.html#a56ad5bdfd87327bed598c10461db695c">getObject</a>(<a class="code" href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a>(<span class="stringliteral">&quot;Reference=Time&quot;</span>))-&gt;<a class="code" href="../../df/dfa/classCObjectInterface.html#a05acf7754b8c69b8eb23e583d7bf5b92">getCN</a>().c_str());</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;        }</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME_AVOGADRO)</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;        {</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;          itNode-&gt;setName(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>-&gt;<a class="code" href="../../d9/dfd/classCCopasiContainer.html#a56ad5bdfd87327bed598c10461db695c">getObject</a>(<a class="code" href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a>(<span class="stringliteral">&quot;Reference=Avogadro Constant&quot;</span>))-&gt;<a class="code" href="../../df/dfa/classCObjectInterface.html#a05acf7754b8c69b8eb23e583d7bf5b92">getCN</a>().c_str());</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;        }</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;    }</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;}</div>
<div class="ttc" id="classCObjectInterface_html_a05acf7754b8c69b8eb23e583d7bf5b92"><div class="ttname"><a href="../../df/dfa/classCObjectInterface.html#a05acf7754b8c69b8eb23e583d7bf5b92">CObjectInterface::getCN</a></div><div class="ttdeci">virtual CCopasiObjectName getCN() const =0</div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="classCCopasiContainer_html_a56ad5bdfd87327bed598c10461db695c"><div class="ttname"><a href="../../d9/dfd/classCCopasiContainer.html#a56ad5bdfd87327bed598c10461db695c">CCopasiContainer::getObject</a></div><div class="ttdeci">virtual const CObjectInterface * getObject(const CCopasiObjectName &amp;cn) const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/ddc/CCopasiContainer_8cpp_source.html#l00074">CCopasiContainer.cpp:74</a></div></div>
<div class="ttc" id="classCCopasiObjectName_html"><div class="ttname"><a href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/CCopasiObjectName_8h_source.html#l00032">CCopasiObjectName.h:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a30f60e2327471fd72cb0b6445e274b38"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::replaceTimeDependentFunctionCalls </td>
          <td>(</td>
          <td class="paramtype">ASTNode *&#160;</td>
          <td class="paramname"><em>root</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function replaces function calls to all functions listed in mExplicitelyTimeDependentFunctionDefinitions with the same call but an additional parameter which is the time. This replacement includes all model entities that have a mathematical expression, so depending on the version of SBML, this would include: initial assignments, rules, constraints, kinetic laws and events. The corresponding replacement for the function definitions is done in replaceTimeNodesInFunctionDefinition. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l07147">7147</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">mExplicitelyTimeDependentFunctionDefinitions</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>.</p>
<div class="fragment"><div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;{</div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;</div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;    {</div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;        {</div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;        }</div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;</div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_FUNCTION &amp;&amp;</div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;          <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">mExplicitelyTimeDependentFunctionDefinitions</a>.find(itNode-&gt;getName()) != <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">mExplicitelyTimeDependentFunctionDefinitions</a>.end())</div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;        {</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;          <span class="comment">// add a new child to this child node</span></div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;          ASTNode* pTimeNode = <span class="keyword">new</span> ASTNode(AST_NAME_TIME);</div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;          pTimeNode-&gt;setName(<span class="stringliteral">&quot;TIME&quot;</span>);</div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;          itNode-&gt;addChild(pTimeNode);</div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;        }</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;    }</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;}</div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8eb1281de56a2232df925ba8de420412"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">SBMLImporter::mExplicitelyTimeDependentFunctionDefinitions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mExplicitelyTimeDependentFunctionDefinitions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00079">SBMLImporter.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a15d24b615b23b00a505d720cd48917c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::replaceTimeNodesInFunctionDefinition </td>
          <td>(</td>
          <td class="paramtype">ASTNode *&#160;</td>
          <td class="paramname"><em>pASTNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>newNodeName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For function definitions that use the time symbol we have to make this a variable that is passed to the function instead. The function recursively goes through the AST tree rooted in root and changes all time nodes to variable nodes with name newNodeName. If a time node has been found, the function return true, otherwise false is returned.</p>
<p>For function definitions that use the time symbol we have to make this a variable that is passed to the function instead. The function recursively goes through the AST tree rooted in root and changes all time nodes to variable nodes with name newNodeName. Additionally all function calls to functions in mExplicitelyTimeDependentFunctionDefinitions have to be changed to contain the added parameter. If a time node has been found, the function returns true, otherwise false is returned. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l07112">7112</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../de/d8c/classCNodeContextIterator.html#acc4585a3736984c0bf231d21898523e5">CNodeContextIterator&lt; Node, int &gt;::end()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">mExplicitelyTimeDependentFunctionDefinitions</a>, and <a class="el" href="../../de/d8c/classCNodeContextIterator.html#ab170ab70df889e389d13c18d8acb6186">CNodeContextIterator&lt; Node, int &gt;::next()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8635efa2b753c28b33f29f8f44b12161">createCFunctionFromFunctionTree()</a>.</p>
<div class="fragment"><div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;{</div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;  <span class="keywordtype">bool</span> timeFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;  <a class="code" href="../../d5/dcb/classCNodeIterator.html">CNodeIterator&lt; ASTNode &gt;</a> itNode(pASTNode);</div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;</div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;  <span class="keywordflow">while</span> (itNode.next() != itNode.end())</div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;    {</div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;      <span class="keywordflow">if</span> (*itNode == NULL)</div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;        {</div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;        }</div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;</div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;      <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_NAME_TIME)</div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;        {</div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;          timeFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;          itNode-&gt;setType(AST_NAME);</div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;          itNode-&gt;setName(newNodeName.c_str());</div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;        }</div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;        {</div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;          <span class="keywordflow">if</span> (itNode-&gt;getType() == AST_FUNCTION &amp;&amp;</div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;              <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">mExplicitelyTimeDependentFunctionDefinitions</a>.find(itNode-&gt;getName()) != <a class="code" href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">mExplicitelyTimeDependentFunctionDefinitions</a>.end())</div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;            {</div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;              <span class="comment">// add a new child to this child node</span></div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;              ASTNode* pParameterNode = <span class="keyword">new</span> ASTNode(AST_NAME);</div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;              pParameterNode-&gt;setName(newNodeName.c_str());</div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;              itNode-&gt;addChild(pParameterNode);</div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;              timeFound = timeFound || <span class="keyword">true</span>;</div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;            }</div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;        }</div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;    }</div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;</div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;  <span class="keywordflow">return</span> timeFound;</div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;}</div>
<div class="ttc" id="classCNodeIterator_html"><div class="ttname"><a href="../../d5/dcb/classCNodeIterator.html">CNodeIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d54/CNodeIterator_8h_source.html#l00339">CNodeIterator.h:339</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a8eb1281de56a2232df925ba8de420412"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a8eb1281de56a2232df925ba8de420412">SBMLImporter::mExplicitelyTimeDependentFunctionDefinitions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mExplicitelyTimeDependentFunctionDefinitions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00079">SBMLImporter.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a808e13eae7937c4ed64ce989776bcd42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::restoreFunctionDB </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l04651">4651</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">CCopasiObject::getKey()</a>, <a class="el" href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">CEvaluationTree::getType()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>, <a class="el" href="../../db/d9a/classCFunctionDB.html#a6d685b2548d3a2e3cd5893ce2410bcaf">CFunctionDB::removeFunction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">sbmlIdMap</a>, and <a class="el" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d91/classSEDMLImporter.html#a7d255bec8ba02e1f15f89f47071e96a0">SEDMLImporter::importFirstSBMLModel()</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a6cba7496dde125f853b2868590f309c2">CCopasiDataModel::importSBML()</a>, and <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a197b897c98be7e00c13e143b70434c31">CCopasiDataModel::importSBMLFromString()</a>.</p>
<div class="fragment"><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;{</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;  <span class="comment">// set all the old sbml ids</span></div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;  std::map&lt;CFunction*, std::string&gt;::iterator it = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">sbmlIdMap</a>.begin();</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;  std::map&lt;CFunction*, std::string&gt;::iterator endIt = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">sbmlIdMap</a>.end();</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;  <span class="keywordflow">while</span> (it != endIt)</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;    {</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;      it-&gt;first-&gt;setSBMLId(it-&gt;second);</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;      ++it;</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;    }</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;  <span class="comment">// remove all the functions that were added during import</span></div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;  std::set&lt;std::string&gt;::iterator it2 = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>.begin();</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;  std::set&lt;std::string&gt;::iterator endIt2 = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">mUsedFunctions</a>.end();</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;  <span class="keywordflow">while</span> (it2 != endIt2)</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;    {</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;      <a class="code" href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a>* pTree = this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">findFunction</a>(*it2);</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;      assert(pTree);</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;      <span class="keywordflow">if</span> (pTree-&gt;<a class="code" href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">getType</a>() == <a class="code" href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a>)</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;        {</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;          this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">functionDB</a>-&gt;<a class="code" href="../../db/d9a/classCFunctionDB.html#a6d685b2548d3a2e3cd5893ce2410bcaf">removeFunction</a>(pTree-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">getKey</a>());</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;        }</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;      ++it2;</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;    }</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;}</div>
<div class="ttc" id="classCEvaluationTree_html_a09abd66dddd22b300853b0e2de8f392f"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a09abd66dddd22b300853b0e2de8f392f">CEvaluationTree::getType</a></div><div class="ttdeci">const CEvaluationTree::Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d55/CEvaluationTree_8cpp_source.html#l00167">CEvaluationTree.cpp:167</a></div></div>
<div class="ttc" id="classCEvaluationTree_html"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html">CEvaluationTree</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00028">CEvaluationTree.h:28</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a64e5323f84c8730e7c120e8e9a965d13"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a64e5323f84c8730e7c120e8e9a965d13">SBMLImporter::mUsedFunctions</a></div><div class="ttdeci">std::set&lt; std::string &gt; mUsedFunctions</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00067">SBMLImporter.h:67</a></div></div>
<div class="ttc" id="classCCopasiObject_html_aeeec4db3332a6886c76ace4c3fe62b7d"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#aeeec4db3332a6886c76ace4c3fe62b7d">CCopasiObject::getKey</a></div><div class="ttdeci">virtual const std::string &amp; getKey() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00608">CCopasiObject.cpp:608</a></div></div>
<div class="ttc" id="classSBMLImporter_html_af3884484e51df06669ba5bc4fc77c07c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af3884484e51df06669ba5bc4fc77c07c">SBMLImporter::functionDB</a></div><div class="ttdeci">CFunctionDB * functionDB</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00056">SBMLImporter.h:56</a></div></div>
<div class="ttc" id="classCEvaluationTree_html_a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb"><div class="ttname"><a href="../../d1/d50/classCEvaluationTree.html#a438862de69016cbade534b1ed597fc70a114fcc70db330145967247feeea8bedb">CEvaluationTree::UserDefined</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/CEvaluationTree_8h_source.html#l00040">CEvaluationTree.h:40</a></div></div>
<div class="ttc" id="classCFunctionDB_html_a6d685b2548d3a2e3cd5893ce2410bcaf"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#a6d685b2548d3a2e3cd5893ce2410bcaf">CFunctionDB::removeFunction</a></div><div class="ttdeci">bool removeFunction(size_t index)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00291">CFunctionDB.cpp:291</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a779466459366c517247fc2598d5f56e8"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a779466459366c517247fc2598d5f56e8">SBMLImporter::sbmlIdMap</a></div><div class="ttdeci">std::map&lt; CFunction *, std::string &gt; sbmlIdMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00066">SBMLImporter.h:66</a></div></div>
<div class="ttc" id="classCFunctionDB_html_aa25aabb5ce2677103813278c014e06fb"><div class="ttname"><a href="../../db/d9a/classCFunctionDB.html#aa25aabb5ce2677103813278c014e06fb">CFunctionDB::findFunction</a></div><div class="ttdeci">CFunction * findFunction(const std::string &amp;functionName)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/CFunctionDB_8cpp_source.html#l00325">CFunctionDB.cpp:325</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85c92e54900e9c0df1a1b890d52e9449"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/df8/copasi_8h.html#ac4f8f8fcd12a8115cd9802d04a557125">C_FLOAT64</a> SBMLImporter::round </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dc/df8/copasi_8h.html#ac4f8f8fcd12a8115cd9802d04a557125">C_FLOAT64</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l00170">170</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a47c92998532c601a66df4fae4e5a8b2d">handleAreaUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac63af5c9fb48fdfac1fc3317954dca1f">handleLengthUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab3ad9f948cb55e9cb589d2b0bb3c934">handleSubstanceUnit()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aaf9850d5d4c3e287eb624ea7821682b2">handleTimeUnit()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa1aca4da87cb2a912a7f27e0a21e6359">handleVolumeUnit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">return</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    x &lt; 0.0 ? -floor(-x + 0.5) : floor(x + 0.5);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3bf3c7539fc012eb3ca782f0ca44e5a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::sbmlId2CopasiCN </td>
          <td>(</td>
          <td class="paramtype">ASTNode *&#160;</td>
          <td class="paramname"><em>pNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d89/classCCopasiParameterGroup.html">CCopasiParameterGroup</a> &amp;&#160;</td>
          <td class="paramname"><em>pParamGroup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Replaces the ids of named nodes in an ASTNode tree with the correspondingCopasi Common Names. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l04490">4490</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d5/db6/classCCopasiParameter.html#acb7d9fc7eca10f6fa48542576e8c4aaa">CCopasiParameter::getCN()</a>, <a class="el" href="../../df/d89/classCCopasiParameterGroup.html#a9df83bc5bbee7b715f7196fd4a8b0a84">CCopasiParameterGroup::getParameter()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, and <a class="el" href="../../d5/db6/classCCopasiParameter.html#ac2b268ab6f1d1ca0bfa6acdc10b82958">CCopasiParameter::setValue()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;{</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;  <span class="comment">// TODO CRITICAL We need to use a node iterator</span></div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;  <span class="keywordtype">bool</span> success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, iMax = pNode-&gt;getNumChildren();</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;  <span class="keywordflow">if</span> (pNode-&gt;getType() == AST_NAME)</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;    {</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;      Compartment* pSBMLCompartment = NULL;</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;      Species* pSBMLSpecies = NULL;</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;      Reaction* pSBMLReaction = NULL;</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;      Parameter* pSBMLParameter = NULL;</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;      std::string sbmlId;</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;      std::string name = pNode-&gt;getName();</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;      <a class="code" href="../../d5/db6/classCCopasiParameter.html">CCopasiParameter</a>* pParam = pParamGroup.<a class="code" href="../../df/d89/classCCopasiParameterGroup.html#a9df83bc5bbee7b715f7196fd4a8b0a84">getParameter</a>(name);</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;      std::map&lt;std::string, double&gt;::const_iterator speciesReference = mSBMLSpeciesReferenceIds.find(name);</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;      <span class="keywordflow">if</span> (speciesReference  != mSBMLSpeciesReferenceIds.end())</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;        {</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;          <span class="comment">// replace the name with the value</span></div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;          pNode-&gt;setType(AST_REAL);</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;          pNode-&gt;<a class="code" href="../../d5/db6/classCCopasiParameter.html#ac2b268ab6f1d1ca0bfa6acdc10b82958">setValue</a>(mSBMLSpeciesReferenceIds[name]);</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;        }</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pParam)</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;        {</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;          pNode-&gt;setName(pParam-&gt;<a class="code" href="../../d5/db6/classCCopasiParameter.html#acb7d9fc7eca10f6fa48542576e8c4aaa">getCN</a>().c_str());</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;        }</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;        {</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;          std::map&lt;CCopasiObject*, SBase*&gt;::iterator it = copasi2sbmlmap.begin();</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;          std::map&lt;CCopasiObject*, SBase*&gt;::iterator endIt = copasi2sbmlmap.end();</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;          <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;          <span class="keywordflow">while</span> (it != endIt)</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;            {</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;              <span class="keywordtype">int</span> type = it-&gt;second-&gt;getTypeCode();</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;              <span class="keywordflow">switch</span> (type)</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;                {</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;                  <span class="keywordflow">case</span> SBML_COMPARTMENT:</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;                    pSBMLCompartment = <span class="keyword">dynamic_cast&lt;</span>Compartment*<span class="keyword">&gt;</span>(it-&gt;second);</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;                    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;                      {</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;                        sbmlId = pSBMLCompartment-&gt;getName();</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;                      }</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;                      {</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;                        sbmlId = pSBMLCompartment-&gt;getId();</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;                      }</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;                    <span class="keywordflow">if</span> (sbmlId == pNode-&gt;getName())</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;                      {</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;                        pNode-&gt;setName(dynamic_cast&lt;CCompartment*&gt;(it-&gt;first)-&gt;getObject(<a class="code" href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a>(<span class="stringliteral">&quot;Reference=InitialVolume&quot;</span>))-&gt;getCN().c_str());</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;                        found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;                      }</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;                  <span class="keywordflow">case</span> SBML_SPECIES:</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;                    pSBMLSpecies = <span class="keyword">dynamic_cast&lt;</span>Species*<span class="keyword">&gt;</span>(it-&gt;second);</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;                    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;                      {</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;                        sbmlId = pSBMLSpecies-&gt;getName();</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;                      }</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;                      {</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;                        sbmlId = pSBMLSpecies-&gt;getId();</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;                      }</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;                    <span class="keywordflow">if</span> (sbmlId == pNode-&gt;getName())</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;                      {</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;                        pNode-&gt;setName(dynamic_cast&lt;CMetab*&gt;(it-&gt;first)-&gt;getObject(<a class="code" href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a>(<span class="stringliteral">&quot;Reference=InitialConcentration&quot;</span>))-&gt;getCN().c_str());</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;                        found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;                      }</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;                  <span class="keywordflow">case</span> SBML_REACTION:</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;                    pSBMLReaction = <span class="keyword">dynamic_cast&lt;</span>Reaction*<span class="keyword">&gt;</span>(it-&gt;second);</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;                    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;                      {</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;                        sbmlId = pSBMLReaction-&gt;getName();</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;                      }</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;                      {</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;                        sbmlId = pSBMLReaction-&gt;getId();</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;                      }</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;                    <span class="keywordflow">if</span> (sbmlId == pNode-&gt;getName())</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;                      {</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;                        pNode-&gt;setName(dynamic_cast&lt;CReaction*&gt;(it-&gt;first)-&gt;getObject(<a class="code" href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a>(<span class="stringliteral">&quot;Reference=ParticleFlux&quot;</span>))-&gt;getCN().c_str());</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;                        found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;                      }</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;                  <span class="keywordflow">case</span> SBML_PARAMETER:</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;                    pSBMLParameter = <span class="keyword">dynamic_cast&lt;</span>Parameter*<span class="keyword">&gt;</span>(it-&gt;second);</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;                    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1)</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;                      {</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;                        sbmlId = pSBMLParameter-&gt;getName();</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;                      }</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;                      {</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;                        sbmlId = pSBMLParameter-&gt;getId();</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;                      }</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;                    <span class="keywordflow">if</span> (sbmlId == pNode-&gt;getName())</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;                      {</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;                        pNode-&gt;setName(dynamic_cast&lt;CModelValue*&gt;(it-&gt;first)-&gt;getValueReference()-&gt;getCN().c_str());</div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;                        found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;                      }</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;                  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;                }</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;              ++it;</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;            }</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;          <span class="keywordflow">if</span> (!found) success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;        }</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;    }</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;    {</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;      <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a3bf3c7539fc012eb3ca782f0ca44e5a8">sbmlId2CopasiCN</a>(pNode-&gt;getChild(i), copasi2sbmlmap, pParamGroup))</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;        {</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;          success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;        }</div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;    }</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;  <span class="keywordflow">return</span> success;</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;}</div>
<div class="ttc" id="classCCopasiParameter_html_ac2b268ab6f1d1ca0bfa6acdc10b82958"><div class="ttname"><a href="../../d5/db6/classCCopasiParameter.html#ac2b268ab6f1d1ca0bfa6acdc10b82958">CCopasiParameter::setValue</a></div><div class="ttdeci">bool setValue(const CType &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df7/CCopasiParameter_8h_source.html#l00164">CCopasiParameter.h:164</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classCCopasiParameter_html"><div class="ttname"><a href="../../d5/db6/classCCopasiParameter.html">CCopasiParameter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df7/CCopasiParameter_8h_source.html#l00035">CCopasiParameter.h:35</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a3bf3c7539fc012eb3ca782f0ca44e5a8"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a3bf3c7539fc012eb3ca782f0ca44e5a8">SBMLImporter::sbmlId2CopasiCN</a></div><div class="ttdeci">bool sbmlId2CopasiCN(ASTNode *pNode, std::map&lt; CCopasiObject *, SBase * &gt; &amp;copasi2sbmlmap, CCopasiParameterGroup &amp;pParamGroup)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l04490">SBMLImporter.cpp:4490</a></div></div>
<div class="ttc" id="classCCopasiParameterGroup_html_a9df83bc5bbee7b715f7196fd4a8b0a84"><div class="ttname"><a href="../../df/d89/classCCopasiParameterGroup.html#a9df83bc5bbee7b715f7196fd4a8b0a84">CCopasiParameterGroup::getParameter</a></div><div class="ttdeci">CCopasiParameter * getParameter(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d56/CCopasiParameterGroup_8cpp_source.html#l00343">CCopasiParameterGroup.cpp:343</a></div></div>
<div class="ttc" id="classCCopasiParameter_html_acb7d9fc7eca10f6fa48542576e8c4aaa"><div class="ttname"><a href="../../d5/db6/classCCopasiParameter.html#acb7d9fc7eca10f6fa48542576e8c4aaa">CCopasiParameter::getCN</a></div><div class="ttdeci">virtual CCopasiObjectName getCN() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/CCopasiParameter_8cpp_source.html#l00412">CCopasiParameter.cpp:412</a></div></div>
<div class="ttc" id="classCCopasiObjectName_html"><div class="ttname"><a href="../../db/d84/classCCopasiObjectName.html">CCopasiObjectName</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/CCopasiObjectName_8h_source.html#l00032">CCopasiObjectName.h:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab92634da43399704fc2ac9e201e4707a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::separateProductArguments </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td>
          <td class="paramname"><em>pRootNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>arguments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function takes a node and tries to find out whether the tree under this node consists only of multiply operators and object nodes. The arguments to the multiply operators are returned. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05543">5543</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode&lt; _Data &gt;::getSibling()</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType()</a>, <a class="el" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98af9d4b686c9ae4f20ca8f1cd707fbe6a0">CEvaluationNodeOperator::MULTIPLY</a>, <a class="el" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98a5d32e83a5fb1029cbd80991bc2291e14">CEvaluationNodeOperator::POWER</a>, and <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression()</a>.</p>
<div class="fragment"><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;{</div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;  <span class="comment">// TODO CRITICAL We need to use a node iterator</span></div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html">CEvaluationNodeOperator</a>* pMultiplyNode = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html">CEvaluationNodeOperator</a>*<span class="keyword">&gt;</span>(pRootNode);</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;</div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;  <span class="keywordflow">if</span> (pMultiplyNode &amp;&amp; (((<a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98">CEvaluationNodeOperator::SubType</a>)<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a>(pMultiplyNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>())) == <a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98af9d4b686c9ae4f20ca8f1cd707fbe6a0">CEvaluationNodeOperator::MULTIPLY</a>))</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;    {</div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;      <span class="comment">// check if one if the children is an object node or a power operator, if so,</span></div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;      <span class="comment">// add the node to the vector</span></div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;      <span class="comment">// the nodes not one of those two are passed to this function recursively.</span></div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pMultiplyNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;</div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;      <span class="keywordflow">while</span> (pChildNode)</div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;        {</div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>* pObjectNode = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>*<span class="keyword">&gt;</span>(pChildNode);</div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html">CEvaluationNodeOperator</a>* pOperatorNode = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html">CEvaluationNodeOperator</a>*<span class="keyword">&gt;</span>(pChildNode);</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;</div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;          <span class="keywordflow">if</span> (pObjectNode)</div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;            {</div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;              arguments.push_back(pObjectNode);</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;            }</div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pOperatorNode &amp;&amp; (((<a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98">CEvaluationNodeOperator::SubType</a>)<a class="code" href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a>(pOperatorNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>())) == <a class="code" href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98a5d32e83a5fb1029cbd80991bc2291e14">CEvaluationNodeOperator::POWER</a>))</div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;            {</div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;              arguments.push_back(pOperatorNode);</div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;            }</div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;            {</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#ab92634da43399704fc2ac9e201e4707a">separateProductArguments</a>(pChildNode, arguments);</div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;</div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;              <span class="keywordflow">if</span> (arguments.empty())</div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;                {</div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;                  <span class="comment">// it is not a mass action kinetic, so we can stop here</span></div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;                }</div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;            }</div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;</div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;          pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;        }</div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;    }</div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;    {</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;      arguments.clear();</div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;    }</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;}</div>
<div class="ttc" id="classCEvaluationNodeOperator_html_a39e738b7acfcf431f7c72e76b68ffa98a5d32e83a5fb1029cbd80991bc2291e14"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98a5d32e83a5fb1029cbd80991bc2291e14">CEvaluationNodeOperator::POWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00041">CEvaluationNodeOperator.h:41</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a0730aecebb9ca0f8401b7d0223e266e8"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode::getSibling</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getSibling()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00353">CCopasiNode.h:353</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_ae24b55d848d78cec0a359fd199c76562"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType</a></div><div class="ttdeci">const Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00357">CEvaluationNode.cpp:357</a></div></div>
<div class="ttc" id="classSBMLImporter_html_ab92634da43399704fc2ac9e201e4707a"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#ab92634da43399704fc2ac9e201e4707a">SBMLImporter::separateProductArguments</a></div><div class="ttdeci">void separateProductArguments(const CEvaluationNode *pRootNode, std::vector&lt; const CEvaluationNode * &gt; &amp;arguments)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l05543">SBMLImporter.cpp:5543</a></div></div>
<div class="ttc" id="classCEvaluationNodeOperator_html_a39e738b7acfcf431f7c72e76b68ffa98af9d4b686c9ae4f20ca8f1cd707fbe6a0"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98af9d4b686c9ae4f20ca8f1cd707fbe6a0">CEvaluationNodeOperator::MULTIPLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00042">CEvaluationNodeOperator.h:42</a></div></div>
<div class="ttc" id="classCEvaluationNodeOperator_html_a39e738b7acfcf431f7c72e76b68ffa98"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html#a39e738b7acfcf431f7c72e76b68ffa98">CEvaluationNodeOperator::SubType</a></div><div class="ttdeci">SubType</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00038">CEvaluationNodeOperator.h:38</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a2cb02df3d57dad7ad1f9654941135c31"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a2cb02df3d57dad7ad1f9654941135c31">CEvaluationNode::subType</a></div><div class="ttdeci">static Type subType(const Type &amp;type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00120">CEvaluationNode.cpp:120</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00034">CEvaluationNodeObject.h:34</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
<div class="ttc" id="classCEvaluationNodeOperator_html"><div class="ttname"><a href="../../d5/de4/classCEvaluationNodeOperator.html">CEvaluationNodeOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d39/CEvaluationNodeOperator_8h_source.html#l00032">CEvaluationNodeOperator.h:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac31001c46406e6c9900dfee120afb0a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::setCorrectUsage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dcf/classCReaction.html">CReaction</a> *&#160;</td>
          <td class="paramname"><em>pCopasiReaction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d44/classCEvaluationNodeCall.html">CEvaluationNodeCall</a> *&#160;</td>
          <td class="paramname"><em>pCallNode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l05588">5588</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">CReaction::getChemEq()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">CEvaluationNodeObject::getData()</a>, <a class="el" href="../../d4/dcf/classCReaction.html#a5028bbc1b79e8a72071c7222cfeef9a2">CReaction::getFunction()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#ab8b0078259e19d69c3e62b890197d601">CChemEq::getModifiers()</a>, <a class="el" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">CCopasiObject::getObjectParent()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">CChemEq::getProducts()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode&lt; _Data &gt;::getSibling()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates()</a>, <a class="el" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea9e0ec67b9460e71c99467c564061f75e">CChemEq::MODIFIER</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baffafab5a317fd2de22c4c5be009694d7">CFunctionParameter::MODIFIER</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">CCopasiDataModel::ObjectFromName()</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1">CFunctionParameter::PARAMETER</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294">CChemEq::PRODUCT</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba8ee65ab9f88bc857172a80b0ca3a7cc1">CFunctionParameter::PRODUCT</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ad3945ba824e2e3efc7816111474240ad">CFunctionParameter::setUsage()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector&lt; T &gt;::size()</a>, <a class="el" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a>, <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1bac081d570aadb879a8274d4f4d5bea203">CFunctionParameter::SUBSTRATE</a>, and <a class="el" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baf3f11f4ddabe0443546c4e33dc7d9ba6">CFunctionParameter::VOLUME</a>.</p>
<div class="fragment"><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;{</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;  <span class="comment">// find out what type each argument in the call node has.</span></div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;  <span class="comment">// it can be a local parameter, a global parameter, a compartment or a metabolite</span></div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;  <span class="comment">// if it is a metabolite, try to find out if it is a substrate, product, or modifier</span></div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;  <span class="keywordflow">if</span> (!pCallNode)</div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;    {</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;      <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;    }</div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;</div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pCallNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;</div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;  std::vector&lt;CCopasiContainer*&gt; listOfContainers = std::vector&lt;CCopasiContainer*&gt;();</div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;</div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;  listOfContainers.push_back(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">mpCopasiModel</a>);</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;</div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;  <a class="code" href="../../d1/dc0/classCChemEq.html">CChemEq</a>&amp; pChemEq = pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">getChemEq</a>();</div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;</div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;  std::map&lt;const CChemEqElement*, CChemEq::MetaboliteRole&gt; v;</div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;</div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt;CChemEqElement&gt;</a>* pV = &amp;pChemEq.<a class="code" href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">getSubstrates</a>();</div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;</div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;  <span class="keywordtype">size_t</span> i, iMax = pV-&gt;<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;</div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;    {</div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;      v[(*pV)[i]] = <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a>;</div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;    }</div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;  pV = &amp;pChemEq.<a class="code" href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">getProducts</a>();</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;  iMax = pV-&gt;<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;</div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;    {</div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;      v[(*pV)[i]] = <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294">CChemEq::PRODUCT</a>;</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;    }</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;</div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;  pV = &amp;pChemEq.<a class="code" href="../../d1/dc0/classCChemEq.html#ab8b0078259e19d69c3e62b890197d601">getModifiers</a>();</div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;  iMax = pV-&gt;<a class="code" href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">size</a>();</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; iMax; ++i)</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;    {</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;      v[(*pV)[i]] = <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea9e0ec67b9460e71c99467c564061f75e">CChemEq::MODIFIER</a>;</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;    }</div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;  <span class="keywordtype">size_t</span> parameterIndex = 0;</div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;</div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;  <span class="keywordflow">while</span> (pChildNode)</div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;    {</div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>* pObjectNode = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>*<span class="keyword">&gt;</span>(pChildNode);</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;      <span class="keywordflow">if</span> (!pObjectNode)</div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;        {</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;        }</div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;</div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a>* <span class="keywordtype">object</span> = <a class="code" href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">mpDataModel</a>-&gt;<a class="code" href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">ObjectFromName</a>(listOfContainers, pObjectNode-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">getData</a>().substr(1, pObjectNode-&gt;<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">getData</a>().length() - 2));</div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;</div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;      <span class="keywordflow">if</span> (!<span class="keywordtype">object</span>)</div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;        {</div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;          <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;        }</div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;</div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;      <a class="code" href="../../d2/d4b/classCFunctionParameter.html">CFunctionParameter</a>* pFunParam = <span class="keyword">const_cast&lt;</span><a class="code" href="../../d2/d4b/classCFunctionParameter.html">CFunctionParameter</a>*<span class="keyword">&gt;</span>(pCopasiReaction-&gt;<a class="code" href="../../d4/dcf/classCReaction.html#a5028bbc1b79e8a72071c7222cfeef9a2">getFunction</a>()-&gt;<a class="code" href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">getVariables</a>()[parameterIndex]);</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;</div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d7/d18/classCCopasiObjectReference.html">CCopasiObjectReference&lt;C_FLOAT64&gt;</a>*<span class="keyword">&gt;</span>(<span class="keywordtype">object</span>))</div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;        {</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;          <span class="keywordtype">object</span> = <span class="keywordtype">object</span>-&gt;<a class="code" href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">getObjectParent</a>();</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;          <span class="keywordflow">if</span> (dynamic_cast&lt;const CMetab*&gt;(<span class="keywordtype">object</span>))</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;            {</div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;              std::map&lt;const CChemEqElement*, CChemEq::MetaboliteRole&gt;::iterator it = v.begin();</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;              std::map&lt;const CChemEqElement*, CChemEq::MetaboliteRole&gt;::iterator endIt = v.end();</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;</div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;              <span class="keywordflow">while</span> (it != endIt)</div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;                {</div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;                  <span class="keywordflow">if</span> (it-&gt;first == <span class="keywordtype">object</span>)</div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;                    {</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;                      <span class="comment">// get the role of the metabolite</span></div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;                      <span class="keywordflow">switch</span> (it-&gt;second)</div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;                        {</div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;                          <span class="keywordflow">case</span> <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a>:</div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;                            <span class="comment">// it is a substrate</span></div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;                            pFunParam-&gt;<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ad3945ba824e2e3efc7816111474240ad">setUsage</a>(<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1bac081d570aadb879a8274d4f4d5bea203">CFunctionParameter::SUBSTRATE</a>);</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;                          <span class="keywordflow">case</span> <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294">CChemEq::PRODUCT</a>:</div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;                            <span class="comment">// it is a product</span></div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;                            pFunParam-&gt;<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ad3945ba824e2e3efc7816111474240ad">setUsage</a>(<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba8ee65ab9f88bc857172a80b0ca3a7cc1">CFunctionParameter::PRODUCT</a>);</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;                          <span class="keywordflow">case</span> <a class="code" href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea9e0ec67b9460e71c99467c564061f75e">CChemEq::MODIFIER</a>:</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;                            <span class="comment">// it is a modifier</span></div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;                            pFunParam-&gt;<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ad3945ba824e2e3efc7816111474240ad">setUsage</a>(<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baffafab5a317fd2de22c4c5be009694d7">CFunctionParameter::MODIFIER</a>);</div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;                          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;                            <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;                        }</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;                    }</div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;                  ++it;</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;                }</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;</div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;              <span class="keywordflow">if</span> (it == endIt)</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;                {</div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;                  <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;                }</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;            }</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_cast&lt;const CModelValue*&gt;(<span class="keywordtype">object</span>))</div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;            {</div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;              <span class="comment">// it is a global parameter</span></div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;              pFunParam-&gt;<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ad3945ba824e2e3efc7816111474240ad">setUsage</a>(<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1">CFunctionParameter::PARAMETER</a>);</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;            }</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_cast&lt;const CCompartment*&gt;(<span class="keywordtype">object</span>))</div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;            {</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;              <span class="comment">// it is a volume</span></div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;              pFunParam-&gt;<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ad3945ba824e2e3efc7816111474240ad">setUsage</a>(<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baf3f11f4ddabe0443546c4e33dc7d9ba6">CFunctionParameter::VOLUME</a>);</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;            }</div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;            {</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;              <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>()</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;            }</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;        }</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;        {</div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;          <span class="comment">// it is a local parameter</span></div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;          pFunParam-&gt;<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ad3945ba824e2e3efc7816111474240ad">setUsage</a>(<a class="code" href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1">CFunctionParameter::PARAMETER</a>);</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;        }</div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;</div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;      pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pChildNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">getSibling</a>());</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;      ++parameterIndex;</div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;    }</div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;}</div>
<div class="ttc" id="classCCopasiNode_html_a0730aecebb9ca0f8401b7d0223e266e8"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a0730aecebb9ca0f8401b7d0223e266e8">CCopasiNode::getSibling</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getSibling()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00353">CCopasiNode.h:353</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ad3945ba824e2e3efc7816111474240ad"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ad3945ba824e2e3efc7816111474240ad">CFunctionParameter::setUsage</a></div><div class="ttdeci">void setUsage(Role usage)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dcb/CFunctionParameter_8cpp_source.html#l00104">CFunctionParameter.cpp:104</a></div></div>
<div class="ttc" id="classSBMLImporter_html_abc1b2ec95e8d7fa93910e094e948cb2f"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#abc1b2ec95e8d7fa93910e094e948cb2f">SBMLImporter::mpCopasiModel</a></div><div class="ttdeci">CModel * mpCopasiModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">SBMLImporter.h:69</a></div></div>
<div class="ttc" id="classCCopasiVector_html_ab7e0e37022783eddfe85abf9339b05c0"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#ab7e0e37022783eddfe85abf9339b05c0">CCopasiVector::size</a></div><div class="ttdeci">virtual size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00386">CCopasiVector.h:386</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCChemEq_html"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html">CChemEq</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00033">CChemEq.h:33</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1ba8ee65ab9f88bc857172a80b0ca3a7cc1"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1ba8ee65ab9f88bc857172a80b0ca3a7cc1">CFunctionParameter::PRODUCT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00045">CFunctionParameter.h:45</a></div></div>
<div class="ttc" id="classCChemEq_html_a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6eaf013cb5d282a2bd945af3964a1d8f294">CChemEq::PRODUCT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00038">CChemEq.h:38</a></div></div>
<div class="ttc" id="classCCopasiObject_html"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d9f/CCopasiObject_8h_source.html#l00216">CCopasiObject.h:216</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1baffafab5a317fd2de22c4c5be009694d7"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baffafab5a317fd2de22c4c5be009694d7">CFunctionParameter::MODIFIER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00046">CFunctionParameter.h:46</a></div></div>
<div class="ttc" id="classCCopasiObjectReference_html"><div class="ttname"><a href="../../d7/d18/classCCopasiObjectReference.html">CCopasiObjectReference&lt; C_FLOAT64 &gt;</a></div></div>
<div class="ttc" id="classCChemEq_html_ac7001192479e074d3696734187ec50d8"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ac7001192479e074d3696734187ec50d8">CChemEq::getProducts</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getProducts() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00063">CChemEq.cpp:63</a></div></div>
<div class="ttc" id="classCReaction_html_a5028bbc1b79e8a72071c7222cfeef9a2"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#a5028bbc1b79e8a72071c7222cfeef9a2">CReaction::getFunction</a></div><div class="ttdeci">const CFunction * getFunction() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00252">CReaction.cpp:252</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a2aa8c57db3550fc84175ad38f1f3661e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a2aa8c57db3550fc84175ad38f1f3661e">SBMLImporter::mpDataModel</a></div><div class="ttdeci">CCopasiDataModel * mpDataModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00068">SBMLImporter.h:68</a></div></div>
<div class="ttc" id="classCChemEq_html_abbcd10e89a632f5a7c225fee6975c6d9"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#abbcd10e89a632f5a7c225fee6975c6d9">CChemEq::getSubstrates</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getSubstrates() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00060">CChemEq.cpp:60</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1baf3f11f4ddabe0443546c4e33dc7d9ba6"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1baf3f11f4ddabe0443546c4e33dc7d9ba6">CFunctionParameter::VOLUME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00048">CFunctionParameter.h:48</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1bac081d570aadb879a8274d4f4d5bea203"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1bac081d570aadb879a8274d4f4d5bea203">CFunctionParameter::SUBSTRATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00044">CFunctionParameter.h:44</a></div></div>
<div class="ttc" id="classCChemEq_html_a42a9886fb39620aa713e5d560047fe6ea9e0ec67b9460e71c99467c564061f75e"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea9e0ec67b9460e71c99467c564061f75e">CChemEq::MODIFIER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00040">CChemEq.h:40</a></div></div>
<div class="ttc" id="classCFunctionParameter_html"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html">CFunctionParameter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00034">CFunctionParameter.h:34</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classCChemEq_html_ab8b0078259e19d69c3e62b890197d601"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#ab8b0078259e19d69c3e62b890197d601">CChemEq::getModifiers</a></div><div class="ttdeci">const CCopasiVector&lt; CChemEqElement &gt; &amp; getModifiers() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d08/CChemEq_8cpp_source.html#l00066">CChemEq.cpp:66</a></div></div>
<div class="ttc" id="classCFunctionParameter_html_ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1"><div class="ttname"><a href="../../d2/d4b/classCFunctionParameter.html#ab0b7b0afa5fb363d6000f102b8590a1babe45d3446d5eecf154656899eb0e8de1">CFunctionParameter::PARAMETER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d59/CFunctionParameter_8h_source.html#l00047">CFunctionParameter.h:47</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00034">CEvaluationNodeObject.h:34</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html_a32f6a30d58655b215bd68a01b26b47a3"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html#a32f6a30d58655b215bd68a01b26b47a3">CEvaluationNodeObject::getData</a></div><div class="ttdeci">virtual const Data &amp; getData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db2/CEvaluationNodeObject_8cpp_source.html#l00135">CEvaluationNodeObject.cpp:135</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
<div class="ttc" id="classCCopasiDataModel_html_a9d54888c14c755abec4c757289ee26f7"><div class="ttname"><a href="../../d4/d18/classCCopasiDataModel.html#a9d54888c14c755abec4c757289ee26f7">CCopasiDataModel::ObjectFromName</a></div><div class="ttdeci">CCopasiObject * ObjectFromName(const std::vector&lt; CCopasiContainer * &gt; &amp;listOfContainer, const CCopasiObjectName &amp;CN) const </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d38/CCopasiDataModel_8cpp_source.html#l01940">CCopasiDataModel.cpp:1940</a></div></div>
<div class="ttc" id="classCChemEq_html_a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb"><div class="ttname"><a href="../../d1/dc0/classCChemEq.html#a42a9886fb39620aa713e5d560047fe6ea423724961df75e26ad06eb3637333ceb">CChemEq::SUBSTRATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dff/CChemEq_8h_source.html#l00039">CChemEq.h:39</a></div></div>
<div class="ttc" id="classCReaction_html_ade6a66098c2f04f6e91d916029fe23e2"><div class="ttname"><a href="../../d4/dcf/classCReaction.html#ade6a66098c2f04f6e91d916029fe23e2">CReaction::getChemEq</a></div><div class="ttdeci">const CChemEq &amp; getChemEq() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/CReaction_8cpp_source.html#l00223">CReaction.cpp:223</a></div></div>
<div class="ttc" id="classCFunction_html_ab30b89a5603c9e0aa76b9cf2345f2e57"><div class="ttname"><a href="../../d9/d86/classCFunction.html#ab30b89a5603c9e0aa76b9cf2345f2e57">CFunction::getVariables</a></div><div class="ttdeci">CFunctionParameters &amp; getVariables()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db0/CFunction_8cpp_source.html#l00148">CFunction.cpp:148</a></div></div>
<div class="ttc" id="classCCopasiObject_html_a33bb5035eec7ebc5e3ecac4771316405"><div class="ttname"><a href="../../d4/da8/classCCopasiObject.html#a33bb5035eec7ebc5e3ecac4771316405">CCopasiObject::getObjectParent</a></div><div class="ttdeci">CCopasiContainer * getObjectParent() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d22/CCopasiObject_8cpp_source.html#l00276">CCopasiObject.cpp:276</a></div></div>
<div class="ttc" id="classCCopasiVector_html"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html">CCopasiVector&lt; CChemEqElement &gt;</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad5f23358553e48562b7385abe9785bf7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::setImportCOPASIMIRIAM </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>import</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the flag that determines whether COPASI MIRIAM annotation is imported if it is present. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l09503">9503</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">mImportCOPASIMIRIAM</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d91/classSEDMLImporter.html#a7d255bec8ba02e1f15f89f47071e96a0">SEDMLImporter::importFirstSBMLModel()</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a6cba7496dde125f853b2868590f309c2">CCopasiDataModel::importSBML()</a>, and <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a197b897c98be7e00c13e143b70434c31">CCopasiDataModel::importSBMLFromString()</a>.</p>
<div class="fragment"><div class="line"><a name="l09504"></a><span class="lineno"> 9504</span>&#160;{</div>
<div class="line"><a name="l09505"></a><span class="lineno"> 9505</span>&#160;  this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">mImportCOPASIMIRIAM</a> = <span class="keyword">import</span>;</div>
<div class="line"><a name="l09506"></a><span class="lineno"> 9506</span>&#160;}</div>
<div class="ttc" id="classSBMLImporter_html_a4588fba30554cfe8dbe394a6ad6685eb"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a4588fba30554cfe8dbe394a6ad6685eb">SBMLImporter::mImportCOPASIMIRIAM</a></div><div class="ttdeci">bool mImportCOPASIMIRIAM</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00085">SBMLImporter.h:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab7c3f20a666286ea61e4854c8f86f3f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d05/CChemEqParser__yacc_8cpp.html#aa76fec002b4ba91adc88f68d56ba730c">void</a> SBMLImporter::setImportHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da5/classCProcessReport.html">CProcessReport</a> *&#160;</td>
          <td class="paramname"><em>pHandler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06083">6083</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>.</p>

<p>Referenced by <a class="el" href="../../d6/d91/classSEDMLImporter.html#a7d255bec8ba02e1f15f89f47071e96a0">SEDMLImporter::importFirstSBMLModel()</a>, <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a6cba7496dde125f853b2868590f309c2">CCopasiDataModel::importSBML()</a>, and <a class="el" href="../../d4/d18/classCCopasiDataModel.html#a197b897c98be7e00c13e143b70434c31">CCopasiDataModel::importSBMLFromString()</a>.</p>
<div class="fragment"><div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;{<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a> = pHandler;}</div>
<div class="ttc" id="classSBMLImporter_html_a32b10e0dc03fc5bbf7b4842b0d314ff6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">SBMLImporter::mpImportHandler</a></div><div class="ttdeci">CProcessReport * mpImportHandler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00072">SBMLImporter.h:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a50b1ef1543256b1b2e0ae69c7f1ff7c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::setInitialValues </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d04/classCModel.html">CModel</a> *&#160;</td>
          <td class="paramname"><em>pModel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; <a class="el" href="../../d4/da8/classCCopasiObject.html">CCopasiObject</a> *, SBase * &gt; &amp;&#160;</td>
          <td class="paramname"><em>copasi2sbmlmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets the initial values on compartments, metabolites and model values if those initial values have been set in the SBML model. Otherwise the routine checks if a rule or an initial assignment has been set for the entity. If the entity has not been set in any way, an error message is created. </p>

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l07169">7169</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">CCopasiVector&lt; T &gt;::begin()</a>, <a class="el" href="../../d4/d04/classCModel.html#ac09203e0a20af906c4a29861b7cba2f0">CModel::buildInitialRefreshSequence()</a>, <a class="el" href="../../d4/d04/classCModel.html#a6e8dde0dfb5046e823d44f4625f08221">CModel::compileIfNecessary()</a>, <a class="el" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">CCopasiVector&lt; T &gt;::end()</a>, <a class="el" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a>, <a class="el" href="../../d8/d5c/classCKeyFactory.html#a49fdca380d37f99f3195103465ba4c0f">CKeyFactory::get()</a>, <a class="el" href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">CModel::getCompartments()</a>, <a class="el" href="../../d3/db1/classCCopasiRootContainer.html#acfd634e031d3fb4358b24bfcdd26830e">CCopasiRootContainer::getKeyFactory()</a>, <a class="el" href="../../d4/d04/classCModel.html#a73a8a52c2190b1aae2f1427e4e9eb0e1">CModel::getMetabolites()</a>, <a class="el" href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">CModel::getModelValues()</a>, <a class="el" href="../../d4/d04/classCModel.html#ab30b51797988903a4af4e7fed3d163fa">CModel::getQuantity2NumberFactor()</a>, <a class="el" href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">CModel::getReactions()</a>, <a class="el" href="../../d5/db6/classCCopasiParameter.html#abe27d08164c4ab6b6f04370e18b801cd">CCopasiParameter::getValueReference()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>, <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a>, and <a class="el" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aab0a74c011c2515f5eb7b06d4be05fe22">CModelEntity::REACTIONS</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>.</p>
<div class="fragment"><div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;{</div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;  <span class="comment">// go through the CCopasiDataModel and set the initial values on all</span></div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;  <span class="comment">// compartments, metabolites and model values if they were given in the sbml</span></div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;  <span class="comment">// model.</span></div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;  <span class="comment">// if no initial value was given for an entity, check if the value is set</span></div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;  <span class="comment">// by another means (rule, initialAssignment) and if not, create an error</span></div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;  <span class="comment">// message</span></div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;  std::map&lt;CCopasiObject*, SBase*&gt;::const_iterator pos;</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;  std::set&lt;const CCopasiObject*&gt; changedObjects;</div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;  <a class="code" href="../../d9/db9/classCCopasiVectorNS.html">CCopasiVectorNS&lt;CCompartment&gt;::iterator</a> compartmentIt = pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">getCompartments</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>();</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;  <a class="code" href="../../d9/db9/classCCopasiVectorNS.html">CCopasiVectorNS&lt;CCompartment&gt;::iterator</a> compartmentEndit = pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">getCompartments</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;</div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;  <span class="keywordflow">while</span> (compartmentIt != compartmentEndit)</div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;    {</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;      pos = copasi2sbmlmap.find(*compartmentIt);</div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;      assert(pos != copasi2sbmlmap.end());</div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;      Compartment* pSBMLCompartment = <span class="keyword">dynamic_cast&lt;</span>Compartment*<span class="keyword">&gt;</span>(pos-&gt;second);</div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;      assert(pSBMLCompartment != NULL);</div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;      <span class="comment">// for level 1 models we have to use isSetVolume to determine if the</span></div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;      <span class="comment">// volume has been set since in level 1, compartments had different</span></div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;      <span class="comment">// defaults</span></div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;      <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">mLevel</a> == 1 &amp;&amp; pSBMLCompartment-&gt;isSetVolume()) || pSBMLCompartment-&gt;isSetSize())</div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;        {</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;          <span class="comment">// set the initial value</span></div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;          <span class="comment">// here we can safely use getSize() regardless of the level of the</span></div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;          <span class="comment">// sbml model</span></div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;          (*compartmentIt)-&gt;setInitialValue(pSBMLCompartment-&gt;getSize());</div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;          changedObjects.insert((*compartmentIt)-&gt;getInitialValueReference());</div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;        }</div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;        {</div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;          <span class="comment">// if the entity has a status of FIXED or ODE,</span></div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;          <span class="comment">// check if there is an initial assignment, else it is an</span></div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;          <span class="comment">// error</span></div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;          <span class="keywordflow">if</span> (((*compartmentIt)-&gt;getStatus() == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelValue::FIXED</a> || (*compartmentIt)-&gt;getStatus() == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelValue::ODE</a>) &amp;&amp; (*compartmentIt)-&gt;getInitialExpressionPtr() == NULL)</div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;            {</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 45, pSBMLCompartment-&gt;getId().c_str());</div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;</div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;              (*compartmentIt)-&gt;setInitialValue(1.0);</div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;              changedObjects.insert((*compartmentIt)-&gt;getInitialValueReference());</div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;            }</div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;        }</div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;</div>
<div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;      ++compartmentIt;</div>
<div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;    }</div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;</div>
<div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;  <a class="code" href="../../d9/db9/classCCopasiVectorNS.html">CCopasiVectorNS&lt;CMetab&gt;::iterator</a> metabIt = pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#a73a8a52c2190b1aae2f1427e4e9eb0e1">getMetabolites</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>();</div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;  <a class="code" href="../../d9/db9/classCCopasiVectorNS.html">CCopasiVectorNS&lt;CMetab&gt;::iterator</a> metabEndit = pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#a73a8a52c2190b1aae2f1427e4e9eb0e1">getMetabolites</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;</div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;  <span class="keywordflow">while</span> (metabIt != metabEndit)</div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;    {</div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;      pos = copasi2sbmlmap.find(*metabIt);</div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;      assert(pos != copasi2sbmlmap.end());</div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;      Species* pSBMLSpecies = <span class="keyword">dynamic_cast&lt;</span>Species*<span class="keyword">&gt;</span>(pos-&gt;second);</div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;      assert(pSBMLSpecies != NULL);</div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;</div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;      <span class="comment">// check if the initial concentration or the initial amount has been set</span></div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;      <span class="keywordflow">if</span> (pSBMLSpecies-&gt;isSetInitialConcentration())</div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;        {</div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;          <span class="keywordflow">if</span> (pSBMLSpecies-&gt;getHasOnlySubstanceUnits() == <span class="keyword">true</span>)</div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;            {</div>
<div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a> <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 20, pSBMLSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;            }</div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;</div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;          <span class="comment">// set the initial value</span></div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;          <span class="comment">// here we can safely use getSize() regardless of the level of the</span></div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;          <span class="comment">// sbml model</span></div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;          (*metabIt)-&gt;setInitialConcentration(pSBMLSpecies-&gt;getInitialConcentration());</div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;          changedObjects.insert((*metabIt)-&gt;getInitialConcentrationReference());</div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;        }</div>
<div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pSBMLSpecies-&gt;isSetInitialAmount())</div>
<div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;        {</div>
<div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;          (*metabIt)-&gt;setInitialValue(pSBMLSpecies-&gt;getInitialAmount()*pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ab30b51797988903a4af4e7fed3d163fa">getQuantity2NumberFactor</a>()); <span class="comment">// CHECK UNITS !!!</span></div>
<div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;          changedObjects.insert((*metabIt)-&gt;getInitialValueReference());</div>
<div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;        }</div>
<div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;        {</div>
<div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;          <span class="comment">// if the entity has a status of FIXED, REACTION or ODE,</span></div>
<div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;          <span class="comment">// check if there is an initial assignment, else it is an</span></div>
<div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;          <span class="comment">// error</span></div>
<div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;          <span class="keywordflow">if</span> (((*metabIt)-&gt;getStatus() == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelValue::FIXED</a> || (*metabIt)-&gt;getStatus() == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aab0a74c011c2515f5eb7b06d4be05fe22">CModelValue::REACTIONS</a> || (*metabIt)-&gt;getStatus() == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelValue::ODE</a>) &amp;&amp; (*metabIt)-&gt;getInitialExpressionPtr() == NULL)</div>
<div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;            {</div>
<div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 41, pSBMLSpecies-&gt;getId().c_str());</div>
<div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;</div>
<div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;              (*metabIt)-&gt;setInitialConcentration(1.0);</div>
<div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;              changedObjects.insert((*metabIt)-&gt;getInitialConcentrationReference());</div>
<div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;            }</div>
<div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;        }</div>
<div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;</div>
<div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;      ++metabIt;</div>
<div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;    }</div>
<div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;</div>
<div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;  <a class="code" href="../../d7/d08/classCCopasiVectorN.html">CCopasiVectorN&lt;CModelValue&gt;::iterator</a> mvIt = pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">getModelValues</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>();</div>
<div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;  <a class="code" href="../../d7/d08/classCCopasiVectorN.html">CCopasiVectorN&lt;CModelValue&gt;::iterator</a> mvEndit = pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">getModelValues</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;</div>
<div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;  <span class="keywordflow">while</span> (mvIt != mvEndit)</div>
<div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;    {</div>
<div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;      pos = copasi2sbmlmap.find(*mvIt);</div>
<div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;      assert(pos != copasi2sbmlmap.end());</div>
<div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;      Parameter* pSBMLParameter = <span class="keyword">dynamic_cast&lt;</span>Parameter*<span class="keyword">&gt;</span>(pos-&gt;second);</div>
<div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;      assert(pSBMLParameter != NULL);</div>
<div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;</div>
<div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;      <span class="comment">// check if the initial concentration or the initial amount has been set</span></div>
<div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;      <span class="keywordflow">if</span> (pSBMLParameter-&gt;isSetValue())</div>
<div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;        {</div>
<div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;          <span class="comment">// set the initial value</span></div>
<div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;          <span class="comment">// here we can safely use getSize() regardless of the level of the</span></div>
<div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;          <span class="comment">// sbml model</span></div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;          (*mvIt)-&gt;setInitialValue(pSBMLParameter-&gt;getValue());</div>
<div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;          changedObjects.insert((*mvIt)-&gt;getInitialValueReference());</div>
<div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;        }</div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;        {</div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;          <span class="comment">// if the entity has a status of FIXED or ODE,</span></div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;          <span class="comment">// check if there is an initial assignment, else it is an</span></div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;          <span class="comment">// error</span></div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;          <span class="keywordflow">if</span> (((*mvIt)-&gt;getStatus() == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelValue::FIXED</a> || (*mvIt)-&gt;getStatus() == <a class="code" href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelValue::ODE</a>) &amp;&amp; (*mvIt)-&gt;getInitialExpressionPtr() == NULL)</div>
<div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;            {</div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;              this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">mIncompleteModel</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;              <a class="code" href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a>(<a class="code" href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a>, <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a> + 43, pSBMLParameter-&gt;getId().c_str());</div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;</div>
<div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;              (*mvIt)-&gt;setInitialValue(1.0);</div>
<div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;              changedObjects.insert((*mvIt)-&gt;getInitialValueReference());</div>
<div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;            }</div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;        }</div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;</div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;      ++mvIt;</div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;    }</div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;</div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;  <a class="code" href="../../d9/db9/classCCopasiVectorNS.html">CCopasiVectorNS &lt; CReaction &gt;::iterator</a> reactIt = pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">getReactions</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">begin</a>();</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;  <a class="code" href="../../d9/db9/classCCopasiVectorNS.html">CCopasiVectorNS &lt; CReaction &gt;::iterator</a> reactEndit = pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">getReactions</a>().<a class="code" href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">end</a>();</div>
<div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;</div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;  <span class="keywordflow">while</span> (reactIt != reactEndit)</div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;    {</div>
<div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;      <span class="keyword">const</span> std::vector&lt;std::vector&lt;std::string&gt; &gt;&amp; parameterMappings = (*reactIt)-&gt;getParameterMappings();</div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;      std::vector&lt;std::vector&lt;std::string&gt; &gt;::const_iterator parameterMappingsIt = parameterMappings.begin();</div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;      std::vector&lt;std::vector&lt;std::string&gt; &gt;::const_iterator parameterMappingsEndit = parameterMappings.end();</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;      <a class="code" href="../../d5/db6/classCCopasiParameter.html">CCopasiParameter</a>* pLocalParameter = NULL;</div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;</div>
<div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;      <span class="keywordflow">while</span> (parameterMappingsIt != parameterMappingsEndit)</div>
<div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;        {</div>
<div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;          std::vector&lt;std::string&gt;::const_iterator keyIt = (*parameterMappingsIt).begin();</div>
<div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;          std::vector&lt;std::string&gt;::const_iterator keyEndit = (*parameterMappingsIt).end();</div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;</div>
<div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;          <span class="keywordflow">while</span> (keyIt != keyEndit)</div>
<div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;            {</div>
<div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;              pLocalParameter = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d5/db6/classCCopasiParameter.html">CCopasiParameter</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d3/db1/classCCopasiRootContainer.html#acfd634e031d3fb4358b24bfcdd26830e">CCopasiRootContainer::getKeyFactory</a>()-&gt;<a class="code" href="../../d8/d5c/classCKeyFactory.html#a49fdca380d37f99f3195103465ba4c0f">get</a>(*keyIt));</div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;</div>
<div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;              <span class="keywordflow">if</span> (pLocalParameter != NULL)</div>
<div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;                {</div>
<div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;                  <span class="comment">// it is a local parameter and it is being used</span></div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;                  changedObjects.insert(pLocalParameter-&gt;<a class="code" href="../../d5/db6/classCCopasiParameter.html#abe27d08164c4ab6b6f04370e18b801cd">getValueReference</a>());</div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;                }</div>
<div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;</div>
<div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;              ++keyIt;</div>
<div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;            }</div>
<div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;</div>
<div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;          ++parameterMappingsIt;</div>
<div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;        }</div>
<div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;</div>
<div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;      ++reactIt;</div>
<div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;    }</div>
<div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;</div>
<div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;  pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#a6e8dde0dfb5046e823d44f4625f08221">compileIfNecessary</a>(<a class="code" href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">mpImportHandler</a>);</div>
<div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;</div>
<div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;  <span class="keywordflow">try</span></div>
<div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;    {</div>
<div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;      std::vector&lt;Refresh*&gt; refreshes = pModel-&gt;<a class="code" href="../../d4/d04/classCModel.html#ac09203e0a20af906c4a29861b7cba2f0">buildInitialRefreshSequence</a>(changedObjects);</div>
<div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;      std::vector&lt;Refresh*&gt;::iterator refreshIt = refreshes.begin(), refreshEndit = refreshes.end();</div>
<div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;</div>
<div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;      <span class="keywordflow">while</span> (refreshIt != refreshEndit)</div>
<div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;        (**refreshIt++)();</div>
<div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;    }</div>
<div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;</div>
<div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;  <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;    {}</div>
<div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;</div>
<div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;}</div>
<div class="ttc" id="classCCopasiVectorN_html"><div class="ttname"><a href="../../d7/d08/classCCopasiVectorN.html">CCopasiVectorN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/df7/CCopasiDataModel_8h_source.html#l00047">CCopasiDataModel.h:47</a></div></div>
<div class="ttc" id="classCModel_html_a73a8a52c2190b1aae2f1427e4e9eb0e1"><div class="ttname"><a href="../../d4/d04/classCModel.html#a73a8a52c2190b1aae2f1427e4e9eb0e1">CModel::getMetabolites</a></div><div class="ttdeci">const CCopasiVector&lt; CMetab &gt; &amp; getMetabolites() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01051">CModel.cpp:1051</a></div></div>
<div class="ttc" id="classSBMLImporter_html_aa2ceec377ae743892d56b522adbce41e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#aa2ceec377ae743892d56b522adbce41e">SBMLImporter::mLevel</a></div><div class="ttdeci">unsigned int mLevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">SBMLImporter.h:63</a></div></div>
<div class="ttc" id="classCModel_html_ab3481ad574a3e1935a7617339970eab2"><div class="ttname"><a href="../../d4/d04/classCModel.html#ab3481ad574a3e1935a7617339970eab2">CModel::getModelValues</a></div><div class="ttdeci">const CCopasiVectorN&lt; CModelValue &gt; &amp; getModelValues() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01060">CModel.cpp:1060</a></div></div>
<div class="ttc" id="classCKeyFactory_html_a49fdca380d37f99f3195103465ba4c0f"><div class="ttname"><a href="../../d8/d5c/classCKeyFactory.html#a49fdca380d37f99f3195103465ba4c0f">CKeyFactory::get</a></div><div class="ttdeci">CCopasiObject * get(const std::string &amp;key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc8/CKeyFactory_8cpp_source.html#l00235">CKeyFactory.cpp:235</a></div></div>
<div class="ttc" id="classCCopasiVector_html_acb26711fe72be0d2cb3a37c2fbcc031f"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#acb26711fe72be0d2cb3a37c2fbcc031f">CCopasiVector::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00185">CCopasiVector.h:185</a></div></div>
<div class="ttc" id="classCCopasiParameter_html_abe27d08164c4ab6b6f04370e18b801cd"><div class="ttname"><a href="../../d5/db6/classCCopasiParameter.html#abe27d08164c4ab6b6f04370e18b801cd">CCopasiParameter::getValueReference</a></div><div class="ttdeci">CCopasiObject * getValueReference() const </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d99/CCopasiParameter_8cpp_source.html#l00251">CCopasiParameter.cpp:251</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a32b10e0dc03fc5bbf7b4842b0d314ff6"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a32b10e0dc03fc5bbf7b4842b0d314ff6">SBMLImporter::mpImportHandler</a></div><div class="ttdeci">CProcessReport * mpImportHandler</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00072">SBMLImporter.h:72</a></div></div>
<div class="ttc" id="classCCopasiParameter_html"><div class="ttname"><a href="../../d5/db6/classCCopasiParameter.html">CCopasiParameter</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df7/CCopasiParameter_8h_source.html#l00035">CCopasiParameter.h:35</a></div></div>
<div class="ttc" id="classCCopasiVectorNS_html"><div class="ttname"><a href="../../d9/db9/classCCopasiVectorNS.html">CCopasiVectorNS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00800">CCopasiVector.h:800</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_a7f5ce9c8d3812b45cb6f33595fba5789"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a7f5ce9c8d3812b45cb6f33595fba5789">MCSBML</a></div><div class="ttdeci">#define MCSBML</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00046">CCopasiMessage.h:46</a></div></div>
<div class="ttc" id="classCCopasiVector_html_a44c97a5f614c885495c437f2a8d20954"><div class="ttname"><a href="../../d8/d2c/classCCopasiVector.html#a44c97a5f614c885495c437f2a8d20954">CCopasiVector::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d51/CCopasiVector_8h_source.html#l00191">CCopasiVector.h:191</a></div></div>
<div class="ttc" id="classCModel_html_ab30b51797988903a4af4e7fed3d163fa"><div class="ttname"><a href="../../d4/d04/classCModel.html#ab30b51797988903a4af4e7fed3d163fa">CModel::getQuantity2NumberFactor</a></div><div class="ttdeci">const C_FLOAT64 &amp; getQuantity2NumberFactor() const </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l02354">CModel.cpp:2354</a></div></div>
<div class="ttc" id="CCopasiMessage_8h_html_ad39689ede4b80c944660201e94c52705"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#ad39689ede4b80c944660201e94c52705">Message</a></div><div class="ttdeci">struct MESSAGES Message</div></div>
<div class="ttc" id="classSBMLImporter_html_af39d5f3762cee43875daadd002af6f0e"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#af39d5f3762cee43875daadd002af6f0e">SBMLImporter::mIncompleteModel</a></div><div class="ttdeci">bool mIncompleteModel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d1a/SBMLImporter_8h_source.html#l00057">SBMLImporter.h:57</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa8751c35af95ea9346908d9835a1b0570">CModelEntity::FIXED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00055">CModelValue.h:55</a></div></div>
<div class="ttc" id="classCModel_html_a7d405db8dc8120b942aa0ec1e80db399"><div class="ttname"><a href="../../d4/d04/classCModel.html#a7d405db8dc8120b942aa0ec1e80db399">CModel::getCompartments</a></div><div class="ttdeci">CCopasiVectorNS&lt; CCompartment &gt; &amp; getCompartments()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01145">CModel.cpp:1145</a></div></div>
<div class="ttc" id="classCCopasiMessage_html_a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html#a2ea1ed32494ff5c8d84353efcec7a5e4a26a213bf509c2f6ee21982b4f7a18505">CCopasiMessage::ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00092">CCopasiMessage.h:92</a></div></div>
<div class="ttc" id="classCCopasiMessage_html"><div class="ttname"><a href="../../d2/df0/classCCopasiMessage.html">CCopasiMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00078">CCopasiMessage.h:78</a></div></div>
<div class="ttc" id="classCCopasiRootContainer_html_acfd634e031d3fb4358b24bfcdd26830e"><div class="ttname"><a href="../../d3/db1/classCCopasiRootContainer.html#acfd634e031d3fb4358b24bfcdd26830e">CCopasiRootContainer::getKeyFactory</a></div><div class="ttdeci">static CKeyFactory * getKeyFactory()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4b/CCopasiRootContainer_8cpp_source.html#l00163">CCopasiRootContainer.cpp:163</a></div></div>
<div class="ttc" id="classCModel_html_a6e8dde0dfb5046e823d44f4625f08221"><div class="ttname"><a href="../../d4/d04/classCModel.html#a6e8dde0dfb5046e823d44f4625f08221">CModel::compileIfNecessary</a></div><div class="ttdeci">bool compileIfNecessary(CProcessReport *pProcessReport)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l00612">CModel.cpp:612</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aab0a74c011c2515f5eb7b06d4be05fe22"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aab0a74c011c2515f5eb7b06d4be05fe22">CModelEntity::REACTIONS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00057">CModelValue.h:57</a></div></div>
<div class="ttc" id="classCModel_html_ad9a3dc1905f1f38f689f728b829f285d"><div class="ttname"><a href="../../d4/d04/classCModel.html#ad9a3dc1905f1f38f689f728b829f285d">CModel::getReactions</a></div><div class="ttdeci">CCopasiVectorNS&lt; CReaction &gt; &amp; getReactions()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l01039">CModel.cpp:1039</a></div></div>
<div class="ttc" id="classCModelEntity_html_a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3"><div class="ttname"><a href="../../d0/da0/classCModelEntity.html#a86cb8e66e255d66db258324064efc78aa3c62c1c3a449e106a5f1eb2f4ff01ec3">CModelEntity::ODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da3/CModelValue_8h_source.html#l00060">CModelValue.h:60</a></div></div>
<div class="ttc" id="classCModel_html_ac09203e0a20af906c4a29861b7cba2f0"><div class="ttname"><a href="../../d4/d04/classCModel.html#ac09203e0a20af906c4a29861b7cba2f0">CModel::buildInitialRefreshSequence</a></div><div class="ttdeci">std::vector&lt; Refresh * &gt; buildInitialRefreshSequence(std::set&lt; const CCopasiObject * &gt; &amp;changedObjects)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/CModel_8cpp_source.html#l04164">CModel.cpp:4164</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9e1e81619841ec18ca458b1637e2601c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> * SBMLImporter::variables2objects </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a> *&#160;</td>
          <td class="paramname"><em>pOrigNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>replacementMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html#l06005">6005</a> of file <a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a>.</p>

<p>References <a class="el" href="../../d9/d9d/classCCopasiNode.html#a76b012dfe6d52644d19808875a71db4e">CCopasiNode&lt; _Data &gt;::addChild()</a>, <a class="el" href="../../d8/d28/classCEvaluationNodeObject.html#ac395d4a167d9c1848c3872ee94074d86af646af56f5c9953bce5ba78b399fee72">CEvaluationNodeObject::CN</a>, <a class="el" href="../../d8/d9f/classCEvaluationNode.html#a05880669bb4e43dab10462b75c6797ae">CEvaluationNode::create()</a>, <a class="el" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode&lt; _Data &gt;::getChild()</a>, <a class="el" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode&lt; _Data &gt;::getData()</a>, and <a class="el" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType()</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d44bd16667ac649b9186979da296734">createExpressionFromFunction()</a>.</p>
<div class="fragment"><div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;{</div>
<div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;  <span class="comment">// TODO CRITICAL We need to use a node iterator</span></div>
<div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;  <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pResultNode = NULL;</div>
<div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;</div>
<div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;  <span class="keywordflow">if</span> (dynamic_cast&lt;const CEvaluationNodeVariable*&gt;(pOrigNode))</div>
<div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;    {</div>
<div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;      std::map&lt;std::string , std::string&gt;::const_iterator pos = replacementMap.find(pOrigNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>());</div>
<div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;</div>
<div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;      <span class="keywordflow">if</span> (pos == replacementMap.end()) <a class="code" href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a>();</div>
<div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;</div>
<div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;      pResultNode = <span class="keyword">new</span> <a class="code" href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a>(<a class="code" href="../../d8/d28/classCEvaluationNodeObject.html#ac395d4a167d9c1848c3872ee94074d86af646af56f5c9953bce5ba78b399fee72">CEvaluationNodeObject::CN</a>, <span class="stringliteral">&quot;&lt;&quot;</span> + pos-&gt;second + <span class="stringliteral">&quot;&gt;&quot;</span>);</div>
<div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;    }</div>
<div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;    {</div>
<div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;      pResultNode = <a class="code" href="../../d8/d9f/classCEvaluationNode.html#a05880669bb4e43dab10462b75c6797ae">CEvaluationNode::create</a>(pOrigNode-&gt;<a class="code" href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">getType</a>(), pOrigNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">getData</a>());</div>
<div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>* pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pOrigNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">getChild</a>());</div>
<div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;</div>
<div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;      <span class="keywordflow">while</span> (pChildNode)</div>
<div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;        {</div>
<div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;          pResultNode-&gt;<a class="code" href="../../d9/d9d/classCCopasiNode.html#a76b012dfe6d52644d19808875a71db4e">addChild</a>(this-&gt;<a class="code" href="../../d7/d6d/classSBMLImporter.html#a9e1e81619841ec18ca458b1637e2601c">variables2objects</a>(pChildNode, replacementMap));</div>
<div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;          pChildNode = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a>*<span class="keyword">&gt;</span>(pChildNode-&gt;getSibling());</div>
<div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;        }</div>
<div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;    }</div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;</div>
<div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;  <span class="keywordflow">return</span> pResultNode;</div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;}</div>
<div class="ttc" id="CCopasiMessage_8h_html_a1e835c01335d6f956a78adf106ed1b15"><div class="ttname"><a href="../../d9/d2d/CCopasiMessage_8h.html#a1e835c01335d6f956a78adf106ed1b15">fatalError</a></div><div class="ttdeci">#define fatalError()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2d/CCopasiMessage_8h_source.html#l00074">CCopasiMessage.h:74</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_ae24b55d848d78cec0a359fd199c76562"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#ae24b55d848d78cec0a359fd199c76562">CEvaluationNode::getType</a></div><div class="ttdeci">const Type &amp; getType() const </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00357">CEvaluationNode.cpp:357</a></div></div>
<div class="ttc" id="classCEvaluationNode_html_a05880669bb4e43dab10462b75c6797ae"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html#a05880669bb4e43dab10462b75c6797ae">CEvaluationNode::create</a></div><div class="ttdeci">static CEvaluationNode * create(const Type &amp;type, const Data &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3d/CEvaluationNode_8cpp_source.html#l00037">CEvaluationNode.cpp:37</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html_ac395d4a167d9c1848c3872ee94074d86af646af56f5c9953bce5ba78b399fee72"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html#ac395d4a167d9c1848c3872ee94074d86af646af56f5c9953bce5ba78b399fee72">CEvaluationNodeObject::CN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00044">CEvaluationNodeObject.h:44</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a76b012dfe6d52644d19808875a71db4e"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a76b012dfe6d52644d19808875a71db4e">CCopasiNode::addChild</a></div><div class="ttdeci">virtual bool addChild(CCopasiNode&lt; Data &gt; *pChild, CCopasiNode&lt; Data &gt; *pAfter=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00156">CCopasiNode.h:156</a></div></div>
<div class="ttc" id="classSBMLImporter_html_a9e1e81619841ec18ca458b1637e2601c"><div class="ttname"><a href="../../d7/d6d/classSBMLImporter.html#a9e1e81619841ec18ca458b1637e2601c">SBMLImporter::variables2objects</a></div><div class="ttdeci">CEvaluationNode * variables2objects(const CEvaluationNode *pOrigNode, const std::map&lt; std::string, std::string &gt; &amp;replacementMap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/SBMLImporter_8cpp_source.html#l06005">SBMLImporter.cpp:6005</a></div></div>
<div class="ttc" id="classCEvaluationNode_html"><div class="ttname"><a href="../../d8/d9f/classCEvaluationNode.html">CEvaluationNode</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/CEvaluationNode_8h_source.html#l00033">CEvaluationNode.h:33</a></div></div>
<div class="ttc" id="classCCopasiNode_html_a761f04c57a75e99a63ee0700c76fdafe"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#a761f04c57a75e99a63ee0700c76fdafe">CCopasiNode::getData</a></div><div class="ttdeci">virtual const Data &amp; getData() const </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00118">CCopasiNode.h:118</a></div></div>
<div class="ttc" id="classCEvaluationNodeObject_html"><div class="ttname"><a href="../../d8/d28/classCEvaluationNodeObject.html">CEvaluationNodeObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d59/CEvaluationNodeObject_8h_source.html#l00034">CEvaluationNodeObject.h:34</a></div></div>
<div class="ttc" id="classCCopasiNode_html_acad859fb98cfa7f9d328a1cf1ee57023"><div class="ttname"><a href="../../d9/d9d/classCCopasiNode.html#acad859fb98cfa7f9d328a1cf1ee57023">CCopasiNode::getChild</a></div><div class="ttdeci">CCopasiNode&lt; Data &gt; * getChild()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d24/CCopasiNode_8h_source.html#l00210">CCopasiNode.h:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="af3884484e51df06669ba5bc4fc77c07c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d9a/classCFunctionDB.html">CFunctionDB</a>* SBMLImporter::functionDB</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00056">56</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a544798333f64b9a371d9add67076172d">createCFunctionFromFunctionDefinition()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a76e38c93eb85a4d0cf0b188674ac6ff3">findCorrespondingFunction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#adaced01dad763bc9aabccdd95f818ae8">isConstantFlux()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a808e13eae7937c4ed64ce989776bcd42">restoreFunctionDB()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>.</p>

</div>
</div>
<a class="anchor" id="a48bbb0ce9d9de02aa2d3d35147ca5b0f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mAssignmentToSpeciesReferenceFound</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00062">62</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>.</p>

</div>
</div>
<a class="anchor" id="a057bc71f45b8f39fa15355f653163842"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mAvogadroCreated</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00084">84</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a851212f9fbd299a9a2deaadf2d7a5eb1">createHasOnlySubstanceUnitFactor()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>.</p>

</div>
</div>
<a class="anchor" id="ac4bdf302a8047d3398d6e6c796f3508d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mAvogadroSet</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00091">91</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f40d8fba618f0e960f83849b93f357d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mDelayFound</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00082">82</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>.</p>

</div>
</div>
<a class="anchor" id="a39b4cb542ae7593d545434fdcc03573e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::string&gt; SBMLImporter::mDelayNodeMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00088">88</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes()</a>.</p>

</div>
</div>
<a class="anchor" id="a09fb60445d24cc1bd582e23869cfaee1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; SBMLImporter::mDivisionByCompartmentReactions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00071">71</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>

</div>
</div>
<a class="anchor" id="a8eb1281de56a2232df925ba8de420412"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; SBMLImporter::mExplicitelyTimeDependentFunctionDefinitions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00079">79</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8635efa2b753c28b33f29f8f44b12161">createCFunctionFromFunctionTree()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a30f60e2327471fd72cb0b6445e274b38">replaceTimeDependentFunctionCalls()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a15d24b615b23b00a505d720cd48917c7">replaceTimeNodesInFunctionDefinition()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d029d1a08dc8f22dba1eedc57b036e3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; SBMLImporter::mFastReactions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00077">77</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>.</p>

</div>
</div>
<a class="anchor" id="a8dbcde81bbd9c319d5e2500756c15ce4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::string&gt; SBMLImporter::mFunctionNameMapping</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00070">70</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#ad01e17c0afbe5350a9c4474dadc0d168">importFunctionDefinitions()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a556118a81345202b24dcac66c291532b">replaceCallNodeNames()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a6daed5b9603fff0c6e698210512401"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t SBMLImporter::mhImportStep</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00074">74</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>.</p>

</div>
</div>
<a class="anchor" id="a43ba9124187b089d5fb4122e8d9d7be2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; SBMLImporter::mIgnoredParameterUnits</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00080">80</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter()</a>.</p>

</div>
</div>
<a class="anchor" id="acf0033487d629c27d4f133ac8ded9c02"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;unsigned int&gt; SBMLImporter::mIgnoredSBMLMessages</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00054">54</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>.</p>

</div>
</div>
<a class="anchor" id="a4588fba30554cfe8dbe394a6ad6685eb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mImportCOPASIMIRIAM</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00085">85</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a86d7db236b41c28aaa476fb09f67678b">getImportCOPASIMIRIAM()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aab2342964defac3d15b32eed20211e13">importMIRIAM()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#ad5f23358553e48562b7385abe9785bf7">setImportCOPASIMIRIAM()</a>.</p>

</div>
</div>
<a class="anchor" id="a9e83963c608041887b5d5e292be033c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a> SBMLImporter::mImportStep</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00073">73</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>.</p>

</div>
</div>
<a class="anchor" id="af39d5f3762cee43875daadd002af6f0e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mIncompleteModel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00057">57</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a50b1ef1543256b1b2e0ae69c7f1ff7c6">setInitialValues()</a>.</p>

</div>
</div>
<a class="anchor" id="a102e853b7eef2af536188246c8e2e724"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::string&gt; SBMLImporter::mKnownCustomUserDefinedFunctions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00092">92</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a544798333f64b9a371d9add67076172d">createCFunctionFromFunctionDefinition()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ad01e17c0afbe5350a9c4474dadc0d168">importFunctionDefinitions()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a556118a81345202b24dcac66c291532b">replaceCallNodeNames()</a>.</p>

</div>
</div>
<a class="anchor" id="ace9bd25198bfe11a1838f44fac3b1f3b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::string&gt; SBMLImporter::mKnownInitalValues</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00093">93</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames()</a>.</p>

</div>
</div>
<a class="anchor" id="aa2ceec377ae743892d56b522adbce41e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int SBMLImporter::mLevel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00063">63</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6d9048bf3ddc66ce0304345a54f6fa2f">checkRuleMathConsistency()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a879076815531affcbd0768f405f76475">createCCompartmentFromCompartment()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6e5e86bfa4b63886caa4daf1800a7abd">createCMetabFromSpecies()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8595689dd63fec1e462ee49fd16ea333">createCModelValueFromParameter()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6a5f472d8d3c86bee75ca3ae677877c3">importRule()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a3bf3c7539fc012eb3ca782f0ca44e5a8">sbmlId2CopasiCN()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a50b1ef1543256b1b2e0ae69c7f1ff7c6">setInitialValues()</a>.</p>

</div>
</div>
<a class="anchor" id="a65cdc7be5200fff34240bcb2200fe558"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int SBMLImporter::mOriginalLevel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00064">64</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6a5f472d8d3c86bee75ca3ae677877c3">importRule()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>.</p>

</div>
</div>
<a class="anchor" id="abc1b2ec95e8d7fa93910e094e948cb2f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d04/classCModel.html">CModel</a>* SBMLImporter::mpCopasiModel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00069">69</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d00c07d4d501255fa18951e949461b2">applyStoichiometricExpressions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6d9048bf3ddc66ce0304345a54f6fa2f">checkRuleMathConsistency()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a851212f9fbd299a9a2deaadf2d7a5eb1">createHasOnlySubstanceUnitFactor()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6e09213163faf2321292aa2f5b48f735">deleteCopasiModel()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a42cbb6f094224d7ec795eb172e40ab57">doMapping()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aca53cdde28ce5bb980ece4371c055fc8">find_local_parameters_in_delay()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a3eab269f4577f39f76b021c4e3f75b37">removeUnusedFunctions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#afa0fbf5c970cdfc26118c33a921caa5d">renameMassActionParameters()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#af175213378137da1684580b794a7cd13">replaceTimeAndAvogadroNodeNames()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac31001c46406e6c9900dfee120afb0a5">setCorrectUsage()</a>.</p>

</div>
</div>
<a class="anchor" id="a2aa8c57db3550fc84175ad38f1f3661e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d18/classCCopasiDataModel.html">CCopasiDataModel</a>* SBMLImporter::mpDataModel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00068">68</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d00c07d4d501255fa18951e949461b2">applyStoichiometricExpressions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a42cbb6f094224d7ec795eb172e40ab57">doMapping()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#afa092dea2bdae901c5cbf41e7c4c7dd1">isMassActionExpression()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#afa0fbf5c970cdfc26118c33a921caa5d">renameMassActionParameters()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac31001c46406e6c9900dfee120afb0a5">setCorrectUsage()</a>.</p>

</div>
</div>
<a class="anchor" id="a32b10e0dc03fc5bbf7b4842b0d314ff6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/da5/classCProcessReport.html">CProcessReport</a>* SBMLImporter::mpImportHandler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00072">72</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8ec2db84bd14fc7d2842a0463b481e0f">getImportHandlerAddr()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ac0d4d75e9f6785597142a2bce5131499">importEvents()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a3eab269f4577f39f76b021c4e3f75b37">removeUnusedFunctions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ab7c3f20a666286ea61e4854c8f86f3f2">setImportHandler()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a50b1ef1543256b1b2e0ae69c7f1ff7c6">setInitialValues()</a>.</p>

</div>
</div>
<a class="anchor" id="a273943602d6059106e5d0ef3dd3e6e45"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;const Parameter*&gt; SBMLImporter::mPotentialAvogadroNumbers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00083">83</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a851212f9fbd299a9a2deaadf2d7a5eb1">createHasOnlySubstanceUnitFactor()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0e283899bb37b21959fa43ebe792588d">findAvogadroConstant()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#aaaae9a79b256a2015377b6fd36613deb">replaceAmountReferences()</a>.</p>

</div>
</div>
<a class="anchor" id="a8728f6d9cdf831a37754c20bb9353a04"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; SBMLImporter::mReactionsWithReplacedLocalParameters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00078">78</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>.</p>

</div>
</div>
<a class="anchor" id="a8ff64c7fedb1863cac4572f246ca65f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;const ASTNode*, <a class="el" href="../../d6/d8d/classCChemEqElement.html">CChemEqElement</a>* &gt; SBMLImporter::mStoichiometricExpressionMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00081">81</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7d00c07d4d501255fa18951e949461b2">applyStoichiometricExpressions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aee0459aaff9aa4dda4852bc5d61fad2c">importInitialAssignments()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6a5f472d8d3c86bee75ca3ae677877c3">importRule()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d0a2880f878659d6a0fc2fe0cc15610"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;Species*, Compartment*&gt; SBMLImporter::mSubstanceOnlySpecies</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00076">76</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6e5e86bfa4b63886caa4daf1800a7abd">createCMetabFromSpecies()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a632c364034d1112fdc3ed7e05dfd157c">isMultipliedByVolume()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a8a3910a5ef44cb9a35f36fc963002ed4">multiplySubstanceOnlySpeciesByVolume()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aaaae9a79b256a2015377b6fd36613deb">replaceAmountReferences()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#ada6a4711ac017aa676ab4be88291a15b">replaceObjectNames()</a>.</p>

</div>
</div>
<a class="anchor" id="a76924558eafc00f4f3e01d19bd73577b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="../../dc/df8/copasi_8h.html#a9e77742fb2ec39ea4ec3f3fbe6758c2d">C_INT32</a> SBMLImporter::mTotalSteps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00075">75</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>.</p>

</div>
</div>
<a class="anchor" id="a8da36a9a8ae299a7ea5d4ac68382bb1e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mUnitOnNumberFound</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00061">61</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>.</p>

</div>
</div>
<a class="anchor" id="ae215a7b25a8529b85a217e8bd0e006f0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mUnsupportedAssignmentRuleFound</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00060">60</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>.</p>

</div>
</div>
<a class="anchor" id="a9dd94e991869614f42fc48347372e15c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mUnsupportedRateRuleFound</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00059">59</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>.</p>

</div>
</div>
<a class="anchor" id="a0d1d70d874673527b508b3e8dcfed729"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mUnsupportedRuleFound</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00058">58</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#ada0c2024af8f12fbef9c77ad4587fd68">importSBMLRule()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>.</p>

</div>
</div>
<a class="anchor" id="a64e5323f84c8730e7c120e8e9a965d13"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; SBMLImporter::mUsedFunctions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00067">67</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a3eab269f4577f39f76b021c4e3f75b37">removeUnusedFunctions()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a556118a81345202b24dcac66c291532b">replaceCallNodeNames()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a808e13eae7937c4ed64ce989776bcd42">restoreFunctionDB()</a>.</p>

</div>
</div>
<a class="anchor" id="a8f78f336ef119556c847afdb8e86674d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; SBMLImporter::mUsedSBMLIds</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00089">89</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aca53cdde28ce5bb980ece4371c055fc8">find_local_parameters_in_delay()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a7ac29e15dc0e3a2795ec3b1a13e496fe">replace_delay_nodes()</a>.</p>

</div>
</div>
<a class="anchor" id="a19097f961c78f8d0383999d957b1b32f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SBMLImporter::mUsedSBMLIdsPopulated</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00090">90</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0bdaab30af2fb7e2bc5e637a2b40134a">preprocessNode()</a>.</p>

</div>
</div>
<a class="anchor" id="a7d741ae7e3799fdc819e689a3dafad86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int SBMLImporter::mVersion</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00065">65</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#a6d9048bf3ddc66ce0304345a54f6fa2f">checkRuleMathConsistency()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#aa251ce6bf2a3d52d2971c1ad7b0d90ec">importEvent()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#adf9578513e1cce2a924a46a0e93c5dda">parseSBML()</a>.</p>

</div>
</div>
<a class="anchor" id="a779466459366c517247fc2598d5f56e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="../../d9/d86/classCFunction.html">CFunction</a>*, std::string&gt; SBMLImporter::sbmlIdMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00066">66</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a808e13eae7937c4ed64ce989776bcd42">restoreFunctionDB()</a>.</p>

</div>
</div>
<a class="anchor" id="a2919a190a2cb8b7b5eb501af5c6f393e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, <a class="el" href="../../dc/d44/classCMetab.html">CMetab</a>*&gt; SBMLImporter::speciesMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html#l00055">55</a> of file <a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a>.</p>

<p>Referenced by <a class="el" href="../../d7/d6d/classSBMLImporter.html#aedc9fc3ca40ac54787698cd2370a06dc">createCModelFromSBMLDocument()</a>, <a class="el" href="../../d7/d6d/classSBMLImporter.html#a4c76a3dbe6ad1f874f6d24b6bb7fb8f9">createCReactionFromReaction()</a>, and <a class="el" href="../../d7/d6d/classSBMLImporter.html#a0da5c22953d50d507f9f0ff00f7b9837">SBMLImporter()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d5/d1a/SBMLImporter_8h_source.html">SBMLImporter.h</a></li>
<li><a class="el" href="../../df/dfd/SBMLImporter_8cpp_source.html">SBMLImporter.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 2 2015 14:52:10 for COPASI API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
